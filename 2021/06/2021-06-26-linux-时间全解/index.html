<!DOCTYPE html>
<html lang="zh">
  <head>
    <title>
        Linux æ—¶é—´å…¨è§£ - Stan&#39;s blog - Explore the world
      </title>
        <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    
    <meta name="theme-color" content="#000000" />
    
    <meta http-equiv="window-target" content="_top" />
    
    
    <meta name="description" content="ğŸ‘Œ 2021-06-26 Linux æ—¶é—´å…¨è§£ FileInfo Filename - Linux æ—¶é—´å…¨è§£ Version - v1.1.2107ï¼ˆ2021/06/26 ~ 2021/07/01ï¼‰ Author - nuo standuke Email - shadowdoker@gmail.com DescriptionKey - Linux time solution ç‰ˆæœ¬ä¿®è®¢è®°å½•ï¼š v1" />
    <meta name="generator" content="Hugo 0.82.1 with theme pure" />
    <title>Linux æ—¶é—´å…¨è§£ - Stan&#39;s blog - Explore the world</title>
    
    
    <link rel="stylesheet" href="https://blog.standuke.top/css/style.min.6f90022f237877ae2514ec95f3c9cca9f2314394f20800ca037a497e20053122.css">
    
    <link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/9.15.10/styles/github.min.css" async>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css" async>
    <meta property="og:title" content="Linux æ—¶é—´å…¨è§£" />
<meta property="og:description" content="ğŸ‘Œ 2021-06-26 Linux æ—¶é—´å…¨è§£ FileInfo Filename - Linux æ—¶é—´å…¨è§£ Version - v1.1.2107ï¼ˆ2021/06/26 ~ 2021/07/01ï¼‰ Author - nuo standuke Email - shadowdoker@gmail.com DescriptionKey - Linux time solution ç‰ˆæœ¬ä¿®è®¢è®°å½•ï¼š v1" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.standuke.top/2021/06/2021-06-26-linux-%E6%97%B6%E9%97%B4%E5%85%A8%E8%A7%A3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-26T11:11:31&#43;08:00" />
<meta property="article:modified_time" content="2021-06-26T11:11:31&#43;08:00" />

<meta itemprop="name" content="Linux æ—¶é—´å…¨è§£">
<meta itemprop="description" content="ğŸ‘Œ 2021-06-26 Linux æ—¶é—´å…¨è§£ FileInfo Filename - Linux æ—¶é—´å…¨è§£ Version - v1.1.2107ï¼ˆ2021/06/26 ~ 2021/07/01ï¼‰ Author - nuo standuke Email - shadowdoker@gmail.com DescriptionKey - Linux time solution ç‰ˆæœ¬ä¿®è®¢è®°å½•ï¼š v1"><meta itemprop="datePublished" content="2021-06-26T11:11:31&#43;08:00" />
<meta itemprop="dateModified" content="2021-06-26T11:11:31&#43;08:00" />
<meta itemprop="wordCount" content="3446">
<meta itemprop="keywords" content="Linux,CentOS," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Linux æ—¶é—´å…¨è§£"/>
<meta name="twitter:description" content="ğŸ‘Œ 2021-06-26 Linux æ—¶é—´å…¨è§£ FileInfo Filename - Linux æ—¶é—´å…¨è§£ Version - v1.1.2107ï¼ˆ2021/06/26 ~ 2021/07/01ï¼‰ Author - nuo standuke Email - shadowdoker@gmail.com DescriptionKey - Linux time solution ç‰ˆæœ¬ä¿®è®¢è®°å½•ï¼š v1"/>

    <!--[if lte IE 9]>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
      <![endif]-->

    <!--[if lt IE 9]>
        <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
      <![endif]-->
  </head>

  
  

  <body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader">
    <div class="slimContent">
      <div class="navbar-header">
        <div class="profile-block text-center">
          <a id="avatar" href="https://www.standuke.top" target="_blank">
            <img class="img-circle img-rotate" src="https://blog.standuke.top/avatar.png" width="200" height="200">
          </a>
          <h2 id="name" class="hidden-xs hidden-sm">Standuke</h2>
          <h3 id="title" class="hidden-xs hidden-sm hidden-md">Yunshen Technology Co., Ltd. - SRE Engineer</h3>
          <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i>Hangzhou, China</small>
        </div><div class="search" id="search-form-wrap">
    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="æœç´¢" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i
                        class="icon icon-search"></i></button>
            </span>
        </div>
        <div class="ins-search">
            <div class="ins-search-mask"></div>
            <div class="ins-search-container">
                <div class="ins-input-wrapper">
                    <input type="text" class="ins-search-input" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..."
                        x-webkit-speech />
                    <button type="button" class="close ins-close ins-selectable" data-dismiss="modal"
                        aria-label="Close"><span aria-hidden="true">Ã—</span></button>
                </div>
                <div class="ins-section-wrapper">
                    <div class="ins-section-container"></div>
                </div>
            </div>
        </div>
    </form>
</div>
        <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
        <ul class="nav navbar-nav main-nav">
            <li class="menu-item menu-item-home">
                <a href="/">
                    <i class="icon icon-home-fill"></i>
                  <span class="menu-title">Home</span>
                </a>
            </li>
            <li class="menu-item menu-item-archives">
                <a href="/posts/">
                    <i class="icon icon-archives-fill"></i>
                  <span class="menu-title">Archives</span>
                </a>
            </li>
            <li class="menu-item menu-item-categories">
                <a href="/categories/">
                    <i class="icon icon-folder"></i>
                  <span class="menu-title">Categories</span>
                </a>
            </li>
            <li class="menu-item menu-item-tags">
                <a href="/tags/">
                    <i class="icon icon-tags"></i>
                  <span class="menu-title">Tags</span>
                </a>
            </li>
            <li class="menu-item menu-item-about">
                <a href="/about/">
                    <i class="icon icon-cup-fill"></i>
                  <span class="menu-title">About</span>
                </a>
            </li>
            <li class="menu-item menu-item-linkedin">
                <a href="https://linkedin.com/in/doc-s-44435ab2">
                    <i class="icon icon-linkedin"></i>
                  <span class="menu-title">Linkedin</span>
                </a>
            </li>
        </ul>
      </nav>
    </div>
  </header>

<aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">å…¬å‘Š</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content"><p>ç«™ç‚¹è¿ç§»åˆæœŸï¼Œé…ç½®å‚æ•°è°ƒæ•´ï¼ŒåŒæ—¶æ¶‰åŠåˆ°çš„æ–‡ç« è¾ƒå¤šï¼Œé¡µé¢æµè§ˆå¯èƒ½ä¼šå‡ºç°é—ªæ–­ã€‚å› ä¸ºæ˜¯ä¸šä½™æ—¶é—´è¿ç§»åšå®¢ï¼Œä» 5 æœˆå¼€å§‹ä¼°è®¡è¦åˆ°å¹´åº•æ‰èƒ½æŠŠå‰æœŸçš„æ–‡ç« æ•´ä½“è¿ç§»è¿‡æ¥ã€‚åšå®¢è¯„è®ºé‡‡ç”¨ Disqus éœ€è¦ç§‘å­¦æ‰èƒ½çœ‹åˆ°ï¼Œå¦‚æœæœ‰ä»»ä½•æ„è§å»ºè®®ä¹Ÿå¯ç›´æ¥è”ç³»æˆ‘ Telegramã€‚</p>
            </div>
        </div>
    </div>
</div>

      <div class="widget">
    <h3 class="widget-title"> æ ‡ç­¾</h3>
    <div id="tag-cloud-list" class="widget-body">
            
            
            <a href="https://blog.standuke.top/tags/aliyun/" class="tag-list-link" rel="1">aliyun<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/bigdata/" class="tag-list-link" rel="1">bigdata<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/cdh/" class="tag-list-link" rel="1">cdh<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/centos/" class="tag-list-link" rel="10">centos<span
               class="tag-list-count">10</span></a>
            
            
            <a href="https://blog.standuke.top/tags/cloudera/" class="tag-list-link" rel="1">cloudera<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/docker/" class="tag-list-link" rel="1">docker<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/eip/" class="tag-list-link" rel="1">eip<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/esxi/" class="tag-list-link" rel="1">esxi<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/frp/" class="tag-list-link" rel="1">frp<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/kvm/" class="tag-list-link" rel="1">kvm<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/linux/" class="tag-list-link" rel="7">linux<span
               class="tag-list-count">7</span></a>
            
            
            <a href="https://blog.standuke.top/tags/linux-bridge/" class="tag-list-link" rel="1">linux-bridge<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/macos/" class="tag-list-link" rel="2">macos<span
               class="tag-list-count">2</span></a>
            
            
            <a href="https://blog.standuke.top/tags/markdown/" class="tag-list-link" rel="1">markdown<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/network/" class="tag-list-link" rel="1">network<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/openstack/" class="tag-list-link" rel="6">openstack<span
               class="tag-list-count">6</span></a>
            
            
            <a href="https://blog.standuke.top/tags/pxe/" class="tag-list-link" rel="1">pxe<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/qcow2/" class="tag-list-link" rel="1">qcow2<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/system/" class="tag-list-link" rel="1">system<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/time-machine/" class="tag-list-link" rel="1">time-machine<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/tools/" class="tag-list-link" rel="1">tools<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/vcenter/" class="tag-list-link" rel="1">vcenter<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/virtualization/" class="tag-list-link" rel="9">virtualization<span
               class="tag-list-count">9</span></a>
            
            
            <a href="https://blog.standuke.top/tags/vsphere/" class="tag-list-link" rel="1">vsphere<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/windows/" class="tag-list-link" rel="4">windows<span
               class="tag-list-count">4</span></a>
            
    </div>
<script>
document.onreadystatechange = () => {
  if (document.readyState === 'complete') {
    tagCloud('#tag-cloud-list a',  8 ,  20 );
  }
};

function tagCloud(where, min, max) {
  let iMax = 0;
  let iMin = 0;
  $(where).each(function() {
    let weight = Number($(this).attr("rel"));
    if(iMax < weight) iMax = weight;
    if(iMin > weight || iMin == 0) iMin = weight;
  });
  let step = (max - min)/(iMax - iMin);
  $(where).each(function() {
    let weight = $(this).attr("rel") - iMin;
    $(this).css({"font-size": min + (weight * step) + 'px'});
  });
};
</script>
</div>

      <div class="widget">
    <h3 class="widget-title"> åˆ†ç±»</h3>
    <div class="widget-body">
        <ul class="category-list">
            <li class="category-list-item"><a href="https://blog.standuke.top/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/" class="category-list-link">ä½¿ç”¨æ•™ç¨‹</a><span class="category-list-count">3</span></li>
            <li class="category-list-item"><a href="https://blog.standuke.top/categories/%E5%86%85%E9%83%A8%E5%88%86%E4%BA%AB/" class="category-list-link">å†…éƒ¨åˆ†äº«</a><span class="category-list-count">3</span></li>
            <li class="category-list-item"><a href="https://blog.standuke.top/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E6%9E%90/" class="category-list-link">æŠ€æœ¯åˆ†æ</a><span class="category-list-count">1</span></li>
            <li class="category-list-item"><a href="https://blog.standuke.top/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="category-list-link">æ“ä½œç³»ç»Ÿ</a><span class="category-list-count">9</span></li>
            <li class="category-list-item"><a href="https://blog.standuke.top/categories/%E9%83%A8%E7%BD%B2%E6%95%99%E7%A8%8B/" class="category-list-link">éƒ¨ç½²æ•™ç¨‹</a><span class="category-list-count">10</span></li>
            <li class="category-list-item"><a href="https://blog.standuke.top/categories/%E9%9B%B6%E7%A2%8E%E5%B0%8F%E9%97%AE%E9%A2%98/" class="category-list-link">é›¶ç¢å°é—®é¢˜</a><span class="category-list-count">4</span></li>
        </ul>
    </div>
</div>
      
<div class="widget">
    <h3 class="widget-title">æœ€æ–°æ–‡ç« </h3>
    <div class="widget-body">
        <ul class="recent-post-list list-unstyled no-thumbnail">
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://blog.standuke.top/2022/04/2022-04-06-ldap-over-tls/" class="title">LDAP over TLSã€ŒStartTLSã€</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2022-04-06 22:20:17 &#43;0800 CST" itemprop="datePublished">2022-04-06</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://blog.standuke.top/2022/03/2022-03-23-ldap-%E4%BC%81%E4%B8%9A%E9%83%A8%E7%BD%B2%E5%AE%9E%E6%88%98/" class="title">LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£…</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2022-03-23 21:58:34 &#43;0800 CST" itemprop="datePublished">2022-03-23</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://blog.standuke.top/2021/07/2021-07-06-linux-%E5%AE%9A%E6%97%B6%E5%8D%95%E6%AC%A1%E5%8F%8A%E5%91%A8%E6%9C%9F%E4%BB%BB%E5%8A%A1/" class="title">Linux å®šæ—¶å•æ¬¡åŠå‘¨æœŸä»»åŠ¡</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2021-07-06 17:20:34 &#43;0800 CST" itemprop="datePublished">2021-07-06</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://blog.standuke.top/2021/06/2021-06-26-linux-%E6%97%B6%E9%97%B4%E5%85%A8%E8%A7%A3/" class="title">Linux æ—¶é—´å…¨è§£</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2021-06-26 11:11:31 &#43;0800 CST" itemprop="datePublished">2021-06-26</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://blog.standuke.top/2021/05/2021-05-19-%E9%98%BF%E9%87%8C%E4%BA%91%E4%B8%BB%E6%9C%BA-eip-%E8%87%B4%E4%BD%BF-ftp-%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5/" class="title">é˜¿é‡Œäº‘ä¸»æœº EIP è‡´ä½¿ FTP æ— æ³•è¿æ¥</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2021-05-19 21:08:48 &#43;0800 CST" itemprop="datePublished">2021-05-19</time>
                    </p>
                </div>
            </li>
        </ul>
    </div>
</div>
  </div>
</aside>

    
    
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <h4 class="toc-title">æ–‡ç« ç›®å½•</h4>
    <nav id="toc" class="js-toc toc">

    </nav>
  </div>
</aside>
<main class="main" role="main"><div class="content">
  <article id="-" class="article article-type-" itemscope
    itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      <h1 itemprop="name">
  <a
    class="article-title"
    href="/2021/06/2021-06-26-linux-%E6%97%B6%E9%97%B4%E5%85%A8%E8%A7%A3/"
    >Linux æ—¶é—´å…¨è§£</a
  >
</h1>

      <div class="article-meta">
        
<span class="article-date">
  <i class="icon icon-calendar-check"></i>&nbsp;
<a href="https://blog.standuke.top/2021/06/2021-06-26-linux-%E6%97%B6%E9%97%B4%E5%85%A8%E8%A7%A3/" class="article-date">
  <time datetime="2021-06-26 11:11:31 &#43;0800 CST" itemprop="datePublished">2021-06-26</time>
</a>
</span>
<span class="article-category">
  <i class="icon icon-folder"></i>&nbsp;
  <a class="article-category-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"> æ“ä½œç³»ç»Ÿ </a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>&nbsp;
    <a class="article-tag-link" href="/tags/linux/"> Linux </a>
    <a class="article-tag-link" href="/tags/centos/"> CentOS </a>
  </span>

	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill" aria-hidden="true"></i>
	    <span id="busuanzi_container_page_pv">
			<span id="busuanzi_value_page_pv">0</span>
		</span>
	</span>
        <span class="post-comment"><i class="icon icon-comment"></i>&nbsp;<a href="/2021/06/2021-06-26-linux-%E6%97%B6%E9%97%B4%E5%85%A8%E8%A7%A3/#comments"
            class="article-comment-link">è¯„è®º</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">å­—æ•°ç»Ÿè®¡: 3446å­—</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">é˜…è¯»æ—¶é•¿: 7åˆ† </span>
      </div>
    </div>
    <div class="article-entry marked-body js-toc-content" itemprop="articleBody">
      <h1 id="-2021-06-26-linux-æ—¶é—´å…¨è§£">ğŸ‘Œ 2021-06-26 Linux æ—¶é—´å…¨è§£</h1>
<blockquote>
<p><strong>FileInfo</strong>
Filename - Linux æ—¶é—´å…¨è§£
Version - v1.1.2107ï¼ˆ2021/06/26 ~ 2021/07/01ï¼‰
Author - nuo standuke
Email - <a href="mailto:shadowdoker@gmail.com">shadowdoker@gmail.com</a>
DescriptionKey - Linux time solution</p>
</blockquote>
<p><strong>ç‰ˆæœ¬ä¿®è®¢è®°å½•ï¼š</strong></p>
<p>v1.0.2106ï¼š2021-06-26ï¼šå»ºç«‹ Linux æ—¶é—´å…¨è§£æ–‡æ¡£ï¼Œä¿®è®¢äººï¼šnuo
v1.1.2107ï¼š2021-07-01ï¼šæ–°å¢ CentOS ä¸ Ubuntu æ—¶é—´åŒæ­¥ç›¸å…³åŒºåˆ«ï¼Œä¿®è®¢äººï¼šnuo</p>
<p>[TOC]</p>
<h2 id="ç®€ä»‹">ç®€ä»‹</h2>
<p>ä½œä¸ºä¸€åˆ‡çš†æ–‡ä»¶çš„ Linux æ“ä½œç³»ç»Ÿï¼Œæ—¥å¿—çš„è®°å½•ã€å®šæ—¶ä»»åŠ¡çš„æ‰§è¡Œï¼Œç”šè‡³äº›è®¸ç¨‹åºçš„é…ç½®ã€ŒMySQLã€ä¹Ÿæåº¦ä¾èµ–ç³»ç»Ÿæ—¶é—´ï¼Œæ•…ç³»ç»Ÿæ—¶é—´åœ¨æ“ä½œç³»ç»Ÿè¿è¡Œæ—¶å°¤ä¸ºé‡è¦ã€‚å’Œ Windows ä¸€æ ·ï¼ŒLinux ä¹Ÿåˆ†ä¸ºæœ¬åœ°æ—¶é—´ç”¨äºæ‰‹åŠ¨è®¾ç½®å’Œä½¿ç”¨ ntp æ–¹å¼è‡ªåŠ¨åŒæ­¥çš„è¿œç¨‹æ—¶é—´ã€‚</p>
<p>âš ï¸ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè€ƒè™‘åˆ°æ–‡ä»¶çš„ç”Ÿæˆä¹Ÿä¼šè·å–ç³»ç»Ÿæ—¶é—´ä½œä¸ºæ–‡ä»¶çš„æ—¶é—´æˆ³ï¼Œå»ºè®®åœ¨å®‰è£…æ“ä½œç³»ç»Ÿæ—¶å°±å°†ä¸»æ¿ä¸Šçš„ç¡¬ä»¶æ—¶é—´åŒæ­¥ï¼Œæˆ–è€…åœ¨å®‰è£…æ“ä½œç³»ç»Ÿæ—¶æ‰‹åŠ¨å°†æ—¶é—´æ ¡å‡†ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­å°†ä¼šæ¶‰åŠ CentOS å¦‚ä¸‹ä¸æ—¶é—´ç›¸å…³çš„å‘½ä»¤ä»¥åŠä¸æ—¶é—´ç›¸å…³çš„é…ç½®æ–‡ä»¶ã€‚åŒæ—¶ç¨æœ‰æåŠ Ubuntu å†…çš„å·®å¼‚åŠå…¶é…ç½®ã€‚</p>
<ul>
<li>timedatectl</li>
<li>date</li>
<li>chrony</li>
<li>ntp / ntpdate</li>
</ul>
<h3 id="ç›¸å…³åè¯ä»‹ç»">ç›¸å…³åè¯ä»‹ç»</h3>
<p>äº†è§£ç›¸å…³æ—¶é—´åè¯æœ‰åˆ©äºç†è§£åæœŸç›¸å…³æœ¯è¯­çš„è®²è§£ï¼Œæ­¤å¤„ä»¥ CentOS å†… <code>timedatectl</code> æ ‡å‡†è¾“å‡ºä½œä¸ºæ ·ä¾‹ã€‚</p>
<pre><code>  &gt;root ~
[vpc]# timedatectl
    Local time: äºŒ 2021-06-29 13:45:54 CST
    Universal time: äºŒ 2021-06-29 05:45:54 UTC
    RTC time: äºŒ 2021-06-29 05:45:54
    Time zone: Asia/Shanghai (CST, +0800)
    NTP enabled: yes
    NTP synchronized: yes
    RTC in local TZ: no
    DST active: n/a
</code></pre>
<blockquote>
<p><strong>UTC</strong> ã€ŒUniversal time: äºŒ 2021-06-29 05:45:54 UTCã€</p>
</blockquote>
<p>åè°ƒä¸–ç•Œæ—¶ã€ŒUTC - Coordinated Universal Timeã€ã€‚åœ°çƒåˆ†ä¸ºäºŒåå››æ—¶åŒºï¼Œæ¯ä¸ªæ—¶åŒºéƒ½æœ‰è‡ªå·±çš„å½“åœ°æ—¶é—´ã€‚åœ¨å›½é™…æ— çº¿ç”µé€šä¿¡åœºåˆï¼Œä¸ºäº†ç»Ÿä¸€èµ·è§ï¼Œä½¿ç”¨ä¸€ä¸ªç»Ÿä¸€çš„æ—¶é—´ï¼Œç§°ä¸ºåè°ƒä¸–ç•Œæ—¶ã€ŒUTC - Universal Time Coordinatedã€ã€‚</p>
<blockquote>
<p><strong>GMT</strong></p>
</blockquote>
<p>æ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ã€ŒGreenwich Mean Time Zoneã€ã€‚æŒ‡ä½äºè‹±å›½ä¼¦æ•¦éƒŠåŒºçš„çš‡å®¶æ ¼æ—å°¼æ²»å¤©æ–‡å°çš„æ ‡å‡†æ—¶é—´ï¼Œå› ä¸ºæœ¬åˆå­åˆçº¿è¢«å®šä¹‰åœ¨é€šè¿‡é‚£é‡Œçš„ç»çº¿ã€‚ã€ŒUTC ä¸ GMTæ—¶é—´åŸºæœ¬ç›¸åŒã€</p>
<blockquote>
<p><strong>CTS</strong> ã€ŒLocal time: äºŒ 2021-06-29 13:45:54 CSTã€</p>
</blockquote>
<p>ä¸­å›½æ ‡å‡†æ—¶é—´ã€ŒCST â€“ China Standard Timeã€ã€‚GMT + 8 = UTC + 8 = CST</p>
<blockquote>
<p><strong>DST</strong></p>
</blockquote>
<p>å¤ä»¤æ—¶ï¼Œéƒ¨åˆ†å›½å®¶ä½¿ç”¨ï¼Œåœ¨ä¸­å›½ä¸ä½¿ç”¨ã€‚æ‰€ä»¥åœ¨å›½å¤–æœåŠ¡å™¨é…ç½®ç³»ç»Ÿæ—¶é—´æ—¶éœ€è¦æ³¨æ„ã€‚</p>
<blockquote>
<p><strong>RTC ç¡¬ä»¶æ—¶é—´</strong> ã€ŒRTC time: äºŒ 2021-06-29 05:45:54ã€</p>
</blockquote>
<p>RTCã€ŒReal-Time Clockã€æˆ– CMOS / BIOS æ—¶é—´ï¼Œä¸€èˆ¬åœ¨ä¸»æ¿ä¸Šé ç”µæ± ä¾›ç”µï¼ŒæœåŠ¡å™¨æ–­ç”µåä¹Ÿä¼šç»§ç»­è¿è¡Œã€‚ä»…ä¿å­˜æ—¥æœŸæ—¶é—´æ•°å€¼ï¼Œæ— æ³•ä¿å­˜æ—¶åŒºå’Œå¤ä»¤æ—¶è®¾ç½®ã€‚</p>
<blockquote>
<p><strong>Local time ç³»ç»Ÿæ—¶é—´ / æœ¬åœ°æ—¶é—´</strong> ã€ŒLocal time: äºŒ 2021-06-29 13:45:54 CSTã€</p>
</blockquote>
<p>æœåŠ¡å™¨å¯åŠ¨æ—¶å¤åˆ¶ RTC æ—¶é—´ï¼Œä¹‹åç‹¬ç«‹è¿è¡Œï¼Œä¿å­˜äº†æ—¶é—´ã€æ—¶åŒºå’Œå¤ä»¤æ—¶è®¾ç½®ã€‚æ‰€ä»¥ä¸€èˆ¬æ¥è¯´ï¼Œæœ¬åœ°çš„ RTC æœ€å¥½ä¿å­˜ UTC æ—¶é—´ï¼Œç³»ç»Ÿæ—¶é—´ä¾ç…§æ“ä½œç³»ç»Ÿå†…é…ç½®è‡ªå·±è®¡ç®—æœ€ç»ˆçš„æ—¶é—´ã€‚</p>
<hr>
<ul>
<li>âš ï¸ ç¡¬ä»¶æ—¶é—´ã€ŒRTCã€ä¸ æœ¬åœ°æ—¶é—´ã€ŒLocal timeã€</li>
</ul>
<p>åœ¨ <code>timedatectl set-local-rtc yes</code> è®¾ç½®ä¸º yes æ—¶ï¼Œä¼šå‡ºç°è­¦å‘Šã€‚ã€Œè¿™ä¸ªåœ°æ–¹é„™è§†ä¸€ä¸‹ <strong>é˜¿é‡Œäº‘</strong>ï¼Œä¹Ÿç®—æ˜¯ä¸€ä¸ªå‘ï¼Œé˜¿é‡Œäº‘ä¸»æœºç¡¬ä»¶ã€RTCã€æ—¶é—´æ²¡æœ‰ä½¿ç”¨å›½é™…ä¸Šé€šç”¨çš„ UTC æ—¶é—´ï¼Œè€Œæ˜¯é‡‡ç”¨å½“åœ°æ—¶é—´â€¦â€¦ã€</p>
<pre><code># å‘Šè­¦å¦‚ä¸‹

Warning: The system is configured to read the RTC time in the local time zone.
        This mode can not be fully supported. It will create various problems
        with time zone changes and daylight saving time adjustments. The RTC
        time is never updated, it relies on external facilities to maintain it.
        If at all possible, use RTC in UTC by calling
        'timedatectl set-local-rtc 0'.
</code></pre>
<p>ä¾‹å¦‚å¦‚æœ RTC æ—¶é—´ä¸ç³»ç»Ÿæ—¶é—´ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆ MySQL åœ¨é‡å¯æˆ–è€…å…³é—­æ—¶å°±ä¼šæŠ¥é”™ <code>InnoDB: Waiting for page_cleaner to finish flushing of buffer pool</code>ï¼ŒåŸå› å°±æ˜¯ <strong>ç³»ç»Ÿæ—¶é—´ä¸mysqlç¼“å­˜çš„æ—¶é—´ä¸ä¸€è‡´</strong>ï¼Œè¿™æ—¶å°±éœ€è¦æŠŠç³»ç»Ÿæ—¶é—´æ”¹åœ¨ MySQL æ­£å¸¸è¿è¡Œçš„æ—¶é—´ä¹‹åã€‚å†å°† <code>timedatectl set-local-rtc no</code> è®¾ç½®ä¸º <code>no</code>ã€‚</p>
<p>æ‰€ä»¥åœ¨é…ç½®ä½¿ç”¨ <code>timedatectl</code> å»ä¿®æ”¹æ—¶é—´æ—¶ä¼šåŒæ—¶é…ç½®ç³»ç»Ÿæ—¶é—´ã€Œä¾‹å¦‚å‘½ä»¤ <code>date -s</code>ã€å’Œç¡¬ä»¶æ—¶é—´ã€Œä¾‹å¦‚å‘½ä»¤ <code>hwclock -w</code>ã€ï¼Œè€Œç¡¬ä»¶æ—¶é—´ RTC çš„å…·ä½“å€¼æ˜¯å¦å’Œç³»ç»Ÿæ—¶é—´ä¸€è‡´åˆ™ç”± <code>set-local-rtc</code> æ¥é…ç½®ã€‚</p>
<h3 id="æ—¶é—´é…ç½®å‘½ä»¤">æ—¶é—´é…ç½®å‘½ä»¤</h3>
<h4 id="timedatectl">timedatectl</h4>
<h5 id="ç®€ä»‹-1">ç®€ä»‹</h5>
<p>åœ¨åè¯ä»‹ç»éƒ¨åˆ†å·²ç»ç¨æœ‰æåŠ <code>timedatectl</code> å‘½ä»¤ï¼Œå…¶ä¸­çš„æ¦‚å¿µå¾ˆå…³é”®ï¼ŒåŠ¡å¿…è¦çœ‹ã€‚</p>
<p><code>timedatectl</code> æ˜¯ <code>systemd-timedated.service</code> ç³»ç»ŸæœåŠ¡çš„å‘½ä»¤è¡Œå®¢æˆ·ç«¯ï¼Œæ˜¯åœ¨ RHEL7 åŠ CentOS7 ä¸­æ–°å¢çš„ systemd çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºç³»ç»Ÿæ—¶é—´ç®¡ç†ã€‚åœ¨ CentOS 7 ç³»ç»Ÿä¸Šï¼Œå»ºè®®ä½¿ç”¨ <code>timedatectl</code> è€Œä¸æ˜¯ <code>date</code>ã€<code>hwclock</code> å‘½ä»¤æ¥è°ƒæ•´æ—¶é—´ã€‚åœ¨ Ubuntu ç³»ç»Ÿä¸Šï¼Œä¹Ÿé‡‡ç”¨ <code>timedatectl</code> æ¥ç®¡ç†æ—¶é—´ï¼Œä½†æ˜¯åœ¨ Ubuntu ç³»ç»Ÿä¸Šæ—¶é—´çš„ç®¡ç†æµç¨‹ç¨æœ‰ä¸åŒã€‚</p>
<p>åœ¨æœ€æ–°çš„ Ubuntu ç‰ˆæœ¬ä¸­ï¼Œtimedatectl æ›¿ä»£äº†è€æ—§çš„ ntpdateã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œtimedatectl åœ¨ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ä¼šç«‹åˆ»åŒæ­¥æ—¶é—´ï¼Œå¹¶åœ¨ç¨åç½‘ç»œè¿æ¥æ¿€æ´»åé€šè¿‡ socket å†æ¬¡æ£€æŸ¥ä¸€æ¬¡ã€‚å¦‚æœå·²å®‰è£…äº† ntpdate / ntpï¼Œtimedatectl ä¼šé€€è€Œè®©ä½ ä½¿ç”¨ä¹‹å‰çš„è®¾ç½®ã€‚è¿™æ ·ç¡®ä¿äº†ä¸¤ä¸ªæ—¶é—´åŒæ­¥æœåŠ¡ä¸ä¼šç›¸äº’å†²çªï¼ŒåŒæ—¶åœ¨ä½ å‡çº§çš„æ—¶å€™è¿˜ä¿ç•™åŸæœ¬çš„è¡Œä¸ºå’Œé…ç½®ã€‚ä½†è¿™ä¹Ÿæ„å‘³ç€ä»æ—§ç‰ˆæœ¬çš„å‘è¡Œç‰ˆå‡çº§æ—¶ntp/ntpdate ä»ä¼šå®‰è£…ï¼Œå› æ­¤ä¼šå¯¼è‡´æ–°çš„åŸºäº systemd çš„æ—¶é—´æœåŠ¡è¢«ç¦ç”¨ã€‚</p>
<p>åœ¨æœ€æ–°çš„ Ubuntu ç‰ˆæœ¬ä¸­ï¼Œtimesyncd æ›¿ä»£äº† ntpd çš„å®¢æˆ·ç«¯çš„éƒ¨åˆ†ã€‚é»˜è®¤æƒ…å†µä¸‹ timesyncd ä¼šå®šæœŸæ£€æµ‹å¹¶åŒæ­¥æ—¶é—´ã€‚å®ƒè¿˜ä¼šåœ¨æœ¬åœ°å­˜å‚¨æ›´æ–°çš„æ—¶é—´ï¼Œä»¥ä¾¿åœ¨ç³»ç»Ÿé‡å¯æ—¶åšæ—¶é—´å•æ­¥è°ƒæ•´ã€‚é€šè¿‡ timedatectl å’Œ timesyncd è®¾ç½®çš„å½“å‰æ—¶é—´çŠ¶æ€å’Œæ—¶é—´é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨ timedatectl statuså‘½ä»¤æ¥è¿›è¡Œç¡®è®¤ã€‚è€Œåœ¨ CentOS 7 ä¸­ï¼Œä¸å­˜åœ¨ timesyncd æœåŠ¡ï¼Œæ˜¯ç”± chrony æ¥ä½œä¸º ntpd çš„å®¢æˆ·ç«¯çš„éƒ¨åˆ†ã€‚</p>
<ul>
<li>CentOS 7.0 +</li>
</ul>
<p><code>timedatectl</code> -&gt; <code>systemd-timedated.service</code> -&gt; <code>chronyd.service</code> ã€Œé…ç½®æ–‡ä»¶ <code>/etc/chrony.conf</code>ã€</p>
<ul>
<li>Ubuntu 16.04 LTS + <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></li>
</ul>
<p><code>timedatectl</code> -&gt; <code>systemd-timedated.service</code> -&gt; <code>timesyncd.service</code> ã€Œé…ç½®æ–‡ä»¶ <code>/etc/systemd/timesyncd.conf</code>ã€</p>
<p><code>timedatectl</code> èƒ½åšåˆ°ï¼šä¿®æ”¹ç³»ç»Ÿæ—¶é—´ã€ä¿®æ”¹ RTC æ—¶é—´ã€ä¿®æ”¹ç³»ç»Ÿæ—¶åŒºã€è®¾ç½® NTP æ—¶é—´åŒæ­¥ã€æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ—¶é—´çŠ¶æ€ã€‚ä¸€èˆ¬æ¥è¯´ä½¿ç”¨ <code>timedatectl</code> å·²ç»èƒ½æ»¡è¶³æ—¥å¸¸å¯¹äºæ—¶é—´æ“ä½œçš„éœ€æ±‚äº†ã€‚</p>
<h5 id="æ—¶é—´åŒæ­¥é…ç½®">æ—¶é—´åŒæ­¥é…ç½®</h5>
<p>å¯¹äºæ—¶é—´ã€æ—¶åŒºä¿®æ”¹è¾ƒä¸ºç®€å•ï¼Œè¿™é‡Œç€é‡ä»‹ç»ä¸‹ <code>timedatectl</code> å†…çš„ NTP ç›¸å…³åŸç†ä»¥åŠé…ç½®ã€‚</p>
<ul>
<li>timedatectl çš„ NTP åŒæ­¥æµç¨‹</li>
</ul>
<p>ä½¿ç”¨ <code>timedatectl</code> é…ç½® NTP å®¢æˆ·ç«¯æœåŠ¡æ‰“å¼€ï¼Œ<code>systemd-timedated.service</code> æ”¶åˆ° NTP æ‰“å¼€çš„ä¿¡æ¯ï¼Œç”± <code>systemd-timedated.service</code> æ‰“å¼€ <code>chronyd.service</code> æ¥å¯åŠ¨ NTPï¼Œç”¨äºè¿æ¥ æœåŠ¡ç«¯ã€‚<code>timedatectl</code> å†…çš„ NTP åªèƒ½å®ç° NTP çš„å®¢æˆ·ç«¯è§’è‰²ï¼ŒåŒæ—¶åŒæ­¥ç­–ç•¥ä¹Ÿè¾ƒä¸ºæ¿€è¿›ã€Œæ—¶é—´ç›¸å·®å¤§åˆ™ç›´æ¥ä¿®æ”¹ï¼Œç›¸å·®å°åˆ™æ…¢æ…¢è¿½èµ¶ã€ï¼Œæ¯”è¾ƒé€‚åˆé¢‘ç¹å¯åŠ¨çš„ä¸šåŠ¡åœºæ™¯ã€‚</p>
<ul>
<li>å¼€å¯ timedatectl çš„ NTP åŒæ­¥</li>
</ul>
<p>å¼€å¯ timedatectl çš„ NTP åŒæ­¥éœ€è¦ç³»ç»Ÿå®‰è£… NTP å®¢æˆ·ç«¯ã€Œntpd æˆ–è€… chronyï¼ŒUbuntu è¿˜å¯ä»¥å®‰è£… timesyncdã€ï¼Œå¦åˆ™ä¼šæœ‰ <code>Failed to set ntp: NTP not supported.</code> çš„æŠ¥é”™ã€‚</p>
<pre><code>timedatectl set-ntp true
</code></pre>
<p>ä¿®æ”¹é…ç½®ä¸ºå¼€å¯çŠ¶æ€ï¼Œå†ä½¿ç”¨ <code>timedatectl</code> æŸ¥çœ‹ <code>NTP enabled</code>ã€<code>NTP synchronized</code> åŒæ­¥çŠ¶æ€å³å¯ã€‚å¦‚æœæ²¡æœ‰å®‰è£… chrony ç­‰åŒæ­¥è½¯ä»¶ï¼Œå¯å‚è€ƒå¦‚ä¸‹æ³¨æ„äº‹é¡¹çš„ <code>timedatectl</code> è¾“å‡ºã€‚</p>
<h5 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h5>
<p>âš ï¸ æ‰‹åŠ¨å®‰è£…æ“ä½œç³»ç»Ÿæ—¶ï¼Œä¼šæç¤ºæ˜¯å¦æ‰“å¼€ NTP æ—¶é’ŸåŒæ­¥ï¼Œå¦‚æœé€‰æ‹©æ‰“å¼€é‚£ä¹ˆä¼šé»˜è®¤å®‰è£… <code>chrony</code> ç›¸å…³è½¯ä»¶ç”¨äºç³»ç»Ÿæ—¶é—´åŒæ­¥ï¼Œå¦‚æœä¸æ‰“å¼€ï¼Œåˆ™ä¸ä¼šå®‰è£… <code>chrony</code>ï¼Œå¦‚æ­¤ç³»ç»Ÿæ—¶é—´å°†ä¸ä¼šåŒæ­¥ã€‚</p>
<ul>
<li>å®‰è£…ç³»ç»Ÿæ—¶ï¼Œä¸å¼€å¯ NTPï¼Œtimedatectl çš„è¾“å‡ºï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ NTP å®¢æˆ·ç«¯çš„æƒ…å†µã€‚</li>
</ul>
<pre><code>  &gt;root ~
[node1]# timedatectl
Local time: å…­ 2021-06-26 10:53:42 CST
Universal time: å…­ 2021-06-26 02:53:42 UTC
RTC time: å…­ 2021-06-26 10:53:26
Time zone: Asia/Shanghai (CST, +0800)
NTP enabled: n/a
NTP synchronized: no
RTC in local TZ: no
DST active: n/a
</code></pre>
<ul>
<li>å®‰è£…ç³»ç»Ÿæ—¶ï¼Œå¼€å¯ NTPï¼Œtimedatectl çš„è¾“å‡º</li>
</ul>
<pre><code>  &gt;root ~
[node1]# timedatectl
Local time: å…­ 2021-06-26 11:15:36 CST
Universal time: å…­ 2021-06-26 03:15:36 UTC
RTC time: å…­ 2021-06-26 03:15:36
Time zone: Asia/Shanghai (CST, +0800)
NTP enabled: yes
NTP synchronized: yes
RTC in local TZ: no
DST active: n/a
</code></pre>
<ul>
<li>å¦‚æœå®‰è£…ç³»ç»Ÿæ—¶ä¸å¼€å¯ NTPï¼Œ<code>chrony</code> ä¸ºåæœŸå®‰è£…ï¼Œé‚£ timedatectl çš„è¾“å‡ºå¦‚ä¸‹ã€‚åŒæ—¶éœ€è¦æ‰‹åŠ¨å¼€å¯ NTP åŒæ­¥ï¼Œ<code>NTP enabled: no</code> æ‰ä¼šå˜æˆ <code>yes</code>ã€‚</li>
</ul>
<pre><code>   &gt;root ~
[node1]# timedatectl
Local time: å…­ 2021-06-26 11:15:36 CST
Universal time: å…­ 2021-06-26 03:15:36 UTC
RTC time: å…­ 2021-06-26 03:15:36
Time zone: Asia/Shanghai (CST, +0800)
NTP enabled: no
NTP synchronized: no
RTC in local TZ: no
DST active: n/a
</code></pre>
<h4 id="date">date</h4>
<h5 id="æ­¤å¤„çœç•¥">æ­¤å¤„çœç•¥</h5>
<p>æˆ‘æ„Ÿè§‰ä¸€è¡Œå‘½ä»¤å°±å¯ä»¥äº†â€¦â€¦ã€Œç½‘ä¸Šå¯¹äº <code>date</code> å‘½ä»¤çš„ä»‹ç»å¾ˆå¤šã€</p>
<pre><code>date +&quot;%Y-%m-%d %H:%M&quot;
</code></pre>
<h4 id="chrony">chrony</h4>
<p>Chrony æ˜¯ä¸€ä¸ª NTP å®¢æˆ·ç«¯çš„æ›¿ä»£å“ã€‚å®ƒå¯ä»¥æ›´å¿«åœ°åŒæ­¥ç³»ç»Ÿæ—¶é’Ÿï¼Œæ—¶é—´ç²¾åº¦æ›´é«˜ï¼Œå¯¹äºä¸€ç›´ä¸åœ¨çº¿çš„ç³»ç»Ÿå°¤å…¶æœ‰ç”¨ã€‚chronyd è¾ƒå°ï¼Œå®ƒä½¿ç”¨è¾ƒå°‘çš„å†…å­˜ï¼Œåªåœ¨å¿…è¦æ—¶æ‰å”¤é†’ CPUï¼Œè¿™æ ·å¯ä»¥æ›´å¥½åœ°èŠ‚çœç”µèƒ½ã€‚å³ä½¿ç½‘ç»œæ‹¥å¡è¾ƒé•¿æ—¶é—´ï¼Œå®ƒä¹Ÿèƒ½å¾ˆå¥½åœ°è¿è¡ŒåŒæ­¥æ—¶é—´ã€‚å®ƒç”±ä¸¤ä¸ªç¨‹åºç»„æˆï¼Œåˆ†åˆ«æ˜¯ chronyd å’Œ chronycã€‚chronyd æ˜¯ä¸€ä¸ªåå°è¿è¡Œçš„å®ˆæŠ¤è¿›ç¨‹ï¼Œç”¨äºè°ƒæ•´å†…æ ¸ä¸­è¿è¡Œçš„ç³»ç»Ÿæ—¶é’Ÿå’Œæ—¶é’ŸæœåŠ¡å™¨åŒæ­¥ã€‚å®ƒç¡®å®šè®¡ç®—æœºå¢å‡æ—¶é—´çš„æ¯”ç‡ï¼Œå¹¶å¯¹æ­¤è¿›è¡Œè¡¥å¿ã€‚chronyc æä¾›äº†ä¸€ä¸ªç”¨æˆ·ç•Œé¢ï¼Œç”¨äºç›‘æ§æ€§èƒ½å¹¶è¿›è¡Œå¤šæ ·åŒ–çš„é…ç½®ã€‚</p>
<h5 id="å®‰è£…-chrony-è½¯ä»¶åŒ…">å®‰è£… chrony è½¯ä»¶åŒ…</h5>
<pre><code>yum install -y chrony
</code></pre>
<h5 id="ä¿®æ”¹é…ç½®">ä¿®æ”¹é…ç½®</h5>
<pre><code># controller
- server *
+ server 127.127.1.0 iburst
+ allow 192.168.10.0/24

# node
- server *
+ server controller iburst
</code></pre>
<h5 id="å¯åŠ¨æœåŠ¡å¹¶è®¾ç½®å¼€æœºè‡ªå¯åŠ¨">å¯åŠ¨æœåŠ¡ï¼Œå¹¶è®¾ç½®å¼€æœºè‡ªå¯åŠ¨</h5>
<pre><code>systemctl start chronyd &amp;&amp; systemctl enable chronyd
</code></pre>
<h4 id="ntp">ntp</h4>
<h5 id="å®‰è£…-ntp-è½¯ä»¶åŒ…">å®‰è£… ntp è½¯ä»¶åŒ…</h5>
<pre><code class="language-shell">  yum -y install ntp
</code></pre>
<h5 id="å¤‡ä»½é…ç½®">å¤‡ä»½é…ç½®</h5>
<pre><code class="language-shell"># é…ç½®å„èŠ‚ç‚¹ ntpd é…ç½®æ–‡ä»¶
  cp /etc/ntp.conf{,.bak}
</code></pre>
<h5 id="ä¿®æ”¹é…ç½®-1">ä¿®æ”¹é…ç½®</h5>
<pre><code class="language-shell"># ç®¡ç†èŠ‚ç‚¹ä½¿ç”¨æœ¬åœ°æ—¶é’Ÿæº,æ‰§è¡Œä»¥ä¸‹è¯­å¥å³å¯
  cat &lt;&lt;EOF&gt;/etc/ntp.conf
  driftfile /var/lib/ntp/drift
  restrict default kod nomodify notrap nopeer noquery
  restrict -6 default kod nomodify notrap nopeer noquery
  restrict 127.0.0.1
  restrict -6 ::1
  server 127.127.1.0 iburst
  includefile /etc/ntp/crypto/pw
  keys /etc/ntp/keys
  EOF

# å…¶ä»–èŠ‚ç‚¹çš„æ—¶é’Ÿæºä¸ºç®¡ç†èŠ‚ç‚¹ï¼Œæ‰§è¡Œä»¥ä¸‹è¯­å¥å³å¯
  cat &lt;&lt;EOF&gt;/etc/ntp.conf
  driftfile /var/lib/ntp/drift
  restrict default kod nomodify notrap nopeer noquery
  restrict -6 default kod nomodify notrap nopeer noquery
  restrict 127.0.0.1
  restrict -6 ::1
  server node1  iburst
  includefile /etc/ntp/crypto/pw
  keys /etc/ntp/keys
  EOF
</code></pre>
<p>æ‰‹åŠ¨è®¾ç½®æ—¶é—´ï¼Œå†™å…¥ç¡¬ä»¶æ—¶é’Ÿ</p>
<p>ã€ŒCentOS 7 åŠ¡å¿…ä½¿ç”¨ <code>timedatectl</code> æ¥æ“ä½œã€</p>
<pre><code class="language-shell"># ä¿®æ”¹å„èŠ‚ç‚¹æ—¶é—´,æ—¶é—´ä¸ºå½“å‰æ—¶é—´
  date -s &quot;2019-11-30 16:07:00&quot;
# å†™å…¥ç¡¬ä»¶æ—¶é’Ÿ
  hwclock -w
</code></pre>
<h5 id="å¯åŠ¨æœåŠ¡å¹¶è®¾ç½®å¼€æœºè‡ªå¯åŠ¨-1">å¯åŠ¨æœåŠ¡ï¼Œå¹¶è®¾ç½®å¼€æœºè‡ªå¯åŠ¨</h5>
<pre><code class="language-shell"># å„èŠ‚ç‚¹å¯åŠ¨æœåŠ¡
  systemctl start ntpd

# å„èŠ‚ç‚¹è®¾ç½®å¼€æœºè‡ªå¯åŠ¨
  systemctl enable ntpd
</code></pre>
<h2 id="æ‰‹åŠ¨é…ç½®æ—¶é’Ÿ">æ‰‹åŠ¨é…ç½®æ—¶é’Ÿ</h2>
<p>æ‰‹åŠ¨é…ç½®å®Œæ—¶é’Ÿåä¸€å®šè¦åŒæ­¥åˆ°ç¡¬ä»¶æ—¶é’Ÿé‡Œ</p>
<pre><code>timedatectl set-time &quot;20:01:09&quot;
</code></pre>
<pre><code>date -s &quot;20:01:09&quot;
</code></pre>
<h2 id="æ—¶é’ŸåŒæ­¥çŠ¶æ€æ ¡éªŒ">æ—¶é’ŸåŒæ­¥çŠ¶æ€æ ¡éªŒ</h2>
<ul>
<li>timedatectl</li>
</ul>
<pre><code>timedatectl status

  &gt;root ~
[node1]#  timedatectl status
   Local time: äºŒ 2021-06-29 16:47:25 CST
   Universal time: äºŒ 2021-06-29 08:47:25 UTC
   RTC time: äºŒ 2021-06-29 08:47:25
   Time zone: Asia/Shanghai (CST, +0800)
   NTP enabled: yes
   NTP synchronized: yes
   RTC in local TZ: no
   DST active: n/a
</code></pre>
<ul>
<li>chrony</li>
</ul>
<pre><code>chronyc sources -v
chronyc tracking


  &gt;root ~
[node1]# chronyc sources -v
210 Number of sources = 4

 .-- Source mode  '^' = server, '=' = peer, '#' = local clock.
/ .- Source state '*' = current synced, '+' = combined , '-' = not combined,
| /   '?' = unreachable, 'x' = time may be in error, '~' = time too variable.
||                                                 .- xxxx [ yyyy ] +/- zzzz
||      Reachability register (octal) -.           |  xxxx = adjusted offset,
||      Log2(Polling interval) --.      |          |  yyyy = measured offset,
||                                \     |          |  zzzz = estimated error.
||                                 |    |           \
MS Name/IP address         Stratum Poll Reach LastRx Last sample
===============================================================================
^- tock.ntp.infomaniak.ch        1  10   377   22m    +12ms[  +12ms] +/-  104ms
^* 120.25.115.20                 2  10   377   307   +423us[ +432us] +/-   18ms
^- ntp1.flashdance.cx            2  10   377   664  +8908us[+8917us] +/-  154ms
^+ 119.28.183.184                2  10   337   884   -462us[ -453us] +/-   32ms
</code></pre>
<ul>
<li>ntp</li>
</ul>
<pre><code>ntpq -p
ntpstat
</code></pre>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<p><a href="https://www.iamhippo.com/2020-01/1306.html">https://www.iamhippo.com/2020-01/1306.html</a>
<a href="https://blog.csdn.net/weixin_34270606/article/details/91881851">https://blog.csdn.net/weixin_34270606/article/details/91881851</a>
<a href="https://ywnz.com/linuxml/5215.html">https://ywnz.com/linuxml/5215.html</a>
<a href="https://www.cnblogs.com/opsprobe/p/13779933.html">https://www.cnblogs.com/opsprobe/p/13779933.html</a></p>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>Since Ubuntu 16.04 timedatectl / timesyncd (which are part of systemd) replace most of ntpdate / ntp. @ <a href="https://ubuntu.com/server/docs/network-ntp">https://ubuntu.com/server/docs/network-ntp</a> <a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>

    </div>
    <div class="article-footer">
<blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    <li class="post-copyright-link hidden-xs">
      <strong>æœ¬æ–‡é“¾æ¥: </strong>
      <a href="https://blog.standuke.top/2021/06/2021-06-26-linux-%E6%97%B6%E9%97%B4%E5%85%A8%E8%A7%A3/" title="Linux æ—¶é—´å…¨è§£" target="_blank" rel="external">https://blog.standuke.top/2021/06/2021-06-26-linux-%E6%97%B6%E9%97%B4%E5%85%A8%E8%A7%A3/</a>
    </li>
    <li class="post-copyright-license">
      <strong>License: </strong>
        <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN</a>
    </li>
  </ul>
</blockquote>

<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://www.standuke.top" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="https://blog.standuke.top/avatar.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://www.standuke.top" target="_blank"><span class="text-dark">Standuke</span><small class="ml-1x">Yunshen Technology Co., Ltd. - SRE Engineer</small></a></h3>
        <div>Focus on Linux Openstack Kubernetes vSphere Photograph Coding</div>
      </div>
    </figure>
  </div>
</div>

    </div>
  </article>
<section id="comments">
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
</section>

</div><nav class="bar bar-footer clearfix" data-stick-bottom>
    <div class="bar-inner">
        <ul class="pager pull-left">
            <li class="prev">
                <a href="https://blog.standuke.top/2021/05/2021-05-19-%E9%98%BF%E9%87%8C%E4%BA%91%E4%B8%BB%E6%9C%BA-eip-%E8%87%B4%E4%BD%BF-ftp-%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5/" title="é˜¿é‡Œäº‘ä¸»æœº EIP è‡´ä½¿ FTP æ— æ³•è¿æ¥"><i
                        class="icon icon-angle-left"
                        aria-hidden="true"></i><span>&nbsp;&nbsp;ä¸‹ä¸€ç¯‡</span></a>
            </li>
            <li class="next">
                <a href="https://blog.standuke.top/2021/07/2021-07-06-linux-%E5%AE%9A%E6%97%B6%E5%8D%95%E6%AC%A1%E5%8F%8A%E5%91%A8%E6%9C%9F%E4%BB%BB%E5%8A%A1/"
                    title="Linux å®šæ—¶å•æ¬¡åŠå‘¨æœŸä»»åŠ¡"><span>ä¸Šä¸€ç¯‡&nbsp;&nbsp;</span><i
                        class="icon icon-angle-right" aria-hidden="true"></i></a>
            </li>
            
            <li class="toggle-toc">
                <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false"
                    title="æ–‡ç« ç›®å½•" role="button">
                    <span>[&nbsp;</span><span>æ–‡ç« ç›®å½•</span>
                    <i class="text-collapsed icon icon-anchor"></i>
                    <i class="text-in icon icon-close"></i>
                    <span>]</span>
                </a>
            </li>
        </ul>
        <div class="bar-right">
            <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter,google,linkedin"
                data-mobile-sites="wechat,qq,facebook,twitter"></div>
        </div>
    </div>
</nav>


</main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
<ul class="social-links">
    <li><a href="https://github.com/idoker" target="_blank" title="github" data-toggle=tooltip data-placement=top >
            <i class="icon icon-github"></i></a></li>
    <li><a href="https://blog.standuke.top/index.xml" target="_blank" title="rss" data-toggle=tooltip data-placement=top >
            <i class="icon icon-rss"></i></a></li>
</ul>
  <div class="copyright">
    &copy;2016  -
    2024
    <div class="publishby">
        Theme by <a href="https://github.com/xiaoheiAh" target="_blank"> xiaoheiAh </a>base on<a href="https://github.com/xiaoheiAh/hugo-theme-pure" target="_blank"> pure</a>.
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
            showMathMenu: false, //disables context menu
            tex2jax: {
            inlineMath: [ ['$','$'], ['\\(','\\)'] ]
           }
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script>
    window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/highlight.min.js"></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/shell.min.js" defer></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/python.min.js" defer></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/javascript.min.js" defer></script><script>
    hljs.configure({
        tabReplace: '    ', 
        classPrefix: ''     
        
    })
    hljs.initHighlightingOnLoad();
</script>
<script src="https://blog.standuke.top/js/application.min.a94ab19cb63a95c8d7fbd7b85cab3ddeea8c369bdf75b9cab6708787ead123af.js"></script>
<script src="https://blog.standuke.top/js/plugin.min.19c5bcb2fb0789ab4f2b7834e5ceb5e92635645605bab902c1024b25f1502364.js"></script>

<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'æ–‡ç« ',
                PAGES: 'é¡µé¢',
                CATEGORIES: 'åˆ†ç±»',
                TAGS: 'æ ‡ç­¾',
                UNTITLED: '(æœªå‘½å)',
            },
            ROOT_URL: 'https:\/\/blog.standuke.top\/',
            CONTENT_URL: 'https:\/\/blog.standuke.top\/\/searchindex.json ',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script type="text/javascript" src="https://blog.standuke.top/js/insight.min.4a2d52de4bfff73e0c688404fe3d17c9a3ae12d9888e1e1ac9c690e4890de2ded50fe55f2b819c2ba55435a76f396f3ea6805765f0b0af5635cdf74ea459eab0.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
<script>
    tocbot.init({
        
        tocSelector: '.js-toc',
        
        contentSelector: '.js-toc-content',
        
        headingSelector: 'h1, h2, h3',
        
        hasInnerContainers: true,
    });
</script>

<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script>
    var disqus_config = function () {
        this.page.url = 'https:\/\/blog.standuke.top\/2021\/06\/2021-06-26-linux-%E6%97%B6%E9%97%B4%E5%85%A8%E8%A7%A3\/';
        <!-- this.page.identifier = 'nuo'; -->
    };
    (function () {
        var d = document, s = d.createElement('script');
        s.src = '//' + 'nuo' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-180157250-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  </body>
</html>
