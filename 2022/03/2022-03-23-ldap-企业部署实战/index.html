<!DOCTYPE html>
<html lang="zh">
  <head>
    <title>
        LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£… - Stan&#39;s blog - Explore the world
      </title>
        <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    
    <meta name="theme-color" content="#000000" />
    
    <meta http-equiv="window-target" content="_top" />
    
    
    <meta name="description" content="ğŸ‘Œ 2022-03-23 LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£… FileInfo Filename - LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£… Version - v1.0.2203ï¼ˆ2022/03/25 ~ 2022/04/06ï¼‰ Author" />
    <meta name="generator" content="Hugo 0.82.1 with theme pure" />
    <title>LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£… - Stan&#39;s blog - Explore the world</title>
    
    
    <link rel="stylesheet" href="https://blog.standuke.top/css/style.min.6f90022f237877ae2514ec95f3c9cca9f2314394f20800ca037a497e20053122.css">
    
    <link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/9.15.10/styles/github.min.css" async>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css" async>
    <meta property="og:title" content="LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£…" />
<meta property="og:description" content="ğŸ‘Œ 2022-03-23 LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£… FileInfo Filename - LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£… Version - v1.0.2203ï¼ˆ2022/03/25 ~ 2022/04/06ï¼‰ Author" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.standuke.top/2022/03/2022-03-23-ldap-%E4%BC%81%E4%B8%9A%E9%83%A8%E7%BD%B2%E5%AE%9E%E6%88%98/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-23T21:58:34&#43;08:00" />
<meta property="article:modified_time" content="2022-03-23T21:58:34&#43;08:00" />

<meta itemprop="name" content="LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£…">
<meta itemprop="description" content="ğŸ‘Œ 2022-03-23 LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£… FileInfo Filename - LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£… Version - v1.0.2203ï¼ˆ2022/03/25 ~ 2022/04/06ï¼‰ Author"><meta itemprop="datePublished" content="2022-03-23T21:58:34&#43;08:00" />
<meta itemprop="dateModified" content="2022-03-23T21:58:34&#43;08:00" />
<meta itemprop="wordCount" content="5952">
<meta itemprop="keywords" content="CentOS,Linux," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£…"/>
<meta name="twitter:description" content="ğŸ‘Œ 2022-03-23 LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£… FileInfo Filename - LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£… Version - v1.0.2203ï¼ˆ2022/03/25 ~ 2022/04/06ï¼‰ Author"/>

    <!--[if lte IE 9]>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
      <![endif]-->

    <!--[if lt IE 9]>
        <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
      <![endif]-->
  </head>

  
  

  <body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader">
    <div class="slimContent">
      <div class="navbar-header">
        <div class="profile-block text-center">
          <a id="avatar" href="https://www.standuke.top" target="_blank">
            <img class="img-circle img-rotate" src="https://blog.standuke.top/avatar.png" width="200" height="200">
          </a>
          <h2 id="name" class="hidden-xs hidden-sm">Standuke</h2>
          <h3 id="title" class="hidden-xs hidden-sm hidden-md">Yunshen Technology Co., Ltd. - SRE Engineer</h3>
          <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i>Hangzhou, China</small>
        </div><div class="search" id="search-form-wrap">
    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="æœç´¢" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i
                        class="icon icon-search"></i></button>
            </span>
        </div>
        <div class="ins-search">
            <div class="ins-search-mask"></div>
            <div class="ins-search-container">
                <div class="ins-input-wrapper">
                    <input type="text" class="ins-search-input" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..."
                        x-webkit-speech />
                    <button type="button" class="close ins-close ins-selectable" data-dismiss="modal"
                        aria-label="Close"><span aria-hidden="true">Ã—</span></button>
                </div>
                <div class="ins-section-wrapper">
                    <div class="ins-section-container"></div>
                </div>
            </div>
        </div>
    </form>
</div>
        <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
        <ul class="nav navbar-nav main-nav">
            <li class="menu-item menu-item-home">
                <a href="/">
                    <i class="icon icon-home-fill"></i>
                  <span class="menu-title">Home</span>
                </a>
            </li>
            <li class="menu-item menu-item-archives">
                <a href="/posts/">
                    <i class="icon icon-archives-fill"></i>
                  <span class="menu-title">Archives</span>
                </a>
            </li>
            <li class="menu-item menu-item-categories">
                <a href="/categories/">
                    <i class="icon icon-folder"></i>
                  <span class="menu-title">Categories</span>
                </a>
            </li>
            <li class="menu-item menu-item-tags">
                <a href="/tags/">
                    <i class="icon icon-tags"></i>
                  <span class="menu-title">Tags</span>
                </a>
            </li>
            <li class="menu-item menu-item-about">
                <a href="/about/">
                    <i class="icon icon-cup-fill"></i>
                  <span class="menu-title">About</span>
                </a>
            </li>
            <li class="menu-item menu-item-linkedin">
                <a href="https://linkedin.com/in/doc-s-44435ab2">
                    <i class="icon icon-linkedin"></i>
                  <span class="menu-title">Linkedin</span>
                </a>
            </li>
        </ul>
      </nav>
    </div>
  </header>

<aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">å…¬å‘Š</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content"><p>ç«™ç‚¹è¿ç§»åˆæœŸï¼Œé…ç½®å‚æ•°è°ƒæ•´ï¼ŒåŒæ—¶æ¶‰åŠåˆ°çš„æ–‡ç« è¾ƒå¤šï¼Œé¡µé¢æµè§ˆå¯èƒ½ä¼šå‡ºç°é—ªæ–­ã€‚å› ä¸ºæ˜¯ä¸šä½™æ—¶é—´è¿ç§»åšå®¢ï¼Œä» 5 æœˆå¼€å§‹ä¼°è®¡è¦åˆ°å¹´åº•æ‰èƒ½æŠŠå‰æœŸçš„æ–‡ç« æ•´ä½“è¿ç§»è¿‡æ¥ã€‚åšå®¢è¯„è®ºé‡‡ç”¨ Disqus éœ€è¦ç§‘å­¦æ‰èƒ½çœ‹åˆ°ï¼Œå¦‚æœæœ‰ä»»ä½•æ„è§å»ºè®®ä¹Ÿå¯ç›´æ¥è”ç³»æˆ‘ Telegramã€‚</p>
            </div>
        </div>
    </div>
</div>

      <div class="widget">
    <h3 class="widget-title"> æ ‡ç­¾</h3>
    <div id="tag-cloud-list" class="widget-body">
            
            
            <a href="https://blog.standuke.top/tags/aliyun/" class="tag-list-link" rel="1">aliyun<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/bigdata/" class="tag-list-link" rel="1">bigdata<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/cdh/" class="tag-list-link" rel="1">cdh<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/centos/" class="tag-list-link" rel="11">centos<span
               class="tag-list-count">11</span></a>
            
            
            <a href="https://blog.standuke.top/tags/cloudera/" class="tag-list-link" rel="1">cloudera<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/docker/" class="tag-list-link" rel="1">docker<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/eip/" class="tag-list-link" rel="1">eip<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/esxi/" class="tag-list-link" rel="1">esxi<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/frp/" class="tag-list-link" rel="1">frp<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/kvm/" class="tag-list-link" rel="1">kvm<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/linux/" class="tag-list-link" rel="8">linux<span
               class="tag-list-count">8</span></a>
            
            
            <a href="https://blog.standuke.top/tags/linux-bridge/" class="tag-list-link" rel="1">linux-bridge<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/macos/" class="tag-list-link" rel="2">macos<span
               class="tag-list-count">2</span></a>
            
            
            <a href="https://blog.standuke.top/tags/markdown/" class="tag-list-link" rel="1">markdown<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/network/" class="tag-list-link" rel="1">network<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/openstack/" class="tag-list-link" rel="6">openstack<span
               class="tag-list-count">6</span></a>
            
            
            <a href="https://blog.standuke.top/tags/pxe/" class="tag-list-link" rel="1">pxe<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/qcow2/" class="tag-list-link" rel="1">qcow2<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/system/" class="tag-list-link" rel="1">system<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/time-machine/" class="tag-list-link" rel="1">time-machine<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/tools/" class="tag-list-link" rel="1">tools<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/vcenter/" class="tag-list-link" rel="1">vcenter<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/virtualization/" class="tag-list-link" rel="9">virtualization<span
               class="tag-list-count">9</span></a>
            
            
            <a href="https://blog.standuke.top/tags/vsphere/" class="tag-list-link" rel="1">vsphere<span
               class="tag-list-count">1</span></a>
            
            
            <a href="https://blog.standuke.top/tags/windows/" class="tag-list-link" rel="4">windows<span
               class="tag-list-count">4</span></a>
            
    </div>
<script>
document.onreadystatechange = () => {
  if (document.readyState === 'complete') {
    tagCloud('#tag-cloud-list a',  8 ,  20 );
  }
};

function tagCloud(where, min, max) {
  let iMax = 0;
  let iMin = 0;
  $(where).each(function() {
    let weight = Number($(this).attr("rel"));
    if(iMax < weight) iMax = weight;
    if(iMin > weight || iMin == 0) iMin = weight;
  });
  let step = (max - min)/(iMax - iMin);
  $(where).each(function() {
    let weight = $(this).attr("rel") - iMin;
    $(this).css({"font-size": min + (weight * step) + 'px'});
  });
};
</script>
</div>

      <div class="widget">
    <h3 class="widget-title"> åˆ†ç±»</h3>
    <div class="widget-body">
        <ul class="category-list">
            <li class="category-list-item"><a href="https://blog.standuke.top/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/" class="category-list-link">ä½¿ç”¨æ•™ç¨‹</a><span class="category-list-count">3</span></li>
            <li class="category-list-item"><a href="https://blog.standuke.top/categories/%E5%86%85%E9%83%A8%E5%88%86%E4%BA%AB/" class="category-list-link">å†…éƒ¨åˆ†äº«</a><span class="category-list-count">3</span></li>
            <li class="category-list-item"><a href="https://blog.standuke.top/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E6%9E%90/" class="category-list-link">æŠ€æœ¯åˆ†æ</a><span class="category-list-count">1</span></li>
            <li class="category-list-item"><a href="https://blog.standuke.top/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="category-list-link">æ“ä½œç³»ç»Ÿ</a><span class="category-list-count">10</span></li>
            <li class="category-list-item"><a href="https://blog.standuke.top/categories/%E9%83%A8%E7%BD%B2%E6%95%99%E7%A8%8B/" class="category-list-link">éƒ¨ç½²æ•™ç¨‹</a><span class="category-list-count">10</span></li>
            <li class="category-list-item"><a href="https://blog.standuke.top/categories/%E9%9B%B6%E7%A2%8E%E5%B0%8F%E9%97%AE%E9%A2%98/" class="category-list-link">é›¶ç¢å°é—®é¢˜</a><span class="category-list-count">4</span></li>
        </ul>
    </div>
</div>
      
<div class="widget">
    <h3 class="widget-title">æœ€æ–°æ–‡ç« </h3>
    <div class="widget-body">
        <ul class="recent-post-list list-unstyled no-thumbnail">
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://blog.standuke.top/2022/04/2022-04-06-ldap-over-tls/" class="title">LDAP over TLSã€ŒStartTLSã€</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2022-04-06 22:20:17 &#43;0800 CST" itemprop="datePublished">2022-04-06</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://blog.standuke.top/2022/04/2022-04-01-ldap-%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%80%9A%E8%BF%87-sssd-%E6%9C%8D%E5%8A%A1%E5%AE%8C%E6%88%90%E6%8E%A5%E5%85%A5/" class="title">LDAP å®¢æˆ·ç«¯é€šè¿‡ sssd æœåŠ¡å®Œæˆæ¥å…¥</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2022-04-01 19:20:18 &#43;0800 CST" itemprop="datePublished">2022-04-01</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://blog.standuke.top/2022/03/2022-03-23-ldap-%E4%BC%81%E4%B8%9A%E9%83%A8%E7%BD%B2%E5%AE%9E%E6%88%98/" class="title">LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£…</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2022-03-23 21:58:34 &#43;0800 CST" itemprop="datePublished">2022-03-23</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://blog.standuke.top/2021/07/2021-07-06-linux-%E5%AE%9A%E6%97%B6%E5%8D%95%E6%AC%A1%E5%8F%8A%E5%91%A8%E6%9C%9F%E4%BB%BB%E5%8A%A1/" class="title">Linux å®šæ—¶å•æ¬¡åŠå‘¨æœŸä»»åŠ¡</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2021-07-06 17:20:34 &#43;0800 CST" itemprop="datePublished">2021-07-06</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://blog.standuke.top/2021/06/2021-06-26-linux-%E6%97%B6%E9%97%B4%E5%85%A8%E8%A7%A3/" class="title">Linux æ—¶é—´å…¨è§£</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2021-06-26 11:11:31 &#43;0800 CST" itemprop="datePublished">2021-06-26</time>
                    </p>
                </div>
            </li>
        </ul>
    </div>
</div>
  </div>
</aside>

    
    
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <h4 class="toc-title">æ–‡ç« ç›®å½•</h4>
    <nav id="toc" class="js-toc toc">

    </nav>
  </div>
</aside>
<main class="main" role="main"><div class="content">
  <article id="-" class="article article-type-" itemscope
    itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      <h1 itemprop="name">
  <a
    class="article-title"
    href="/2022/03/2022-03-23-ldap-%E4%BC%81%E4%B8%9A%E9%83%A8%E7%BD%B2%E5%AE%9E%E6%88%98/"
    >LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£…</a
  >
</h1>

      <div class="article-meta">
        
<span class="article-date">
  <i class="icon icon-calendar-check"></i>&nbsp;
<a href="https://blog.standuke.top/2022/03/2022-03-23-ldap-%E4%BC%81%E4%B8%9A%E9%83%A8%E7%BD%B2%E5%AE%9E%E6%88%98/" class="article-date">
  <time datetime="2022-03-23 21:58:34 &#43;0800 CST" itemprop="datePublished">2022-03-23</time>
</a>
</span>
<span class="article-category">
  <i class="icon icon-folder"></i>&nbsp;
  <a class="article-category-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"> æ“ä½œç³»ç»Ÿ </a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>&nbsp;
    <a class="article-tag-link" href="/tags/centos/"> CentOS </a>
    <a class="article-tag-link" href="/tags/linux/"> Linux </a>
  </span>

	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill" aria-hidden="true"></i>
	    <span id="busuanzi_container_page_pv">
			<span id="busuanzi_value_page_pv">0</span>
		</span>
	</span>
        <span class="post-comment"><i class="icon icon-comment"></i>&nbsp;<a href="/2022/03/2022-03-23-ldap-%E4%BC%81%E4%B8%9A%E9%83%A8%E7%BD%B2%E5%AE%9E%E6%88%98/#comments"
            class="article-comment-link">è¯„è®º</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">å­—æ•°ç»Ÿè®¡: 5952å­—</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">é˜…è¯»æ—¶é•¿: 12åˆ† </span>
      </div>
    </div>
    <div class="article-entry marked-body js-toc-content" itemprop="articleBody">
      <h1 id="-2022-03-23-ldap-ä¼ä¸šéƒ¨ç½²å®æˆ˜---ldap-åŸºç¡€æœåŠ¡å®‰è£…">ğŸ‘Œ 2022-03-23 LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£…</h1>
<blockquote>
<p><strong>FileInfo</strong>
Filename - LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£…
Version - v1.0.2203ï¼ˆ2022/03/25 ~ 2022/04/06ï¼‰
Author - nuo standuke
Email - <a href="mailto:shadowdoker@gmail.com">shadowdoker@gmail.com</a>
DescriptionKey - LDAP Enterprise Deployment Practice</p>
</blockquote>
<p><strong>âš ï¸ æ³¨æ„ï¼šç°æœ‰ç‰ˆæœ¬ openldap-servers-2.4.44-25.el7_9.x86_64 æŒ‰ç…§éœ€è¦å…¨ç¨‹ä½¿ç”¨ CLI æ“ä½œé…ç½®ï¼Œè¯·å‹¿ç›´æ¥ä¿®æ”¹ slapd.d æ–‡ä»¶å¤¹å†…çš„é…ç½®ã€‚ç›®å‰ç½‘ç»œä¸Šå®‰è£…æ–‡æ¡£å‡ä¸ºè€ç‰ˆæœ¬ï¼Œä½¿ç”¨ â€˜slapd.confâ€™ è¿›è¡Œé…ç½®ï¼Œä¸æ–°ç‰ˆæœ¬å®‰è£…æ“ä½œæ–¹å¼ä¸ä¸€è‡´</strong>ã€Œè¯¦è§æœ¬æ–‡æ¡£ ç‰ˆæœ¬å˜åŒ– éƒ¨åˆ†ã€</p>
<p>[TOC]</p>
<h2 id="ç®€ä»‹">ç®€ä»‹</h2>
<p>ç›®å‰ç½‘ç»œèµ„æºè¾ƒå°‘ã€ŒçœŸçš„å¾ˆå°‘ã€å¾ˆè€ã€å¾ˆå·®ã€ï¼Œå»ºè®®å¤§éƒ¨åˆ†é—®é¢˜ä»å®˜æ–¹æ–‡æ¡£å¯»æ‰¾è¯´æ˜ä¸è§£å†³æ–¹æ¡ˆã€‚</p>
<blockquote>
<p>Wikipedia</p>
</blockquote>
<p>OpenLDAP æ˜¯è½»å‹ç›®å½•è®¿é—®åè®®ã€ŒLightweight Directory Access Protocolï¼ŒLDAPã€çš„è‡ªç”±å’Œå¼€æºçš„å®ç°ï¼Œåœ¨å…¶ OpenLDAP è®¸å¯è¯ä¸‹å‘è¡Œï¼Œå¹¶å·²ç»è¢«åŒ…å«åœ¨ä¼—å¤šæµè¡Œçš„ Linux å‘è¡Œç‰ˆä¸­ã€‚
å®ƒä¸»è¦åŒ…æ‹¬ä¸‹è¿° 4 ä¸ªéƒ¨åˆ†ï¼š</p>
<ul>
<li>slapd - ç‹¬ç«‹ LDAP å®ˆæŠ¤æœåŠ¡</li>
<li>slurpd - ç‹¬ç«‹çš„ LDAP æ›´æ–°å¤åˆ¶å®ˆæŠ¤æœåŠ¡</li>
<li>å®ç° LDAP åè®®çš„åº“</li>
<li>å·¥å…·è½¯ä»¶å’Œç¤ºä¾‹å®¢æˆ·ç«¯</li>
</ul>
<h3 id="ç‰ˆæœ¬è¯´æ˜">ç‰ˆæœ¬è¯´æ˜</h3>
<ul>
<li>CentOS 7.9-2009 ç³»ç»Ÿæºç‰ˆæœ¬</li>
</ul>
<pre><code>openldap-2.4.44-25.el7_9.x86_64
openldap-servers-2.4.44-25.el7_9.x86_64
openldap-clients-2.4.44-25.el7_9.x86_64
</code></pre>
<ul>
<li>æœ€æ–°å®˜æ–¹ç‰ˆæœ¬ã€Œæˆªæ­¢æœ¬æ–‡æ¡£å‘å¸ƒæ—¥æœŸã€</li>
</ul>
<pre><code>OpenLDAP 2.6 (Released October 2021)
Functional enhancements:
slapd and lloadd
File-based logging, including log file management capabilities (ITS#9492)
Load Balancer enhancements
Read affinity (ITS#9598)
Additional balancing algorithms (ITS#9599)
</code></pre>
<ul>
<li>ä¸‹ä¸€æ¬¡å¤§ç‰ˆæœ¬æ›´æ–°ã€Œå®˜æ–¹éƒ½æ²¡æƒ³è¿‡ï¼Œè€è€å®å®ç”¨ 2.* ç‰ˆæœ¬å§ã€</li>
</ul>
<pre><code>OpenLDAP 3.0 (TBD)
We're not thinking that far ahead right now.
</code></pre>
<h3 id="-ç‰ˆæœ¬å˜åŒ–">âš ï¸ ç‰ˆæœ¬å˜åŒ–</h3>
<p>è¿™æ˜¯æœ¬æ–‡ç« æ¯”è¾ƒé‡è¦çš„ä¸€ç‚¹ï¼Œç”±å®˜ç½‘å¯å¾—ç›®å‰ openldap é…ç½®ä»¥åŠæ”¹ä¸ºåŠ¨æ€é…ç½®æ–‡ä»¶ï¼Œç”±å‘½ä»¤æ–¹å¼å»ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå¹¶ä¸”ç›´æ¥ç”Ÿæ•ˆã€‚åŒæ—¶ï¼Œå®˜æ–¹åœ¨æ¯ä¸ªé…ç½®æ–‡ä»¶å†…å¼€å¤´éƒ½æ³¨æ˜äº†ä¸è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œä»¥åŠé…ç½®æ–‡ä»¶çš„ CRC æ ¡éªŒã€‚ã€ŒOpenLDAP 2.3 åŠå…¶ä»¥åç‰ˆæœ¬ï¼Œä½¿ç”¨ cn=config ä½œä¸ºåç«¯é…ç½®æ–‡ä»¶ã€</p>
<p>âš ï¸ <strong>ä¸è¦æ‰‹åŠ¨ä¿®æ”¹é…ç½®ï¼Œå¦åˆ™å¯åŠ¨æ—¶ CRC æ ¡éªŒå¤±è´¥ï¼Œå¯¼è‡´ <code>slapd.service</code> æœåŠ¡æ— æ³•å¯åŠ¨</strong></p>
<p>å®˜æ–¹è¯´æ˜ <a href="https://www.openldap.org/doc/admin24/guide.html#Configuring%20slapd">https://www.openldap.org/doc/admin24/guide.html#Configuring%20slapd</a></p>
<ul>
<li>å®˜æ–¹è¯´æ˜æ–‡æ¡£</li>
</ul>
<pre><code>OpenLDAP 2.3 and later have transitioned to using a dynamic runtime configuration engine, slapd-config(5). slapd-config(5)
</code></pre>
<ul>
<li>ç°æœ‰é…ç½®æ–‡ä»¶çš„å¼€å¤´è¯´æ˜ã€Œè‡ªå¸¦ CRC æ ¡éªŒï¼Œæ‰€ä»¥ä¸è¦å»æ”¹æ–‡ä»¶ã€</li>
</ul>
<pre><code># AUTO-GENERATED FILE - DO NOT EDIT!! Use ldapmodify.
# CRC32 7ee1beb6
</code></pre>
<h3 id="å®˜æ–¹è¯´æ˜åœ°å€">å®˜æ–¹è¯´æ˜åœ°å€</h3>
<ul>
<li>å®˜æ–¹ release ç‰ˆæœ¬è·¯çº¿è¯´æ˜</li>
</ul>
<p><a href="https://www.openldap.org/software/roadmap.html">https://www.openldap.org/software/roadmap.html</a></p>
<ul>
<li>å®˜æ–¹æºç ä¸‹è½½åœ°å€</li>
</ul>
<p><a href="https://www.openldap.org/software/download/">https://www.openldap.org/software/download/</a>
<a href="https://www.openldap.org/software/download/OpenLDAP/openldap-release/">https://www.openldap.org/software/download/OpenLDAP/openldap-release/</a></p>
<h2 id="åŸºç¡€æ¦‚å¿µ">åŸºç¡€æ¦‚å¿µ</h2>
<p>OpenLDAP 1.0ã€Œreleased August 1998ã€å‘å¸ƒè¿‘ 25 å¹´ï¼Œéƒ¨åˆ†é…ç½®æ¦‚å¿µè¿˜æ˜¯æœ‰äº›è·Ÿä¸ä¸Šæ—¶ä»£ï¼Œä½†æ˜¯ç†è§£åä¹Ÿèƒ½æ»¡è¶³å½“ä¸‹çš„ä¸šåŠ¡éœ€æ±‚ã€‚ã€Œä¸»è¦è¿˜æ˜¯ LDAP èƒ½å¯¹æ¥çš„ç³»ç»Ÿå¤ªå¤šäº†ï¼Œä¸ç„¶æŠ˜è…¾åˆ°ç°åœ¨æˆ‘ä¹Ÿä¸æƒ³å¼„ã€</p>
<p><a href="https://blog.csdn.net/liukuan73/article/details/78684710">https://blog.csdn.net/liukuan73/article/details/78684710</a></p>
<ul>
<li>
<p>æ•°æ®åº“ç»„ç»‡æ¶æ„</p>
</li>
<li>
<p>DIT = Directory Information Tree ç›®å½•ä¿¡æ¯æ ‘ï¼Œæ•´ä¸€ä¸ª LDAP æ•°æ®åº“å°±æ˜¯ä¸€ä¸ªç›®å½•ä¿¡æ¯æ ‘</p>
</li>
<li>
<p>Enrty = æ¡ç›®ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€æ¡æ•°æ®ä¸€ä¸ªç”¨æˆ·æˆ–ç»„ç»‡ï¼Œæ˜¯ LDAP ä¸­ä¸€ä¸ªåŸºæœ¬çš„å­˜å‚¨å•å…ƒï¼›ä¹Ÿå¯ä»¥è¢«çœ‹ä½œæ˜¯ä¸€ä¸ª DN å’Œä¸€ç»„å±æ€§çš„é›†åˆã€‚ä¸€æ¡ entry å¯ä»¥åŒ…å«å¤šä¸ª objectClassï¼Œä¾‹å¦‚ zhang3 å¯ä»¥å­˜åœ¨äº â€œç”µè¯è–„â€ ä¸­ï¼Œä¹Ÿå¯ä»¥åŒæ—¶å­˜åœ¨äº â€œåŒå­¦å½•â€ ä¸­ã€‚</p>
</li>
<li>
<p>DN = Distinguished Name å…¨å±€å”¯ä¸€çš„æ ‡è¯†åï¼Œæ¯ä¸€ä¸ªæ¡ç›® Entry éƒ½å¯é€šè¿‡ DN æ¥å”¯ä¸€ç¡®å®š</p>
</li>
<li>
<p>RDN = Relative Distinguished Name åŒºåˆ†åæˆ–è€…ç›¸å¯¹åŒºåˆ«å</p>
</li>
<li>
<p>Base DN = ä¸€æ¡ Base DN å¯ä»¥æ˜¯ â€œdc=expwd,dc=comâ€ï¼Œä¹Ÿå¯ä»¥æ˜¯â€œdc=People,dc=expwd,dc=comâ€ã€‚æ‰§è¡Œ LDAP Search æ—¶ä¸€èˆ¬è¦æŒ‡å®š basednï¼Œç”±äº LDAP æ˜¯æ ‘çŠ¶æ•°æ®ç»“æ„ï¼ŒæŒ‡å®š BaseDN åï¼Œæœç´¢å°†ä» BaseDN å¼€å§‹</p>
</li>
</ul>
<p>ğŸŒ° ä¾‹</p>
<p><code>DN</code> = uid=stan,ou=People,dc=expwd,dc=com
<code>RDN</code> = uid=stan
<code>BaseDN</code> = dc=expwd,dc=com
<code>Enrty</code> = æ¡ç›®ã€Œä¸‹æ–¹è¯¦è§£ã€</p>
<pre><code>dn: uid=stan,ou=People,dc=expwd,dc=com
cn:: stan
gidnumber: 5001
homedirectory: /home/users/stan
loginshell: /bin/bash
mail: stan@expwd.com
objectclass: inetOrgPerson
objectclass: posixAccount
objectclass: shadowAccount
sn: stan
uid: stan
uidnumber: 2000
userpassword: {SSHA}tIUzvYvE7YWxRRKCE0jC53vxdIwAt96k
</code></pre>
<ul>
<li>Schema = LDAP å…ƒæ•°æ®æ¨¡å‹ã€ŒSchemaã€ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢ Entry çš„æ¨¡æ¿ï¼Œæ¨¡æ¿å®šä¹‰äº†éœ€è¦å“ªäº›æ•°æ®ï¼Œå¿…å¡«é¡¹ç­‰ï¼ŒSchema ä¼šå®šä¹‰ Enrty æœ‰å“ªäº› objectClass ç»„æˆã€‚</li>
<li>objectClass = å¯¹è±¡ç±»ã€ŒobjectClassã€æ˜¯ LDAP å†…ç½®çš„æ•°æ®æ¨¡å‹ï¼Œæ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ç§å«â€œç”µè¯è–„â€çš„objectClassï¼Œè‚¯å®šä¼šå†…ç½®å¾ˆå¤šå±æ€§(attributes)ï¼Œå¦‚å§“å(uid)ï¼Œèº«ä»½è¯å·(uidNumber)ï¼Œå•ä½åç§°(gid)ï¼Œå®¶åº­åœ°å€(homeDirectory)ç­‰ï¼ŒåŒæ—¶ï¼Œè¿˜æœ‰ä¸€ç§å«â€œåŒå­¦å½•â€çš„objectClassï¼Œå…·å¤‡â€œç”µè¯è–„â€é‡Œçš„ä¸€äº›attributes(å¦‚uidã€homeDirectory)ï¼Œè¿˜ä¼šå…·æœ‰â€œç”µè¯è–„â€æ²¡æœ‰çš„attributes(å¦‚descriptionç­‰)ã€‚ä¸€ä¸ªæ¡ç›®(Entry)å¿…é¡»åŒ…å«ä¸€ä¸ªå¯¹è±¡ç±»(objectClass)å±æ€§ï¼Œä¸”éœ€è¦èµ‹äºˆè‡³å°‘ä¸€ä¸ªå€¼ã€‚æ¯ä¸€ä¸ªå€¼å°†ç”¨ä½œä¸€æ¡ LDAP æ¡ç›®è¿›è¡Œæ•°æ®å­˜å‚¨çš„æ¨¡æ¿ï¼›æ¨¡æ¿ä¸­åŒ…å«äº†ä¸€ä¸ªæ¡ç›®å¿…é¡»è¢«èµ‹å€¼çš„å±æ€§å’Œå¯é€‰çš„å±æ€§ã€‚</li>
<li>inetOrgPerson = å¯¹è±¡ç±» inetOrgPersonï¼ˆInternet Organizational Personï¼‰</li>
</ul>
<blockquote>
<p>ä¸€ä¸ªæ¡ç›®çš„å±æ€§é€šè¿‡ LDAP å…ƒæ•°æ®æ¨¡å‹ï¼ˆSchemaï¼‰ä¸­çš„å¯¹è±¡ç±»ï¼ˆobjectClassï¼‰æ‰€å®šä¹‰ï¼Œä¸‹é¢çš„è¡¨æ ¼åˆ—ä¸¾äº†å¯¹è±¡ç±» inetOrgPersonï¼ˆInternet Organizational Personï¼‰ä¸­çš„ä¸€äº›å¿…å¡«å±æ€§å’Œå¯é€‰å±æ€§ã€‚</p>
</blockquote>
<h3 id="objectclass">objectClass</h3>
<p><a href="https://www.cnblogs.com/lfdblog/p/9803276.html">https://www.cnblogs.com/lfdblog/p/9803276.html</a></p>
<p>LDAPä¸­ï¼Œä¸€ä¸ªæ¡ç›®å¿…é¡»åŒ…å«ä¸€ä¸ª objectClass å±æ€§ï¼Œä¸”éœ€è¦èµ‹äºˆè‡³å°‘ä¸€ä¸ªå€¼ã€‚æ¯ä¸€ä¸ªå€¼å°†ç”¨ä½œä¸€æ¡ LDAP æ¡ç›®è¿›è¡Œæ•°æ®å­˜å‚¨çš„æ¨¡æ¿ï¼›æ¨¡æ¿ä¸­åŒ…å«äº†ä¸€ä¸ªæ¡ç›®å¿…é¡»è¢«èµ‹å€¼çš„å±æ€§å’Œå¯é€‰çš„å±æ€§ã€‚objectClass æœ‰ç€ä¸¥æ ¼çš„ç­‰çº§ä¹‹åˆ†ï¼Œæœ€é¡¶å±‚æ˜¯ top å’Œ aliasã€‚ä¾‹å¦‚ï¼ŒorganizationalPerson è¿™ä¸ª objectClass å°±éš¶å±äºpersonï¼Œè€Œ person åˆéš¶å±äº topã€‚</p>
<h3 id="æ–‡ä»¶">æ–‡ä»¶</h3>
<p>*.ldif = LDAP Data Interchange Format / LDAP æ•°æ®äº¤æ¢æ ¼å¼
ã€Œhttps://en.wikipedia.org/wiki/LDAP_Data_Interchange_Format ã€
*.schema = LDAP ç”¨æˆ·æ¨¡æ¿
ã€Œhttps://www.openldap.org/doc/admin23/schema.html ã€</p>
<h3 id="èŠ‚ç‚¹ç»„ç»‡æ¶æ„">èŠ‚ç‚¹ã€Œç»„ç»‡æ¶æ„ã€</h3>
<ul>
<li>CN = Common Name</li>
<li>OU = Organizational Unit</li>
<li>DC = Domain Component</li>
</ul>
<h3 id="å…¶ä»–">å…¶ä»–</h3>
<p>OpenLDAPç›‘å¬çš„ç«¯å£ï¼š</p>
<p>é»˜è®¤ç›‘å¬ç«¯å£ï¼š389ï¼ˆæ˜æ–‡æ•°æ®ä¼ è¾“ï¼Œé€‚ç”¨äºå¯ç”¨äº† StartTLS çš„ LDAPï¼‰= OpenLDAP ä¸åŠ å¯† / OpenLDAP over TLS
åŠ å¯†ç›‘å¬ç«¯å£ï¼š636ï¼ˆå¯†æ–‡æ•°æ®ä¼ è¾“ï¼Œé€‚ç”¨äºå¯ç”¨äº† SSL/TLS çš„ LDAPï¼‰= OpenLDAP + SSL</p>
<h2 id="å®‰è£…-openldap-server">å®‰è£… OpenLDAP Server</h2>
<h3 id="åˆå§‹åŒ–å®‰è£…ç¯å¢ƒ">åˆå§‹åŒ–å®‰è£…ç¯å¢ƒ</h3>
<h4 id="å¸è½½å·²æœ‰çš„-ldap-ç¯å¢ƒ">å¸è½½å·²æœ‰çš„ LDAP ç¯å¢ƒ</h4>
<p>è‹¥å‰æœŸå·²å®‰è£… LDAP ç›¸å…³æœåŠ¡ï¼Œå»ºè®®é¦–å…ˆå¤‡ä»½å¯¼å‡º LDAP æ•°æ®åå¸è½½ LDAP ç¨‹åº</p>
<pre><code># å…³é—­ç³»ç»ŸæœåŠ¡
systemctl stop slapd
# å¸è½½è½¯ä»¶åŒ… âš ï¸ æ³¨æ„ï¼Œä¸è¦å¸è½½ ç³»ç»Ÿçš„ openldap åŒ…
yum remove compat-openldap openldap-clients openldap-servers
# ç§»é™¤é…ç½®æ–‡ä»¶
rm -rf /var/lib/ldap/*
rm -rf /etc/openldap/slapd.d/*
</code></pre>
<h4 id="ç½®å¤‡æ“ä½œç³»ç»Ÿç¯å¢ƒ">ç½®å¤‡æ“ä½œç³»ç»Ÿç¯å¢ƒ</h4>
<pre><code>æœ€å°åŒ–å®‰è£…çš„æ“ä½œç³»ç»Ÿå³å¯
å»ºè®®é…ç½®å®Œ DNS ä»¥åŠä¸»æœºå’ŒåŸŸåï¼Œæ–¹ä¾¿æ¥å…¥åŸŸåç³»ç»Ÿ
</code></pre>
<h3 id="å¼€å§‹å®‰è£…">å¼€å§‹å®‰è£…</h3>
<h4 id="ä½¿ç”¨-rpm-åŒ…å®‰è£…">ä½¿ç”¨ rpm åŒ…å®‰è£…</h4>
<pre><code>yum install openldap openldap-clients openldap-servers
</code></pre>
<ul>
<li>openldap: æ“ä½œç³»ç»Ÿé»˜è®¤ä¼šå®‰è£…æ­¤åŒ…ï¼Œæ³¨æ„åªèƒ½å‡çº§ä¸èƒ½å¸è½½ã€‚</li>
<li>openldap-clients: LDAP çš„å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å¿…é¡»è¦å®‰è£…ï¼Œå†…ç½® LDAP æ“ä½œçš„ä¸€äº›å‘½ä»¤ã€‚</li>
<li>openldap-servers: LDAP çš„æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯å¿…é¡»è¦å®‰è£…ï¼Œä¸º LDAP çš„ä¸»ç¨‹åºï¼ŒåŒæ—¶å»ºè®®å®‰è£… openldap-clients ç”¨äºå¯¹æœåŠ¡ç«¯é…ç½®ã€‚</li>
</ul>
<h4 id="ä½¿ç”¨æœ€æ–°å®˜æ–¹æºç åŒ…å®‰è£…">ä½¿ç”¨æœ€æ–°å®˜æ–¹æºç åŒ…å®‰è£…</h4>
<blockquote>
<p>ç•¥ï¼Œrpm å°±å·²ç»å¤ŸæŠ˜è…¾çš„äº†</p>
</blockquote>
<h3 id="ç›®å½•åŠé…ç½®æ–‡ä»¶ä»‹ç»">ç›®å½•åŠé…ç½®æ–‡ä»¶ä»‹ç»</h3>
<h4 id="æ¶‰åŠæ–‡ä»¶ç®€ä»‹">æ¶‰åŠæ–‡ä»¶ç®€ä»‹</h4>
<ul>
<li><code>/var/lib/ldap/</code> ldap ç”¨æˆ·æ•°æ®ï¼Œæ‰€å±ç”¨æˆ·æ‰€å±ç»„å‡ä¸º ldapï¼Œæ•…åªæœ‰ ldap ç”¨æˆ·æ‰æœ‰è¯»å†™æƒé™ã€‚åˆšå®‰è£…å®Œæ—¶ç›®å½•æ˜¯ç©ºçš„</li>
<li><code>/etc/openldap</code> openldap çš„é…ç½®æ–‡ä»¶ç›®å½•ã€Œæ‰€æœ‰ openldap ç›¸å…³çš„é…ç½®éƒ½åœ¨æ­¤ç›®å½•ä¸‹ï¼ŒåŒ…æ‹¬client å’Œ server ä¸¤è€…é…ç½®éƒ½è¿™é‡Œã€</li>
<li><code>/usr/sbin/slapd</code> ldap ç¨‹åº</li>
<li><code>/usr/share/openldap-servers/DB_CONFIG.example</code> <strong>æ¨¡æ¿</strong> æ•°æ®åº“é…ç½®æ–‡ä»¶</li>
<li><code>/usr/share/openldap-servers/slapd.ldif</code> <strong>æ¨¡æ¿</strong> é…ç½®æ–‡ä»¶</li>
</ul>
<p>æ¯ä¸ª rpm åŒ…æ¶‰åŠçš„é…ç½®æ–‡ä»¶å¦‚ä¸‹</p>
<pre><code>[root@ldap-client ~]# rpm -qc openldap-clients
ã€ç©ºã€‘
[root@ldap-server ~]# rpm -qc openldap # ç³»ç»Ÿé»˜è®¤ä¼šå®‰è£…æ­¤åŒ…
/etc/openldap/ldap.conf # æ­¤æ–‡ä»¶ä¸º openldap rpm åŒ…çš„é…ç½®æ–‡ä»¶
/usr/lib/tmpfiles.d/openldap.conf

[root@ldap-server ~]# rpm -qc openldap-servers
/etc/openldap/check_password.conf
/etc/sysconfig/slapd
/usr/lib/tmpfiles.d/slapd.conf
# éƒ¨åˆ†æ–‡ä»¶è¯¦è§ä¸‹æ–¹ã€Œ/etc/openldap é…ç½®æ–‡ä»¶è¯¦è§£ã€éƒ¨åˆ†
</code></pre>
<h4 id="etcopenldap-é…ç½®æ–‡ä»¶è¯¦è§£">/etc/openldap é…ç½®æ–‡ä»¶è¯¦è§£</h4>
<pre><code>[root@ldap-server openldap]# tree
.
â”œâ”€â”€ certs # TLS å¯†é’¥æ–‡ä»¶å¤¹ cat /etc/openldap/slapd.d/cn\=config.ldif å¯è§é…ç½®
â”‚Â Â  â”œâ”€â”€ cert8.db
â”‚Â Â  â”œâ”€â”€ key3.db
â”‚Â Â  â”œâ”€â”€ password
â”‚Â Â  â””â”€â”€ secmod.db
â”œâ”€â”€ check_password.conf # åˆ›å»ºç”¨æˆ·å¯†ç æ—¶çš„å¯†ç è§„åˆ™ï¼ŒOpenLDAP pwdCheckerã€Œcheck_password.soã€åº“é…ç½®
â”œâ”€â”€ ldap.conf # æ­¤æ–‡ä»¶ä¸º openldap-client rpm åŒ…çš„é…ç½®æ–‡ä»¶ï¼Œé‡Œé¢ä¼šé…ç½® /etc/openldap/certs å¯†é’¥æ–‡ä»¶å¤¹åœ°å€
â”œâ”€â”€ schema # OpenLDAP çš„ schema å­˜æ”¾çš„åœ°æ–¹ï¼Œå¯ä»¥ç†è§£ä¸ºæ¨¡æ¿
â”‚Â Â  â”œâ”€â”€ collective.ldif
â”‚Â Â  â”œâ”€â”€ collective.schema
â”‚Â Â  â”œâ”€â”€ corba.ldif
â”‚Â Â  â”œâ”€â”€ corba.schema
â”‚Â Â  â”œâ”€â”€ core.ldif
â”‚Â Â  â”œâ”€â”€ core.schema
â”‚Â Â  â”œâ”€â”€ cosine.ldif
â”‚Â Â  â”œâ”€â”€ cosine.schema
â”‚Â Â  â”œâ”€â”€ duaconf.ldif
â”‚Â Â  â”œâ”€â”€ duaconf.schema
â”‚Â Â  â”œâ”€â”€ dyngroup.ldif
â”‚Â Â  â”œâ”€â”€ dyngroup.schema
â”‚Â Â  â”œâ”€â”€ inetorgperson.ldif
â”‚Â Â  â”œâ”€â”€ inetorgperson.schema
â”‚Â Â  â”œâ”€â”€ java.ldif
â”‚Â Â  â”œâ”€â”€ java.schema
â”‚Â Â  â”œâ”€â”€ misc.ldif
â”‚Â Â  â”œâ”€â”€ misc.schema
â”‚Â Â  â”œâ”€â”€ nis.ldif
â”‚Â Â  â”œâ”€â”€ nis.schema
â”‚Â Â  â”œâ”€â”€ openldap.ldif
â”‚Â Â  â”œâ”€â”€ openldap.schema
â”‚Â Â  â”œâ”€â”€ pmi.ldif
â”‚Â Â  â”œâ”€â”€ pmi.schema
â”‚Â Â  â”œâ”€â”€ ppolicy.ldif
â”‚Â Â  â””â”€â”€ ppolicy.schema
â””â”€â”€ slapd.d # å®‰è£…å®Œ server ç«¯åé»˜è®¤çš„ server é…ç½®æ–‡ä»¶ï¼Œåç»­æ–°å¢çš„æ¨¡å—ä¼šå¢åŠ åœ¨è¿™ä¸ªç›®å½•ä¸‹
    â”œâ”€â”€ cn=config # æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é…ç½®åŸŸå(olcSuffix)ï¼Œç®¡ç†å‘˜è´¦å·(olcRootDN)ç­‰
    â”‚Â Â  â”œâ”€â”€ cn=schema # LDAP å¯¼å…¥çš„æ¨¡æ¿æ–‡ä»¶å¤¹ï¼Œå¯¼å…¥æ¨¡æ¿åæ‰ä¼šå‡ºç°åœ¨è¿™é‡Œ
    â”‚Â Â  â”‚Â Â  â””â”€â”€ cn={0}core.ldif # LDAP å®‰è£…åé»˜è®¤ä¼šæœ‰ core æ¨¡å—
    â”‚Â Â  â”œâ”€â”€ cn=schema.ldif 
    â”‚Â Â  â”œâ”€â”€ olcDatabase={0}config.ldif # æ–‡ä»¶åå’Œå­—æ®µåéƒ½æœ‰å‰ç¼€&quot;olc&quot;(OpenLDAP Configuration)
    â”‚Â Â  â”œâ”€â”€ olcDatabase={-1}frontend.ldif
    â”‚Â Â  â”œâ”€â”€ olcDatabase={1}monitor.ldif
    â”‚Â Â  â””â”€â”€ olcDatabase={2}hdb.ldif # åç«¯æ•°æ®åº“é…ç½®æ–‡ä»¶
    â””â”€â”€ cn=config.ldif

5 directories, 39 files
</code></pre>
<h3 id="å¼€å§‹é…ç½®">å¼€å§‹é…ç½®</h3>
<h4 id="ç¬¬ä¸€æ­¥">ç¬¬ä¸€æ­¥</h4>
<p>ç›´æ¥å¯åŠ¨ slapd æœåŠ¡ï¼Œæ˜¯çš„ï¼Œå¯åŠ¨åå†è¿›è¡Œé…ç½®ï¼Œä¹Ÿä¸è¦æŒ‰ç…§ç½‘ä¸Šå»æ‹·è´æ•°æ®åº“ä»€ä¹ˆçš„ï¼Œç›´æ¥å¯åŠ¨å³å¯</p>
<pre><code># å¯åŠ¨ ldap
systemctl start slapd
# å¼€æœºä½¿èƒ½ ldap
systemctl enable slapd
# æŸ¥çœ‹ ldap æœåŠ¡çŠ¶æ€
systemctl status slapd
</code></pre>
<h4 id="å¼€å§‹è¿›è¡Œé…ç½®">å¼€å§‹è¿›è¡Œé…ç½®</h4>
<p>é»˜è®¤å®‰è£…å®Œ LDAP Server åå¯åŠ¨çš„æ˜¯é»˜è®¤é…ç½®ï¼Œä¾ç…§å®˜æ–¹è¯´æ³•ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>ldapmodify</code> æ¥ä¿®æ”¹é»˜è®¤é…ç½®æ¥æ»¡è¶³æˆ‘ä»¬ç”Ÿäº§ç¯å¢ƒéœ€æ±‚</p>
<ol>
<li>å»ºè®®é¦–å…ˆä¿®æ”¹ rootDNï¼ŒrootDN æ˜¯ DN çš„æ ¹ï¼Œæ˜¯åç»­ä¸€åˆ‡çš„åŸºç¡€ã€‚</li>
</ol>
<pre><code>vim stan.ldif

dn: olcDatabase={2}hdb,cn=config # æ•°æ®åº“ç±»å‹æ–‡ä»¶è¦æŒ‰ç…§è‡ªå·±çš„æ•°æ®åº“ç‰ˆæœ¬ä¿®æ”¹
changetype: modify # æ“ä½œç±»å‹æ˜¯ä¿®æ”¹
replace: olcRootDN # æ“ä½œç›®æ ‡ä¸ºé‡ç½® RootDN
olcRootDN: cn=admin,dc=expwd,dc=com # æ›¿æ¢ä¸ºè‡ªå·±çš„æ ¹åŸŸ
-
replace: olcSuffix # æ“ä½œç›®æ ‡ä¸ºé‡ç½® Suffix
olcSuffix: dc=expwd,dc=com # æ›¿æ¢ä¸ºè‡ªå·±çš„æ ¹åŸŸ
</code></pre>
<p>è¿™è¾¹ <code>olcDatabase={2}hdb</code> æ–‡ä»¶æ˜¯ LDAP æ•°æ®åº“é…ç½®æ–‡ä»¶ï¼Œä¸åŒå‘å‹ç‰ˆæœ¬ç”¨çš„æ•°æ®åº“å¯èƒ½ä¸åŒï¼Œè¿™é‡Œéœ€è¦ä¿®æ”¹ <code>olcDatabase={2}hdb</code> ä¸ºå®é™…çš„æ–‡ä»¶ï¼Œæ–‡ä»¶è·¯å¾„ä¸º <code>/etc/openldap/slapd.d/cn=config/olcDatabase={2}hdb.ldif</code> ï¼Œè¿™é‡Œå®é™…æ–‡ä»¶å¯èƒ½æ˜¯ <code>bdb</code>ï¼Œä¹Ÿå¯èƒ½æ˜¯ <code>mdb</code>ï¼Œè¯¦ç»†å¯è§é™„å½•ã€Œ<strong>å…³äº mdb hdb bdb åç«¯æ•°æ®åº“</strong>ã€éƒ¨åˆ†è§£é‡Šã€‚</p>
<ol start="2">
<li>ä½¿ç”¨ <code>ldapmodify</code> æ¥é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ</li>
</ol>
<pre><code>ldapmodify -Q -Y EXTERNAL -H ldapi:/// -f stan.ldif
</code></pre>
<ol start="3">
<li>åŒç†ç»™ RootDN çš„ admin ç”¨æˆ·é‡è®¾å¯†ç </li>
</ol>
<p>è®¾ç½®å®Œå¯†ç åå°±å¯ä»¥é€šè¿‡ LDAP ç®¡ç†è½¯ä»¶ä½¿ç”¨ admin çš„ dn å’Œå¯†ç ç™»é™†ã€‚
å‚è€ƒé“¾æ¥ï¼Œæ–‡ç« å†…è®²çš„æ¯”è¾ƒè¯¦ç»†ï¼ŒåŒ…æ‹¬å¦‚ä½•æ‰¾åˆ° RootDN ä¿¡æ¯ç­‰ã€‚
<a href="https://www.digitalocean.com/community/tutorials/how-to-change-account-passwords-on-an-openldap-server#changing-the-rootdn-password">https://www.digitalocean.com/community/tutorials/how-to-change-account-passwords-on-an-openldap-server#changing-the-rootdn-password</a></p>
<pre><code>vim stan-pwd.ldif

dn: olcDatabase={2}hdb,cn=config
#olcRootDN: cn=admin,dc=expwd,dc=com
changetype: modify
replace: olcRootPW
olcRootPW: {SSHA}AOvsPeLZYEpxBA8sdY2r9DSeZkuxlxxg
</code></pre>
<pre><code>ldapmodify -Q -Y EXTERNAL -H ldapi:/// -f stan-pwd.ldif
</code></pre>
<p>æ³¨ï¼šå…¶å®åªè¦æŠŠä¿®æ”¹ RootDN é‚£ä¸€æ­¥çš„é…ç½®æ–‡ä»¶æ”¹æˆå¦‚ä¸‹å³å¯ï¼Œä¸€æ¬¡æ€§å°±èƒ½æ”¹å®Œ</p>
<pre><code>vim stan.ldif

dn: olcDatabase={2}hdb,cn=config # æ•°æ®åº“ç±»å‹æ–‡ä»¶è¦æŒ‰ç…§è‡ªå·±çš„æ•°æ®åº“ç‰ˆæœ¬ä¿®æ”¹
changetype: modify # æ“ä½œç±»å‹æ˜¯ä¿®æ”¹
replace: olcRootDN # æ“ä½œç›®æ ‡ä¸ºé‡ç½® RootDN
olcRootDN: cn=admin,dc=expwd,dc=com # æ›¿æ¢ä¸ºè‡ªå·±çš„æ ¹åŸŸ
-
replace: olcSuffix # æ“ä½œç›®æ ‡ä¸ºé‡ç½® Suffix
olcSuffix: dc=expwd,dc=com # æ›¿æ¢ä¸ºè‡ªå·±çš„æ ¹åŸŸ
-
replace: olcRootPW
olcRootPW: {SSHA}AOvsPeLZYEpxBA8sdY2r9DSeZkuxlxxg
</code></pre>
<blockquote>
<p>åˆ°è¿™ä¸€æ­¥å»ºè®®å®‰è£…å…ˆä¸€ä¸‹ phpldapadminï¼Œä¹Ÿå¯ä»¥è·³è¿‡åå»å†è£…ï¼Œå› ä¸ºåæœŸçš„å‘½ä»¤è¡Œæ“ä½œå¯ä»¥ç›´è§‚åœ°åœ¨ç½‘é¡µä¸Šçœ‹åˆ°ç›®å‰ LDAP çš„çŠ¶æ€
<img src="media/16486490653044.png" alt=""></p>
</blockquote>
<h4 id="å¯¼å…¥è‡ªå¸¦-schema">å¯¼å…¥è‡ªå¸¦ Schema</h4>
<pre><code>ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/cosine.ldif
ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/nis.ldif
ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/inetorgperson.ldif

</code></pre>
<blockquote>
<p>ä¸ºä»€ä¹ˆè¦å…ˆå¯¼å…¥è¿™å‡ ä¸ªæ¨¡å—å‘¢ï¼Ÿå› ä¸ºä¸‹é¢çš„ memberOf æ¨¡å—è¦ç”¨ ğŸ¤ª</p>
</blockquote>
<h4 id="åˆå§‹åŒ–åŸºç¡€ç›®å½•ç»“æ„">åˆå§‹åŒ–åŸºç¡€ç›®å½•ç»“æ„</h4>
<pre><code>vim stan-user.ldif

dn: dc=expwd,dc=com
objectClass: dcObject
objectClass: organization
o: expwd.com
dc: expwd

dn: ou=users,dc=expwd,dc=com
objectClass: organizationalUnit
objectClass: top
ou: users

dn: ou=groups,dc=expwd,dc=com
objectClass: organizationalUnit
objectClass: top
ou: groups
</code></pre>
<pre><code>ldapadd -x -W -D &quot;cn=admin,dc=expwd,dc=com&quot; -f stan-user.ldif
</code></pre>
<blockquote>
<p>å¯¼å…¥å®Œæˆåç›®å½•ç»“æ„æ˜¯è¿™æ ·çš„
<img src="media/%E6%88%AA%E5%B1%8F2022-03-30%2023.32.00.png" alt="æˆªå±2022-03-30 23.32.00">
<img src="https://raw.githubusercontent.com/iDOKER/SupportProj/main/MarkdownPic/2024/20241219223103512.png" alt=""></p>
</blockquote>
<h4 id="å®‰è£…å®Œæ¯•">å®‰è£…å®Œæ¯•</h4>
<p>ğŸ‰ è‡³æ­¤ï¼ŒåŸºç¡€çš„ LDAP æœåŠ¡å·²å…¨éƒ¨å®‰è£…å®Œæ¯•ï¼Œå»ºè®®ç»§ç»­æ·»åŠ ä¸€äº›æ¨¡å—å¹¶ä¸”è®¾è®¡å¥½æ•´ä¸€ä¸ª LDAP çš„ç›®å½•ç»“æ„ï¼Œé¿å…åæœŸå› ä¸ºè®¾è®¡ä¸åˆç†çš„å¤§è§„æ¨¡è¿ç§»è°ƒæ•´ã€‚</p>
<h4 id="æ·»åŠ -memberof-æ¨¡å—">æ·»åŠ  memberOf æ¨¡å—</h4>
<p>ç›®å‰æœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹åº”ç”¨ã€äº‘å¹³å°çš„ LDAP é…ç½®éœ€è¦æ£€æŸ¥è¿™ä¸ªå±æ€§ï¼ŒmemberOf æ¨¡å—çš„ä½œç”¨æ˜¯ï¼Œå½“ä½ å»ºä¸€ä¸ªç»„çš„æ—¶å€™ï¼ŒæŠŠä¸€äº›ç”¨æˆ·æ·»åŠ åˆ°è¿™ä¸ªç»„é‡Œå»ï¼Œå®ƒä¼šè‡ªåŠ¨ç»™è¿™äº›ç”¨æˆ·æ·»åŠ ä¸€ä¸ª memberOf å±æ€§ã€‚</p>
<ul>
<li>add-memberof.ldif</li>
</ul>
<pre><code>[root@ldap-server memberof]# cat add-memberof.ldif
# å¼€å¯ memberof æ”¯æŒ
dn: cn=module{0},cn=config
cn: modulle{0}
objectClass: olcModuleList
objectclass: top
olcModuleload: memberof.la
olcModulePath: /usr/lib64/openldap

# æ–°å¢ç”¨æˆ·æ”¯æŒ memberof é…ç½®
dn: olcOverlay={0}memberof,olcDatabase={2}hdb,cn=config
objectClass: olcConfig
objectClass: olcMemberOf
objectClass: olcOverlayConfig
objectClass: top
olcOverlay: memberof
olcMemberOfDangling: ignore
olcMemberOfRefInt: TRUE
olcMemberOfGroupOC: groupOfUniqueNames
olcMemberOfMemberAD: uniqueMember
olcMemberOfMemberOfAD: memberOf
</code></pre>
<ul>
<li>refint1.ldif</li>
</ul>
<pre><code>[root@ldap-server memberof]# cat refint1.ldif
dn: cn=module{0},cn=config
add: olcmoduleload
olcmoduleload: refint
</code></pre>
<ul>
<li>refint2.ldif</li>
</ul>
<pre><code>[root@ldap-server memberof]# cat refint2.ldif
dn: olcOverlay=refint,olcDatabase={2}hdb,cn=config
objectClass: olcConfig
objectClass: olcOverlayConfig
objectClass: olcRefintConfig
objectClass: top
olcOverlay: refint
olcRefintAttribute: memberof uniqueMember manager owner
</code></pre>
<ul>
<li>ä½¿ç”¨å‘½ä»¤å°†æ¨¡å—å¯¼å…¥ LDAP</li>
</ul>
<pre><code>ldapadd -Q -Y EXTERNAL -H ldapi:/// -f add-memberof.ldif
ldapmodify -Q -Y EXTERNAL -H ldapi:/// -f refint1.ldif
ldapadd -Q -Y EXTERNAL -H ldapi:/// -f refint2.ldif
</code></pre>
<ul>
<li>æ£€æŸ¥æ¨¡å—æ˜¯å¦ç”Ÿæ•ˆ</li>
</ul>
<pre><code>ldapsearch -Q -LLL -Y EXTERNAL -H ldapi:/// -b cn=config dn
</code></pre>
<h2 id="ä¸€äº›ç®¡ç†å·¥å…·">ä¸€äº›ç®¡ç†å·¥å…·</h2>
<h3 id="å®‰è£…-phpldapadmin">å®‰è£… phpldapadmin</h3>
<h4 id="ç®€ä»‹-1">ç®€ä»‹</h4>
<p>phpldapadmin æ˜¯ä½¿ç”¨ php è¯­è¨€å¼€å‘çš„ web ç«¯ç®¡ç† ldap çš„åº”ç”¨ã€‚
ä¸åŒæ“ä½œç³»ç»Ÿå»ºè®®å…ˆçœ‹ä¸‹å®˜æ–¹å®‰è£…æ–¹å¼åè¿›è¡Œå®‰è£…ã€‚
<a href="http://phpldapadmin.sourceforge.net/wiki/index.php/Download">http://phpldapadmin.sourceforge.net/wiki/index.php/Download</a>
<a href="https://sourceforge.net/projects/phpldapadmin/files/">https://sourceforge.net/projects/phpldapadmin/files/</a></p>
<h4 id="å®‰è£…centos-7-ç¯å¢ƒ">å®‰è£…ã€ŒCentOS 7 ç¯å¢ƒã€</h4>
<p>è¿™é‡Œé‡‡ç”¨ httpd + php + phpldapadmin çš„å®‰è£…æ–¹æ¡ˆï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ nginx ä½œä¸º Web å®¹å™¨ã€‚</p>
<pre><code>yum install -y httpd
yum install -y epel-release # CentOS 7
yum install -y phpldapadmin
# yum install -y php php-ldap php-gd php-mbstring php-pear php-bcmath php-xml
# ä¸éœ€è¦è£… phpï¼Œåœ¨å®‰è£… phpldapadmin çš„æ—¶å€™ä¼šè‡ªè¡Œè§£å†³ä¾èµ–

===============================================================================================
 Package                  æ¶æ„               ç‰ˆæœ¬                       æº                å¤§å°
===============================================================================================
æ­£åœ¨å®‰è£…:
 phpldapadmin             noarch             1.2.5-1.el7                epel             797 k
ä¸ºä¾èµ–è€Œå®‰è£…:
 libzip                   x86_64             0.10.1-8.el7               base              48 k
 php                      x86_64             5.4.16-48.el7              base             1.4 M
 php-cli                  x86_64             5.4.16-48.el7              base             2.7 M
 php-common               x86_64             5.4.16-48.el7              base             565 k
 php-ldap                 x86_64             5.4.16-48.el7              base              53 k

äº‹åŠ¡æ¦‚è¦
===============================================================================================
å®‰è£…  1 è½¯ä»¶åŒ… (+5 ä¾èµ–è½¯ä»¶åŒ…)
</code></pre>
<p>éœ€è¦ä¿®æ”¹çš„é…ç½®æ–‡ä»¶</p>
<pre><code>[root@ldap-client ~]# rpm -qc phpldapadmin-1.2.5-1.el7.noarch
/etc/httpd/conf.d/phpldapadmin.conf
/etc/phpldapadmin/config.php
</code></pre>
<ul>
<li>/etc/httpd/conf.d/phpldapadmin.conf</li>
</ul>
<pre><code># cat /etc/httpd/conf.d/phpldapadmin.conf
#
#  Web-based tool for managing LDAP servers
#
Alias /phpldapadmin /usr/share/phpldapadmin/htdocs
Alias /ldapadmin /usr/share/phpldapadmin/htdocs
&lt;Directory /usr/share/phpldapadmin/htdocs&gt;
 &lt;IfModule mod_authz_core.c&gt;
   # Apache 2.4
   Require local
   Require all granted # åŠ è¿™ä¸€è¡Œ
 &lt;/IfModule&gt;
 &lt;IfModule !mod_authz_core.c&gt;
   # Apache 2.2
   Order Deny,Allow
   Deny from all
   Allow from 127.0.0.1
   Allow from ::1
 &lt;/IfModule&gt;
&lt;/Directory&gt;
</code></pre>
<ul>
<li>/etc/phpldapadmin/config.php</li>
</ul>
<pre><code># å…¶å®ä¸éœ€è¦è¿™ä¹ˆé…ç½®ï¼Œåªå°±æ˜¯èƒ½ä½¿ç”¨
# ä¸‹æ–¹å‚æ•°åªæ˜¯æŠŠç™»é™†çš„ç”¨æˆ·åä» uid æ”¹ä¸ºä½¿ç”¨ dn æ–¹å¼ç™»é™†äº†

$servers-&gt;setValue('login','attr','dn');
//$servers-&gt;setValue('login','attr','uid');

æŠŠ$servers-&gt;setValue('login','anon_bind',false);æ”¹æˆfalseï¼Œå› ä¸ºæˆ‘ä»¬ä¸æƒ³è®©äººåŒ¿åè®¿é—®ï¼›
æŠŠ$servers-&gt;setValue('login','allowed_dns',array('cn=admin,dc=qiban,dc=com'));ï¼Œæˆ‘ä»¬åªå…è®¸ç®¡ç†å‘˜è®¿é—®ï¼Œå…¶ä»–ä»»ä½•äººä¸å¾—è®¿é—®ã€‚
</code></pre>
<h4 id="å¯åŠ¨">å¯åŠ¨</h4>
<pre><code>systemctl restart httpd
</code></pre>
<h3 id="å®‰è£…-self-service-password">å®‰è£… Self Service Password</h3>
<h4 id="ç®€ä»‹-2">ç®€ä»‹</h4>
<p>Self Service Password æ˜¯ä¸€ä¸ª Web åº”ç”¨ï¼Œå¯ä»¥è®©ç”¨æˆ·è‡ªè¡Œæ›´æ–°ã€ä¿®æ”¹å’Œé‡ç½® LDAP ä¸­çš„ç”¨æˆ·å¯†ç ã€‚æ”¯æŒæ ‡å‡†çš„ LDAPv3 ç›®å½•æœåŠ¡ï¼ŒåŒ…æ‹¬ï¼šOpenLDAP,Active Directory,OpenDS,ApacheDSç­‰ã€‚
<a href="https://github.com/ltb-project/self-service-password">https://github.com/ltb-project/self-service-password</a>
<a href="https://self-service-password.readthedocs.io/en/latest/installation.html">https://self-service-password.readthedocs.io/en/latest/installation.html</a></p>
<h4 id="å®‰è£…centos-7-ç¯å¢ƒ-1">å®‰è£…ã€ŒCentOS 7 ç¯å¢ƒã€</h4>
<ul>
<li>é…ç½® yum æº</li>
</ul>
<pre><code>vi /etc/yum.repos.d/ltb-project.repo

[ltb-project-noarch]
name=LTB project packages (noarch)
baseurl=https://ltb-project.org/rpm/$releasever/noarch
enabled=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-LTB-project
</code></pre>
<ul>
<li>ä½¿ç”¨ yum è¿›è¡Œå®‰è£…</li>
</ul>
<pre><code># yum update # å¯çœç•¥
rpm --import https://ltb-project.org/wiki/lib/RPM-GPG-KEY-LTB-project
yum install self-service-password

=======================================================================
 Package               æ¶æ„   ç‰ˆæœ¬            æº                  å¤§å°
=======================================================================
æ­£åœ¨å®‰è£…:
 self-service-password noarch 1.4.3-1.el7     ltb-project-noarch 2.3 M
ä¸ºä¾èµ–è€Œå®‰è£…:
 libX11                x86_64 1.6.7-4.el7_9   updates            607 k
 libX11-common         noarch 1.6.7-4.el7_9   updates            164 k
 libXau                x86_64 1.0.8-2.1.el7   base                29 k
 libXpm                x86_64 3.5.12-1.el7    base                55 k
 libjpeg-turbo         x86_64 1.2.90-8.el7    base               135 k
 libxcb                x86_64 1.13-1.el7      base               214 k
 php-Smarty            noarch 3.1.33-1.el7    epel               238 k
 php-gd                x86_64 5.4.16-48.el7   base               128 k
 php-mbstring          x86_64 5.4.16-48.el7   base               506 k
 t1lib                 x86_64 5.1.2-14.el7    base               166 k

äº‹åŠ¡æ¦‚è¦
=======================================================================
å®‰è£…  1 è½¯ä»¶åŒ… (+10 ä¾èµ–è½¯ä»¶åŒ…)
</code></pre>
<p>ä¿®æ”¹éœ€è¦çš„é…ç½®æ–‡ä»¶</p>
<pre><code>rpm -qc self-service-password.noarch 0:1.4.3-1.el7
/etc/httpd/conf.d/self-service-password.conf
/usr/share/self-service-password/conf/config.inc.php
</code></pre>
<ol>
<li>/usr/share/self-service-password/conf/config.inc.php</li>
</ol>
<pre><code># LDAP
$ldap_url = &quot;ldaps://localhost:636&quot;;
$ldap_starttls = false;
$ldap_binddn = &quot;cn=admin,dc=expwd,dc=com&quot;;
$ldap_bindpw = &quot;12345678900&quot;;
$ldap_base = &quot;dc=expwd,dc=com&quot;;
$ldap_login_attribute = &quot;uid&quot;;
$ldap_fullname_attribute = &quot;cn&quot;; # æ­¤å¤„é…ç½®è¦å’Œä¸Šé¢ LDAP ç™»é™†é…ç½®ä¸€è‡´ï¼Œæˆ‘è¿™è¾¹ä¸Šé¢æ˜¯ dn
$ldap_filter = &quot;(&amp;(objectClass=person)($ldap_login_attribute={login}))&quot;;


## Mail # å¿…é¡»è¦é…ç½®æˆåŠŸ Mail æ‰èƒ½è®¿é—®åˆ°ç½‘é¡µ
## Mail
# LDAP mail attribute
$mail_attribute = &quot;mail&quot;;
# Get mail address directly from LDAP (only first mail entry)
# and hide mail input field
# default = false
$mail_address_use_ldap = false;
# Who the email should come from
$mail_from = &quot;admin@expwd.com&quot;;
$mail_from_name = &quot;Self Service Password&quot;;
$mail_signature = &quot;&quot;;
# Notify users anytime their password is changed
$notify_on_change = false;
# PHPMailer configuration (see https://github.com/PHPMailer/PHPMailer)
$mail_sendmailpath = '/usr/sbin/sendmail';
$mail_protocol = 'smtp';
$mail_smtp_debug = 0;
$mail_debug_format = 'error_log';
$mail_smtp_host = 'localhost';
$mail_smtp_auth = false;
$mail_smtp_user = 'admin@expwd.com';
$mail_smtp_pass = '12121212';
$mail_smtp_port = 25;
$mail_smtp_timeout = 30;
$mail_smtp_keepalive = false;
$mail_smtp_secure = 'tls';
$mail_smtp_autotls = true;
$mail_smtp_options = array();
$mail_contenttype = 'text/plain';
$mail_wordwrap = 0;
$mail_charset = 'utf-8';
$mail_priority = 3;
</code></pre>
<ol start="2">
<li>/etc/httpd/conf.d/self-service-password.conf</li>
</ol>
<pre><code>æ— éœ€ä¿®æ”¹
</code></pre>
<h4 id="å¯åŠ¨-1">å¯åŠ¨</h4>
<p>å¿…é¡»è¦é…ç½®æˆåŠŸ Mail æ‰èƒ½è®¿é—®åˆ°ç½‘é¡µ</p>
<pre><code>systemctl start httpd
</code></pre>
<h3 id="macos-å®‰è£…-apachedirectorystudio">macOS å®‰è£… ApacheDirectoryStudio</h3>
<h4 id="ç®€ä»‹-3">ç®€ä»‹</h4>
<p>Apache Directory Studio æ˜¯ä¸€ä¸ª LDAP çš„å·¥å…·å¹³å°ï¼Œç”¨æ¥è¿æ¥åˆ°ä»»ä½• LDAP æœåŠ¡å™¨å¹¶è¿›è¡Œç®¡ç†å’Œå¼€å‘å·¥ä½œã€‚
ä¸»è¦åŠŸèƒ½ï¼šLDAPæµè§ˆå™¨ã€LDIFç¼–è¾‘å™¨ã€åµŒå…¥å¼ ApacheDSã€ACIç¼–è¾‘å™¨ã€‚</p>
<blockquote>
<p>macOS version 10.10 (Yosemite) or later.
Java 11 or later, we recommend <a href="https://adoptopenjdk.net/">AdoptOpenJDK</a>.</p>
</blockquote>
<p><a href="https://directory.apache.org/studio/">https://directory.apache.org/studio/</a>
<a href="https://directory.apache.org/studio/downloads.html">https://directory.apache.org/studio/downloads.html</a></p>
<h4 id="å®‰è£…">å®‰è£…</h4>
<p>å»ºè®®ä½¿ç”¨ brew å®‰è£… temurinã€Œjdk17ã€ï¼Œå¦‚æœå·²ç»åœ¨ä½¿ç”¨ Eclipse çš„ç”¨æˆ·ï¼Œç›´æ¥åŠ è½½ Eclipse æ’ä»¶å°±å¯ä»¥äº†</p>
<pre><code>brew install --cask temurin
brew install apache-directory-studio
</code></pre>
<p>ä¹‹åå°±æ˜¯å›¾å½¢åŒ–çš„ä¸€äº›æ“ä½œäº†</p>
<h3 id="ldapscripts-è¾…åŠ©è„šæœ¬">ldapscripts è¾…åŠ©è„šæœ¬</h3>
<p><a href="https://github.com/martymac/ldapscripts">https://github.com/martymac/ldapscripts</a></p>
<p>ç”¨äºè„šæœ¬å¿«é€Ÿåˆ›å»º Unix ç”¨æˆ·ï¼Œçœ‹ä¸€çœ¼å°±ä¼šç”¨</p>
<h3 id="ldap-tool-box">LDAP TOOL BOX</h3>
<p><a href="https://ltb-project.org/download.html#self_service_password">https://ltb-project.org/download.html#self_service_password</a></p>
<h2 id="é™„å½•">é™„å½•</h2>
<h3 id="å¯¼å…¥åŸºæœ¬-scheme">å¯¼å…¥åŸºæœ¬ scheme</h3>
<pre><code>ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/cosine.ldif
ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/nis.ldif
ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/inetorgperson.ldif
ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/collective.ldif
ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/corba.ldif
ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/duaconf.ldif
ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/dyngroup.ldif
ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/java.ldif
ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/misc.ldif
ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/openldap.ldif
ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/pmi.ldif
ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/ppolicy.ldif
</code></pre>
<h3 id="å…³äº-mdb-hdb-bdb-åç«¯æ•°æ®åº“">å…³äº mdb hdb bdb åç«¯æ•°æ®åº“</h3>
<p>hdb åç«¯å·²å–ä»£ bdb åç«¯ï¼ŒåŒæ—¶ä¸¤è€…å¾ˆå¿«ä¹Ÿä¼šå¼ƒç”¨ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯æ–°çš„ mdb åç«¯ï¼ŒåŸå› æ˜¯ Oracle æ›´æ”¹äº†è®¸å¯ï¼Œåˆ é™¤äº† BDB 6 åŠæ›´é«˜ç‰ˆæœ¬ä¸ OpenLDAP è½¯ä»¶çš„å…¼å®¹æ€§ã€‚</p>
<p><a href="https://3bmahv3xwn6030jbn72hlx3j-wpengine.netdna-ssl.com/wp-content/uploads/2018/08/Upgrade-from-BDB-HDB-to-MDB.pdf">å‡çº§åˆ° mdb - Upgrade-from-BDB-HDB-to-MDB</a></p>
<p><a href="https://www.openldap.org/faq/data/cache/756.html">https://www.openldap.org/faq/data/cache/756.html</a></p>
<pre><code>back-mdb is the &quot;primary&quot; storage database backend. This backend manages directory objects in an embedded database and is more fully featured than other backends. back-mdb is superior to the deprecated back-hdb and back-bdb backends.
back-bdb and back-hdb are deprecated backends based on BerkeleyDB.
</code></pre>
<p><a href="https://www.openldap.org/doc/admin24/backends.html">https://www.openldap.org/doc/admin24/backends.html</a></p>
<pre><code>The hdb backend has superseded the bdb backend, and both will soon be deprecated in favor of the new mdb backend. See below.
</code></pre>
<h3 id="å…³äº-scheme-ä¸æ“ä½œç³»ç»Ÿç”¨æˆ·ä¹‹é—´çš„æ˜ å°„">å…³äº scheme ä¸æ“ä½œç³»ç»Ÿç”¨æˆ·ä¹‹é—´çš„æ˜ å°„</h3>
<p>å¯æœç´¢ã€ŒRFC4519 rfc2307bis.ldifã€ç›¸å…³æ ‡å‡†è§£é‡Šï¼Œç›¸å…³æ ‡å‡†å·²åœ¨æ“ä½œç³»ç»Ÿä¸­é»˜è®¤åšå¥½ç”¨æˆ·ä¸ç»„çš„æ˜ å°„å…³ç³»åŒ¹é…ã€‚</p>
<h3 id="ç›¸å…³å¸¸ç”¨æ“ä½œ">ç›¸å…³å¸¸ç”¨æ“ä½œ</h3>
<blockquote>
<p>ç”±äºæ­¤ç¯‡æ–‡ç« å·²ç»å¾ˆé•¿äº†ï¼Œæ“ä½œåŠä½¿ç”¨ç›¸å…³çš„å‘½ä»¤åæœŸå†å†™æ–‡ç« ç»†è¯´</p>
</blockquote>
<h4 id="slapd">slapd</h4>
<h4 id="ldapmodify">ldapmodify</h4>
<h4 id="ldapadd">ldapadd</h4>
<h4 id="ldapsearch">ldapsearch</h4>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<p>ã€ŒOpenldap å®‰è£…ä½¿ç”¨ã€
<a href="https://www.cnblogs.com/fan-yi/p/14915041.html">https://www.cnblogs.com/fan-yi/p/14915041.html</a>
ã€Œæˆ‘èŠ±äº†ä¸€ä¸ªäº”ä¸€ç»ˆäºææ‡‚äº†OpenLDAPã€
<a href="https://segmentfault.com/a/1190000014683418">https://segmentfault.com/a/1190000014683418</a>
ã€Œå†…éƒ¨ldapå®è·µã€è¿™ç¯‡æ–‡ç« é‡Œé¢æ‰‹åŠ¨ä¿®æ”¹é…ç½®æ–‡ä»¶äº†ï¼Œä¸å¯å–ï¼Œåªåšå‚è€ƒ
<a href="https://1661691223.github.io/2019/11/15/ldap-train/">https://1661691223.github.io/2019/11/15/ldap-train/</a>
ã€ŒOpenLDAPå®‰è£…ä¸é…ç½®ã€è¿™ç¯‡æ–‡ç« é‡Œé¢æ‰‹åŠ¨ä¿®æ”¹é…ç½®æ–‡ä»¶äº†ï¼Œä¸å¯å–ï¼Œåªåšå‚è€ƒ
<a href="https://www.cnblogs.com/js1314/p/12887893.html">https://www.cnblogs.com/js1314/p/12887893.html</a>
ã€ŒHow To Change Account Passwords on an OpenLDAP Serverã€
<a href="https://www.digitalocean.com/community/tutorials/how-to-change-account-passwords-on-an-openldap-server#changing-the-rootdn-password">https://www.digitalocean.com/community/tutorials/how-to-change-account-passwords-on-an-openldap-server#changing-the-rootdn-password</a>
ã€ŒLDAP(ä¸€)ä¹‹æ¦‚å¿µåŸç†ä»‹ç»ã€
<a href="https://www.jianshu.com/p/27ab7a5d56a4">https://www.jianshu.com/p/27ab7a5d56a4</a>
ã€ŒCentos7 æ­å»ºopenldapå®Œæ•´è¯¦ç»†æ•™ç¨‹(çœŸå®å¯ç”¨)ã€
<a href="https://www.cnblogs.com/jiligalaer/p/13300371.html">https://www.cnblogs.com/jiligalaer/p/13300371.html</a>
<a href="https://blog.csdn.net/weixin_41004350/article/details/89521170">https://blog.csdn.net/weixin_41004350/article/details/89521170</a>
<a href="https://blog.csdn.net/weixin_41004350?type=blog">https://blog.csdn.net/weixin_41004350?type=blog</a>
ã€Œå¦‚ä½•åœ¨OpenLDAPå¯ç”¨MemberOfã€
<a href="https://blog.csdn.net/qq_23191379/article/details/106867730">https://blog.csdn.net/qq_23191379/article/details/106867730</a>
ã€ŒLDAPæ·»åŠ  memberOf æ¨¡å—ã€
<a href="https://blog.csdn.net/u011607971/article/details/119037796">https://blog.csdn.net/u011607971/article/details/119037796</a>
<a href="https://cloud.tencent.com/developer/article/1349459">https://cloud.tencent.com/developer/article/1349459</a>
ã€ŒServer:server:tlsã€
<a href="http://phpldapadmin.sourceforge.net/wiki/index.php/Server:server:tls">http://phpldapadmin.sourceforge.net/wiki/index.php/Server:server:tls</a>
ã€ŒLightweight Directory Access Protocol (LDAP):Schema for User Applicationsã€é‡Œé¢è¯¦ç»†æè¿°äº†ä¸€ä¸ª rfc4519 æ ‡å‡† RDN å„ä¸ªå­—æ®µçš„å«ä¹‰
<a href="https://www.ietf.org/rfc/rfc4519.txt">https://www.ietf.org/rfc/rfc4519.txt</a>
ã€ŒLDAPå­¦ä¹ ç¬”è®°æ€»ç»“ã€
<a href="https://www.cnblogs.com/kevingrace/p/5773974.html">https://www.cnblogs.com/kevingrace/p/5773974.html</a>
ã€Œ# Chapter 6. LDAP Configurationã€
<a href="https://www.zytrax.com/books/ldap/ch6/#list">https://www.zytrax.com/books/ldap/ch6/#list</a>
ã€Œ# Chapter 6.1.1: OpenLDAP using OLC (cn=config)ã€
<a href="https://www.zytrax.com/books/ldap/ch6/slapd-config.html#use">https://www.zytrax.com/books/ldap/ch6/slapd-config.html#use</a></p>

    </div>
    <div class="article-footer">
<blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    <li class="post-copyright-link hidden-xs">
      <strong>æœ¬æ–‡é“¾æ¥: </strong>
      <a href="https://blog.standuke.top/2022/03/2022-03-23-ldap-%E4%BC%81%E4%B8%9A%E9%83%A8%E7%BD%B2%E5%AE%9E%E6%88%98/" title="LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£…" target="_blank" rel="external">https://blog.standuke.top/2022/03/2022-03-23-ldap-%E4%BC%81%E4%B8%9A%E9%83%A8%E7%BD%B2%E5%AE%9E%E6%88%98/</a>
    </li>
    <li class="post-copyright-license">
      <strong>License: </strong>
        <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN</a>
    </li>
  </ul>
</blockquote>

<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://www.standuke.top" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="https://blog.standuke.top/avatar.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://www.standuke.top" target="_blank"><span class="text-dark">Standuke</span><small class="ml-1x">Yunshen Technology Co., Ltd. - SRE Engineer</small></a></h3>
        <div>Focus on Linux Openstack Kubernetes vSphere Photograph Coding</div>
      </div>
    </figure>
  </div>
</div>

    </div>
  </article>
<section id="comments">
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
</section>

</div><nav class="bar bar-footer clearfix" data-stick-bottom>
    <div class="bar-inner">
        <ul class="pager pull-left">
            <li class="prev">
                <a href="https://blog.standuke.top/2021/07/2021-07-06-linux-%E5%AE%9A%E6%97%B6%E5%8D%95%E6%AC%A1%E5%8F%8A%E5%91%A8%E6%9C%9F%E4%BB%BB%E5%8A%A1/" title="Linux å®šæ—¶å•æ¬¡åŠå‘¨æœŸä»»åŠ¡"><i
                        class="icon icon-angle-left"
                        aria-hidden="true"></i><span>&nbsp;&nbsp;ä¸‹ä¸€ç¯‡</span></a>
            </li>
            <li class="next">
                <a href="https://blog.standuke.top/2022/04/2022-04-01-ldap-%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%80%9A%E8%BF%87-sssd-%E6%9C%8D%E5%8A%A1%E5%AE%8C%E6%88%90%E6%8E%A5%E5%85%A5/"
                    title="LDAP å®¢æˆ·ç«¯é€šè¿‡ sssd æœåŠ¡å®Œæˆæ¥å…¥"><span>ä¸Šä¸€ç¯‡&nbsp;&nbsp;</span><i
                        class="icon icon-angle-right" aria-hidden="true"></i></a>
            </li>
            
            <li class="toggle-toc">
                <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false"
                    title="æ–‡ç« ç›®å½•" role="button">
                    <span>[&nbsp;</span><span>æ–‡ç« ç›®å½•</span>
                    <i class="text-collapsed icon icon-anchor"></i>
                    <i class="text-in icon icon-close"></i>
                    <span>]</span>
                </a>
            </li>
        </ul>
        <div class="bar-right">
            <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter,google,linkedin"
                data-mobile-sites="wechat,qq,facebook,twitter"></div>
        </div>
    </div>
</nav>


</main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
<ul class="social-links">
    <li><a href="https://github.com/idoker" target="_blank" title="github" data-toggle=tooltip data-placement=top >
            <i class="icon icon-github"></i></a></li>
    <li><a href="https://blog.standuke.top/index.xml" target="_blank" title="rss" data-toggle=tooltip data-placement=top >
            <i class="icon icon-rss"></i></a></li>
</ul>
  <div class="copyright">
    &copy;2016  -
    2024
    <div class="publishby">
        Theme by <a href="https://github.com/xiaoheiAh" target="_blank"> xiaoheiAh </a>base on<a href="https://github.com/xiaoheiAh/hugo-theme-pure" target="_blank"> pure</a>.
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
            showMathMenu: false, //disables context menu
            tex2jax: {
            inlineMath: [ ['$','$'], ['\\(','\\)'] ]
           }
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script>
    window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/highlight.min.js"></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/shell.min.js" defer></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/python.min.js" defer></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/javascript.min.js" defer></script><script>
    hljs.configure({
        tabReplace: '    ', 
        classPrefix: ''     
        
    })
    hljs.initHighlightingOnLoad();
</script>
<script src="https://blog.standuke.top/js/application.min.a94ab19cb63a95c8d7fbd7b85cab3ddeea8c369bdf75b9cab6708787ead123af.js"></script>
<script src="https://blog.standuke.top/js/plugin.min.19c5bcb2fb0789ab4f2b7834e5ceb5e92635645605bab902c1024b25f1502364.js"></script>

<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'æ–‡ç« ',
                PAGES: 'é¡µé¢',
                CATEGORIES: 'åˆ†ç±»',
                TAGS: 'æ ‡ç­¾',
                UNTITLED: '(æœªå‘½å)',
            },
            ROOT_URL: 'https:\/\/blog.standuke.top\/',
            CONTENT_URL: 'https:\/\/blog.standuke.top\/\/searchindex.json ',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script type="text/javascript" src="https://blog.standuke.top/js/insight.min.4a2d52de4bfff73e0c688404fe3d17c9a3ae12d9888e1e1ac9c690e4890de2ded50fe55f2b819c2ba55435a76f396f3ea6805765f0b0af5635cdf74ea459eab0.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
<script>
    tocbot.init({
        
        tocSelector: '.js-toc',
        
        contentSelector: '.js-toc-content',
        
        headingSelector: 'h1, h2, h3',
        
        hasInnerContainers: true,
    });
</script>

<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script>
    var disqus_config = function () {
        this.page.url = 'https:\/\/blog.standuke.top\/2022\/03\/2022-03-23-ldap-%E4%BC%81%E4%B8%9A%E9%83%A8%E7%BD%B2%E5%AE%9E%E6%88%98\/';
        <!-- this.page.identifier = 'nuo'; -->
    };
    (function () {
        var d = document, s = d.createElement('script');
        s.src = '//' + 'nuo' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-180157250-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  </body>
</html>
