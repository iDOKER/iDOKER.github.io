{"categories":[{"title":"ä½¿ç”¨æ•™ç¨‹","uri":"https://blog.standuke.top/categories/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"},{"title":"å†…éƒ¨åˆ†äº«","uri":"https://blog.standuke.top/categories/%E5%86%85%E9%83%A8%E5%88%86%E4%BA%AB/"},{"title":"æŠ€æœ¯åˆ†æ","uri":"https://blog.standuke.top/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E6%9E%90/"},{"title":"æ“ä½œç³»ç»Ÿ","uri":"https://blog.standuke.top/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"title":"éƒ¨ç½²æ•™ç¨‹","uri":"https://blog.standuke.top/categories/%E9%83%A8%E7%BD%B2%E6%95%99%E7%A8%8B/"},{"title":"é›¶ç¢å°é—®é¢˜","uri":"https://blog.standuke.top/categories/%E9%9B%B6%E7%A2%8E%E5%B0%8F%E9%97%AE%E9%A2%98/"}],"posts":[{"content":"ğŸ‘Œ 2021-07-06 Linux å®šæ—¶å•æ¬¡åŠå‘¨æœŸä»»åŠ¡  FileInfo Filename - Linux å®šæ—¶å•æ¬¡åŠå‘¨æœŸä»»åŠ¡ Version - v1.0.2107ï¼ˆ2021/07/06 ~ 2021/07/08ï¼‰ Author - nuo standuke Email - shadowdoker@gmail.com DescriptionKey - Linux single scheduled and periodic tasks / at batch cron anacron\n ç‰ˆæœ¬ä¿®è®¢è®°å½•ï¼š\nv1.0.2107ï¼š2021-07-06ï¼šå»ºç«‹ Linux å®šæ—¶å•æ¬¡åŠå‘¨æœŸä»»åŠ¡ æ–‡æ¡£ï¼Œä¿®è®¢äººï¼šnuo\n[TOC]\né€‚ç”¨åœºæ™¯ å•æ¬¡ä»»åŠ¡  å•ä¸€ç³»ç»Ÿæ›´æ–°ä»»åŠ¡ï¼Œä¾‹å¦‚å…¬å¸äº§å“éœ€è¦æŒ‡å®šæ—¶é—´æ›´æ–°ï¼Œå¹¶ä¸”æœ‰æ›´æ–°è„šæœ¬ç­‰ä¿éšœæªæ–½ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨å•æ¬¡ä»»åŠ¡å®Œæˆæ›´æ–°æ“ä½œï¼ŒåŒæ—¶ç»“åˆ at çš„é‚®ä»¶åé¦ˆæœºåˆ¶ï¼Œå¯ä»¥è®²æ›´æ–°ç»“æœé€šè¿‡é‚®ä»¶å‘ŠçŸ¥ æ–‡ä»¶æœ‰æ•ˆæœŸï¼Œä¾‹å¦‚æŸæ–‡ä»¶åœ¨å½“æ—¥æŸä¸€æ—¶åˆ»å‰å¯ä¾›ä¸‹è½½ï¼Œè¿‡ååˆ™ä¸å…è®¸ä¸‹è½½ã€‚é‚£ä¹ˆå¯ä»¥é€šè¿‡å•æ¬¡çš„å®šæ—¶æ“ä½œï¼Œå®Œæˆæ–‡ä»¶æƒé™æˆ–è€…åˆ é™¤æ–‡ä»¶çš„æ“ä½œï¼Œå‡å°‘äººå·¥ä»‹å…¥  å‘¨æœŸä»»åŠ¡  å®šæœŸçš„æ—¥å¿—æ–‡ä»¶å½’æ¡£ã€ä¸ŠæŠ¥ã€Œç³»ç»Ÿè¿è¡ŒçŠ¶æ€ç­‰ã€ å®šæœŸæ›´æ–°æœ¬åœ°ç¼“å­˜ã€ä¾‹å¦‚ locate æ•°æ®åº“ä¿¡æ¯ç­‰ å®šæœŸçš„ç³»ç»Ÿæ›´æ–°æˆ–è€…åº”ç”¨äº§å“æ›´æ–° ã€Œæ¯’ã€æŸäº›ç—…æ¯’ä¼šä½¿ç”¨ crond æ¥æ£€æµ‹åå°æ˜¯å¦åœ¨è¿è¡Œï¼Œè¿™ä¹Ÿæ˜¯æˆ‘é‡åˆ°çš„ä¸€ä¸ªæ¡ˆä¾‹  æ³¨æ„äº‹é¡¹ âš ï¸ æ‰€æœ‰çš„å®šæœŸä»»åŠ¡éƒ½æ˜¯ç”¨ç³»ç»Ÿæ—¶é—´ï¼Œä¹Ÿå°±æ˜¯å¦‚ä¸‹è¾“å‡ºçš„ Local time ä½œä¸ºæ—¶é—´æ ‡å‡†çš„ã€‚è¯·åœ¨ä½¿ç”¨å®šæœŸä»»åŠ¡æ—¶æ˜ç¡®å½“å‰ç³»ç»Ÿæ—¶é—´ã€‚\n \u0026gt;root ~ [vpc]# timedatectl Local time: äºŒ 2021-06-29 13:45:54 CST Universal time: äºŒ 2021-06-29 05:45:54 UTC RTC time: äºŒ 2021-06-29 05:45:54 Time zone: Asia/Shanghai (CST, +0800) NTP enabled: yes NTP synchronized: yes RTC in local TZ: no DST active: n/a  âš ï¸ å¯¹äº crond æ¥è¯´\nä¸åˆ°ä¸‰å°æ—¶çš„æœ¬åœ°æ—¶é—´å˜åŒ–ï¼Œå¦‚å¤ä»¤æ—¶å˜åŒ–å¼•èµ·çš„æ—¶é—´å˜åŒ–ï¼Œå°†ä¼šä»¥å¦‚ä¸‹ç‰¹æ®Šæ–¹å¼å¤„ç†ã€‚è¿™ç§å¤„ç†æ–¹å¼åªé€‚ç”¨äºåœ¨ç‰¹å®šæ—¶é—´ã€Œå˜åŠ¨çš„æ—¶é—´åŒºé—´å†…ã€è¿è¡Œçš„ä½œä¸šï¼Œå¹¶ä¸”æ—¶é—´è°ƒæ•´è¶…è¿‡ä¸€å°æ—¶ï¼Œæ­£å¸¸è°ƒåº¦çš„ä»»åŠ¡ä¼šè¢«æ›´ç§¯æçš„è°ƒåº¦ã€‚\n å¦‚æœæ—¶é—´å‘å‰è°ƒæ•´ä¸€å°æ—¶ï¼Œé‚£äº›æœ¬åº”åœ¨å·²è·³è¿‡çš„æ—¶é—´é—´éš”å†…è¿è¡Œçš„ä½œä¸šå°†ç«‹å³è¿è¡Œã€‚ç›¸åï¼Œå¦‚æœæ—¶é—´å‘åè°ƒæ•´ï¼Œåˆ™ç›¸åŒä»»åŠ¡åªä¼šè¿è¡Œä¸€æ¬¡ï¼Œå°†é¿å…è¿è¡Œä¸¤æ¬¡ã€‚ è¶…è¿‡ 3 å°æ—¶çš„æ—¶é—´å˜åŒ–è¢«è®¤ä¸ºæ˜¯å¯¹æ—¶é’Ÿæˆ–æ—¶åŒºçš„æ›´æ­£ï¼Œä¼šç«‹å³ä½¿ç”¨æ–°çš„æ—¶é—´ã€‚  å·®å¼‚æ€»ç»“ åŠŸèƒ½å·®å¼‚  atï¼šä»…æ‰§è¡Œä¸€æ¬¡ï¼ŒæŒ‡å®šæ—¶é—´èŠ‚ç‚¹æ‰§è¡Œä¸€æ¬¡ï¼Œé”™è¿‡åä¸ä¼šå†æ‰§è¡Œ batchï¼šä»…æ‰§è¡Œä¸€æ¬¡ï¼Œå‰ææ˜¯ç³»ç»Ÿè´Ÿè½½éœ€è¦å¤Ÿä½ï¼Œä¸€èˆ¬æ˜¯åˆ°ç‚¹ä¸”è´Ÿè½½ä½äº 0.8 æ—¶æ‰§è¡Œ cronï¼šå‘¨æœŸæ€§æ‰§è¡Œï¼Œå…³æœºæ—¶è¿‡äº†æ—¶é—´ç‚¹çš„ä»»åŠ¡ä¸ä¼šå†æ‰§è¡Œ anacronï¼šæ‰§è¡ŒåœæœºæœŸé—´é”™è¿‡çš„å·¥ä½œä»»åŠ¡  å…¶ä»–å·®å¼‚  æ£€æŸ¥é¢‘ç‡ï¼šat å’Œ batch éƒ½æ˜¯è®¡åˆ’è¿è¡Œä¸€æ¬¡ï¼Œcron æ˜¯æŒ‰ crontab åå¤è¿è¡Œï¼Œä¸‰è€…åœ¨é»˜è®¤æƒ…å†µä¸‹éƒ½æ˜¯æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡è¦è¿è¡Œçš„ä»»åŠ¡ å…¶ä»–è¦æ±‚ï¼šat å’Œ cron æ˜¯åˆ°ç‚¹å°±è§¦å‘ï¼Œbatch æ˜¯åˆ°ç‚¹ä¸”è´Ÿè½½å€¼è¶³å¤Ÿä½ï¼ˆé»˜è®¤å°äº0.8ï¼‰æ—¶è§¦å‘ æ³¨ï¼šat å’Œ batch å‡ç”± atd è´Ÿè´£è°ƒåº¦ï¼ˆè€ä¸€äº›çš„ç³»ç»Ÿä¸Šæ˜¯ crond è°ƒåº¦ atrun å†å¤„ç†ï¼‰ï¼Œcron ç”± crond è°ƒåº¦   å•æ¬¡ä»»åŠ¡ at / batch  åº”ç”¨åï¼šat æœåŠ¡åï¼šatd å‘½ä»¤è¡Œå·¥å…·ï¼šat batch\n åœ¨ CentOS 7.9 æ“ä½œç³»ç»Ÿä¸­ at ä¸ batch çš„ man æ‰‹å†Œç›¸åŒ\nat å’Œ batch ä»æ ‡å‡†è¾“å…¥æˆ–æŒ‡å®šæ–‡ä»¶ä¸­è¯»å–å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤å°†åœ¨æŒ‡å®šæ—¶é—´ä½¿ç”¨ /bin/sh æ‰§è¡Œï¼Œåœ¨ at ç¨‹åºä¸‹å…±æœ‰å¦‚ä¸‹å‡ ä¸ªå‘½ä»¤\n atï¼šåœ¨æŒ‡å®šæ—¶é—´æ‰§è¡Œå‘½ä»¤ atqï¼šåˆ—å‡ºå½“å‰ç”¨æˆ·çš„å¾…å¤„ç†ä½œä¸šï¼Œè¶…çº§ç”¨æˆ· root ä¼šåˆ—å‡ºæ¯ä¸ªäººçš„å·¥ä½œã€‚è¾“å‡ºè¡Œçš„æ ¼å¼ï¼ˆæ¯ä¸ªä½œä¸šä¸€è¡Œï¼‰ï¼šä½œä¸šå·ã€æ—¥æœŸã€å°æ—¶ã€é˜Ÿåˆ—å’Œç”¨æˆ·åã€‚ atrmï¼šåˆ é™¤ç”±ä½œä¸šç¼–å·æ ‡è¯†çš„ä½œä¸šã€‚ batchï¼šåœ¨ç³»ç»Ÿè´Ÿè½½æ°´å¹³å…è®¸æ—¶æ‰¹é‡æ‰§è¡Œå‘½ä»¤ï¼›æ¢å¥è¯è¯´ï¼Œå½“å¹³å‡è´Ÿè½½ä½äº 0.8 æˆ–è°ƒç”¨ atd æ—¶æŒ‡å®šçš„å€¼æ—¶ã€‚  ä»‹ç»  ç³»ç»Ÿ man æ‰‹å†Œç¿»è¯‘\n at å…è®¸ç›¸å½“å¤æ‚çš„æ—¶é—´è§„èŒƒï¼Œæ‰©å±•äº† POSIX.2 æ ‡å‡†ã€‚å®ƒæ¥å— HH:MM å½¢å¼çš„æ—¶é—´ä»¥åœ¨ä¸€å¤©ä¸­çš„ç‰¹å®šæ—¶é—´è¿è¡Œä½œä¸šã€‚ã€Œå¦‚æœæ—¶é—´å·²ç»è¿‡å»ï¼Œåˆ™ä¼šä½¿ç”¨ä¸‹ä¸€å¤©çš„é‚£ä¸€åˆ»æ‰§è¡Œã€‚ã€è¿˜å¯ä»¥æŒ‡å®šåˆå¤œã€ä¸­åˆæˆ–ä¸‹åˆèŒ¶æ—¶é—´ã€Œä¸‹åˆ 4 ç‚¹ã€ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®ä¸€ä¸ªä»¥ AM æˆ– PM ä¸ºåç¼€çš„ä¸€å¤©ä¸­çš„æ—¶é—´ï¼Œä»¥ä¾¿åœ¨æ—©ä¸Šæˆ–æ™šä¸Šè¿è¡Œã€‚ä¹Ÿå¯ä»¥æ˜ç¡®å“ªä¸€å¤©ä½œä¸šå°†è¿è¡Œï¼Œé€šè¿‡ä»¥æœˆä»½åç§°æ—¥çš„å½¢å¼ç»™å‡ºä¸€ä¸ªå¸¦æœ‰å¯é€‰å¹´ä»½çš„æ—¥æœŸï¼Œæˆ–è€…ç»™å‡ºä¸€ä¸ªå½¢å¼ä¸º MMDD[CC]YY, MM/DD/[CC]YY, DD.MM.[CC]YY or [CC]YY-MM-DDã€‚è§„æ ¼æ—¥æœŸå¿…é¡»éµå¾ªä¸€å¤©ä¸­çš„æ—¶é—´è§„èŒƒã€‚è¿˜å¯ä»¥ç»™å‡ºåƒ now + count time-units è¿™æ ·çš„æ—¶é—´ï¼Œå…¶ä¸­æ—¶é—´å•ä½å¯ä»¥æ˜¯åˆ†é’Ÿã€å°æ—¶ã€å¤©æˆ–å‘¨ï¼Œä¹Ÿå¯ä»¥å‘Šè¯‰ at é€šè¿‡åœ¨æ—¶é—´åç¼€ä»Šå¤©æ¥è¿è¡Œä»Šå¤©çš„ä½œä¸šï¼Œå¹¶é€šè¿‡åœ¨æ—¶é—´åç¼€ä»¥æ˜å¤©æ¥è¿è¡Œæ˜å¤©çš„ä½œä¸šã€‚\nä¾‹å¦‚ï¼Œè¦åœ¨ä¸‰å¤©åçš„ä¸‹åˆ 4 ç‚¹è¿è¡Œä½œä¸šï¼Œå¯ä»¥ä½¿ç”¨ at 4pm + 3 daysï¼Œåœ¨ 7 æœˆ 31 æ—¥ä¸Šåˆ 10:00 è¿è¡Œä½œä¸šï¼Œå¯ä»¥ä½¿ç”¨ at 10am Jul 31ï¼Œç„¶ååœ¨æ˜å¤©å‡Œæ™¨ 1 ç‚¹è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨ at 1am tomorrowã€‚\næ—¶é—´è§„èŒƒçš„å®šä¹‰å¯ä»¥åœ¨ /usr/share/doc/at-3.1.13/timespec ä¸­æ‰¾åˆ°ã€‚\nå¯¹äº at å’Œæ‰¹å¤„ç†ï¼Œä»æ ‡å‡†è¾“å…¥æˆ–ä½¿ç”¨ -f é€‰é¡¹æŒ‡å®šçš„æ–‡ä»¶ä¸­è¯»å–å‘½ä»¤å¹¶æ‰§è¡Œã€‚å·¥ä½œç›®å½•ã€ç¯å¢ƒï¼ˆå˜é‡é™¤å¤–ï¼‰ BASH_VERSINFOã€DISPLAYã€EUIDã€GROUPSã€SHELLOPTSã€TERMã€UID å’Œ _) å’Œ umask ä»è°ƒç”¨æ—¶èµ·ä¿ç•™ã€‚\nç”±äº at å½“å‰ä½œä¸º setuid ç¨‹åºå®ç°ï¼Œå› æ­¤ä¹Ÿä¸ä¼šå¯¼å‡ºå…¶ä»–ç¯å¢ƒå˜é‡ï¼ˆä¾‹å¦‚ LD_LIBRARY_PATH æˆ– LD_PRELOADï¼‰ã€‚è¿™åœ¨æœªæ¥å¯èƒ½ä¼šæ”¹å˜ã€‚ä½œä¸ºè§£å†³æ–¹æ³•ï¼Œè®¾ç½®è¿™äº›å˜é‡åœ¨æ‚¨çš„å·¥ä½œä¸­æ˜ç¡®æ˜¾ç¤ºã€‚\nä» su(1) shell è°ƒç”¨çš„ at - æˆ–æ‰¹å¤„ç† - å‘½ä»¤å°†ä¿ç•™å½“å‰ç”¨æˆ· IDã€‚ç”¨æˆ·å°†æ”¶åˆ°æ¥è‡ªä»–çš„å‘½ä»¤çš„æ ‡å‡†é”™è¯¯å’Œæ ‡å‡†è¾“å‡ºï¼ˆå¦‚æœæœ‰ï¼‰ã€‚é‚®ä»¶å°†è¢«å‘é€ä½¿ç”¨å‘½ä»¤ /usr/sbin/sendmailã€‚å¦‚æœä» su(1) shell æ‰§è¡Œ atï¼Œç™»å½• shell çš„æ‰€æœ‰è€…å°†æ”¶åˆ°é‚®ä»¶ã€‚\nè¶…çº§ç”¨æˆ·åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½å¯ä»¥ä½¿ç”¨è¿™äº›å‘½ä»¤ã€‚å¯¹äºå…¶ä»–ç”¨æˆ·ï¼Œä½¿ç”¨ at çš„æƒé™ç”±æ–‡ä»¶ /etc/at.allow å’Œ /etc/at.deny å†³å®šã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… at.allow(5)ã€‚ä¸¤ä¸ªæ–‡ä»¶éƒ½å­˜åœ¨æœ‰ ï¼Œåˆ™é»‘åå•å¤±æ•ˆï¼Œåªæœ‰ç™½åå•çš„é…ç½®ç”Ÿæ•ˆã€‚\nat é˜Ÿåˆ—å­˜æ”¾åœ¨ /var/spool/at ç›®å½•ä¸­ï¼Œå¯æ‰‹åŠ¨è¿›å–çœ‹ä»»åŠ¡ã€åˆ ä»»åŠ¡ã€‚\nå®‰è£… yum -y install at systemctl start atd.service systemctl enable atd.service  å‚æ•° -V å°†ç‰ˆæœ¬å·æ‰“å°åˆ°æ ‡å‡†é”™è¯¯å¹¶é€€å‡ºã€‚ -q é˜Ÿåˆ—ï¼šä½¿ç”¨æŒ‡å®šçš„é˜Ÿåˆ—ã€‚é˜Ÿåˆ—åç§°ç”±å•ä¸ªå­—æ¯ç»„æˆï¼Œæœ‰æ•ˆçš„é˜Ÿåˆ—æŒ‡å®šèŒƒå›´ä» a åˆ° z å’Œ A åˆ° Zã€‚a é˜Ÿåˆ—æ˜¯ at çš„é»˜è®¤å€¼ï¼Œb é˜Ÿåˆ—æ˜¯ batch çš„é»˜è®¤å€¼ã€‚å…·æœ‰æ›´é«˜å­—æ¯çš„é˜Ÿåˆ—æœ‰æ›´é«˜çš„è¿è¡Œä¼˜å…ˆçº§ã€‚ç‰¹æ®Šé˜Ÿåˆ— `=` æ˜¯ä¸ºå½“å‰æ­£åœ¨è¿è¡Œçš„ä½œä¸šä¿ç•™çš„ã€‚å¦‚æœå°†ä½œä¸šæäº¤åˆ°ä»¥å¤§å†™å­—æ¯æŒ‡å®šçš„é˜Ÿåˆ—ï¼Œåˆ™è¯¥ä½œä¸šå°†è¢«è§†ä¸ºåœ¨ä½œä¸šæ—¶æäº¤åˆ° batch å¤„ç†ã€‚ä¸€æ—¦åˆ°è¾¾æ—¶é—´ï¼Œbatch ç¨‹åºåŒ¹é…å¹³å‡è´Ÿè½½çš„å¤„ç†è§„åˆ™ã€‚å¦‚æœç»™ atq ä¸€ä¸ªç‰¹å®šçš„é˜Ÿåˆ—ï¼Œå®ƒåªä¼šæ˜¾ç¤ºè¯¥é˜Ÿåˆ—ä¸­å¾…å¤„ç†çš„ä½œä¸šã€‚ -m åœ¨ä½œä¸šå®Œæˆæ—¶å‘ç”¨æˆ·å‘é€é‚®ä»¶ï¼Œå³ä½¿æ²¡æœ‰è¾“å‡ºã€‚ -M ä»ä¸å‘ç”¨æˆ·å‘é€é‚®ä»¶ã€‚ -f file ä»æ–‡ä»¶è€Œä¸æ˜¯æ ‡å‡†è¾“å…¥è¯»å–ä½œä¸šã€‚ -t time æŒ‡å®šä½œä¸šè¿è¡Œæ—¶é—´ï¼Œæ ¼å¼ä¸º [[CC]YY]MMDDhhmm[.ss] -l æ˜¯ atq çš„åˆ«åã€‚ -r æ˜¯ atrm çš„åˆ«åã€‚ -d æ˜¯ atrm çš„åˆ«åã€‚ -b æ˜¯ batch çš„åˆ«åã€‚ -v æ˜¾ç¤ºåœ¨è¯»å–ä½œä¸šä¹‹å‰å°†æ‰§è¡Œä½œä¸šçš„æ—¶é—´ã€‚æ˜¾ç¤ºçš„æ—¶é—´æ ¼å¼ä¸ºâ€œThu Feb 20 14:50:00 1997â€ã€‚ -c + ä½œä¸š id å°†å‘½ä»¤è¡Œä¸Šåˆ—å‡ºçš„ä½œä¸šè½¬æ¢ä¸ºæ ‡å‡†è¾“å‡ºã€Œä¹Ÿå°±æ˜¯çœ‹è¿™ä¸ªä»»åŠ¡å…·ä½“çš„å†…å®¹ã€ã€‚  ç¤ºä¾‹  å®šæœŸåˆ é™¤ä¸€ä¸ªæ–‡ä»¶  [root@localhost.local ~]# at 22:00 at\u0026gt; rm -rf /var/www/html/demo.txt at\u0026gt; \u0026lt;EOT\u0026gt; job 2 at Sat Jul 1 22:00:00 201 ----------------------- # åœ¨22:10ç‚¹ at 22:00 # åˆ é™¤ /var/www/html/demo.txt æ–‡ä»¶ at\u0026gt; rm -rf /var/www/html/demo.txt # Ctrl+d ç»“æŸè¾“å…¥ at\u0026gt; \u0026lt;EOT\u0026gt; # æç¤º ç¬¬äºŒä¸ªä»»åŠ¡åœ¨ 22:00è¿›è¡Œ job 2 at Sat Jul 1 22:00:00 201  æ—¶é—´å†™æ³•ä¸ä½¿ç”¨æ¡ˆä¾‹ # HH:MM 02:00 =\u0026gt; åœ¨ä»Šæ—¥çš„ 02:00 è¿›è¡Œï¼Œè‹¥è¯¥æ—¶åˆ»å·²è¿‡ï¼Œåˆ™æ˜å¤©æ­¤æ—¶æ‰§è¡Œä»»åŠ¡ # HH:MM YYYY-MM-DD 02:00 2021-09-20 =\u0026gt; æŒ‡å®š 2021 å¹´ 9 æœˆ 20 æ—¥æ‰§è¡Œä»»åŠ¡ # HH:MM[am|pm] [Month] [Date] 04:00 pm March 17 =\u0026gt; æŒ‡å®šä¸‹ä¸€ä¸ª 3 æœˆ 17 æ—¥ä¸‹åˆ 4:00 æ‰§è¡Œä»»åŠ¡ 17:20 tomorrow =\u0026gt; æ˜å¤©çš„ 17:20 æ‰§è¡Œä»»åŠ¡ # HH:MM[am|pm] + number [minutes|hours|days|weeks] åœ¨æŸä¸ªæ—¶é—´ç‚¹å†åŠ å‡ ä¸ªæ—¶é—´åæ‰è¿›è¡Œè¯¥é¡¹ä»»åŠ¡ now + 5 minutes =\u0026gt; å½“å‰æ—¶é—´ 5 åˆ†é’Ÿåæ‰§è¡Œä»»åŠ¡ 02 pm + 3 days =\u0026gt; 3 å¤©åçš„ä¸‹åˆ 2:00 æ‰§è¡Œä»»åŠ¡  batch batch ç”¨æ³•ä¸ at ä¸€è‡´ï¼Œä¸¤è€…å·®å¼‚ä¹Ÿåªæœ‰ batch ä¼šè€ƒè™‘ç³»ç»Ÿè´Ÿè½½ï¼Œç”¨çš„æ—¶å€™æŠŠ at æ¢æˆ batch å°±è¡Œäº†ã€‚\nå‘¨æœŸä»»åŠ¡ cron / anacron cron  åº”ç”¨åï¼šcron ç³»ç»ŸæœåŠ¡ï¼šcrond å‘½ä»¤è¡Œå·¥å…·ï¼šcrontab crond\n ä»‹ç»  ç³»ç»Ÿ man æ‰‹å†Œç¿»è¯‘\n Cron åœ¨ /var/spool/cron ä¸­æœç´¢ä»¥ /etc/passwd ä¸­çš„å¸æˆ·å‘½åçš„ crontab æ–‡ä»¶ï¼›æ‰¾åˆ°çš„ crontab è¢«åŠ è½½åˆ°å†…å­˜ä¸­ã€‚Cron è¿˜æœç´¢ /etc/anacrontab å’Œä»»ä½•æ–‡ä»¶ï¼Œæ‰€ä»¥ crontab -e ä¿®æ”¹å®Œåéœ€è¦é‡å¯ä¸‹ crond æœåŠ¡ã€‚ä½†æ˜¯æ˜¯å¦éœ€è¦é‡å¯æ˜¯çœ‹æ“ä½œç³»ç»Ÿçš„ï¼Œè¯·å¾€ä¸‹çœ‹ã€‚\næœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥æ£€æŸ¥ crontables ä¸­çš„æ›´æ”¹ã€‚ç¬¬ä¸€ç§æ–¹æ³•æ˜¯æ£€æŸ¥æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ã€‚ç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨ inotify æ”¯æŒã€‚ inotify çš„ä½¿ç”¨è®°å½•åœ¨å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨åçš„ /var/log/cron æ—¥å¿—ã€‚ inotify æ”¯æŒæ£€æŸ¥æ‰€æœ‰ crontables ä¸­çš„æ›´æ”¹å¹¶ä»…åœ¨æ£€æµ‹åˆ°æ›´æ”¹æ—¶è®¿é—®ç¡¬ç›˜ã€‚ä½¿ç”¨ modtime é€‰é¡¹æ—¶ï¼ŒCron æ¯åˆ†é’Ÿæ£€æŸ¥å…¶ crontables çš„ modtime ä»¥æ£€æŸ¥ä»»ä½•æ›´æ”¹å¹¶é‡æ–°åŠ è½½å·²æ›´æ”¹çš„ crontablesã€‚ä¹‹åä¸éœ€è¦é‡å¯Cron ä¸€äº› crontables è¢«ä¿®æ”¹ã€‚å½“ inotify æ— æ³•åˆå§‹åŒ–æ—¶ï¼Œä¹Ÿä¼šä½¿ç”¨ modtime é€‰é¡¹ã€‚\nCron æ£€æŸ¥è¿™äº›æ–‡ä»¶å’Œç›®å½•ï¼š\n /etc/crontab  ç³»ç»Ÿ crontabã€‚ç°åœ¨è¯¥æ–‡ä»¶é»˜è®¤ä¸ºç©ºã€‚æœ€åˆå®ƒé€šå¸¸ç”¨äºè¿è¡Œæ¯æ—¥ã€æ¯å‘¨ã€æ¯æœˆçš„å·¥ä½œã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™äº›ä½œä¸šç°åœ¨é€šè¿‡ anacron è¿è¡Œï¼Œå®ƒè¯»å–\n /etc/anacrontab  åé¢ä¼šæåˆ°\n /etc/cron.d/  åŒ…å«ä¸ºä¸åŒç”¨æˆ·å­˜å‚¨çš„ç³»ç»Ÿ cronjobs çš„ç›®å½•ã€‚\n /var/spool/cron  åŒ…å«ç”± crontab å‘½ä»¤åˆ›å»ºçš„ç”¨æˆ· crontable çš„ç›®å½•ã€‚\næ³¨æ„ï¼Œåœ¨ CentOS 7.0+ ç³»ç»Ÿä¸­åªè¦æ›´æ”¹ crontabï¼Œcrontab å‘½ä»¤å°±ä¼šæ›´æ–° spool ç›®å½•çš„ modtimeã€‚æ‰€ä»¥å°±ä¸ç”¨é‡å¯ crond æœåŠ¡ã€‚\nä½¿ç”¨ å¦‚ä¸‹ä¸º ç³»ç»Ÿä»»åŠ¡ çš„ç¼–å†™æ ¼å¼ï¼ŒåŒæ ·é€‚ç”¨äºæ‰€æœ‰çš„ crontab ä»»åŠ¡ç¼–å†™ã€‚\n \u0026gt;root ~ [node1]# cat /etc/crontab SHELL=/bin/bash PATH=/sbin:/bin:/usr/sbin:/usr/bin MAILTO=root # For details see man 4 crontabs # Example of job definition: # .---------------- minute (0 - 59) # | .------------- hour (0 - 23) # | | .---------- day of month (1 - 31) # | | | .------- month (1 - 12) OR jan,feb,mar,apr ... # | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat # | | | | | # * * * * * user-name command to be executed   *(æ˜Ÿå·)  ä»£è¡¨ä»»ä½•æ—¶åˆ»éƒ½æ¥å—çš„æ„æ€ï¼ä¸¾ä¾‹æ¥è¯´ï¼ŒèŒƒä¾‹ä¸€å†…é‚£ä¸ªæ—¥ã€æœˆã€å‘¨éƒ½æ˜¯ * ï¼Œ å°±ä»£è¡¨è‘—ã€ä¸è®ºä½•æœˆã€ä½•æ—¥çš„ç¤¼æ‹œå‡ çš„ 12:00 éƒ½è¿è¡Œåç»­å‘½ä»¤ã€çš„æ„æ€ï¼\n ,(é€—å·) ä»£è¡¨åˆ†éš”æ—¶æ®µçš„æ„æ€ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœè¦ä¸‹è¾¾çš„å·¥ä½œæ˜¯ 3:00 ä¸ 6:00 æ—¶ï¼Œå°±ä¼šæ˜¯ï¼š 0 3,6 * * * command æ—¶é—´å‚æ•°è¿˜æ˜¯æœ‰äº”æ ï¼Œä¸è¿‡ç¬¬äºŒæ æ˜¯ 3,6 ï¼Œä»£è¡¨ 3 ä¸ 6 éƒ½é€‚ç”¨ï¼ -(å‡å·) ä»£è¡¨ä¸€æ®µæ—¶é—´èŒƒå›´å†…ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œ 8 ç‚¹åˆ° 12 ç‚¹ä¹‹é—´çš„æ¯å°æ—¶çš„ 20 åˆ†éƒ½è¿›è¡Œä¸€é¡¹å·¥ä½œï¼š 20 8-12 * * * command ä»”ç»†çœ‹åˆ°ç¬¬äºŒæ å˜æˆ 8-12 å–”ï¼ä»£è¡¨ 8,9,10,11,12 éƒ½é€‚ç”¨çš„æ„æ€ï¼ /n(æ–œçº¿) é‚£ä¸ª n ä»£è¡¨æ•°å­—ï¼Œäº¦å³æ˜¯ã€æ¯éš” n å•ä½é—´éš”ã€çš„æ„æ€ï¼Œä¾‹å¦‚æ¯äº”åˆ†é’Ÿè¿›è¡Œä¸€æ¬¡ï¼Œåˆ™ï¼š */5 * * * * command å¾ˆç®€å•å§ï¼ç”¨ * ä¸ /5 æ¥æ­é…ï¼Œä¹Ÿå¯ä»¥å†™æˆ 0-59/5 ï¼Œç›¸åŒæ„æ€ï¼  æ™®é€šç”¨æˆ· å®šæ—¶ä»»åŠ¡æ–‡æ¡£å­˜æ”¾åœ¨ /var/spool/cron/demo\ncrontab -e ï¼š ä¿®æ”¹å®šæ—¶ä»»åŠ¡ crontab -l ï¼š æŸ¥çœ‹è‡ªå·±çš„å®šæ—¶ä»»åŠ¡ crontab -r ï¼š åˆ é™¤æ‰€æœ‰å®šæ—¶ä»»åŠ¡\ncrontab -u ï¼šåªæœ‰ root æ‰èƒ½è¿›è¡Œè¿™ä¸ªä»»åŠ¡ï¼Œäº¦å³å¸®å…¶ä»–ä½¿ç”¨è€…åˆ›å»º/ç§»é™¤ crontab å·¥ä½œæ’ç¨‹ï¼›\nç³»ç»Ÿä»»åŠ¡ å®šæ—¶ä»»åŠ¡æ–‡æ¡£å­˜æ”¾åœ¨ /etc/crontab\næ‰€æœ‰çš„ä¿®æ”¹åˆ é™¤ç­‰æ“ä½œï¼Œç›´æ¥ç¼–è¾‘ä»»åŠ¡æ–‡æ¡£ /etc/crontab å³å¯ï¼Œcron ä¼šæ¯åˆ†é’Ÿå»è¯»å–ä¸€æ¬¡ /etc/crontab ä¸ /var/spool/cron é‡Œé¢çš„æ•°æ®å†…å®¹\nanacron anacron å¹¶ä¸éœ€è¦é¢å¤–çš„é…ç½®ï¼Œä½¿ç”¨é»˜è®¤å€¼å³å¯\nç®€ä»‹  ç³»ç»Ÿ man æ‰‹å†Œç¿»è¯‘ + äº’è”ç½‘èµ„æ–™\n Anacron ç”¨äºå®šæœŸæ‰§è¡Œå‘½ä»¤ï¼Œé¢‘ç‡ä»¥å¤©ä¸ºå•ä½ã€‚ä¸ cron(8) ä¸åŒï¼Œå®ƒä¸å‡è®¾æœºå™¨è¿ç»­è¿è¡Œã€‚å› æ­¤ï¼Œå®ƒå¯ä»¥ç”¨äºä¸æ˜¯ä¸€å¤© 24 å°æ—¶è¿è¡Œçš„æœºå™¨æ¥æ§åˆ¶æ—¥å¸¸å·¥ä½œã€æ¯å‘¨å·¥ä½œå’Œæ¯æœˆå·¥ä½œã€‚\nå¯¹äºæ¯ä¸ªä½œä¸šï¼ŒAnacron ä¼šæ£€æŸ¥è¯¥ä½œä¸šæ˜¯å¦åœ¨è¿‡å» n å¤©å†…æ‰§è¡Œè¿‡ï¼Œå…¶ä¸­ n æ˜¯ä¸ºè¯¥ä½œä¸šæŒ‡å®šçš„æ—¶é—´æ®µã€‚å¦‚æœä½œä¸šåœ¨ n å¤©æˆ–æ›´é•¿æ—¶é—´å†…æœªæ‰§è¡Œï¼Œåˆ™ Anacron åœ¨ç­‰å¾…æŒ‡å®šä¸ºå»¶è¿Ÿå‚æ•°çš„åˆ†é’Ÿæ•°åè¿è¡Œä½œä¸šçš„ shell å‘½ä»¤ã€‚å‘½ä»¤é€€å‡ºåï¼ŒAnacron å°†æ—¥æœŸï¼ˆä¸åŒ…æ‹¬å°æ—¶ï¼‰è®°å½•åœ¨è¯¥ä½œä¸šçš„ç‰¹æ®Šæ—¶é—´æˆ³æ–‡ä»¶ä¸­ï¼Œå› æ­¤å®ƒçŸ¥é“ä½•æ—¶å†æ¬¡æ‰§è¡Œè¯¥ä½œä¸šã€‚\nanacron å¹¶ä¸æ˜¯ç”¨æ¥å–ä»£ crontab çš„ï¼Œanacron å­˜åœ¨çš„ç›®çš„å°±åœ¨æ–¼æˆ‘ä»¬ä¸Šå¤´æåˆ°çš„ï¼Œåœ¨å¤„ç†é 24 å°æ—¶ä¸€ç›´å¯åŠ¨çš„ Linux ç³»ç»Ÿçš„ crontab çš„è¿è¡Œï¼æ‰€ä»¥ anacron å¹¶ä¸èƒ½æŒ‡å®šä½•æ—¶è¿è¡ŒæŸé¡¹ä»»åŠ¡ï¼Œ è€Œæ˜¯ä»¥å¤©ä¸ºå•ä½æˆ–è€…æ˜¯åœ¨å¯åŠ¨åç«‹åˆ»è¿›è¡Œ anacron çš„åŠ¨ä½œï¼Œä»–ä¼šå»ä¾¦æµ‹åœæœºæœŸé—´åº”è¯¥è¿›è¡Œä½†æ˜¯å¹¶æ²¡æœ‰è¿›è¡Œçš„ crontab ä»»åŠ¡ï¼Œå¹¶å°†è¯¥ä»»åŠ¡è¿è¡Œä¸€éåï¼Œanacron å°±ä¼šè‡ªåŠ¨åœæ­¢äº†ã€‚\né‚£ä¹ˆ anacron åˆæ˜¯æ€ä¹ˆçŸ¥é“æˆ‘ä»¬çš„ç³»ç»Ÿå•¥æ—¶å…³æœºçš„å‘¢ï¼Ÿè¿™å°±å¾—è¦ä½¿ç”¨ anacron è¯»å–çš„æ—¶é—´è®°å½•æ¡£ (timestamps) äº†ï¼ anacron ä¼šå»åˆ†æç°åœ¨çš„æ—¶é—´ä¸æ—¶é—´è®°å½•æ¡£æ‰€è®°è½½çš„ä¸Šæ¬¡è¿è¡Œ anacron çš„æ—¶é—´ï¼Œä¸¤è€…æ¯”è¾ƒåè‹¥å‘ç°æœ‰å·®å¼‚ï¼Œæ­¤æ—¶ anacron å°±ä¼šå¼€å§‹è¿è¡Œæœªè¿›è¡Œçš„ crontab ä»»åŠ¡äº†ï¼ æ‰€ä»¥ anacron å…¶å®ä¹Ÿæ˜¯é€è¿‡ crontab æ¥è¿è¡Œçš„ï¼å› æ­¤ anacron è¿è¡Œçš„æ—¶é—´é€šå¸¸æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ç³»ç»Ÿå¯åŠ¨æœŸé—´è¿è¡Œï¼Œä¸€ä¸ªæ˜¯å†™å…¥ crontab çš„æ’ç¨‹ä¸­ã€‚\nè¿è¡ŒåŸç† anacron å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ—¶é—´æˆ³å·¥å…·ï¼Œåˆ¤æ–­æ—¶é—´æ˜¯å¦è¿ç»­ï¼Œå¦‚æœä¸è¿ç»­ï¼Œé‚£ä¹ˆå°±æ‰§è¡Œä¸‹ä¸­é—´ä¸è¿ç»­æ—¶é—´çš„ cron å·¥ä½œä»»åŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ anacron å…¶å®æ˜¯é€šè¿‡ cron æ¥è¿è¡Œçš„ï¼Œå¯ä»¥åœ¨ /etc/cron*/*ana* å†…çœ‹åˆ°ï¼Œæ˜¯ç”± cron æ¥è°ƒç”¨ anacron æ¥å®ç°çš„\n \u0026gt;root /etc/cron.d [node1]# cat /etc/anacrontab # /etc/anacrontab: configuration file for anacron # See anacron(8) and anacrontab(5) for details. SHELL=/bin/sh PATH=/sbin:/bin:/usr/sbin:/usr/bin MAILTO=root # the maximal random delay added to the base delay of the jobs RANDOM_DELAY=45 # the jobs will be started during the following hours only START_HOURS_RANGE=3-22 #period in days delay in minutes job-identifier command 1\t5\tcron.daily\tnice run-parts /etc/cron.daily 7\t25\tcron.weekly\tnice run-parts /etc/cron.weekly @monthly 45\tcron.monthly\tnice run-parts /etc/cron.monthly   ç”± /etc/anacrontab åˆ†æåˆ° cron.daily è¿™é¡¹å·¥ä½œåç§°çš„å¤©æ•°ä¸º 1 å¤©ï¼› ç”± /var/spool/anacron/cron.daily å–å‡ºæœ€è¿‘ä¸€æ¬¡è¿è¡Œ anacron çš„æ—¶é—´æˆ³è®°ï¼› ç”±ä¸Šä¸ªæ­¥éª¤ä¸ç›®å‰çš„æ—¶é—´æ¯”è¾ƒï¼Œè‹¥å·®å¼‚å¤©æ•°ä¸º 1 å¤©ä»¥ä¸Š (å« 1 å¤©)ï¼Œå°±å‡†å¤‡è¿›è¡Œå‘½ä»¤ï¼› è‹¥å‡†å¤‡è¿›è¡Œå‘½ä»¤ï¼Œæ ¹æ® /etc/anacrontab çš„é…ç½®ï¼Œå°†å»¶è¿Ÿ 5 åˆ†é’Ÿ å»¶è¿Ÿæ—¶é—´è¿‡åï¼Œå¼€å§‹è¿è¡Œåç»­å‘½ä»¤ï¼Œäº¦å³ã€ run-parts /etc/cron.daily ã€è¿™ä¸²å‘½ä»¤ï¼› è¿è¡Œå®Œæ¯•åï¼Œ anacron ç¨‹åºç»“æŸã€‚  ä½¿ç”¨ -f å¼ºåˆ¶æ‰§è¡Œæ‰€æœ‰ä½œä¸šï¼Œå¿½ç•¥ä»»ä½•æ—¶é—´æˆ³ã€‚ -u å°†æ‰€æœ‰ä½œä¸šçš„æ—¶é—´æˆ³æ›´æ–°ä¸ºå½“å‰æ—¥æœŸï¼Œä½†ä¸è¿è¡Œä»»ä½•ä½œä¸šã€‚ -s åºåˆ—åŒ–ä½œä¸šçš„æ‰§è¡Œã€‚ Anacron ä¸ä¼šåœ¨å‰ä¸€ä¸ªå·¥ä½œå®Œæˆä¹‹å‰å¼€å§‹æ–°å·¥ä½œã€‚ -n ç«‹å³è¿è¡Œä½œä¸šå¹¶å¿½ç•¥ /etc/anacrontab æ–‡ä»¶ä¸­çš„æŒ‡å®šå»¶è¿Ÿã€‚æ­¤é€‰é¡¹æ„å‘³ç€ -sã€‚ -d ä¸ä¼šå°† Anacron åˆ†å‰åˆ°åå°ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼ŒAnacron å°†å‘æ ‡å‡†é”™è¯¯ä»¥åŠç³»ç»Ÿæ—¥å¿—è¾“å‡ºä¿¡æ¯æ€§æ¶ˆæ¯ã€‚ä»»ä½•ä½œä¸šçš„è¾“å‡ºéƒ½ç”± Anacron é‚®å¯„ã€‚ -q å°†ä»»ä½•æ¶ˆæ¯æŠ‘åˆ¶ä¸ºæ ‡å‡†é”™è¯¯ã€‚ä»…é€‚ç”¨äº -dã€‚ -t some_anacrontab ä½¿ç”¨æŒ‡å®šçš„ anacrontabï¼Œè€Œä¸æ˜¯ /etc/anacrontab é»˜è®¤çš„ã€‚ -T Anacrontab æµ‹è¯•ã€‚æµ‹è¯• /etc/anacrontab é…ç½®æ–‡ä»¶çš„æœ‰æ•ˆæ€§ã€‚å¦‚æœæ–‡ä»¶ä¸­æœ‰é”™è¯¯ï¼Œå®ƒä¼šæ˜¾ç¤ºåœ¨æ ‡å‡†è¾“å‡ºä¸­å¹¶ä¸” Anacron è¿”å›å€¼ 1ã€‚æœ‰æ•ˆçš„ anacrontabs è¿”å›å€¼ 0ã€‚ -S spooldir ä½¿ç”¨æŒ‡å®šçš„ spooldir æ¥å­˜å‚¨æ—¶é—´æˆ³ã€‚å¸Œæœ›è‡ªå·±è¿è¡Œ anacron çš„ç”¨æˆ·éœ€è¦æ­¤é€‰é¡¹ã€‚ -V æ‰“å°ç‰ˆæœ¬ä¿¡æ¯ï¼Œç„¶åé€€å‡ºã€‚ -h æ‰“å°ç®€çŸ­çš„ä½¿ç”¨ä¿¡æ¯ï¼Œç„¶åé€€å‡ºã€‚   at ä¸ cron æƒé™è®¾ç½® ç”±äºä¸¤è€…çš„æƒé™é…ç½®æ–¹æ¡ˆæå…¶ç›¸ä¼¼ï¼Œæ‰€ä»¥å°†ä¸¤è€…çš„é…ç½®å‰¥ç¦»å‡ºæ¥æ”¾åœ¨ä¸€èµ·ï¼Œä¾¿äºå¯¹æ¯”ã€‚\nat åœ¨ CentOS 7.9 ç³»ç»Ÿä¸­ï¼Œå®‰è£…å®Œæ“ä½œç³»ç»Ÿåé»˜è®¤ä¼šæœ‰ /etc/at.deny é…ç½®æ–‡ä»¶ï¼Œ\n at.deny  åœ¨è¿™ä¸ª at.deny æ–‡ä»¶å†…çš„ç”¨æˆ·åˆ™ä¸èƒ½ä½¿ç”¨ atï¼Œæ²¡æœ‰åœ¨è¿™ä¸ª at.deny æ–‡ä»¶ä¸­çš„ç”¨æˆ·ï¼Œå°±å¯ä½¿ç”¨ atï¼Œ\n at.allow  åŒæ ·çš„è¿˜æœ‰ /etc/at.allow è¿™ä¸ªæ–‡ä»¶ï¼Œå†™åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­çš„ä½¿ç”¨è€…æ‰èƒ½ä½¿ç”¨ at ï¼Œæ²¡æœ‰åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­çš„ä½¿ç”¨è€…åˆ™ä¸èƒ½ä½¿ç”¨ at (å³ä½¿æ²¡æœ‰å†™åœ¨ at.deny å½“ä¸­)ã€‚\nå¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½å­˜åœ¨ï¼Œé‚£ä¹ˆä¾ç…§æœ€å°æƒé™ï¼Œä»… /etc/at.allow ç”¨æˆ·å¯ä½¿ç”¨ atã€‚ å¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆåªæœ‰ root å¯ä½¿ç”¨ atã€‚\nä¿®æ”¹é…ç½®çš„è¯ï¼Œé‡Œé¢ä¸€è¡Œä¸€ä¸ªç”¨æˆ·åå³å¯ã€‚\ncron ä¸ at ç±»ä¼¼ï¼Œ\nåœ¨ CentOS 7.9 ç³»ç»Ÿä¸­ï¼Œå®‰è£…å®Œæ“ä½œç³»ç»Ÿåé»˜è®¤ä¼šæœ‰ /etc/cron.deny é…ç½®æ–‡ä»¶ï¼Œ\n /etc/cron.denyï¼š  åœ¨è¿™ä¸ª cron.deny æ–‡ä»¶å†…çš„ç”¨æˆ·åˆ™ä¸èƒ½ä½¿ç”¨ cronï¼Œæ²¡æœ‰åœ¨è¿™ä¸ª cron.deny æ–‡ä»¶ä¸­çš„ç”¨æˆ·ï¼Œå°±å¯ä½¿ç”¨ cronï¼Œ\n /etc/cron.allowï¼š  åŒæ ·çš„è¿˜æœ‰ /etc/cron.allow è¿™ä¸ªæ–‡ä»¶ï¼Œå†™åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­çš„ä½¿ç”¨è€…æ‰èƒ½ä½¿ç”¨ cron ï¼Œæ²¡æœ‰åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­çš„ä½¿ç”¨è€…åˆ™ä¸èƒ½ä½¿ç”¨ cron (å³ä½¿æ²¡æœ‰å†™åœ¨ cron.deny å½“ä¸­)ã€‚\nä¿®æ”¹é…ç½®çš„è¯ï¼Œé‡Œé¢ä¸€è¡Œä¸€ä¸ªç”¨æˆ·åå³å¯ã€‚\nå¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½å­˜åœ¨ï¼Œé‚£ä¹ˆä¾ç…§æœ€å°æƒé™ï¼Œä»… /etc/cron.allow ç”¨æˆ·å¯ä½¿ç”¨ cronã€‚ å¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆåªæœ‰ root å¯ä½¿ç”¨ cronã€‚\ndemo ç”¨æˆ·åˆ›å»ºäº†å‘¨æœŸä»»åŠ¡ï¼Œé‚£ä¹ˆ demo çš„ä»»åŠ¡ä¼šè®°å½•åˆ° /var/spool/cron/demo cron è¿è¡Œçš„æ¯ä¸€é¡¹å·¥ä½œéƒ½ä¼šè¢«çºªå½•åˆ° /var/log/cron æ—¥å¿—ä¸­\nå†™åœ¨æœ€å è¯´å®è¯ï¼Œè¿™æ–‡æ¡£å†™çš„ç³Ÿå¿ƒï¼Œä¸€ä¸ªæ˜¯ç½‘ä¸Šèµ„æ–™å¤ªå¤šï¼Œåˆå¤ªä¹±ï¼Œæ²¡æœ‰ä¸€ä¸ªæ˜¯æ¡ç†æ¸…æ¥šã€å¹²å¹²å‡€å‡€çš„ï¼›å¦ä¸€ä¸ªæ˜¯æ²¡æƒ³åˆ°æœ‰é‚£ä¹ˆå¤šè¦æ¶‰åŠåˆ°çš„ï¼Œé‡Œé¢çš„ç»†èŠ‚è¿˜æ˜¯éå¸¸å¤šçš„ã€‚man æ‰‹å†Œå¸®åŠ©æŒºå¤§çš„ï¼Œä¹Ÿæ€»ç®—æŠŠè¿™å‡ ä¸ªå®šæ—¶ä»»åŠ¡ç»™ç†äº†ä¸€éã€‚\nå‚è€ƒèµ„æ–™ http://cn.linux.vbird.org/linux_basic/0430cron.php\n","id":0,"section":"posts","summary":"ğŸ‘Œ 2021-07-06 Linux å®šæ—¶å•æ¬¡åŠå‘¨æœŸä»»åŠ¡ FileInfo Filename - Linux å®šæ—¶å•æ¬¡åŠå‘¨æœŸä»»åŠ¡ Version - v1.0.2107ï¼ˆ2021/07/06 ~ 2021/07/08ï¼‰ Author - nuo standuke Email - shadowdoker@gmail.com DescriptionKey - Linux single","tags":["CentOS","Linux"],"title":"Linux å®šæ—¶å•æ¬¡åŠå‘¨æœŸä»»åŠ¡","uri":"https://blog.standuke.top/2021/07/2021-07-06-linux-%E5%AE%9A%E6%97%B6%E5%8D%95%E6%AC%A1%E5%8F%8A%E5%91%A8%E6%9C%9F%E4%BB%BB%E5%8A%A1/","year":"2021"},{"content":"ğŸ‘Œ 2021-06-26 Linux æ—¶é—´å…¨è§£  FileInfo Filename - Linux æ—¶é—´å…¨è§£ Version - v1.1.2107ï¼ˆ2021/06/26 ~ 2021/07/01ï¼‰ Author - nuo standuke Email - shadowdoker@gmail.com DescriptionKey - Linux time solution\n ç‰ˆæœ¬ä¿®è®¢è®°å½•ï¼š\nv1.0.2106ï¼š2021-06-26ï¼šå»ºç«‹ Linux æ—¶é—´å…¨è§£æ–‡æ¡£ï¼Œä¿®è®¢äººï¼šnuo v1.1.2107ï¼š2021-07-01ï¼šæ–°å¢ CentOS ä¸ Ubuntu æ—¶é—´åŒæ­¥ç›¸å…³åŒºåˆ«ï¼Œä¿®è®¢äººï¼šnuo\n[TOC]\nç®€ä»‹ ä½œä¸ºä¸€åˆ‡çš†æ–‡ä»¶çš„ Linux æ“ä½œç³»ç»Ÿï¼Œæ—¥å¿—çš„è®°å½•ã€å®šæ—¶ä»»åŠ¡çš„æ‰§è¡Œï¼Œç”šè‡³äº›è®¸ç¨‹åºçš„é…ç½®ã€ŒMySQLã€ä¹Ÿæåº¦ä¾èµ–ç³»ç»Ÿæ—¶é—´ï¼Œæ•…ç³»ç»Ÿæ—¶é—´åœ¨æ“ä½œç³»ç»Ÿè¿è¡Œæ—¶å°¤ä¸ºé‡è¦ã€‚å’Œ Windows ä¸€æ ·ï¼ŒLinux ä¹Ÿåˆ†ä¸ºæœ¬åœ°æ—¶é—´ç”¨äºæ‰‹åŠ¨è®¾ç½®å’Œä½¿ç”¨ ntp æ–¹å¼è‡ªåŠ¨åŒæ­¥çš„è¿œç¨‹æ—¶é—´ã€‚\nâš ï¸ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè€ƒè™‘åˆ°æ–‡ä»¶çš„ç”Ÿæˆä¹Ÿä¼šè·å–ç³»ç»Ÿæ—¶é—´ä½œä¸ºæ–‡ä»¶çš„æ—¶é—´æˆ³ï¼Œå»ºè®®åœ¨å®‰è£…æ“ä½œç³»ç»Ÿæ—¶å°±å°†ä¸»æ¿ä¸Šçš„ç¡¬ä»¶æ—¶é—´åŒæ­¥ï¼Œæˆ–è€…åœ¨å®‰è£…æ“ä½œç³»ç»Ÿæ—¶æ‰‹åŠ¨å°†æ—¶é—´æ ¡å‡†ã€‚\nåœ¨æœ¬æ–‡ä¸­å°†ä¼šæ¶‰åŠ CentOS å¦‚ä¸‹ä¸æ—¶é—´ç›¸å…³çš„å‘½ä»¤ä»¥åŠä¸æ—¶é—´ç›¸å…³çš„é…ç½®æ–‡ä»¶ã€‚åŒæ—¶ç¨æœ‰æåŠ Ubuntu å†…çš„å·®å¼‚åŠå…¶é…ç½®ã€‚\n timedatectl date chrony ntp / ntpdate  ç›¸å…³åè¯ä»‹ç» äº†è§£ç›¸å…³æ—¶é—´åè¯æœ‰åˆ©äºç†è§£åæœŸç›¸å…³æœ¯è¯­çš„è®²è§£ï¼Œæ­¤å¤„ä»¥ CentOS å†… timedatectl æ ‡å‡†è¾“å‡ºä½œä¸ºæ ·ä¾‹ã€‚\n \u0026gt;root ~ [vpc]# timedatectl Local time: äºŒ 2021-06-29 13:45:54 CST Universal time: äºŒ 2021-06-29 05:45:54 UTC RTC time: äºŒ 2021-06-29 05:45:54 Time zone: Asia/Shanghai (CST, +0800) NTP enabled: yes NTP synchronized: yes RTC in local TZ: no DST active: n/a   UTC ã€ŒUniversal time: äºŒ 2021-06-29 05:45:54 UTCã€\n åè°ƒä¸–ç•Œæ—¶ã€ŒUTC - Coordinated Universal Timeã€ã€‚åœ°çƒåˆ†ä¸ºäºŒåå››æ—¶åŒºï¼Œæ¯ä¸ªæ—¶åŒºéƒ½æœ‰è‡ªå·±çš„å½“åœ°æ—¶é—´ã€‚åœ¨å›½é™…æ— çº¿ç”µé€šä¿¡åœºåˆï¼Œä¸ºäº†ç»Ÿä¸€èµ·è§ï¼Œä½¿ç”¨ä¸€ä¸ªç»Ÿä¸€çš„æ—¶é—´ï¼Œç§°ä¸ºåè°ƒä¸–ç•Œæ—¶ã€ŒUTC - Universal Time Coordinatedã€ã€‚\n GMT\n æ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´ã€ŒGreenwich Mean Time Zoneã€ã€‚æŒ‡ä½äºè‹±å›½ä¼¦æ•¦éƒŠåŒºçš„çš‡å®¶æ ¼æ—å°¼æ²»å¤©æ–‡å°çš„æ ‡å‡†æ—¶é—´ï¼Œå› ä¸ºæœ¬åˆå­åˆçº¿è¢«å®šä¹‰åœ¨é€šè¿‡é‚£é‡Œçš„ç»çº¿ã€‚ã€ŒUTC ä¸ GMTæ—¶é—´åŸºæœ¬ç›¸åŒã€\n CTS ã€ŒLocal time: äºŒ 2021-06-29 13:45:54 CSTã€\n ä¸­å›½æ ‡å‡†æ—¶é—´ã€ŒCST â€“ China Standard Timeã€ã€‚GMT + 8 = UTC + 8 = CST\n DST\n å¤ä»¤æ—¶ï¼Œéƒ¨åˆ†å›½å®¶ä½¿ç”¨ï¼Œåœ¨ä¸­å›½ä¸ä½¿ç”¨ã€‚æ‰€ä»¥åœ¨å›½å¤–æœåŠ¡å™¨é…ç½®ç³»ç»Ÿæ—¶é—´æ—¶éœ€è¦æ³¨æ„ã€‚\n RTC ç¡¬ä»¶æ—¶é—´ ã€ŒRTC time: äºŒ 2021-06-29 05:45:54ã€\n RTCã€ŒReal-Time Clockã€æˆ– CMOS / BIOS æ—¶é—´ï¼Œä¸€èˆ¬åœ¨ä¸»æ¿ä¸Šé ç”µæ± ä¾›ç”µï¼ŒæœåŠ¡å™¨æ–­ç”µåä¹Ÿä¼šç»§ç»­è¿è¡Œã€‚ä»…ä¿å­˜æ—¥æœŸæ—¶é—´æ•°å€¼ï¼Œæ— æ³•ä¿å­˜æ—¶åŒºå’Œå¤ä»¤æ—¶è®¾ç½®ã€‚\n Local time ç³»ç»Ÿæ—¶é—´ / æœ¬åœ°æ—¶é—´ ã€ŒLocal time: äºŒ 2021-06-29 13:45:54 CSTã€\n æœåŠ¡å™¨å¯åŠ¨æ—¶å¤åˆ¶ RTC æ—¶é—´ï¼Œä¹‹åç‹¬ç«‹è¿è¡Œï¼Œä¿å­˜äº†æ—¶é—´ã€æ—¶åŒºå’Œå¤ä»¤æ—¶è®¾ç½®ã€‚æ‰€ä»¥ä¸€èˆ¬æ¥è¯´ï¼Œæœ¬åœ°çš„ RTC æœ€å¥½ä¿å­˜ UTC æ—¶é—´ï¼Œç³»ç»Ÿæ—¶é—´ä¾ç…§æ“ä½œç³»ç»Ÿå†…é…ç½®è‡ªå·±è®¡ç®—æœ€ç»ˆçš„æ—¶é—´ã€‚\n  âš ï¸ ç¡¬ä»¶æ—¶é—´ã€ŒRTCã€ä¸ æœ¬åœ°æ—¶é—´ã€ŒLocal timeã€  åœ¨ timedatectl set-local-rtc yes è®¾ç½®ä¸º yes æ—¶ï¼Œä¼šå‡ºç°è­¦å‘Šã€‚ã€Œè¿™ä¸ªåœ°æ–¹é„™è§†ä¸€ä¸‹ é˜¿é‡Œäº‘ï¼Œä¹Ÿç®—æ˜¯ä¸€ä¸ªå‘ï¼Œé˜¿é‡Œäº‘ä¸»æœºç¡¬ä»¶ã€RTCã€æ—¶é—´æ²¡æœ‰ä½¿ç”¨å›½é™…ä¸Šé€šç”¨çš„ UTC æ—¶é—´ï¼Œè€Œæ˜¯é‡‡ç”¨å½“åœ°æ—¶é—´â€¦â€¦ã€\n# å‘Šè­¦å¦‚ä¸‹ Warning: The system is configured to read the RTC time in the local time zone. This mode can not be fully supported. It will create various problems with time zone changes and daylight saving time adjustments. The RTC time is never updated, it relies on external facilities to maintain it. If at all possible, use RTC in UTC by calling 'timedatectl set-local-rtc 0'.  ä¾‹å¦‚å¦‚æœ RTC æ—¶é—´ä¸ç³»ç»Ÿæ—¶é—´ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆ MySQL åœ¨é‡å¯æˆ–è€…å…³é—­æ—¶å°±ä¼šæŠ¥é”™ InnoDB: Waiting for page_cleaner to finish flushing of buffer poolï¼ŒåŸå› å°±æ˜¯ ç³»ç»Ÿæ—¶é—´ä¸mysqlç¼“å­˜çš„æ—¶é—´ä¸ä¸€è‡´ï¼Œè¿™æ—¶å°±éœ€è¦æŠŠç³»ç»Ÿæ—¶é—´æ”¹åœ¨ MySQL æ­£å¸¸è¿è¡Œçš„æ—¶é—´ä¹‹åã€‚å†å°† timedatectl set-local-rtc no è®¾ç½®ä¸º noã€‚\næ‰€ä»¥åœ¨é…ç½®ä½¿ç”¨ timedatectl å»ä¿®æ”¹æ—¶é—´æ—¶ä¼šåŒæ—¶é…ç½®ç³»ç»Ÿæ—¶é—´ã€Œä¾‹å¦‚å‘½ä»¤ date -sã€å’Œç¡¬ä»¶æ—¶é—´ã€Œä¾‹å¦‚å‘½ä»¤ hwclock -wã€ï¼Œè€Œç¡¬ä»¶æ—¶é—´ RTC çš„å…·ä½“å€¼æ˜¯å¦å’Œç³»ç»Ÿæ—¶é—´ä¸€è‡´åˆ™ç”± set-local-rtc æ¥é…ç½®ã€‚\næ—¶é—´é…ç½®å‘½ä»¤ timedatectl ç®€ä»‹ åœ¨åè¯ä»‹ç»éƒ¨åˆ†å·²ç»ç¨æœ‰æåŠ timedatectl å‘½ä»¤ï¼Œå…¶ä¸­çš„æ¦‚å¿µå¾ˆå…³é”®ï¼ŒåŠ¡å¿…è¦çœ‹ã€‚\ntimedatectl æ˜¯ systemd-timedated.service ç³»ç»ŸæœåŠ¡çš„å‘½ä»¤è¡Œå®¢æˆ·ç«¯ï¼Œæ˜¯åœ¨ RHEL7 åŠ CentOS7 ä¸­æ–°å¢çš„ systemd çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºç³»ç»Ÿæ—¶é—´ç®¡ç†ã€‚åœ¨ CentOS 7 ç³»ç»Ÿä¸Šï¼Œå»ºè®®ä½¿ç”¨ timedatectl è€Œä¸æ˜¯ dateã€hwclock å‘½ä»¤æ¥è°ƒæ•´æ—¶é—´ã€‚åœ¨ Ubuntu ç³»ç»Ÿä¸Šï¼Œä¹Ÿé‡‡ç”¨ timedatectl æ¥ç®¡ç†æ—¶é—´ï¼Œä½†æ˜¯åœ¨ Ubuntu ç³»ç»Ÿä¸Šæ—¶é—´çš„ç®¡ç†æµç¨‹ç¨æœ‰ä¸åŒã€‚\nåœ¨æœ€æ–°çš„ Ubuntu ç‰ˆæœ¬ä¸­ï¼Œtimedatectl æ›¿ä»£äº†è€æ—§çš„ ntpdateã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œtimedatectl åœ¨ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ä¼šç«‹åˆ»åŒæ­¥æ—¶é—´ï¼Œå¹¶åœ¨ç¨åç½‘ç»œè¿æ¥æ¿€æ´»åé€šè¿‡ socket å†æ¬¡æ£€æŸ¥ä¸€æ¬¡ã€‚å¦‚æœå·²å®‰è£…äº† ntpdate / ntpï¼Œtimedatectl ä¼šé€€è€Œè®©ä½ ä½¿ç”¨ä¹‹å‰çš„è®¾ç½®ã€‚è¿™æ ·ç¡®ä¿äº†ä¸¤ä¸ªæ—¶é—´åŒæ­¥æœåŠ¡ä¸ä¼šç›¸äº’å†²çªï¼ŒåŒæ—¶åœ¨ä½ å‡çº§çš„æ—¶å€™è¿˜ä¿ç•™åŸæœ¬çš„è¡Œä¸ºå’Œé…ç½®ã€‚ä½†è¿™ä¹Ÿæ„å‘³ç€ä»æ—§ç‰ˆæœ¬çš„å‘è¡Œç‰ˆå‡çº§æ—¶ntp/ntpdate ä»ä¼šå®‰è£…ï¼Œå› æ­¤ä¼šå¯¼è‡´æ–°çš„åŸºäº systemd çš„æ—¶é—´æœåŠ¡è¢«ç¦ç”¨ã€‚\nåœ¨æœ€æ–°çš„ Ubuntu ç‰ˆæœ¬ä¸­ï¼Œtimesyncd æ›¿ä»£äº† ntpd çš„å®¢æˆ·ç«¯çš„éƒ¨åˆ†ã€‚é»˜è®¤æƒ…å†µä¸‹ timesyncd ä¼šå®šæœŸæ£€æµ‹å¹¶åŒæ­¥æ—¶é—´ã€‚å®ƒè¿˜ä¼šåœ¨æœ¬åœ°å­˜å‚¨æ›´æ–°çš„æ—¶é—´ï¼Œä»¥ä¾¿åœ¨ç³»ç»Ÿé‡å¯æ—¶åšæ—¶é—´å•æ­¥è°ƒæ•´ã€‚é€šè¿‡ timedatectl å’Œ timesyncd è®¾ç½®çš„å½“å‰æ—¶é—´çŠ¶æ€å’Œæ—¶é—´é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨ timedatectl statuså‘½ä»¤æ¥è¿›è¡Œç¡®è®¤ã€‚è€Œåœ¨ CentOS 7 ä¸­ï¼Œä¸å­˜åœ¨ timesyncd æœåŠ¡ï¼Œæ˜¯ç”± chrony æ¥ä½œä¸º ntpd çš„å®¢æˆ·ç«¯çš„éƒ¨åˆ†ã€‚\n CentOS 7.0 +  timedatectl -\u0026gt; systemd-timedated.service -\u0026gt; chronyd.service ã€Œé…ç½®æ–‡ä»¶ /etc/chrony.confã€\n Ubuntu 16.04 LTS + 1  timedatectl -\u0026gt; systemd-timedated.service -\u0026gt; timesyncd.service ã€Œé…ç½®æ–‡ä»¶ /etc/systemd/timesyncd.confã€\ntimedatectl èƒ½åšåˆ°ï¼šä¿®æ”¹ç³»ç»Ÿæ—¶é—´ã€ä¿®æ”¹ RTC æ—¶é—´ã€ä¿®æ”¹ç³»ç»Ÿæ—¶åŒºã€è®¾ç½® NTP æ—¶é—´åŒæ­¥ã€æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ—¶é—´çŠ¶æ€ã€‚ä¸€èˆ¬æ¥è¯´ä½¿ç”¨ timedatectl å·²ç»èƒ½æ»¡è¶³æ—¥å¸¸å¯¹äºæ—¶é—´æ“ä½œçš„éœ€æ±‚äº†ã€‚\næ—¶é—´åŒæ­¥é…ç½® å¯¹äºæ—¶é—´ã€æ—¶åŒºä¿®æ”¹è¾ƒä¸ºç®€å•ï¼Œè¿™é‡Œç€é‡ä»‹ç»ä¸‹ timedatectl å†…çš„ NTP ç›¸å…³åŸç†ä»¥åŠé…ç½®ã€‚\n timedatectl çš„ NTP åŒæ­¥æµç¨‹  ä½¿ç”¨ timedatectl é…ç½® NTP å®¢æˆ·ç«¯æœåŠ¡æ‰“å¼€ï¼Œsystemd-timedated.service æ”¶åˆ° NTP æ‰“å¼€çš„ä¿¡æ¯ï¼Œç”± systemd-timedated.service æ‰“å¼€ chronyd.service æ¥å¯åŠ¨ NTPï¼Œç”¨äºè¿æ¥ æœåŠ¡ç«¯ã€‚timedatectl å†…çš„ NTP åªèƒ½å®ç° NTP çš„å®¢æˆ·ç«¯è§’è‰²ï¼ŒåŒæ—¶åŒæ­¥ç­–ç•¥ä¹Ÿè¾ƒä¸ºæ¿€è¿›ã€Œæ—¶é—´ç›¸å·®å¤§åˆ™ç›´æ¥ä¿®æ”¹ï¼Œç›¸å·®å°åˆ™æ…¢æ…¢è¿½èµ¶ã€ï¼Œæ¯”è¾ƒé€‚åˆé¢‘ç¹å¯åŠ¨çš„ä¸šåŠ¡åœºæ™¯ã€‚\n å¼€å¯ timedatectl çš„ NTP åŒæ­¥  å¼€å¯ timedatectl çš„ NTP åŒæ­¥éœ€è¦ç³»ç»Ÿå®‰è£… NTP å®¢æˆ·ç«¯ã€Œntpd æˆ–è€… chronyï¼ŒUbuntu è¿˜å¯ä»¥å®‰è£… timesyncdã€ï¼Œå¦åˆ™ä¼šæœ‰ Failed to set ntp: NTP not supported. çš„æŠ¥é”™ã€‚\ntimedatectl set-ntp true  ä¿®æ”¹é…ç½®ä¸ºå¼€å¯çŠ¶æ€ï¼Œå†ä½¿ç”¨ timedatectl æŸ¥çœ‹ NTP enabledã€NTP synchronized åŒæ­¥çŠ¶æ€å³å¯ã€‚å¦‚æœæ²¡æœ‰å®‰è£… chrony ç­‰åŒæ­¥è½¯ä»¶ï¼Œå¯å‚è€ƒå¦‚ä¸‹æ³¨æ„äº‹é¡¹çš„ timedatectl è¾“å‡ºã€‚\næ³¨æ„äº‹é¡¹ âš ï¸ æ‰‹åŠ¨å®‰è£…æ“ä½œç³»ç»Ÿæ—¶ï¼Œä¼šæç¤ºæ˜¯å¦æ‰“å¼€ NTP æ—¶é’ŸåŒæ­¥ï¼Œå¦‚æœé€‰æ‹©æ‰“å¼€é‚£ä¹ˆä¼šé»˜è®¤å®‰è£… chrony ç›¸å…³è½¯ä»¶ç”¨äºç³»ç»Ÿæ—¶é—´åŒæ­¥ï¼Œå¦‚æœä¸æ‰“å¼€ï¼Œåˆ™ä¸ä¼šå®‰è£… chronyï¼Œå¦‚æ­¤ç³»ç»Ÿæ—¶é—´å°†ä¸ä¼šåŒæ­¥ã€‚\n å®‰è£…ç³»ç»Ÿæ—¶ï¼Œä¸å¼€å¯ NTPï¼Œtimedatectl çš„è¾“å‡ºï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ NTP å®¢æˆ·ç«¯çš„æƒ…å†µã€‚   \u0026gt;root ~ [node1]# timedatectl Local time: å…­ 2021-06-26 10:53:42 CST Universal time: å…­ 2021-06-26 02:53:42 UTC RTC time: å…­ 2021-06-26 10:53:26 Time zone: Asia/Shanghai (CST, +0800) NTP enabled: n/a NTP synchronized: no RTC in local TZ: no DST active: n/a   å®‰è£…ç³»ç»Ÿæ—¶ï¼Œå¼€å¯ NTPï¼Œtimedatectl çš„è¾“å‡º   \u0026gt;root ~ [node1]# timedatectl Local time: å…­ 2021-06-26 11:15:36 CST Universal time: å…­ 2021-06-26 03:15:36 UTC RTC time: å…­ 2021-06-26 03:15:36 Time zone: Asia/Shanghai (CST, +0800) NTP enabled: yes NTP synchronized: yes RTC in local TZ: no DST active: n/a   å¦‚æœå®‰è£…ç³»ç»Ÿæ—¶ä¸å¼€å¯ NTPï¼Œchrony ä¸ºåæœŸå®‰è£…ï¼Œé‚£ timedatectl çš„è¾“å‡ºå¦‚ä¸‹ã€‚åŒæ—¶éœ€è¦æ‰‹åŠ¨å¼€å¯ NTP åŒæ­¥ï¼ŒNTP enabled: no æ‰ä¼šå˜æˆ yesã€‚   \u0026gt;root ~ [node1]# timedatectl Local time: å…­ 2021-06-26 11:15:36 CST Universal time: å…­ 2021-06-26 03:15:36 UTC RTC time: å…­ 2021-06-26 03:15:36 Time zone: Asia/Shanghai (CST, +0800) NTP enabled: no NTP synchronized: no RTC in local TZ: no DST active: n/a  date æ­¤å¤„çœç•¥ æˆ‘æ„Ÿè§‰ä¸€è¡Œå‘½ä»¤å°±å¯ä»¥äº†â€¦â€¦ã€Œç½‘ä¸Šå¯¹äº date å‘½ä»¤çš„ä»‹ç»å¾ˆå¤šã€\ndate +\u0026quot;%Y-%m-%d %H:%M\u0026quot;  chrony Chrony æ˜¯ä¸€ä¸ª NTP å®¢æˆ·ç«¯çš„æ›¿ä»£å“ã€‚å®ƒå¯ä»¥æ›´å¿«åœ°åŒæ­¥ç³»ç»Ÿæ—¶é’Ÿï¼Œæ—¶é—´ç²¾åº¦æ›´é«˜ï¼Œå¯¹äºä¸€ç›´ä¸åœ¨çº¿çš„ç³»ç»Ÿå°¤å…¶æœ‰ç”¨ã€‚chronyd è¾ƒå°ï¼Œå®ƒä½¿ç”¨è¾ƒå°‘çš„å†…å­˜ï¼Œåªåœ¨å¿…è¦æ—¶æ‰å”¤é†’ CPUï¼Œè¿™æ ·å¯ä»¥æ›´å¥½åœ°èŠ‚çœç”µèƒ½ã€‚å³ä½¿ç½‘ç»œæ‹¥å¡è¾ƒé•¿æ—¶é—´ï¼Œå®ƒä¹Ÿèƒ½å¾ˆå¥½åœ°è¿è¡ŒåŒæ­¥æ—¶é—´ã€‚å®ƒç”±ä¸¤ä¸ªç¨‹åºç»„æˆï¼Œåˆ†åˆ«æ˜¯ chronyd å’Œ chronycã€‚chronyd æ˜¯ä¸€ä¸ªåå°è¿è¡Œçš„å®ˆæŠ¤è¿›ç¨‹ï¼Œç”¨äºè°ƒæ•´å†…æ ¸ä¸­è¿è¡Œçš„ç³»ç»Ÿæ—¶é’Ÿå’Œæ—¶é’ŸæœåŠ¡å™¨åŒæ­¥ã€‚å®ƒç¡®å®šè®¡ç®—æœºå¢å‡æ—¶é—´çš„æ¯”ç‡ï¼Œå¹¶å¯¹æ­¤è¿›è¡Œè¡¥å¿ã€‚chronyc æä¾›äº†ä¸€ä¸ªç”¨æˆ·ç•Œé¢ï¼Œç”¨äºç›‘æ§æ€§èƒ½å¹¶è¿›è¡Œå¤šæ ·åŒ–çš„é…ç½®ã€‚\nå®‰è£… chrony è½¯ä»¶åŒ… yum install -y chrony  ä¿®æ”¹é…ç½® # controller - server * + server 127.127.1.0 iburst + allow 192.168.10.0/24 # node - server * + server controller iburst  å¯åŠ¨æœåŠ¡ï¼Œå¹¶è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ systemctl start chronyd \u0026amp;\u0026amp; systemctl enable chronyd  ntp å®‰è£… ntp è½¯ä»¶åŒ… yum -y install ntp  å¤‡ä»½é…ç½® # é…ç½®å„èŠ‚ç‚¹ ntpd é…ç½®æ–‡ä»¶ cp /etc/ntp.conf{,.bak}  ä¿®æ”¹é…ç½® # ç®¡ç†èŠ‚ç‚¹ä½¿ç”¨æœ¬åœ°æ—¶é’Ÿæº,æ‰§è¡Œä»¥ä¸‹è¯­å¥å³å¯ cat \u0026lt;\u0026lt;EOF\u0026gt;/etc/ntp.conf driftfile /var/lib/ntp/drift restrict default kod nomodify notrap nopeer noquery restrict -6 default kod nomodify notrap nopeer noquery restrict 127.0.0.1 restrict -6 ::1 server 127.127.1.0 iburst includefile /etc/ntp/crypto/pw keys /etc/ntp/keys EOF # å…¶ä»–èŠ‚ç‚¹çš„æ—¶é’Ÿæºä¸ºç®¡ç†èŠ‚ç‚¹ï¼Œæ‰§è¡Œä»¥ä¸‹è¯­å¥å³å¯ cat \u0026lt;\u0026lt;EOF\u0026gt;/etc/ntp.conf driftfile /var/lib/ntp/drift restrict default kod nomodify notrap nopeer noquery restrict -6 default kod nomodify notrap nopeer noquery restrict 127.0.0.1 restrict -6 ::1 server node1 iburst includefile /etc/ntp/crypto/pw keys /etc/ntp/keys EOF  æ‰‹åŠ¨è®¾ç½®æ—¶é—´ï¼Œå†™å…¥ç¡¬ä»¶æ—¶é’Ÿ\nã€ŒCentOS 7 åŠ¡å¿…ä½¿ç”¨ timedatectl æ¥æ“ä½œã€\n# ä¿®æ”¹å„èŠ‚ç‚¹æ—¶é—´,æ—¶é—´ä¸ºå½“å‰æ—¶é—´ date -s \u0026quot;2019-11-30 16:07:00\u0026quot; # å†™å…¥ç¡¬ä»¶æ—¶é’Ÿ hwclock -w  å¯åŠ¨æœåŠ¡ï¼Œå¹¶è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ # å„èŠ‚ç‚¹å¯åŠ¨æœåŠ¡ systemctl start ntpd # å„èŠ‚ç‚¹è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ systemctl enable ntpd  æ‰‹åŠ¨é…ç½®æ—¶é’Ÿ æ‰‹åŠ¨é…ç½®å®Œæ—¶é’Ÿåä¸€å®šè¦åŒæ­¥åˆ°ç¡¬ä»¶æ—¶é’Ÿé‡Œ\ntimedatectl set-time \u0026quot;20:01:09\u0026quot;  date -s \u0026quot;20:01:09\u0026quot;  æ—¶é’ŸåŒæ­¥çŠ¶æ€æ ¡éªŒ  timedatectl  timedatectl status \u0026gt;root ~ [node1]# timedatectl status Local time: äºŒ 2021-06-29 16:47:25 CST Universal time: äºŒ 2021-06-29 08:47:25 UTC RTC time: äºŒ 2021-06-29 08:47:25 Time zone: Asia/Shanghai (CST, +0800) NTP enabled: yes NTP synchronized: yes RTC in local TZ: no DST active: n/a   chrony  chronyc sources -v chronyc tracking \u0026gt;root ~ [node1]# chronyc sources -v 210 Number of sources = 4 .-- Source mode '^' = server, '=' = peer, '#' = local clock. / .- Source state '*' = current synced, '+' = combined , '-' = not combined, | / '?' = unreachable, 'x' = time may be in error, '~' = time too variable. || .- xxxx [ yyyy ] +/- zzzz || Reachability register (octal) -. | xxxx = adjusted offset, || Log2(Polling interval) --. | | yyyy = measured offset, || \\ | | zzzz = estimated error. || | | \\ MS Name/IP address Stratum Poll Reach LastRx Last sample =============================================================================== ^- tock.ntp.infomaniak.ch 1 10 377 22m +12ms[ +12ms] +/- 104ms ^* 120.25.115.20 2 10 377 307 +423us[ +432us] +/- 18ms ^- ntp1.flashdance.cx 2 10 377 664 +8908us[+8917us] +/- 154ms ^+ 119.28.183.184 2 10 337 884 -462us[ -453us] +/- 32ms   ntp  ntpq -p ntpstat  å‚è€ƒèµ„æ–™ https://www.iamhippo.com/2020-01/1306.html https://blog.csdn.net/weixin_34270606/article/details/91881851 https://ywnz.com/linuxml/5215.html https://www.cnblogs.com/opsprobe/p/13779933.html\n  Since Ubuntu 16.04 timedatectl / timesyncd (which are part of systemd) replace most of ntpdate / ntp. @ https://ubuntu.com/server/docs/network-ntp \u0026#x21a9;\u0026#xfe0e;\n   ","id":1,"section":"posts","summary":"ğŸ‘Œ 2021-06-26 Linux æ—¶é—´å…¨è§£ FileInfo Filename - Linux æ—¶é—´å…¨è§£ Version - v1.1.2107ï¼ˆ2021/06/26 ~ 2021/07/01ï¼‰ Author - nuo standuke Email - shadowdoker@gmail.com DescriptionKey - Linux time solution ç‰ˆæœ¬ä¿®è®¢è®°å½•ï¼š v1","tags":["Linux","CentOS"],"title":"Linux æ—¶é—´å…¨è§£","uri":"https://blog.standuke.top/2021/06/2021-06-26-linux-%E6%97%B6%E9%97%B4%E5%85%A8%E8%A7%A3/","year":"2021"},{"content":"ğŸ‘Œ 2021-05-19 é˜¿é‡Œäº‘ä¸»æœº EIP è‡´ä½¿ FTP æ— æ³•è¿æ¥  ä¸Šåˆæ”¶åˆ°äº†ä¸ªååŠ©å·¥å•ï¼ŒæœŸé—´äº¤æ‰‹äº†ä¸¤ä½åŒäº‹éƒ½æ²¡è§£å†³æ‰çš„ ftp å¥‡ç‰¹ç°è±¡ï¼Œå°±è½¬åˆ°æˆ‘è¿™è¾¹äº†ã€‚ æ–‡ä¸­æ¶‰åŠåˆ°çš„ç›¸å…³ å…¬ç½‘ IP åœ°å€å‡ç‰¹æ®ŠåŒ–å¤„ç†\n [TOC]\nç°è±¡ Linux ä½¿ç”¨è‡ªå¸¦ ftp å‘½ä»¤æˆ–è€… Windows ä½¿ç”¨èµ„æºç®¡ç†å™¨è®¿é—®é˜¿é‡Œäº‘ä¸»æœºæ­å»ºçš„ ftp æœåŠ¡ï¼Œæ— è®ºæ˜¯ä¸»åŠ¨æ¨¡å¼è¿˜æ˜¯è¢«åŠ¨æ¨¡å¼å‡åªèƒ½å»ºç«‹å‘½ä»¤ç«¯å£ã€Œ21 ç«¯å£ã€è¿æ¥ï¼Œæ— æ³•åˆ›å»ºæ•°æ®ç«¯å£è¿æ¥ï¼Œå¯¼è‡´åªèƒ½ç™»å½•ç”¨æˆ·è€Œä¸èƒ½å±•ç°æ–‡ä»¶å¤¹ä»¥åŠä¸Šä¼ ä¸‹è½½æ•°æ®ã€‚ç°åœº 21 ç«¯å£ä½¿ç”¨ 2100 æ›¿ä»£ã€‚\n è¡¨ç° 1  ä½¿ç”¨ä¸»åŠ¨æ¨¡å¼æˆ–è€…è¢«åŠ¨æ¨¡å¼å‡æ— æ³•æ˜¾ç¤ºç›®å½•ä¿¡æ¯\n è¡¨ç° 2  ä½¿ç”¨ lftp å®¢æˆ·ç«¯æˆ–è€… Windows ä¸‹çš„ WinSCP è½¯ä»¶å¯ æ­£å¸¸ä½¿ç”¨ æ­¤äº‘ä¸»æœºçš„ ftp æœåŠ¡ã€Œå¥‡æ€ªä¹‹å¤„ã€å…¶å®æ˜¯ lftp ç¨‹åºè¿˜æ”¯æŒ FXPï¼Œå…è®¸æ•°æ®ç»•è¿‡å®¢æˆ·ç«¯ç›´æ¥åœ¨ä¸¤ä¸ª FTP æœåŠ¡å™¨ä¹‹é—´ä¼ è¾“ã€‚\næ•…éšœæ’æŸ¥  æ£€æŸ¥ ç³»ç»Ÿç¯å¢ƒã€Œæ— é—®é¢˜ã€  æ“ä½œç³»ç»Ÿç¯å¢ƒã€å†…æ ¸ä¿¡æ¯ã€ç³»ç»Ÿé˜²ç«å¢™ã€SELinux çŠ¶æ€\n[root@aliyun ~]# cat /etc/redhat-release CentOS release 6.5 (Final) [root@aliyun ~]# uname -a Linux aliyun 2.6.32-696.28.1.el6.i686 #1 SMP Wed May 9 23:34:25 UTC 2018 i686 i686 i386 GNU/Linux [root@aliyun ~]# getenforce Disabled [root@aliyun ~]# service iptables status iptables: Firewall is not running.  å¼ºåˆ¶ä¿®æ”¹ä¸»è¢«åŠ¨è¿æ¥æ¨¡å¼  æœåŠ¡ç«¯ç«¯å£å¼€æ”¾ä¿¡æ¯\n[root@aliyun ~]# netstat -antpl | grep ftp tcp 0 0 172.17.9.135:21485 0.0.0.0:* LISTEN 3756/vsftpd tcp 0 0 0.0.0.0:2100 0.0.0.0:* LISTEN 1671/vsftpd tcp 0 0 172.17.9.135:2100 125.120.45.15:54654 ESTABLISHED 3756/vsftpd  å®¢æˆ·ç«¯ç«¯å£å¼€æ”¾ä¿¡æ¯\n \u0026gt;root ~ [Node1]# netstat -antlp | grep ftp tcp 0 0 192.168.0.130:60330 0.0.0.0:* LISTEN 3415/ftp tcp 0 0 192.168.0.130:54654 123.56.241.199:2100 ESTABLISHED 3415/ftp  æ­¤æ—¶ åˆ‡æ¢ ftp ä¸»è¢«åŠ¨æ¨¡å¼å‡ºç°å¦‚ä¸‹çŠ¶æ€\n \u0026gt;root ~ [Node1]# ftp ftp\u0026gt; open 123.56.241.199 2100 Connected to 123.56.241.199 (123.56.241.199). 220 (vsFTPd 2.2.2) Name (123.56.241.199:root): ftpuser_1 331 Please specify the password. Password: 230 Login successful. Remote system type is UNIX. Using binary mode to transfer files. ftp\u0026gt; ls 227 Entering Passive Mode (172,17,9,135,83,237). ftp: connect: æ²¡æœ‰åˆ°ä¸»æœºçš„è·¯ç”± ftp\u0026gt; pass Passive mode off. ftp\u0026gt; ls 500 Illegal PORT command. ftp: bind: åœ°å€å·²åœ¨ä½¿ç”¨ ftp\u0026gt; ls 500 Illegal PORT command.  tcpdump æŠ“åŒ…åˆ†æ  17:01:02.917229 IP 172.17.9.135.ftp \u0026gt; 60.191.16.170.25460: Flags [P.], seq 78:97, ack 44, win 227, options [nop,nop,TS val 6760674 ecr 4083902134], length 19  ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯æœ¬åœ°å¼€æ”¾äº† ftp çš„æ•°æ®ç«¯å£ï¼Œä½†æ˜¯ä¸€ç›´åœ¨ä¾¦å¬çŠ¶æ€ï¼Œäº ç¬¬äºŒæ­¥ å‡ºç°çš„æƒ…å†µä¸€è‡´ã€‚\nåŸå› åˆ†æ æŒ‰ç…§æ•…éšœæ’æŸ¥ï¼ŒåŸºæœ¬å¯ä»¥ç¡®å®šé—®é¢˜å‡ºç°åœ¨ç½‘ç»œè®¿é—®å±‚é¢ï¼Œä¸”æœ¬åœ° ftp å·¥ä½œæ­£å¸¸ã€Œä¾‹å¦‚èƒ½å¤Ÿæ‰“å¼€å‘½ä»¤ç«¯å£æ­£å¸¸ç™»å½•ï¼Œæ­£å¸¸æ‰“å¼€æ•°æ®ä¼ è¾“æ¥å£ç›‘å¬è¿æ¥ã€ï¼Œåªæœ‰åœ¨æ‰“å¼€æ•°æ®ä¼ è¾“æ¥å£ç›‘å¬è¿æ¥æ—¶ï¼Œæ²¡æœ‰å®¢æˆ·ç«¯å»ä¸å…¶å»ºç«‹è¿æ¥ã€‚\næ‰€ä»¥èƒ½ç¡®å®šæ•…éšœåœ¨ å®¢æˆ·ç«¯æ— æ³•è®¿é—®æœåŠ¡ç«¯çš„æ•°æ®æ¥å£\næŸ¥çœ‹äº‘ä¸»æœºçš„ IP ä¿¡æ¯ï¼Œå‘ç°åœ¨äº‘ä¸»æœºä¸Šå¹¶æ²¡æœ‰ å…¬ç½‘ IP åœ°å€ï¼Œåªæœ‰ä¸€ä¸ªå†…ç½‘ IP åœ°å€ã€‚æ‰€ä»¥èƒ½å¤Ÿç¡®å®šå¯¼è‡´æ­¤ç°è±¡çš„åŸå› åœ¨äºé˜¿é‡Œäº‘å†…éƒ¨æ˜ å°„å…¬ç½‘çš„ NAT æœºåˆ¶ã€‚\n[root@aliyun ~]# ip a 1: lo: \u0026lt;LOOPBACK,UP,LOWER_UP\u0026gt; mtu 65536 qdisc noqueue state UNKNOWN link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo 2: eth0: \u0026lt;BROADCAST,MULTICAST,UP,LOWER_UP\u0026gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000 link/ether 00:16:3e:14:47:0f brd ff:ff:ff:ff:ff:ff inet 172.17.9.135/20 brd 172.17.15.255 scope global eth0  ä¹Ÿå°±æ˜¯è¯´æ•´ä½“æ•°æ®æµæ€è·¯ä¸º\n å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡ç«¯ 21 å‘½ä»¤ç«¯å£ã€Œç”¨æˆ·å¯ç™»å½•ã€ å®¢æˆ·ç«¯è¯·æ±‚ä¸‹è½½æ–‡ä»¶æˆ–è€…å±•ç¤ºç›®å½•ä¿¡æ¯: å®¢æˆ·ç«¯é€šè¿‡ 21 ç«¯å£å°†è¯·æ±‚å‘é€è‡³æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°åæ‰“å¼€æœ¬åœ°éšæœºç«¯å£ã€Œä¾‹å¦‚21423ã€ä½œä¸ºæ•°æ®ç«¯å£ï¼Œå¹¶æŠŠæ­¤ IP:ç«¯å£ ä¿¡æ¯é€šè¿‡å‘½ä»¤ç«¯å£ 21 å‘é€è‡³å®¢æˆ·ç«¯  é—®é¢˜å°±å‡ºç°åœ¨è¿™é‡Œï¼Œè¿™é‡Œçš„ IP:ç«¯å£ ä¿¡æ¯ï¼Œç”±äºäº‘ä¸»æœºåªæœ‰å†…ç½‘ IP ï¼Œæ‰€ä»¥è¿™é‡Œè¿”å›ç»™å®¢æˆ·ç«¯çš„ IP:ç«¯å£ä¿¡æ¯ ä¸º 172.17.9.135:21423 è€Œä¸æ˜¯ 123.56.241.199:21423 æ‰€ä»¥å®¢æˆ·ç«¯å½“ç„¶æ— æ³•è®¿é—® ä¸€ä¸ªå†…ç½‘ IP å•¦\nè§£å†³æ–¹æ¡ˆ é˜¿é‡Œäº‘å¯¹äº å…¬ç½‘ IP æœ‰äº§å“å«åš EIP å¼¹æ€§å…¬ç½‘IPï¼ˆElastic IP Addressï¼Œç®€ç§° EIPï¼‰æ”¯æŒç»‘å®šå¼¹æ€§ç½‘å¡ ENIï¼ˆElastic Network Interfaceï¼‰ã€‚é€šè¿‡ç»‘å®šå¼¹æ€§ç½‘å¡ï¼Œæ‚¨å¯ä»¥æ„é€ å‡ºæ›´å¥å£®ã€æ›´çµæ´»ã€æ‰©å±•æ€§æ›´å¼ºçš„ITè§£å†³æ–¹æ¡ˆï¼ŒåŒæ—¶è®©å•å°æœåŠ¡å™¨å…·å¤‡å¤šä¸ªå…¬ç½‘IPçš„èƒ½åŠ›ã€‚\næŒ‰ç…§ äº§å“è®¾è®¡ EIP æœ‰ä»¥ä¸‹å·¥ä½œæ¨¡å¼\n æ™®é€šæ¨¡å¼ã€Œäº‘ä¸»æœºä¸Šåªæœ‰ä¸€ä¸ªå†…ç½‘ IPï¼Œé€šè¿‡ NAT æ–¹å¼æ˜ å°„åˆ°å…¬ç½‘ã€ EIP ç½‘å¡å¯è§æ¨¡å¼ã€Œäº‘ä¸»æœºä¸Šèƒ½çœ‹åˆ°å…¬ç½‘ IPï¼Œç›¸å½“äºç›´æ¥ä¸€å°å…¬ç½‘æœºå™¨ã€     æ¯”è¾ƒç‚¹ æ™®é€šæ¨¡å¼ EIPç½‘å¡å¯è§æ¨¡å¼     EIPåœ¨æ“ä½œç³»ç»Ÿå†…éƒ¨çš„å¼¹æ€§ç½‘å¡ä¸Šæ˜¯å¦å¯è§ å¦ æ˜¯ã€Œé€šè¿‡ifconfigæˆ–ipconfigè·å–ç½‘å¡çš„å…¬ç½‘IPåœ°å€ã€‚ã€   EIP æ”¯æŒç»‘å®šå¼¹æ€§ç½‘å¡çš„ç±»å‹ ä¸»å¼¹æ€§ç½‘å¡å’Œè¾…åŠ©å¼¹æ€§ç½‘å¡ ä»…æ”¯æŒç»‘å®šè¾…åŠ©å¼¹æ€§ç½‘å¡   ä¸»å¼¹æ€§ç½‘å¡å…è®¸ç»‘å®šçš„ EIP æ•°é‡ 1ä¸ª ä¸æ”¯æŒç»‘å®šä¸»å¼¹æ€§ç½‘å¡   è¾…åŠ©å¼¹æ€§ç½‘å¡å…è®¸ç»‘å®šçš„EIPæ•°é‡ å–å†³äºè¾…åŠ©å¼¹æ€§ç½‘å¡çš„ç§ç½‘IPæ•°é‡ã€ŒEIPå’Œè¾…åŠ©å¼¹æ€§ç½‘å¡çš„ç§ç½‘IPåœ°å€ä¸€ä¸€æ˜ å°„ï¼Œå¦‚è¾…åŠ©å¼¹æ€§ç½‘å¡ä¸Šå…±æœ‰10ä¸ªç§ç½‘IPåœ°å€ï¼Œæœ€å¤šå¯ä¸ºæ­¤å¼¹æ€§ç½‘å¡ç»‘å®š10ä¸ªEIPã€‚ã€ 1ä¸ªã€Œç½‘å¡å¯è§æ¨¡å¼ä¸‹ï¼ŒEIPåªèƒ½ç»‘å®šè¾…åŠ©å¼¹æ€§ç½‘å¡ä¸Šçš„ä¸»ç§ç½‘IPã€‚ã€   EIP ç»‘å®šè¾…åŠ©å¼¹æ€§ç½‘å¡ï¼Œè¾…åŠ©å¼¹æ€§ç½‘å¡çš„ç§ç½‘åŠŸèƒ½æ˜¯å¦å¯ç”¨ æ˜¯ å¦   æ”¯æŒçš„åè®®ç±»å‹ EIPä½œä¸ºNAT ALGï¼ˆNATåº”ç”¨å±‚ç½‘å…³ï¼‰éƒ¨ç½²æ—¶ï¼Œä¸æ”¯æŒå¦‚H.323ã€SIPã€DNSã€RTSPç­‰åè®® EIPå¯æ”¯æŒå…¨éƒ¨IPåè®®ç±»å‹ï¼Œæ”¯æŒFTPã€H.323ã€SIPã€DNSã€RTSPã€TFTPç­‰åè®®    https://help.aliyun.com/document_detail/88991.htm?spm=a2c4g.11186623.2.8.26a81689kaKLht https://help.aliyun.com/knowledge_detail/185319.html?spm=5176.11065259.1996646101.searchclickresult.502375a7WG8E4C\n æ‰€ä»¥\né—®é¢˜å°±å‡ºåœ¨ EIP å·¥ä½œæ¨¡å¼ä¸ºã€Œæ™®é€šæ¨¡å¼ã€ï¼Œæ™®é€šæ¨¡å¼ä¸æ”¯æŒ FTP åè®®ï¼Œä¹Ÿåªæœ‰ã€Œç½‘å¡å¯è§æ¨¡å¼ã€èƒ½å®ç°è¿”å›å‘½ä»¤ç«¯å£ä¿¡æ¯ IP:ç«¯å£ ä¸º 123.56.241.199:21423\n EIP ç½‘å¡å¯è§æ¨¡å¼åŠŸèƒ½ä½¿ EIP åœ¨ç½‘å¡ä¸Šå¯è§ï¼Œè§£å†³äº†ä¸Šè¿°é—®é¢˜ã€‚åœ¨ EIP ç½‘å¡å¯è§æ¨¡å¼ä¸‹ï¼š\n EIP æ›¿æ¢è¾…åŠ©å¼¹æ€§ç½‘å¡çš„ç§ç½‘ IPï¼Œè¾…åŠ©å¼¹æ€§ç½‘å¡å°†å˜ä¸ºä¸€ä¸ªçº¯å…¬ç½‘ç½‘å¡ï¼Œç§ç½‘åŠŸèƒ½ä¸å†å¯ç”¨ã€‚ EIP åœ¨æ“ä½œç³»ç»Ÿå†…éƒ¨çš„å¼¹æ€§ç½‘å¡ä¸Šå¯è§ï¼Œå¯ç›´æ¥é€šè¿‡ ifconfig æˆ– ipconfig è·å–ç½‘å¡ä¸Šçš„å…¬ç½‘ IP åœ°å€ã€‚ EIP å¯æ”¯æŒå…¨éƒ¨ IP åè®®ç±»å‹ï¼Œæ”¯æŒ FTPã€H.323ã€SIPã€DNSã€RTSPã€TFTP ç­‰åè®®ã€‚ ä¸€ä¸ªè¾…åŠ©å¼¹æ€§ç½‘å¡ä»…æ”¯æŒç»‘å®šä¸€ä¸ª EIPã€‚  æ€»ç»“ æœ€ç»ˆæ›´æ¢ EIP å·¥ä½œæ¨¡å¼ä¸ºã€Œç½‘å¡å¯è§æ¨¡å¼ã€å°±è§£å†³äº†æ­¤æ¬¡åŸæœ¬å¯ä»¥ä¸å­˜åœ¨çš„æ•…éšœâ€¦â€¦\nä¿®æ”¹å®Œã€Œç½‘å¡å¯è§æ¨¡å¼ã€ååœ¨æ“ä½œç³»ç»Ÿå†…å¯è§å…¬ç½‘ IP å¦‚ä¸‹ã€Œeth1ã€\n1: lo: \u0026lt;LOOPBACK,UP,LOWER_UP\u0026gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: eth0: \u0026lt;BROADCAST,MULTICAST,UP,LOWER_UP\u0026gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 00:16:3f:00:79:8e brd ff:ff:ff:ff:ff:ff inet 192.168.11.161/24 brd 192.168.11.255 scope global dynamic eth0 valid_lft 315084196sec preferred_lft 315084196sec inet6 fe80::216:3fff:fe00:798e/64 scope link valid_lft forever preferred_lft forever 3: eth1: \u0026lt;BROADCAST,MULTICAST,UP,LOWER_UP\u0026gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 00:16:3e:13:10:f7 brd ff:ff:ff:ff:ff:ff inet 123.56.241.199/22 brd 121.196.247.255 scope global dynamic eth1 valid_lft 315084199sec preferred_lft 315084199sec inet6 fe80::216:3eff:fe13:10f7/64 scope link valid_lft forever preferred_lft forever  https://help.aliyun.com/document_detail/98641.htm?spm=a2c4g.11186623.2.6.26a81689kaKLht\näº‘ä¸»æœºå‚å•†çš„ç½‘ç»œç¯å¢ƒï¼Œè¿˜æ˜¯è¦å¤šåŠ äº†è§£ï¼Œå¯¹äºæ•°æ®æµå‘è¦æ¸…æ¥šç½‘ç»œçš„å®ç°æ–¹å¼ï¼Œå…³é”®æ—¶å€™è¿˜æ˜¯è¦å›åˆ°å®˜æ–¹æ–‡æ¡£ã€‚\n","id":2,"section":"posts","summary":"ğŸ‘Œ 2021-05-19 é˜¿é‡Œäº‘ä¸»æœº EIP è‡´ä½¿ FTP æ— æ³•è¿æ¥ ä¸Šåˆæ”¶åˆ°äº†ä¸ªååŠ©å·¥å•ï¼ŒæœŸé—´äº¤æ‰‹äº†ä¸¤ä½åŒäº‹éƒ½æ²¡è§£å†³æ‰çš„ ftp å¥‡ç‰¹ç°è±¡ï¼Œå°±è½¬åˆ°æˆ‘è¿™è¾¹äº†ã€‚ æ–‡ä¸­æ¶‰åŠåˆ°çš„ç›¸å…³ å…¬ç½‘ IP åœ°å€å‡ç‰¹","tags":["Aliyun","EIP"],"title":"é˜¿é‡Œäº‘ä¸»æœº EIP è‡´ä½¿ FTP æ— æ³•è¿æ¥","uri":"https://blog.standuke.top/2021/05/2021-05-19-%E9%98%BF%E9%87%8C%E4%BA%91%E4%B8%BB%E6%9C%BA-eip-%E8%87%B4%E4%BD%BF-ftp-%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5/","year":"2021"},{"content":"ğŸ‘Œ 2021-05-08 OpenStack Wallaby éƒ¨ç½²4 å®‰ç½®æœåŠ¡-placement  FileInfo Filename - OpenStack Wallaby éƒ¨ç½²ç®€ä»‹ Version - v1.0.2105ï¼ˆ2021/05/08 ~ 2021/05/10ï¼‰ Author - standuke Email - shadowdoker@gmail.com DescriptionKey - Placement installation of OpenStack Wallaby deployment\n ç‰ˆæœ¬ä¿®è®¢è®°å½•ï¼š\nv1.0.2105ï¼š2021-05-08ï¼šå»ºç«‹ OpenStack Wallaby éƒ¨ç½²4 å®‰ç½®æœåŠ¡-placementï¼Œä¿®è®¢äººï¼šstanduke\n[TOC]\nMariaDB åˆ›å»ºç”¨æˆ·  åˆ›å»ºæ•°æ®åº“  CREATE DATABASE placement;  æˆäºˆæƒé™  PLACEMENT_DBPASS = PLACEMENT\nGRANT ALL PRIVILEGES ON placement.* TO 'placement'@'localhost' \\ IDENTIFIED BY 'PLACEMENT_DBPASS'; GRANT ALL PRIVILEGES ON placement.* TO 'placement'@'%' \\ IDENTIFIED BY 'PLACEMENT_DBPASS'; flush privileges;  keystone åˆ›å»ºç›¸å…³ä¿¡æ¯ ç”Ÿæ•ˆç®¡ç†å‘˜ç”¨æˆ· . admin-openrc  åˆ›å»ºç”¨æˆ·ã€æœåŠ¡  åˆ›å»º placement ç”¨æˆ·  openstack user create --domain default --password-prompt placement +---------------------+----------------------------------+ | Field | Value | +---------------------+----------------------------------+ | domain_id | default | | enabled | True | | id | c5a59f718c1e41e4a38add5cce840372 | | name | placement | | options | {} | | password_expires_at | None | +---------------------+----------------------------------+  èµ‹äºˆ placement ç”¨æˆ·åˆ° service é¡¹ç›®ä¸­çš„ admin è§’è‰²  æ­¤å¤„çš„ service é¡¹ç›®å·²ç»åœ¨ keystone çš„ 2. åˆ›å»ºæœåŠ¡ã€ŒServiceã€ æ­¥éª¤å®Œæˆäº†ï¼Œæ‰€ä»¥åªéœ€è¦èµ‹äºˆè§’è‰²å³å¯\nopenstack role add --project service --user placement admin è¯¥å‘½ä»¤ä¸æä¾›ä»»ä½•è¾“å‡ºã€‚  åˆ›å»º glance æœåŠ¡å®ä½“  openstack service create --name placement --description \u0026quot;Placement API\u0026quot; placement +-------------+----------------------------------+ | Field | Value | +-------------+----------------------------------+ | description | Placement API | | enabled | True | | id | afa22a1b206d44a79234c535e82d1bb3 | | name | placement | | type | placement | +-------------+----------------------------------+  åˆ›å»ºæœåŠ¡ endpoint openstack endpoint create --region RegionOne placement public http://controller:8778 +--------------+----------------------------------+ | Field | Value | +--------------+----------------------------------+ | enabled | True | | id | d5488a2138bf4692aa0b672801b4c612 | | interface | public | | region | RegionOne | | region_id | RegionOne | | service_id | afa22a1b206d44a79234c535e82d1bb3 | | service_name | placement | | service_type | placement | | url | http://controller:8778 | +--------------+----------------------------------+ openstack endpoint create --region RegionOne placement internal http://controller:8778 +--------------+----------------------------------+ | Field | Value | +--------------+----------------------------------+ | enabled | True | | id | 0c06139bed0544709a08347df76d2153 | | interface | internal | | region | RegionOne | | region_id | RegionOne | | service_id | afa22a1b206d44a79234c535e82d1bb3 | | service_name | placement | | service_type | placement | | url | http://controller:8778 | +--------------+----------------------------------+ openstack endpoint create --region RegionOne placement admin http://controller:8778 +--------------+----------------------------------+ | Field | Value | +--------------+----------------------------------+ | enabled | True | | id | 9f2649d5d3544b52a6ccc7256c29dbb6 | | interface | admin | | region | RegionOne | | region_id | RegionOne | | service_id | afa22a1b206d44a79234c535e82d1bb3 | | service_name | placement | | service_type | placement | | url | http://controller:8778 | +--------------+----------------------------------+  éƒ¨ç½² palcement å®‰è£…è½¯ä»¶åŒ… apt install placement-api  ä¿®æ”¹é…ç½®æ–‡ä»¶  ç¼–è¾‘ /etc/placement/placement.conf æ–‡ä»¶å¹¶å®Œæˆä»¥ä¸‹æ“ä½œ  PLACEMENT_PASS = PLACEMENT_DBPASS =\u0026gt; PLACEMENT\nvim /etc/placement/placement.conf [placement_database] # ... connection = mysql+pymysql://placement:PLACEMENT_DBPASS@controller/placement [api] # ... auth_strategy = keystone [keystone_authtoken] # ... auth_url = http://controller:5000/v3 memcached_servers = controller:11211 auth_type = password project_domain_name = Default user_domain_name = Default project_name = service username = placement password = PLACEMENT_PASS  åˆå§‹åŒ– placement æ•°æ®åº“  su -s /bin/sh -c \u0026quot;placement-manage db sync\u0026quot; placement  é‡å¯ http systemctl restart apache2.service  æˆªè‡³ç›®å‰ apache2 æœåŠ¡çŠ¶æ€å¦‚ä¸‹\nâ— apache2.service - The Apache HTTP Server Loaded: loaded (/lib/systemd/system/apache2.service; enabled; vendor preset: enabled) Active: active (running) since Sat 2021-05-08 14:58:53 CST; 9s ago Docs: https://httpd.apache.org/docs/2.4/ Process: 19552 ExecStart=/usr/sbin/apachectl start (code=exited, status=0/SUCCESS) Main PID: 19565 (apache2) Tasks: 95 (limit: 308840) Memory: 54.3M CGroup: /system.slice/apache2.service â”œâ”€19565 /usr/sbin/apache2 -k start â”œâ”€19566 (wsgi:keystone-pu -k start â”œâ”€19567 (wsgi:keystone-pu -k start â”œâ”€19568 (wsgi:keystone-pu -k start â”œâ”€19569 (wsgi:keystone-pu -k start â”œâ”€19570 (wsgi:keystone-pu -k start â”œâ”€19571 (wsgi:placement-a -k start â”œâ”€19572 (wsgi:placement-a -k start â”œâ”€19573 (wsgi:placement-a -k start â”œâ”€19574 (wsgi:placement-a -k start â”œâ”€19575 (wsgi:placement-a -k start â”œâ”€19576 /usr/sbin/apache2 -k start â””â”€19577 /usr/sbin/apache2 -k start  é‡Œç¨‹ç¢‘ ç”Ÿæ•ˆç®¡ç†å‘˜ç”¨æˆ· . admin-openrc  æŸ¥çœ‹çŠ¶æ€ placement-status upgrade check apt install python3-pip pip3 install osc-placement root@node1:~# openstack --os-placement-api-version 1.2 resource class list --sort-column name +----------------------------+ | name | +----------------------------+ | DISK_GB | | FPGA | | IPV4_ADDRESS | | MEMORY_MB | | MEM_ENCRYPTION_CONTEXT | | NET_BW_EGR_KILOBIT_PER_SEC | | NET_BW_IGR_KILOBIT_PER_SEC | | NUMA_CORE | | NUMA_MEMORY_MB | | NUMA_SOCKET | | NUMA_THREAD | | PCI_DEVICE | | PCPU | | PGPU | | SRIOV_NET_VF | | VCPU | | VGPU | | VGPU_DISPLAY_HEAD | +----------------------------+  ","id":3,"section":"posts","summary":"ğŸ‘Œ 2021-05-08 OpenStack Wallaby éƒ¨ç½²4 å®‰ç½®æœåŠ¡-placement FileInfo Filename - OpenStack Wallaby éƒ¨ç½²ç®€ä»‹ Version - v1.0.2105ï¼ˆ2021/05/08 ~ 2021/05/10ï¼‰ Author - standuke Email - shadowdoker@gmail.com","tags":["OpenStack","Virtualization"],"title":"OpenStack Wallaby éƒ¨ç½²4 å®‰ç½®æœåŠ¡ Placement","uri":"https://blog.standuke.top/2021/05/2021-05-08-openstack-wallaby-%E9%83%A8%E7%BD%B24-%E5%AE%89%E7%BD%AE%E6%9C%8D%E5%8A%A1-placement/","year":"2021"},{"content":"ğŸ‘Œ 2021-05-08 OpenStack Wallaby éƒ¨ç½²3 é•œåƒæœåŠ¡-glance  FileInfo Filename - OpenStack Wallaby éƒ¨ç½²ç®€ä»‹ Version - v1.0.2105ï¼ˆ2021/05/08 ~ 2021/05/10ï¼‰ Author - standuke Email - shadowdoker@gmail.com DescriptionKey - Glance installation of OpenStack Wallaby deployment\n ç‰ˆæœ¬ä¿®è®¢è®°å½•ï¼š\nv1.0.2105ï¼š2021-05-07ï¼šå»ºç«‹ OpenStack Wallaby éƒ¨ç½²3 é•œåƒæœåŠ¡-glanceï¼Œä¿®è®¢äººï¼šstanduke\n[TOC]\nMariaDB åˆ›å»ºç”¨æˆ·  åˆ›å»ºæ•°æ®åº“  CREATE DATABASE glance;  æˆäºˆæƒé™  GLANCE_DBPASS = GLANCE\nGRANT ALL PRIVILEGES ON glance.* TO 'glance'@'localhost' \\ IDENTIFIED BY 'GLANCE_DBPASS'; GRANT ALL PRIVILEGES ON glance.* TO 'glance'@'%' \\ IDENTIFIED BY 'GLANCE_DBPASS'; flush privileges;  keystone åˆ›å»ºç›¸å…³ä¿¡æ¯ ç”Ÿæ•ˆç®¡ç†å‘˜ç”¨æˆ· . admin-openrc  åˆ›å»ºç”¨æˆ·ã€æœåŠ¡  åˆ›å»º glance ç”¨æˆ·  openstack user create --domain default --password-prompt glance +---------------------+----------------------------------+ | Field | Value | +---------------------+----------------------------------+ | domain_id | default | | enabled | True | | id | 47d82b6275844ddb9ef9053a20892521 | | name | glance | | options | {} | | password_expires_at | None | +---------------------+----------------------------------+  èµ‹äºˆ glance ç”¨æˆ·ã€service é¡¹ç›® admin è§’è‰²  æ­¤å¤„çš„ service é¡¹ç›®å·²ç»åœ¨ keystone çš„ 2. åˆ›å»ºæœåŠ¡ã€ŒServiceã€ æ­¥éª¤å®Œæˆäº†ï¼Œæ‰€ä»¥åªéœ€è¦èµ‹äºˆè§’è‰²å³å¯\nopenstack role add --project service --user glance admin è¯¥å‘½ä»¤ä¸æä¾›ä»»ä½•è¾“å‡ºã€‚  åˆ›å»º glance æœåŠ¡å®ä½“  openstack service create --name glance --description \u0026quot;OpenStack Image\u0026quot; image +-------------+----------------------------------+ | Field | Value | +-------------+----------------------------------+ | description | OpenStack Image | | enabled | True | | id | 8894d10830b84a6aa333d2534745656c | | name | glance | | type | image | +-------------+----------------------------------+  åˆ›å»ºæœåŠ¡ endpoint openstack endpoint create --region RegionOne image public http://controller:9292 +--------------+----------------------------------+ | Field | Value | +--------------+----------------------------------+ | enabled | True | | id | aaabde94a26341d39e93e41cd8aa0407 | | interface | public | | region | RegionOne | | region_id | RegionOne | | service_id | 8894d10830b84a6aa333d2534745656c | | service_name | glance | | service_type | image | | url | http://controller:9292 | +--------------+----------------------------------+ openstack endpoint create --region RegionOne image internal http://controller:9292 +--------------+----------------------------------+ | Field | Value | +--------------+----------------------------------+ | enabled | True | | id | 646ca2a253c14386b2d85bf53c8ddee8 | | interface | internal | | region | RegionOne | | region_id | RegionOne | | service_id | 8894d10830b84a6aa333d2534745656c | | service_name | glance | | service_type | image | | url | http://controller:9292 | +--------------+----------------------------------+ openstack endpoint create --region RegionOne image admin http://controller:9292 +--------------+----------------------------------+ | Field | Value | +--------------+----------------------------------+ | enabled | True | | id | 47a440c573e24bd4b3aec173903b8f17 | | interface | admin | | region | RegionOne | | region_id | RegionOne | | service_id | 8894d10830b84a6aa333d2534745656c | | service_name | glance | | service_type | image | | url | http://controller:9292 | +--------------+----------------------------------+  éƒ¨ç½² glance å®‰è£…è½¯ä»¶åŒ… apt install glance  ä¿®æ”¹é…ç½®æ–‡ä»¶  ç¼–è¾‘ /etc/glance/glance-api.conf æ–‡ä»¶  GLANCE_DBPASS = GLANCE\nvim /etc/glance/glance-api.conf [database] # ... connection = mysql+pymysql://glance:GLANCE_DBPASS@controller/glance [keystone_authtoken] # ... www_authenticate_uri = http://controller:5000 auth_url = http://controller:5000 memcached_servers = controller:11211 auth_type = password project_domain_name = Default user_domain_name = Default project_name = service username = glance password = GLANCE_PASS [paste_deploy] # ... flavor = keystone [glance_store] # ... stores = file,http default_store = file filesystem_store_datadir = /var/lib/glance/images/  åˆå§‹åŒ– glance æ•°æ®åº“  su -s /bin/sh -c \u0026quot;glance-manage db_sync\u0026quot; glance Upgraded database to: wallaby_contract01, current revision(s): wallaby_contract01 INFO [alembic.runtime.migration] Context impl MySQLImpl. INFO [alembic.runtime.migration] Will assume non-transactional DDL. Database is synced successfully.  å¯åŠ¨ glance systemctl start glance-api.service systemctl enable glance-api.service  é‡Œç¨‹ç¢‘ ä¸‹è½½æµ‹è¯•ç”¨é•œåƒ wget http://download.cirros-cloud.net/0.4.0/cirros-0.4.0-x86_64-disk.img  ä¸Šä¼ é•œåƒè‡³ glance  ä½¿ç”¨ qcow2 ç£ç›˜æ ¼å¼ï¼Œraw æ ¼å¼å’Œå…¬å…±å¯è§å°† img ä¸Šä¼  glance æœåŠ¡ï¼Œä»¥ä¾¿æ‰€æœ‰é¡¹ç›®éƒ½å¯ä»¥è®¿é—®  glance image-create --name \u0026quot;cirros\u0026quot; \\ --file cirros-0.4.0-x86_64-disk.img \\ --disk-format qcow2 --container-format bare \\ --visibility=public +------------------+----------------------------------------------------------------------------------+ | Property | Value | +------------------+----------------------------------------------------------------------------------+ | checksum | 443b7623e27ecf03dc9e01ee93f67afe | | container_format | bare | | created_at | 2021-05-08T06:18:45Z | | disk_format | qcow2 | | id | f824fa97-8e8e-4229-8bc6-8204ba8a2f46 | | min_disk | 0 | | min_ram | 0 | | name | cirros | | os_hash_algo | sha512 | | os_hash_value | 6513f21e44aa3da349f248188a44bc304a3653a04122d8fb4535423c8e1d14cd6a153f735bb0982e | | | 2161b5b5186106570c17a9e58b64dd39390617cd5a350f78 | | os_hidden | False | | owner | b78ed759bf184f21bb0a1461d5d9607d | | protected | False | | size | 12716032 | | status | active | | tags | [] | | updated_at | 2021-05-08T06:18:45Z | | virtual_size | 46137344 | | visibility | public | +------------------+----------------------------------------------------------------------------------+  ç¡®è®¤ä¸Šä¼ æˆåŠŸ  glance image-list +--------------------------------------+--------+ | ID | Name | +--------------------------------------+--------+ | f824fa97-8e8e-4229-8bc6-8204ba8a2f46 | cirros | +--------------------------------------+--------+  ","id":4,"section":"posts","summary":"ğŸ‘Œ 2021-05-08 OpenStack Wallaby éƒ¨ç½²3 é•œåƒæœåŠ¡-glance FileInfo Filename - OpenStack Wallaby éƒ¨ç½²ç®€ä»‹ Version - v1.0.2105ï¼ˆ2021/05/08 ~ 2021/05/10ï¼‰ Author - standuke Email - shadowdoker@gmail.com DescriptionKey - Glance","tags":["OpenStack","Virtualization"],"title":"OpenStack Wallaby éƒ¨ç½²3 é•œåƒæœåŠ¡ Glance","uri":"https://blog.standuke.top/2021/05/2021-05-08-openstack-wallaby-%E9%83%A8%E7%BD%B23-%E9%95%9C%E5%83%8F%E6%9C%8D%E5%8A%A1-glance/","year":"2021"},{"content":"ğŸ‘Œ 2021-05-08 OpenStack Wallaby éƒ¨ç½²2 èº«ä»½è®¤è¯-keystone  FileInfo Filename - OpenStack Wallaby éƒ¨ç½²ç®€ä»‹ Version - v1.0.2105ï¼ˆ2021/05/07 ~ 2021/05/10ï¼‰ Author - standuke Email - shadowdoker@gmail.com DescriptionKey - Keystone installation of OpenStack Wallaby deployment\n ç‰ˆæœ¬ä¿®è®¢è®°å½•ï¼š\nv1.0.2105ï¼š2021-05-07ï¼šå»ºç«‹ OpenStack Wallaby éƒ¨ç½²2 èº«ä»½è®¤è¯-keystoneï¼Œä¿®è®¢äººï¼šstanduke\n[TOC]\nè®¡åˆ’ é¦–å…ˆå®Œæˆæœ€å°åŒ–å®‰è£…ã€Œæœ€å°åŒ–å®‰è£…æ¸…å•å¦‚ä¸‹ã€ï¼ŒåæœŸé€æ­¥æ·»åŠ ç›¸å…³æœåŠ¡ï¼Œä¾‹å¦‚ Ceph ç­‰ã€‚\næœ€å°åŒ–å®‰è£…æ¸…å•\nAt a minimum, you need to install the following services. Install the services in the order specified below: Identity service â€“ keystone installation for Wallaby Image service â€“ glance installation for Wallaby Placement service â€“ placement installation for Wallaby Compute service â€“ nova installation for Wallaby Networking service â€“ neutron installation for Wallaby We advise to also install the following components after you have installed the minimal deployment services: Dashboard â€“ horizon installation for Wallaby Block Storage service â€“ cinder installation for Wallaby  keystone å®‰è£… æ¦‚è¿° OpenStack èº«ä»½æœåŠ¡æä¾›äº†ä¸€ä¸ªé›†æˆç‚¹ï¼Œç”¨äºç®¡ç†èº«ä»½éªŒè¯ï¼Œæˆæƒå’ŒæœåŠ¡ç›®å½•ã€‚\nèº«ä»½æœåŠ¡é€šå¸¸æ˜¯ç”¨æˆ·ä¸ä¹‹äº¤äº’çš„ç¬¬ä¸€é¡¹æœåŠ¡ã€‚èº«ä»½éªŒè¯åï¼Œæœ€ç»ˆç”¨æˆ·å¯ä»¥ä½¿ç”¨å…¶èº«ä»½è®¿é—®å…¶ä»– OpenStack æœåŠ¡ã€‚åŒæ ·ï¼Œå…¶ä»– OpenStack æœåŠ¡åˆ©ç”¨èº«ä»½æœåŠ¡æ¥ç¡®ä¿ç”¨æˆ·æ˜¯ä»–ä»¬è®¤å¯çš„äººï¼Œå¹¶å‘ç°å…¶ä»–æœåŠ¡åœ¨éƒ¨ç½²ä¸­çš„ä½ç½®ã€‚èº«ä»½æœåŠ¡è¿˜å¯ä»¥ä¸æŸäº›å¤–éƒ¨ç”¨æˆ·ç®¡ç†ç³»ç»Ÿï¼ˆä¾‹å¦‚LDAPï¼‰é›†æˆã€‚\nç”¨æˆ·å’ŒæœåŠ¡å¯ä»¥ä½¿ç”¨ç”±èº«ä»½æœåŠ¡ç®¡ç†çš„æœåŠ¡ç›®å½•æ¥æŸ¥æ‰¾å…¶ä»–æœåŠ¡ã€‚é¡¾åæ€ä¹‰ï¼ŒæœåŠ¡ç›®å½•æ˜¯ OpenStack éƒ¨ç½²ä¸­å¯ç”¨æœåŠ¡çš„é›†åˆã€‚æ¯ä¸ªæœåŠ¡å¯ä»¥å…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªç«¯ç‚¹ã€Œendpointã€ï¼Œå¹¶ä¸”æ¯ä¸ªç«¯ç‚¹å¯ä»¥æ˜¯ä»¥ä¸‹ä¸‰ç§ç±»å‹ä¹‹ä¸€ï¼šadminï¼Œinternal æˆ– publicã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå‡ºäºå®‰å…¨åŸå› ï¼Œä¸åŒçš„ç»ˆç»“ç‚¹ç±»å‹å¯èƒ½é©»ç•™åœ¨æš´éœ²ç»™ä¸åŒç±»å‹çš„ç”¨æˆ·çš„å•ç‹¬ç½‘ç»œä¸Šã€‚ä¾‹å¦‚ï¼Œå…¬å…± API ç½‘ç»œå¯èƒ½åœ¨ Internet ä¸Šå¯è§ï¼Œå› æ­¤å®¢æˆ·å¯ä»¥ç®¡ç†å…¶äº‘ã€‚ admin API ç½‘ç»œå¯èƒ½ä»…é™äºç®¡ç†äº‘åŸºç¡€æ¶æ„çš„ç»„ç»‡å†…çš„è¿è¥å•†ã€‚å†…éƒ¨ API ç½‘ç»œå¯èƒ½ä»…é™äºåŒ…å« OpenStack æœåŠ¡çš„ä¸»æœºã€‚æ­¤å¤–ï¼ŒOpenStack æ”¯æŒå¤šä¸ªåŒºåŸŸä»¥å®ç°å¯ä¼¸ç¼©æ€§ã€‚ä¸ºç®€å•èµ·è§ï¼Œæœ¬æŒ‡å—å°†ç®¡ç†ç½‘ç»œç”¨äºæ‰€æœ‰ç«¯ç‚¹ç±»å‹å’Œé»˜è®¤ç«¯ç‚¹ã€RegionOne åŒºåŸŸã€‚èº«ä»½æœåŠ¡ä¸­åˆ›å»ºçš„åŒºåŸŸï¼ŒæœåŠ¡å’Œç«¯ç‚¹å…±åŒæ„æˆäº†éƒ¨ç½²çš„æœåŠ¡ç›®å½•ã€‚éƒ¨ç½²ä¸­çš„æ¯ä¸ªOpenStack æœåŠ¡éƒ½éœ€è¦ä¸€ä¸ªæœåŠ¡æ¡ç›®ï¼Œå¹¶åœ¨è®¤è¯æœåŠ¡ä¸­å­˜å‚¨ç›¸åº”çš„ç«¯ç‚¹ã€‚è¿™å¯ä»¥åœ¨å®‰è£…å’Œé…ç½®äº†èº«ä»½æœåŠ¡ä¹‹åå®Œæˆã€‚\nèº«ä»½æœåŠ¡åŒ…å«ä»¥ä¸‹ç»„ä»¶ï¼š\næœåŠ¡å™¨ é›†ä¸­å¼æœåŠ¡å™¨ä½¿ç”¨ RESTful æ¥å£æä¾›èº«ä»½éªŒè¯å’ŒæˆæƒæœåŠ¡ã€‚\né©±åŠ¨ é©±åŠ¨ç¨‹åºæˆ–æœåŠ¡åç«¯å·²é›†æˆåˆ°é›†ä¸­å¼æœåŠ¡å™¨ã€‚å®ƒä»¬ç”¨äºè®¿é—® OpenStack å¤–éƒ¨å­˜å‚¨åº“ä¸­çš„èº«ä»½ä¿¡æ¯ï¼Œå¹¶ä¸”å¯èƒ½å·²ç»å­˜åœ¨äºéƒ¨ç½² OpenStack çš„åŸºç¡€æ¶æ„ä¸­ï¼ˆä¾‹å¦‚ï¼ŒSQL æ•°æ®åº“æˆ– LDAP æœåŠ¡å™¨ï¼‰ã€‚\næ¨¡ç»„ ä¸­é—´ä»¶æ¨¡å—åœ¨ä½¿ç”¨èº«ä»½æœåŠ¡çš„ OpenStack ç»„ä»¶çš„åœ°å€ç©ºé—´ä¸­è¿è¡Œã€‚è¿™äº›æ¨¡å—æ‹¦æˆªæœåŠ¡è¯·æ±‚ï¼Œæå–ç”¨æˆ·å‡­æ®ï¼Œç„¶åå°†å®ƒä»¬å‘é€åˆ°é›†ä¸­å¼æœåŠ¡å™¨è¿›è¡Œæˆæƒã€‚ä¸­é—´ä»¶æ¨¡å—å’Œ OpenStack ç»„ä»¶ä¹‹é—´çš„é›†æˆä½¿ç”¨ Python Web æœåŠ¡å™¨ç½‘å…³æ¥å£ã€‚\nMariaDB åˆ›å»ºç”¨æˆ·  åˆ›å»ºæ•°æ®åº“  CREATE DATABASE keystone;  æˆäºˆæƒé™  GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'localhost' \\ IDENTIFIED BY 'KEYSTONE_DBPASS'; GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'%' \\ IDENTIFIED BY 'KEYSTONE_DBPASS'; flush privileges;  å®‰è£… keystone  å®‰è£…è½¯ä»¶åŒ…  apt install keystone  ä¿®æ”¹é…ç½®æ–‡ä»¶ /etc/keystone/keystone.conf æ·»åŠ æ•°æ®åº“è®¿é—®ã€token æä¾›è€…  vim /etc/keystone/keystone.conf [database] # ... connection = mysql+pymysql://keystone:KEYSTONE_DBPASS@192.168.2.11/keystone [token] # ... provider = fernet  åˆå§‹åŒ– MariaDB æ•°æ®åº“  su -s /bin/sh -c \u0026quot;keystone-manage db_sync\u0026quot; keystone  è¿›å…¥æ•°æ®åº“æŸ¥çœ‹æ˜¯å¦å®Œæˆæ•°æ®åº“åˆå§‹åŒ–\nMariaDB [keystone]\u0026gt; show tables; +------------------------------------+ | Tables_in_keystone | +------------------------------------+ | access_rule | | access_token | | application_credential | | application_credential_access_rule | | application_credential_role | | assignment | | config_register | | consumer | | credential | | endpoint | | endpoint_group | | expiring_user_group_membership | | federated_user | | federation_protocol | | group | | id_mapping | | identity_provider | | idp_remote_ids | | implied_role | | limit | | local_user | | mapping | | migrate_version | | nonlocal_user | | password | | policy | | policy_association | | project | | project_endpoint | | project_endpoint_group | | project_option | | project_tag | | region | | registered_limit | | request_token | | revocation_event | | role | | role_option | | sensitive_config | | service | | service_provider | | system_assignment | | token | | trust | | trust_role | | user | | user_group_membership | | user_option | | whitelisted_config | +------------------------------------+ 49 rows in set (0.000 sec)  åˆå§‹åŒ– fernet å¯†é’¥å­˜å‚¨åº“  åœ¨ --keystone-user å’Œ --keystone-group æ ‡å¿—ç”¨äºæŒ‡å®šå°†ç”¨äºè¿è¡Œ keystone æ“ä½œç³»ç»Ÿçš„ç”¨æˆ·/ç»„ã€‚æä¾›è¿™äº›æ˜¯ä¸ºäº†å…è®¸åœ¨å¦ä¸€ä¸ªæ“ä½œç³»ç»Ÿç”¨æˆ·/ç»„ä¸‹è¿è¡Œ keystoneã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ç§°ä¸º userï¼†group keystoneã€‚keystone ç”¨æˆ·å’Œç»„åœ¨å®‰è£… keystone è½¯ä»¶åŒ…æ—¶å°±è‡ªåŠ¨åˆ›å»ºäº†ã€‚\nkeystone-manage fernet_setup --keystone-user keystone --keystone-group keystone keystone-manage credential_setup --keystone-user keystone --keystone-group keystone  åˆå§‹åŒ– keystone æœåŠ¡  ADMIN_PASS = ADMIN\nkeystone-manage bootstrap --bootstrap-password ADMIN_PASS \\ --bootstrap-admin-url http://192.168.2.11:5000/v3/ \\ --bootstrap-internal-url http://192.168.2.11:5000/v3/ \\ --bootstrap-public-url http://192.168.2.11:5000/v3/ \\ --bootstrap-region-id RegionOne  é…ç½® Apache HTTP æœåŠ¡å™¨  ç¼–è¾‘ /etc/apache2/apache2.conf æ–‡ä»¶å¹¶é…ç½® ServerName é€‰é¡¹ä»¥å¼•ç”¨æ§åˆ¶å™¨èŠ‚ç‚¹\nvim /etc/apache2/apache2.conf ç¬¬ 70 è¡Œ æ–°å¢ ServerName 192.168.2.11  é‡å¯ http æœåŠ¡  systemctl restart apache2.service  åˆ›å»ºç¯å¢ƒå˜é‡æ¥é…ç½®ç®¡ç†å¸æˆ·  è¿™é‡Œçš„å‚æ•°æ¥è‡ªç¬¬ 5. åˆå§‹åŒ– keystone æœåŠ¡ æ—¶é…ç½®çš„å‚æ•°\ncd ~ vim admin.profile $ export OS_USERNAME=admin $ export OS_PASSWORD=ADMIN $ export OS_PROJECT_NAME=admin $ export OS_USER_DOMAIN_NAME=Default $ export OS_PROJECT_DOMAIN_NAME=Default $ export OS_AUTH_URL=http://192.168.2.11:5000/v3 $ export OS_IDENTITY_API_VERSION=3  é‡Œç¨‹ç¢‘ æŸ¥çœ‹å·²æœ‰çš„ keystone ä¿¡æ¯  ç”Ÿæ•ˆç¯å¢ƒå˜é‡  source admin.profile  æŸ¥çœ‹ åˆå§‹åŒ– keystone æ—¶åˆ›å»ºçš„ é»˜è®¤ä¿¡æ¯  root@node1:~# openstack domain list +---------+---------+---------+--------------------+ | ID | Name | Enabled | Description | +---------+---------+---------+--------------------+ | default | Default | True | The default domain | +---------+---------+---------+--------------------+ root@node1:~# openstack user list +----------------------------------+-------+ | ID | Name | +----------------------------------+-------+ | 3c1af2df3a2747319e3789b0d98789b6 | admin | +----------------------------------+-------+ root@node1:~# openstack project list +----------------------------------+-------+ | ID | Name | +----------------------------------+-------+ | b78ed759bf184f21bb0a1461d5d9607d | admin | +----------------------------------+-------+  åˆ›å»ºåŸŸï¼Œé¡¹ç›®ï¼Œç”¨æˆ·å’Œè§’è‰² èº«ä»½æœåŠ¡ä¸ºæ¯ä¸ª OpenStack æœåŠ¡æä¾›èº«ä»½éªŒè¯æœåŠ¡ã€‚èº«ä»½éªŒè¯æœåŠ¡ä½¿ç”¨åŸŸï¼Œé¡¹ç›®ï¼Œç”¨æˆ·å’Œè§’è‰²çš„ç»„åˆã€‚\n åˆ›å»ºåŸŸ ã€ŒRegionã€  åœ¨ åˆå§‹åŒ– keystone æ—¶å·²ç»åˆ›å»ºäº†ã€ŒDefaultã€åŸŸï¼Œåˆ›å»ºæ–°åŸŸã€Œexampleã€å¯ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤\nopenstack domain create --description \u0026quot;An Example Domain\u0026quot; example +-------------+----------------------------------+ | Field | Value | +-------------+----------------------------------+ | description | An Example Domain | | enabled | True | | id | 2d949dc2d33c4c649c6cff24dccb6ff1 | | name | example | | options | {} | | tags | [] | +-------------+----------------------------------+  åˆ›å»ºæœåŠ¡ã€ŒServiceã€  åœ¨ OpenStack ä¸­ï¼Œç»„ä»¶æä¾›çš„æœåŠ¡ä¹Ÿæ˜¯éœ€è¦æ³¨å†Œåˆ° keystone ä¸Šçš„ï¼Œå¯ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åˆ›å»ºæ–°çš„æœåŠ¡ã€Œserviceã€ï¼Œå¹¶å°†æœåŠ¡æ”¾ç½®äº 1. åˆ›å»ºåŸŸ ã€ŒRegionã€ åˆ›å»ºçš„ã€Œexampleã€åŸŸå†…ã€‚\nopenstack project create --domain default --description \u0026quot;Service Project\u0026quot; service +-------------+----------------------------------+ | Field | Value | +-------------+----------------------------------+ | description | Service Project | | domain_id | default | | enabled | True | | id | 76df0ebcc4e241f18e30c8ee9229e37e | | is_domain | False | | name | service | | options | {} | | parent_id | default | | tags | [] | +-------------+----------------------------------+  åˆ›å»ºæ™®é€šé¡¹ç›®ã€æ™®é€šç”¨æˆ·ã€æ™®é€šè§’è‰²  openstack project create --domain default --description \u0026quot;Demo Project\u0026quot; myproject +-------------+----------------------------------+ | Field | Value | +-------------+----------------------------------+ | description | Demo Project | | domain_id | default | | enabled | True | | id | 0b6996d9ce8d490ab7df57ff7e4180a9 | | is_domain | False | | name | myproject | | options | {} | | parent_id | default | | tags | [] | +-------------+----------------------------------+ openstack user create --domain default --password-prompt myuser +---------------------+----------------------------------+ | Field | Value | +---------------------+----------------------------------+ | domain_id | default | | enabled | True | | id | adf2c52ba7ef451db99db43a7365fcc0 | | name | myuser | | options | {} | | password_expires_at | None | +---------------------+----------------------------------+ openstack role create myrole +-------------+----------------------------------+ | Field | Value | +-------------+----------------------------------+ | description | None | | domain_id | None | | id | 81b6d4a225fa4f7a8180595e30277747 | | name | myrole | | options | {} | +-------------+----------------------------------+  å°† è§’è‰² èµ‹äºˆ é¡¹ç›®ã€ç”¨æˆ·  openstack role add --project myproject --user myuser myrole è¯¥å‘½ä»¤ä¸æä¾›ä»»ä½•è¾“å‡º  éªŒè¯æ“ä½œ  å–æ¶ˆè®¾ç½®ä¸´æ—¶å˜é‡ OS_AUTH_URL å’Œ OS_PASSWORD ç¯å¢ƒå˜é‡  å…ˆæŸ¥çœ‹å·²æœ‰çš„ç¯å¢ƒå˜é‡ echo $OS_AUTH_URL echo $OS_PASSWORD å–æ¶ˆç¯å¢ƒå˜é‡ unset OS_AUTH_URL OS_PASSWORD å†æŸ¥çœ‹ç¯å¢ƒå˜é‡æ˜¯å¦è¢«å–æ¶ˆæˆåŠŸ echo $OS_AUTH_URL echo $OS_PASSWORD  ä»¥ admin ç”¨æˆ·èº«ä»½è¯·æ±‚èº«ä»½éªŒè¯ä»¤ç‰Œ  openstack --os-auth-url http://192.168.2.11:5000/v3 \\ --os-project-domain-name Default --os-user-domain-name Default \\ --os-project-name admin --os-username admin token issue æ‰‹å·¥è¾“å…¥å¯†ç  ADMIN +------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | Field | Value | +------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | expires | 2021-05-08T04:33:29+0000 | | id | gAAAAABglgaJne9RksPFIDM0WlpBIT_Y2Y8cKevLynELsQOr5pV2bxVVG4lu8USDydpIGmVYrP0FeDzUPkKanJUZomBJugxNdtKhguf4xPecLnETz0lSDvoQHBOK10_5NLUceMMw6SqUOe3ckARfC_9KeTQ8t9teM1cn7iUrSM5zgaNh-jpHDCY | | project_id | b78ed759bf184f21bb0a1461d5d9607d | | user_id | 3c1af2df3a2747319e3789b0d98789b6 | +------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+  ä»¥ myuser ç”¨æˆ·èº«ä»½è¯·æ±‚èº«ä»½éªŒè¯ä»¤ç‰Œ  openstack --os-auth-url http://node1:5000/v3 --os-project-domain-name Default --os-user-domain-name Default --os-project-name myproject --os-username myuser token issue +------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | Field | Value | +------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | expires | 2021-05-08T04:34:47+0000 | | id | gAAAAABglgbXPr-VXj5k5Kzt3j-ZLBYLERJfLJ1rUuNBBxykpJzXwaOBe4Lbfajif4xC2J_7_Vh7OkheX5mwF_FqPeHghgLw-35mM3t1uUreDG5YuoqGSfvnMm0JPVLX6reU_XpIELkf-zpJRcx0v8K-GDzIFdnxXo2wfdITHaZ26TvPQZk94Q4 | | project_id | 0b6996d9ce8d490ab7df57ff7e4180a9 | | user_id | adf2c52ba7ef451db99db43a7365fcc0 | +------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+  åˆ›å»º OpenStack å®¢æˆ·ç«¯ç¯å¢ƒè„šæœ¬ ç›®çš„ï¼Œç”¨æˆ·å¿«é€Ÿåˆ‡æ¢å®¢æˆ·ç«¯ç¯å¢ƒï¼Œå‡å°‘è¾“ç”¨æˆ·åã€å¯†ç æ¬¡æ•°\nå®˜æ–¹ï¼šå‰é¢çš„éƒ¨åˆ†ä½¿ç”¨äº†ç¯å¢ƒå˜é‡å’Œå‘½ä»¤é€‰é¡¹çš„ç»„åˆï¼Œä»¥é€šè¿‡openstackå®¢æˆ·ç«¯ä¸Identity Serviceè¿›è¡Œäº¤äº’ã€‚ä¸ºäº†æé«˜å®¢æˆ·ç«¯æ“ä½œçš„æ•ˆç‡ï¼ŒOpenStackæ”¯æŒç®€å•çš„å®¢æˆ·ç«¯ç¯å¢ƒè„šæœ¬ï¼Œä¹Ÿç§°ä¸ºOpenRCæ–‡ä»¶ã€‚è¿™äº›è„šæœ¬é€šå¸¸åŒ…å«æ‰€æœ‰å®¢æˆ·ç«¯çš„é€šç”¨é€‰é¡¹ï¼Œä½†ä¹Ÿæ”¯æŒå”¯ä¸€é€‰é¡¹ã€‚\n admin-openrc  ADMIN_PASS = ADMIN\nexport OS_PROJECT_DOMAIN_NAME=Default export OS_USER_DOMAIN_NAME=Default export OS_PROJECT_NAME=admin export OS_USERNAME=admin export OS_PASSWORD=ADMIN_PASS export OS_AUTH_URL=http://node1:5000/v3 export OS_IDENTITY_API_VERSION=3 export OS_IMAGE_API_VERSION=2   demo-openrc  DEMO_PASS = myuser\nexport OS_PROJECT_DOMAIN_NAME=Default export OS_USER_DOMAIN_NAME=Default export OS_PROJECT_NAME=myproject export OS_USERNAME=myuser export OS_PASSWORD=DEMO_PASS export OS_AUTH_URL=http://node1:5000/v3 export OS_IDENTITY_API_VERSION=3 export OS_IMAGE_API_VERSION=2  ä½¿ç”¨ç¯å¢ƒå˜é‡\n. admin-openrc  ä½¿ç”¨ç¯å¢ƒå˜é‡è·å–ä»¤ç‰Œ\nopenstack token issue  ","id":5,"section":"posts","summary":"ğŸ‘Œ 2021-05-08 OpenStack Wallaby éƒ¨ç½²2 èº«ä»½è®¤è¯-keystone FileInfo Filename - OpenStack Wallaby éƒ¨ç½²ç®€ä»‹ Version - v1.0.2105ï¼ˆ2021/05/07 ~ 2021/05/10ï¼‰ Author - standuke Email - shadowdoker@gmail.com DescriptionKey","tags":["OpenStack","Virtualization"],"title":"OpenStack Wallaby éƒ¨ç½²2 èº«ä»½è®¤è¯ Keystone","uri":"https://blog.standuke.top/2021/05/2021-05-08-openstack-wallaby-%E9%83%A8%E7%BD%B22-%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81-keystone/","year":"2021"},{"content":"ğŸ‘Œ 2021-05-07 OpenStack Wallaby éƒ¨ç½²1 æ“ä½œç³»ç»ŸåŠåŸºç¡€ç¯å¢ƒ  FileInfo Filename - OpenStack Wallaby éƒ¨ç½²ç®€ä»‹ Version - v1.0.2105ï¼ˆ2021/05/07 ~ 2021/05/09ï¼‰ Author - standuke Email - shadowdoker@gmail.com DescriptionKey - Operating system and basic environment of OpenStack Wallaby deployment\n ç‰ˆæœ¬ä¿®è®¢è®°å½•ï¼š\nv1.0.2105ï¼š2021-05-07ï¼šå»ºç«‹ OpenStack Wallaby éƒ¨ç½²1 æ“ä½œç³»ç»ŸåŠåŸºç¡€ç¯å¢ƒï¼Œä¿®è®¢äººï¼šstanduke\n[TOC]\næ“ä½œç³»ç»Ÿç¯å¢ƒå‡†å¤‡ ==ä»¥ä¸‹æ“ä½œç³»ç»Ÿç¯å¢ƒå‡†å¤‡æ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦åš==\næ“ä½œç³»ç»Ÿå®‰è£… æ­¤æ¬¡éƒ¨ç½²æ“ä½œç³»ç»Ÿä¸º ubuntu-20.04.2-live-server-amd64.iso\næ“ä½œç³»ç»Ÿä¾¿åˆ©è®¾ç½®  é…ç½® ssh-key å…å¯†ç™»é™† å¯ç”¨ root ç”¨æˆ· é…ç½® å…è®¸ root ç”¨æˆ·ç™»é™†  æ“ä½œç³»ç»Ÿæ–°å¢ deb æº sudo add-apt-repository cloud-archive:wallaby  å‚è€ƒèµ„æ–™ï¼š https://wiki.ubuntu.com/OpenStack/CloudArchive\næ›´æ–°æ“ä½œç³»ç»Ÿ apt update \u0026amp;\u0026amp; apt dist-upgrade  å¦‚æœæ›´æ–°åŒ…å«äº†å†…æ ¸æ›´æ–°ï¼Œé‚£éœ€è¦é‡å¯ç³»ç»Ÿ\nå®‰è£… OpenStack å®¢æˆ·ç«¯ ä»…é€‚ç”¨äº Ubuntu 20.04 LTS\napt install python3-openstackclient  NTP æ—¶é—´åŒæ­¥  NTP Server  Controllerã€ŒNTP Serveråªéœ€é…ç½®ä¸€å°æœåŠ¡å™¨å³å¯ã€\nå®‰è£… Chrony ä½œä¸º NTP æœåŠ¡æ®µï¼Œæ­¤æ—¶ç³»ç»Ÿä¼šè‡ªåŠ¨ç¦ç”¨ mask ç³»ç»Ÿé»˜è®¤å®‰è£…çš„ timedatectl å†…åŒ…å«çš„ systemd-timesyncd\napt install chrony  ä¿®æ”¹ chrony é…ç½®æ–‡ä»¶\nvim /etc/chrony/chrony.conf # ä½œå‡ºå¦‚ä¸‹ä¿®æ”¹å³å¯ pool ntp.ubuntu.com iburst maxsources 4 server 127.127.1.0 iburst allow 192.168.2.0/24 allow 192.168.10.0/24  æŸ¥çœ‹ é…ç½®çš„æœ¬åœ° NTP Server æ˜¯å¦ç”Ÿæ•ˆ\nroot@node1:~# chronyc sources 210 Number of sources = 5 MS Name/IP address Stratum Poll Reach LastRx Last sample =============================================================================== ^? localhost 0 8 0 - +0ns[ +0ns] +/- 0ns ^? golem.canonical.com 0 6 0 - +0ns[ +0ns] +/- 0ns ^* chilipepper.canonical.com 2 6 377 52 +3446us[+4892us] +/- 149ms ^+ pugot.canonical.com 2 6 377 52 -5135us[-5135us] +/- 168ms ^+ alphyn.canonical.com 2 6 377 51 +14ms[ +14ms] +/- 209ms   NTP Client  ç”±äºç³»ç»Ÿå®‰è£…æ—¶ä¼šé»˜è®¤å®‰è£… ntp æœåŠ¡ `` æ‰€ä»¥åªéœ€è¦åœ¨ NTP æ—¶é—´åŒæ­¥æœåŠ¡å™¨æ± å†…æ·»åŠ æœ¬åœ°æœåŠ¡å™¨åœ°å€å³å¯ã€‚\nvim /etc/systemd/timesyncd.conf [Time] NTP=192.168.2.11  ä½¿ç”¨ timedatectl æ¥æŸ¥çœ‹æ˜¯å¦ç”Ÿæ•ˆ\nroot@node2:~# timedatectl show-timesync SystemNTPServers=192.168.2.11 FallbackNTPServers=ntp.ubuntu.com ServerName=192.168.2.11 ServerAddress=192.168.2.11 RootDistanceMaxUSec=5s PollIntervalMinUSec=32s PollIntervalMaxUSec=34min 8s PollIntervalUSec=1min 4s Frequency=0 root@node2:~# timedatectl timesync-status Server: 192.168.2.11 (192.168.2.11) Poll interval: 8min 32s (min: 32s; max 34min 8s) Leap: normal Version: 4 Stratum: 3 Reference: 5BBD59C6 Precision: 1us (-24) Root distance: 185.188ms (max: 5s) Offset: -37.208ms Delay: 91us Jitter: 26.196ms Packet count: 6 Frequency: +91.680ppm  å‚è€ƒèµ„æ–™ï¼š https://zh.codepre.com/how-to-5498.html\nä¸»æœºååŠåŸŸå æœ¬æ¬¡ç¯å¢ƒä½¿ç”¨ä¿®æ”¹ hosts æ–‡ä»¶æ–¹å¼å®ŒæˆåŸŸåè§£æ\nvim /etc/hosts root@node1:~# cat /etc/hosts 127.0.0.1 localhost 127.0.1.1 node1 192.168.2.11 node1 node1.nuo.com controller 192.168.2.12 node2 node2.nuo.com compute 192.168.2.13 node3 node3.nuo.com storage  å…³é—­é˜²ç«å¢™åŠ SELinux å…³é—­é˜²ç«å¢™ ufw disable å…³é—­ SELinux apt install policycoreutils root@node1:~# sestatus SELinux status: disabled  å®‰è£… OpenStack ç¯å¢ƒä¾èµ– ==ä»¥ä¸‹è½¯ä»¶ç¯å¢ƒä¾èµ–å‡å®‰è£…äº Controller èŠ‚ç‚¹==\nMariaDBã€ŒMySQLã€æ•°æ®åº“ å¤§å¤šæ•° OpenStack æœåŠ¡éƒ½ä½¿ç”¨ SQL æ•°æ®åº“æ¥å­˜å‚¨ä¿¡æ¯ã€‚è¯¥æ•°æ®åº“é€šå¸¸åœ¨æ§åˆ¶å™¨èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚æœ¬æŒ‡å—ä¸­çš„è¿‡ç¨‹æ ¹æ®å‘è¡Œç‰ˆä½¿ç”¨ MariaDB æˆ– MySQLã€‚OpenStack æœåŠ¡è¿˜æ”¯æŒå…¶ä»– SQL æ•°æ®åº“ï¼ŒåŒ…æ‹¬ PostgreSQLã€‚\n å®‰è£… MariaDB åŒ…ã€Œpython3-pymysql åªé’ˆå¯¹äº Ubuntu 20.04 LTSã€  apt install mariadb-server python3-pymysql  åˆ›å»ºå¹¶ç¼–è¾‘ /etc/mysql/mariadb.conf.d/99-openstack.cnf æ–‡ä»¶åŒæ—¶ä¿®æ”¹ç›¸å…³é…ç½®  vim /etc/mysql/mariadb.conf.d/99-openstack.cnf [mysqld] bind-address = 192.168.2.11 default-storage-engine = innodb innodb_file_per_table = on max_connections = 4096 collation-server = utf8_general_ci character-set-server = utf8  å¯åŠ¨ MariaDB  systemctl start mariadb.service systemctl restart mariadb.serviceã€Œé»˜è®¤æœåŠ¡åº”è¯¥æ˜¯è‡ªåŠ¨å¯åŠ¨äº†ï¼Œæ‰€ä»¥åªè¦é‡å¯æœåŠ¡å³å¯ã€ systemctl enable mariadb.service  ä½¿ç”¨ å¦‚ä¸‹è„šæœ¬å®Œæˆå¯¹äº MariaDB æ•°æ®åº“çš„åˆå§‹åŒ–  mysql_secure_installation æµ‹è¯•ç¯å¢ƒ root å¯†ç  1212  RocketMQã€Œæ¶ˆæ¯é˜Ÿåˆ—ã€ OpenStack ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¥åè°ƒæœåŠ¡ä¹‹é—´çš„æ“ä½œå’ŒçŠ¶æ€ä¿¡æ¯ã€‚æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡é€šå¸¸åœ¨æ§åˆ¶å™¨èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚OpenStack æ”¯æŒå¤šç§æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ï¼ŒåŒ…æ‹¬ RabbitMQï¼ŒQpid å’Œ ZeroMQã€‚ä½†æ˜¯ï¼Œæ‰“åŒ… OpenStack çš„å¤§å¤šæ•°å‘è¡Œç‰ˆéƒ½æ”¯æŒç‰¹å®šçš„æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ã€‚æœ¬æŒ‡å—å®ç°äº† RabbitMQ æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ï¼Œå› ä¸ºå¤§å¤šæ•°å‘è¡Œç‰ˆéƒ½æ”¯æŒè¯¥æœåŠ¡ã€‚å¦‚æœæ‚¨å¸Œæœ›å®æ–½å…¶ä»–æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ï¼Œè¯·æŸ¥é˜…ä¸å…¶ç›¸å…³çš„æ–‡æ¡£ã€‚\n å®‰è£…è½¯ä»¶åŒ…  apt install rabbitmq-server  æ·»åŠ  openstack ç”¨æˆ·  root@node1:ï½# rabbitmqctl add_user openstack OPENSTACK Adding user \u0026quot;openstack\u0026quot; ...  å…è®¸ç”¨æˆ·é…ç½®ï¼Œå†™å…¥å’Œè¯»å–è®¿é—®æƒé™openstack  root@node1:~# rabbitmqctl set_permissions openstack \u0026quot;.*\u0026quot; \u0026quot;.*\u0026quot; \u0026quot;.*\u0026quot; Setting permissions for user \u0026quot;openstack\u0026quot; in vhost \u0026quot;/\u0026quot; ...  Memcached æœåŠ¡çš„èº«ä»½æœåŠ¡èº«ä»½éªŒè¯æœºåˆ¶ä½¿ç”¨ Memcached æ¥ç¼“å­˜ä»¤ç‰Œã€‚memcached æœåŠ¡é€šå¸¸åœ¨æ§åˆ¶å™¨èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚å¯¹äºç”Ÿäº§éƒ¨ç½²ï¼Œæˆ‘ä»¬å»ºè®®å¯ç”¨é˜²ç«å¢™ï¼Œèº«ä»½éªŒè¯å’ŒåŠ å¯†çš„ç»„åˆä»¥å¯¹å…¶è¿›è¡Œä¿æŠ¤ã€‚\n å®‰è£…è½¯ä»¶åŒ…  apt install memcached python3-memcache  ç¼–è¾‘ /etc/memcached.conf æ–‡ä»¶å¹¶å°†æœåŠ¡é…ç½®ä¸ºä½¿ç”¨æ§åˆ¶å™¨èŠ‚ç‚¹çš„ç®¡ç† IP åœ°å€ã€‚è¿™æ˜¯ä¸ºäº†å…è®¸å…¶ä»–èŠ‚ç‚¹é€šè¿‡ç®¡ç†ç½‘ç»œè¿›è¡Œè®¿é—®  vim /etc/memcached.conf ç¬¬ 35 è¡Œ ä¿®æ”¹ - -l 127.0.0.1 + -l 192.168.2.11  é‡å¯ Memcached æœåŠ¡  systemctl restart memcached.service systemctl enable memcached.service Synchronizing state of memcached.service with SysV service script with /lib/systemd/systemd-sysv-install. Executing: /lib/systemd/systemd-sysv-install enable memcached  etcd OpenStack æœåŠ¡å¯ä»¥ä½¿ç”¨ etcdï¼ˆåˆ†å¸ƒå¼å¯é é”®å€¼å­˜å‚¨ï¼‰è¿›è¡Œåˆ†å¸ƒå¼é”®é”å®šï¼Œå­˜å‚¨é…ç½®ï¼Œè·Ÿè¸ªæœåŠ¡æ´»åŠ¨æ€§å’Œå…¶ä»–æƒ…å†µã€‚\n å®‰è£…etcdè½¯ä»¶åŒ…  apt install etcd  ç¼–è¾‘ /etc/default/etcd æ–‡ä»¶ï¼Œå¹¶è®¾ç½® ETCD_INITIAL_CLUSTERï¼ŒETCD_INITIAL_ADVERTISE_PEER_URLSï¼ŒETCD_ADVERTISE_CLIENT_URLSï¼ŒETCD_LISTEN_CLIENT_URLS æ§åˆ¶å™¨èŠ‚ç‚¹ï¼Œä»¥ä½¿ç»ç”±ç®¡ç†ç½‘ç»œé€šè¿‡å…¶ä»–èŠ‚ç‚¹çš„è®¿é—®çš„ç®¡ç†IPåœ°å€ã€Œå®‰è£…å®Œ etcd åï¼Œé»˜è®¤çš„é…ç½®æ–‡ä»¶æ˜¯ç©ºçš„ã€  vim /etc/default/etcd ETCD_NAME=\u0026quot;controller\u0026quot; ETCD_DATA_DIR=\u0026quot;/var/lib/etcd\u0026quot; ETCD_INITIAL_CLUSTER_STATE=\u0026quot;new\u0026quot; ETCD_INITIAL_CLUSTER_TOKEN=\u0026quot;etcd-cluster-01\u0026quot; ETCD_INITIAL_CLUSTER=\u0026quot;controller=http://192.168.2.11:2380\u0026quot; ETCD_INITIAL_ADVERTISE_PEER_URLS=\u0026quot;http://192.168.2.11:2380\u0026quot; ETCD_ADVERTISE_CLIENT_URLS=\u0026quot;http://192.168.2.11:2379\u0026quot; ETCD_LISTEN_PEER_URLS=\u0026quot;http://0.0.0.0:2380\u0026quot; ETCD_LISTEN_CLIENT_URLS=\u0026quot;http://192.168.2.11:2379\u0026quot;  é‡æ–°å¯åŠ¨ etcd æœåŠ¡ï¼Œå¹¶å¼€æœºè‡ªå¯  systemctl enable etcd systemctl restart etcd  ","id":6,"section":"posts","summary":"ğŸ‘Œ 2021-05-07 OpenStack Wallaby éƒ¨ç½²1 æ“ä½œç³»ç»ŸåŠåŸºç¡€ç¯å¢ƒ FileInfo Filename - OpenStack Wallaby éƒ¨ç½²ç®€ä»‹ Version - v1.0.2105ï¼ˆ2021/05/07 ~ 2021/05/09ï¼‰ Author - standuke Email - shadowdoker@gmail.com DescriptionKey - Operating system and","tags":["OpenStack","Virtualization"],"title":"OpenStack Wallaby éƒ¨ç½²1 æ“ä½œç³»ç»ŸåŠåŸºç¡€ç¯å¢ƒ","uri":"https://blog.standuke.top/2021/05/2021-05-07-openstack-wallaby-%E9%83%A8%E7%BD%B21-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%8F%8A%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83/","year":"2021"},{"content":"ğŸ‘Œ 2021-05-06 OpenStack Wallaby éƒ¨ç½²0 é€‰å‹åŠæ•´ä½“ä»‹ç»  FileInfo Filename - OpenStack Wallaby éƒ¨ç½²ç®€ä»‹ Version - v1.1.2105ï¼ˆ2021/05/06 ~ 2021/05/11ï¼‰ Author - standuke Email - shadowdoker@gmail.com DescriptionKey - Introduction to OpenStack Wallaby deployment\n ç‰ˆæœ¬ä¿®è®¢è®°å½•ï¼š\nv1.0.2105ï¼š2021-05-06ï¼šå»ºç«‹ OpenStack Wallaby éƒ¨ç½²0 é€‰å‹åŠæ•´ä½“ä»‹ç» æ–‡æ¡£ï¼Œä¿®è®¢äººï¼šstanduke v1.1.2105ï¼š2021-05-11ï¼šæ–°å¢ OpenStack ç®€ä»‹ã€å®˜æ–¹æ¦‚å¿µæ¶æ„åŠé€»è¾‘æ¶æ„é…å›¾ã€ç»„ä»¶å¯†ç è§„åˆ’å¾…ä¸‹ä¸€ç‰ˆæœ¬ä¿®è®¢ï¼Œä¿®è®¢äººï¼šstanduke\n[TOC]\nç®€ä»‹ https://docs.openstack.org/install-guide/openstack-services.html\nOpenStack æ˜¯ä¸€ä¸ªç”± NASAã€Œç¾å›½å›½å®¶èˆªç©ºèˆªå¤©å±€ã€å’Œ Rackspace åˆä½œç ”å‘å¹¶å‘èµ·çš„ï¼Œä»¥ Apache è®¸å¯è¯æˆæƒçš„è‡ªç”±è½¯ä»¶å’Œå¼€æ”¾æºä»£ç é¡¹ç›®ã€‚ OpenStack æ˜¯ä¸€ä¸ªå¼€æºçš„äº‘è®¡ç®—ç®¡ç†å¹³å°é¡¹ç›®ï¼Œç”±å‡ ä¸ªä¸»è¦çš„ç»„ä»¶ç»„åˆèµ·æ¥å®Œæˆå…·ä½“å·¥ä½œã€‚OpenStack æ”¯æŒå‡ ä¹æ‰€æœ‰ç±»å‹çš„äº‘ç¯å¢ƒï¼Œé¡¹ç›®ç›®æ ‡æ˜¯æä¾›å®æ–½ç®€å•ã€å¯å¤§è§„æ¨¡æ‰©å±•ã€ä¸°å¯Œã€æ ‡å‡†ç»Ÿä¸€çš„äº‘è®¡ç®—ç®¡ç†å¹³å°ã€‚OpenStack é€šè¿‡å„ç§äº’è¡¥çš„æœåŠ¡ - å³ç»„ä»¶ï¼Œæä¾›äº†åŸºç¡€è®¾æ–½å³æœåŠ¡ã€ŒIaaSã€çš„è§£å†³æ–¹æ¡ˆï¼Œæ¯ä¸ªæœåŠ¡æä¾› API ä»¥è¿›è¡Œé›†æˆã€‚ OpenStack æ˜¯ä¸€ä¸ªæ—¨åœ¨ä¸ºå…¬å…±åŠç§æœ‰äº‘çš„å»ºè®¾ä¸ç®¡ç†æä¾›è½¯ä»¶çš„å¼€æºé¡¹ç›®ã€‚OpenStack é¡¹ç›®çš„é¦–è¦ä»»åŠ¡æ˜¯ç®€åŒ–äº‘çš„éƒ¨ç½²è¿‡ç¨‹å¹¶ä¸ºå…¶å¸¦æ¥è‰¯å¥½çš„å¯æ‰©å±•æ€§ã€‚\nä¸å‰æœŸç‰ˆæœ¬å·®å¼‚ Wallabyï¼Œæ˜¯ OpenStack çš„ç¬¬ 23 ä¸ªå‘è¡Œç‰ˆï¼Œå…¶å¯¹åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ã€ŒRBACã€è¿›è¡Œäº†æ”¹è¿›ï¼Œå¹¶ä¸å…¶ä»–å¼€æºé¡¹ç›®ã€ŒåŒ…æ‹¬ Cephï¼ŒKubernetes å’Œ Prometheusã€é›†æˆï¼Œä»¥å¢å¼ºç”¨äºäº‘åŸç”Ÿåº”ç”¨ç¨‹åºçš„å¼€æ”¾åŸºç¡€æ¶æ„ã€‚\n åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ç­–ç•¥æ ¼å¼ä» JSON è¿ç§»åˆ° YAMLï¼Œä½¿ OpenStack ä¸ Kubernetes æ›´åŠ åŒæ­¥ã€‚ OpenStack å†…ç½®äº†å¯¹å¼€æº Ceph åç«¯é©±åŠ¨ç¨‹åº Ceph iSCSI çš„æ”¯æŒã€‚é™¤äº†å…¶ä»–æ–°çš„ Cinder å­˜å‚¨é©±åŠ¨ç¨‹åºå¤–ï¼Œæ—§çš„é©±åŠ¨ç¨‹åºè¿˜å¢åŠ äº†å¯¹æ–°åŠŸèƒ½çš„æ”¯æŒï¼Œå¦‚æ¢å¤åˆ°å¿«ç…§å’Œåç«¯æœåŠ¡è´¨é‡ã€‚ Kolla ç°åœ¨å·²ç»æ·»åŠ äº†å¯¹ Prometheus V2 çš„æ”¯æŒã€‚ Magnum API æœåŠ¡å·²ç»æ›´æ–°äº†å¯¹ Kubernetes å’Œ containerdï¼ˆä¸€ä¸ªæ ‡å‡†çš„å®¹å™¨è¿è¡Œç¯å¢ƒï¼‰çš„æ”¯æŒã€‚ è¿è¥å•†å¯é€šè¿‡ Neutron å°†ç½‘ç»œç«¯å£ä¸­çš„å›ºå®š IP åœ°å€è·¯ç”±åˆ°å¤–éƒ¨ä¸–ç•Œï¼Œè€Œä¸å— IPv4 åœ°å€èŒƒå›´çš„é™åˆ¶ã€‚  å‚è€ƒèµ„æ–™ï¼š https://www.techrepublic.com/article/in-new-release-openstack-wallaby-reaches-out-to-kubernetes/\nè¯´æ˜  æ­¤æ¬¡éƒ¨ç½² å„ä¸ªç»„ä»¶å¯†ç  åœ¨æœ¬æ–‡å½“ä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡æ›¿ä»£ï¼Œå…·ä½“ä½¿ç”¨çš„å¯†ç å¯è§ ç»„ä»¶å¯†ç è§„åˆ’ éƒ¨åˆ† ç»„ä»¶éƒ¨ç½²å®Œæ¯•ä¹‹åä¼šæœ‰ä¸€ä¸ª é‡Œç¨‹ç¢‘ ç”¨äºæ£€éªŒç»„ä»¶æ˜¯å¦å·¥ä½œæ­£å¸¸ï¼Œç»„ä»¶å·¥ä½œæ­£å¸¸åå»ºè®®åœ¨å¼€å±•ä¹‹åçš„éƒ¨ç½²å·¥ä½œã€‚ éƒ¨ç½²é‡‡ç”¨çš„æ˜¯æœ€å°åŒ–éƒ¨ç½² OpenStackï¼Œå†é€æ¸æ‰©å……ç»„ä»¶ä¸°å¯ŒåŠŸèƒ½ï¼Œæœ€ç»ˆç›®æ ‡æ˜¯èƒ½å¤Ÿå®ç°ä¸€å¥—æ»¡è¶³ç”Ÿäº§ç¯å¢ƒçš„æ¶æ„ã€Œåªæ˜¯æ¶æ„ï¼Œå‚æ•°ç­‰é…ç½®ä¼˜åŒ–æœ‰æ—¶é—´æœ‰å¿ƒæƒ…å†å†™ã€  éƒ¨ç½²æ–¹æ¡ˆ æ­¤æ¬¡éƒ¨ç½² OpenStack ç‰ˆæœ¬ä¸º Wallabyï¼Œå‘è¡Œã€Œreleaseã€æ—¥æœŸä¸º 2021 å¹´ 4 æœˆ 21 æ—¥ã€‚ éƒ¨ç½²æ–¹æ¡ˆä¸ºï¼Œè®¡ç®—ä¸å­˜å‚¨åˆ†ç¦»ï¼Œè®¡ç®—èŠ‚ç‚¹åªè´Ÿè´£è®¡ç®—ï¼Œç®¡ç†èŠ‚ç‚¹åªè´Ÿè´£ç®¡ç†è°ƒåº¦ã€é•œåƒå­˜å‚¨ï¼Œå­˜å‚¨å°†é‡‡ç”¨ Ceph ä½œä¸ºåº•å±‚å­˜å‚¨å¹³å°ï¼Œä¸ºå‰ç«¯è®¡ç®—èŠ‚ç‚¹è™šæ‹Ÿæœºæä¾›å­˜å‚¨èµ„æºæ± ã€‚\néƒ¨ç½²èµ„æºè§„åˆ’ æ­¤æ¬¡éƒ¨ç½²å…±ä½¿ç”¨ 3 å°ç‰©ç†æœåŠ¡å™¨ï¼Œå¯¹åº”çš„æœåŠ¡å™¨è§’è‰²å¦‚ä¸‹\n   æœåŠ¡å™¨åç§° ç®¡ç†æ®µ IP åœ°å€ æœåŠ¡å™¨é…ç½® æ³›è§’è‰² æ“ä½œç³»ç»Ÿ     node1.nuo.com 192.168.2.11 64C256G ControllerÂ  Ubuntu Server 20.04.2 LTS   node2.nuo.com 192.168.2.12 64C256G Compute Ubuntu Server 20.04.2 LTS   node3.nuo.com 192.168.2.13 64C256G Storage Ubuntu Server 20.04.2 LTS    å¯¹äº åœ¨è™šæ‹Ÿæœºç¯å¢ƒéƒ¨ç½² å»ºè®® 3 å°è™šæ‹Ÿæœºã€Œæ¯å° 4 æ ¸ 8G å†…å­˜ 60G ç£ç›˜ã€æˆ–è€… 1 å°è™šæ‹Ÿæœºéƒ¨ç½²æ‰€æœ‰æ ¸å¿ƒç»„ä»¶ã€Œé…ç½® 4 æ ¸ 12G å†…å­˜ 80G ç£ç›˜ã€\næ“ä½œç³»ç»Ÿ  å¯¹äº Ubuntu LTS äº Ubuntu å®˜ç½‘å¯è§ Ubuntu æœåŠ¡å™¨çš„é•¿æœŸæ”¯æŒç‰ˆæœ¬å°†åŒ…å« OpenStackã€‚åŒæ ·åœ°ï¼Œå®‰å…¨æ›´æ–°ä¹Ÿå°†æ”¯æŒè‡³ 2025 å¹´ 4 æœˆï¼Œä»…é™ 64 ä½å¹³å°ã€‚ å¯¹äº OpenStack å®˜æ–¹æ–‡æ¡£ä¸­ä½¿ç”¨çš„ Ubuntu 20.04.2 LTS ä½œä¸ºåº•å±‚æ“ä½œç³»ç»Ÿã€‚ ç›®å‰ OpenStack æ”¯æŒå¦‚ä¸‹æ“ä½œç³»ç»Ÿå¹³å° å¯è§å®˜ç½‘ https://docs.openstack.org/install-guide/preface.html OpenStack Wallaby is available for CentOS Stream 8. OpenStack Ussuri and Victoria are available for both CentOS 8 and RHEL 8. OpenStack Train and earlier are available on both CentOS 7 and RHEL 7. è€ƒè™‘åˆ° CentOS åæœŸå®˜æ–¹ä¸å†ç»´æŠ¤ä¸”æ”¯æŒå‘¨æœŸè¾ƒçŸ­ï¼Œæ•…æ­¤æ¬¡éƒ¨ç½²ä¸é‡‡ç”¨ CentOS æ“ä½œç³»ç»Ÿã€‚\n å¦‚ä¸‹ä¸º æ³›è§’è‰² å†…éƒ¨å¯¹åº”çš„ç»„ä»¶è§„åˆ’ã€Œå¦‚ä¸‹ç»„ä»¶èƒ½ä¿è¯ OpenStack èƒ½å¤Ÿæ­£å¸¸æä¾›åŸºç¡€æœåŠ¡ï¼ŒåæœŸåœ¨éƒ¨ç½²å®Œæˆåè®¡åˆ’é€æ­¥æ·»åŠ å®¹å™¨ç­‰å…¶ä»–æœåŠ¡ç»„ä»¶ã€\n Controller OpenStack ç¯å¢ƒä¾èµ–ã€ŒMariaDBã€etcdã€RocketMQã€Memcachedã€ CINDERã€ŒåæœŸä½¿ç”¨ Ceph æ›¿ä»£ã€ NEUTRON KEYSTONE PLACEMENT GLANCEã€ŒåæœŸå­˜å‚¨äº Ceph ä¸Šã€ HORIZON Compute NOVA NEUTRON Storage Ceph  å¦‚ä¸‹ä¸ºå®˜æ–¹å¯¹äºæœ€å°åŒ–éƒ¨ç½² OpenStack çš„ç»„ä»¶è¦æ±‚\nMinimal deployment for Wallaby At a minimum, you need to install the following services. Install the services in the order specified below: Identity service â€“ keystone installation for Wallaby Image service â€“ glance installation for Wallaby Placement service â€“ placement installation for Wallaby Compute service â€“ nova installation for Wallaby Networking service â€“ neutron installation for Wallaby We advise to also install the following components after you have installed the minimal deployment services: Dashboard â€“ horizon installation for Wallaby Block Storage service â€“ cinder installation for Wallaby  ç£ç›˜è§„åˆ’ã€Œæµ‹è¯•ç¯å¢ƒã€ node1ã€ŒControllerã€\nroot@node1:~# lsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT loop0 7:0 0 55.5M 1 loop /snap/core18/1997 loop1 7:1 0 67.6M 1 loop /snap/lxd/20326 loop2 7:2 0 69.9M 1 loop /snap/lxd/19188 loop3 7:3 0 31.1M 1 loop /snap/snapd/10707 loop4 7:4 0 55.4M 1 loop /snap/core18/1944 loop5 7:5 0 32.3M 1 loop /snap/snapd/11588 sda 8:0 0 1.1T 0 disk â”œâ”€sda1 8:1 0 512M 0 part /boot/efi â”œâ”€sda2 8:2 0 1G 0 part /boot â””â”€sda3 8:3 0 1.1T 0 part â””â”€ubuntu--vg-ubuntu--lv 253:0 0 200G 0 lvm / sdb 8:16 0 5.5T 0 disk root@node1:~# df -Th Filesystem Type Size Used Avail Use% Mounted on udev devtmpfs 126G 0 126G 0% /dev tmpfs tmpfs 26G 2.3M 26G 1% /run /dev/mapper/ubuntu--vg-ubuntu--lv ext4 196G 11G 176G 6% / tmpfs tmpfs 126G 0 126G 0% /dev/shm tmpfs tmpfs 5.0M 0 5.0M 0% /run/lock tmpfs tmpfs 126G 0 126G 0% /sys/fs/cgroup /dev/sda2 ext4 976M 200M 710M 22% /boot /dev/loop0 squashfs 56M 56M 0 100% /snap/core18/1997 /dev/sda1 vfat 511M 7.9M 504M 2% /boot/efi /dev/loop1 squashfs 68M 68M 0 100% /snap/lxd/20326 /dev/loop2 squashfs 70M 70M 0 100% /snap/lxd/19188 /dev/loop3 squashfs 32M 32M 0 100% /snap/snapd/10707 /dev/loop4 squashfs 56M 56M 0 100% /snap/core18/1944 /dev/loop5 squashfs 33M 33M 0 100% /snap/snapd/11588 tmpfs tmpfs 26G 0 26G 0% /run/user/0 root@node1:~#  node2ã€ŒComputeã€\nroot@node2:~# lsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT loop0 7:0 0 55.5M 1 loop /snap/core18/1997 loop1 7:1 0 55.4M 1 loop /snap/core18/1944 loop2 7:2 0 67.6M 1 loop /snap/lxd/20326 loop3 7:3 0 69.9M 1 loop /snap/lxd/19188 loop4 7:4 0 32.3M 1 loop /snap/snapd/11588 loop5 7:5 0 31.1M 1 loop /snap/snapd/10707 sda 8:0 0 5.5T 0 disk â”œâ”€sda1 8:1 0 512M 0 part /boot/efi â”œâ”€sda2 8:2 0 1G 0 part /boot â””â”€sda3 8:3 0 5.5T 0 part â””â”€ubuntu--vg-ubuntu--lv 253:0 0 5.5T 0 lvm / root@node2:~# df -Th Filesystem Type Size Used Avail Use% Mounted on udev devtmpfs 126G 0 126G 0% /dev tmpfs tmpfs 26G 2.3M 26G 1% /run /dev/mapper/ubuntu--vg-ubuntu--lv ext4 5.5T 11G 5.2T 1% / tmpfs tmpfs 126G 0 126G 0% /dev/shm tmpfs tmpfs 5.0M 0 5.0M 0% /run/lock tmpfs tmpfs 126G 0 126G 0% /sys/fs/cgroup /dev/sda2 ext4 976M 200M 710M 22% /boot /dev/loop0 squashfs 56M 56M 0 100% /snap/core18/1997 /dev/sda1 vfat 511M 7.9M 504M 2% /boot/efi /dev/loop1 squashfs 56M 56M 0 100% /snap/core18/1944 /dev/loop2 squashfs 68M 68M 0 100% /snap/lxd/20326 /dev/loop3 squashfs 70M 70M 0 100% /snap/lxd/19188 /dev/loop5 squashfs 32M 32M 0 100% /snap/snapd/10707 /dev/loop4 squashfs 33M 33M 0 100% /snap/snapd/11588 tmpfs tmpfs 26G 0 26G 0% /run/user/0 root@node2:~#  node3ã€ŒStorageã€\nroot@node3:~# lsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT loop0 7:0 0 55.4M 1 loop /snap/core18/1944 loop1 7:1 0 55.5M 1 loop /snap/core18/1997 loop2 7:2 0 69.9M 1 loop /snap/lxd/19188 loop3 7:3 0 31.1M 1 loop /snap/snapd/10707 loop4 7:4 0 67.6M 1 loop /snap/lxd/20326 loop5 7:5 0 32.3M 1 loop /snap/snapd/11588 sda 8:0 0 1.1T 0 disk â”œâ”€sda1 8:1 0 512M 0 part /boot/efi â”œâ”€sda2 8:2 0 1G 0 part /boot â””â”€sda3 8:3 0 1.1T 0 part â””â”€ubuntu--vg-ubuntu--lv 253:0 0 1.1T 0 lvm / sdb 8:16 0 1.1T 0 disk sdc 8:32 0 1.1T 0 disk sdd 8:48 0 1.1T 0 disk root@node3:~# df -Th Filesystem Type Size Used Avail Use% Mounted on udev devtmpfs 126G 0 126G 0% /dev tmpfs tmpfs 26G 2.6M 26G 1% /run /dev/mapper/ubuntu--vg-ubuntu--lv ext4 1.1T 11G 1.1T 2% / tmpfs tmpfs 126G 0 126G 0% /dev/shm tmpfs tmpfs 5.0M 0 5.0M 0% /run/lock tmpfs tmpfs 126G 0 126G 0% /sys/fs/cgroup /dev/sda2 ext4 976M 200M 710M 22% /boot /dev/sda1 vfat 511M 7.9M 504M 2% /boot/efi /dev/loop0 squashfs 56M 56M 0 100% /snap/core18/1944 /dev/loop1 squashfs 56M 56M 0 100% /snap/core18/1997 /dev/loop2 squashfs 70M 70M 0 100% /snap/lxd/19188 /dev/loop3 squashfs 32M 32M 0 100% /snap/snapd/10707 /dev/loop5 squashfs 33M 33M 0 100% /snap/snapd/11588 /dev/loop4 squashfs 68M 68M 0 100% /snap/lxd/20326 tmpfs tmpfs 26G 0 26G 0% /run/user/0 root@node3:~#  éƒ¨ç½²ç½‘ç»œè§„åˆ’ ç½‘æ®µè§„åˆ’ æ­¤æ¬¡é‡‡ç”¨å®˜æ–¹ã€ŒNetworking Option 2: Self-service networksã€è‡ªä¸»ç®¡ç†ç½‘ç»œ\n ç®¡ç†æ®µ 192.168.2.0/24  å³ç›¸å¯¹äºäº‘æœåŠ¡å•†çš„å†…ç½‘ç¯å¢ƒï¼Œæ­¤æ¬¡ç¯å¢ƒç®¡ç†æ®µä¸å…¬ç½‘ç›¸é€šï¼Œç”¨äºéƒ¨ç½²å®‰è£…è°ƒè¯•ï¼ŒåŒæ—¶ç®¡ç†æ®µä¸æœåŠ¡å™¨ BMC ç›¸é€šï¼Œä¾¿äºè°ƒè¯•\n ä¸šåŠ¡æ®µ 192.168.10.0/24  å³ç›¸å¯¹äºäº‘æœåŠ¡å•†çš„å¤–ç½‘ç¯å¢ƒï¼Œç”¨æˆ·å®¢æˆ·è®¿é—®äº‘æœåŠ¡\nç½‘ç»œæ¶æ„ æ­¤æ¬¡éƒ¨ç½²é‡‡ç”¨ã€ŒSelf-service networksã€ç½‘ç»œæ¶æ„\n ä¸‹å›¾æ¥è‡ªå®˜æ–¹å¯¹äº Provider networks çš„ç»„ä»¶éƒ¨ç½²æ¶æ„   ä¸‹å›¾æ¥è‡ªå®˜æ–¹å¯¹äº Self-service networks çš„ç»„ä»¶éƒ¨ç½²æ¶æ„  å¯è§å¯¹äº Option 1 æ¥è¯´ Self-service networks ç½‘ç»œæ¶æ„å¤šäº† L3 Agent ä¹Ÿå°±æ˜¯å¤šäº†ï¼Œä¸‰å±‚ç½‘ç»œçš„è·¯ç”±åŠŸèƒ½ï¼Œé€šè¿‡è·¯ç”±åè®®å°†è™šæ‹Ÿç½‘ç»œä¸å¤–ç•Œæ‰“é€šã€‚\nç»„ä»¶å¯†ç è§„åˆ’    ç»„ä»¶åç§° ç”¨æˆ·å å¯†ç  ç¯å¢ƒå˜é‡åç§°     MariaDBã€ŒMySQLã€ root 1212 MARIADB_PASS   RabbitMQ openstack OPENSTACK RABBIT_PASS   keystone keystone KEYSTONE KEYSTONE_DBPASS   glance glance GLANCE GLANCE_DBPASS   keystone keystone KEYSTONE KEYSTONE_DBPASS   keystone keystone KEYSTONE KEYSTONE_DBPASS   keystone keystone KEYSTONE KEYSTONE_DBPASS   keystone keystone KEYSTONE KEYSTONE_DBPASS   keystone keystone KEYSTONE KEYSTONE_DBPASS    é™„å½• æ¶æ„  å¦‚ä¸‹ä¸º OpenStack å„ä¸ªç»„ä»¶ä¹‹é—´çš„å…³ç³»ã€Œæ¦‚å¿µæ¶æ„ã€  https://docs.openstack.org/install-guide/get-started-conceptual-architecture.html\n å¦‚ä¸‹ä¸ºä¸€ç§äº‘çš„ç»„ç»‡æ¶æ„å›¾ã€Œé€»è¾‘æ¶æ„ã€  https://docs.openstack.org/install-guide/get-started-logical-architecture.html\nç»„ä»¶ä»‹ç» ==OpenStack Servicesã€ŒOpenStack æœåŠ¡ã€== OpenStack éƒ¨ç½²åŒ…å«è®¸å¤šç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶æä¾›ç”¨äºè®¿é—®åŸºç¡€ç»“æ„èµ„æºçš„ APIã€‚å¦‚ä¸‹åˆ—å‡ºäº†å¯ä»¥éƒ¨ç½²ä»¥å‘äº‘æœ€ç»ˆç”¨æˆ·æä¾›æ­¤ç±»èµ„æºçš„å„ç§æœåŠ¡ã€‚\nComputeã€Œè®¡ç®—èµ„æºã€ NOVA - Compute Serviceã€Œè®¡ç®—æœåŠ¡ã€ ZUN - Containers Serviceã€Œå®¹å™¨æœåŠ¡ã€\nHardware Lifecycleã€Œç¡¬ä»¶ç”Ÿå‘½å‘¨æœŸã€ IRONIC - Bare Metal Provisioning Serviceã€Œè£¸æœºé…ç½®æœåŠ¡ã€ CYBORG - Lifecycle management of acceleratorsã€ŒåŠ é€Ÿå™¨çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€\nStorageã€Œå­˜å‚¨ã€ SWIFT - Object storeã€Œå¯¹è±¡å­˜å‚¨ã€ CINDER - Block Storageã€Œå—å­˜å‚¨ã€ MANILA - Shared filesystemsã€Œå…±äº«æ–‡ä»¶ç³»ç»Ÿã€\nNetworkingã€Œç½‘ç»œã€ NEUTRON - Networkingã€Œç½‘ç»œã€ OCTAVIA - Load balancerã€Œè´Ÿè½½å‡è¡¡ã€ DESIGNATE - DNS serviceã€ŒDNS æœåŠ¡ã€\nShared Servicesã€Œå…±äº«æœåŠ¡ã€ KEYSTONE - Identity serviceã€Œèº«ä»½è®¤è¯æœåŠ¡ã€ PLACEMENT - Placement serviceã€ŒæœåŠ¡å®‰ç½®æœåŠ¡ã€ GLANCE - Image serviceã€Œé•œåƒæœåŠ¡ã€ BARBICAN - Key managementã€Œå¯†é’¥ç®¡ç†æœåŠ¡ã€\nOrchestration HEAT - Orchestrationã€Œç¼–æ’ã€ SENLIN - Clustering serviceã€Œé›†ç¾¤æœåŠ¡ã€ MISTRAL - Workflow serviceã€Œå·¥ä½œæµæœåŠ¡ã€ ZAQAR - Messaging Serviceã€Œæ¶ˆæ¯æœåŠ¡ã€ BLAZAR - Resource reservation serviceã€Œèµ„æºé¢„çº¦æœåŠ¡ã€ AODH - Alarming Serviceã€ŒæŠ¥è­¦æœåŠ¡ã€\nWorkload Provisioning MAGNUM - Container Orchestration Engine Provisioningã€Œå®¹å™¨ç¼–æ’é…ç½®å¼•æ“ã€ SAHARA - Big Data Processing Framework Provisioningã€Œå¤§æ•°æ®å¤„ç†æ¡†æ¶é…ç½®ã€ TROVE - Database as a Serviceã€Œæ•°æ®åº“å³æœåŠ¡ã€\nApplication Lifecycle MASAKARI - Instances High Availability Serviceã€Œå®ä¾‹é«˜å¯ç”¨æ€§æœåŠ¡ã€ MURANO - Application Catalogã€Œåº”ç”¨ç›®å½•ã€ SOLUM - Software Development Lifecycle Automationã€Œè½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸè‡ªåŠ¨åŒ–ã€ FREEZER - Backup, Restore, and Disaster Recoveryã€Œå¤‡ä»½ï¼Œè¿˜åŸå’Œç¾éš¾æ¢å¤ã€\nAPI Proxies EC2API - EC2 API proxyã€ŒEC2 APIä»£ç†ã€\nWeb Frontend HORIZON - Dashboardã€Œä»ªè¡¨ç›˜ã€\n==Operations toolingã€Œè¿ç»´å·¥å…·ã€== è¿™äº›æœåŠ¡æä¾›ä¸»è¦é’ˆå¯¹äº‘ç®¡ç†å‘˜å’Œéƒ¨ç½²è€…çš„APIï¼Œä»¥å¸®åŠ©è¿›è¡Œäº‘æ“ä½œã€‚\nMonitoring servicesã€Œç›‘æ§æœåŠ¡ã€ CEILOMETER - Metering \u0026amp; Data Collection Serviceã€Œè®¡é‡å’Œæ•°æ®æ”¶é›†æœåŠ¡ã€ PANKO - Event, Metadata Indexing Serviceã€Œäº‹ä»¶ï¼Œå…ƒæ•°æ®ç´¢å¼•æœåŠ¡ã€ MONASCA - Monitoringã€Œç›‘æ§ã€\nResource optimizationã€Œèµ„æºä¼˜åŒ–ã€ WATCHER - Optimization Serviceã€Œä¼˜åŒ–æœåŠ¡ã€ VITRAGE - Root Cause Analysis serviceã€Œæ ¹æœ¬åŸå› åˆ†ææœåŠ¡ã€\nBilling / Business Logicã€Œè®¡è´¹ / ä¸šåŠ¡é€»è¾‘ã€ ADJUTANT - Operations processes automationã€Œè¿è¥æµç¨‹è‡ªåŠ¨åŒ–ã€ CLOUDKITTY - Billing and chargebacksã€Œå¸å•å’Œé€€æ¬¾ã€\nTesting / Benchmark RALLY - Benchmarking toolã€Œè·‘åˆ†å·¥å…·æ ‡æ†ç®¡ç†å·¥å…·ã€ TEMPEST - The OpenStack Integration Test Suiteã€ŒOpenStacké›†æˆæµ‹è¯•å¥—ä»¶ã€ PATROLE - The OpenStack RBAC Integration Test Suiteã€ŒOpenStack RBACé›†æˆæµ‹è¯•å¥—ä»¶ã€\n==Add-Ons to Servicesã€Œé™„åŠ æœåŠ¡ã€== è¯¥è½¯ä»¶å¯ä»¥ä½œä¸ºå…¶ä»– OpenStack æœåŠ¡çš„é™„ä»¶æˆ–æ’ä»¶è¿è¡Œã€‚\nSwift é™„åŠ ç»„ä»¶ STOR - Computable object storageã€Œå¯è®¡ç®—å¯¹è±¡å­˜å‚¨ã€\n==Integration enablersã€Œå…¶ä»–ç³»ç»Ÿæ•´åˆã€== æœ¬èŠ‚ä¸­çš„è½¯ä»¶æœ‰åŠ©äºå°† OpenStack ç»„ä»¶é›†æˆåˆ°ç›¸é‚»çš„å¼€æ”¾åŸºç¡€æ¶æ„å †æ ˆä¸­ã€‚\nContainersã€Œå®¹å™¨ã€ KURYR - OpenStack Networking integration for containersã€Œå®¹å™¨çš„OpenStackç½‘ç»œé›†æˆã€\nNFV TACKER - NFV Orchestrationã€ŒNFVç¼–æ’ã€\n","id":7,"section":"posts","summary":"ğŸ‘Œ 2021-05-06 OpenStack Wallaby éƒ¨ç½²0 é€‰å‹åŠæ•´ä½“ä»‹ç» FileInfo Filename - OpenStack Wallaby éƒ¨ç½²ç®€ä»‹ Version - v1.1.2105ï¼ˆ2021/05/06 ~ 2021/05/11ï¼‰ Author - standuke Email - shadowdoker@gmail.com DescriptionKey - Introduction to OpenStack Wallaby deployment","tags":["OpenStack","Virtualization"],"title":"OpenStack Wallaby éƒ¨ç½²0 é€‰å‹åŠæ•´ä½“ä»‹ç»","uri":"https://blog.standuke.top/2021/05/2021-05-06-openstack-wallaby-%E9%83%A8%E7%BD%B20-%E9%80%89%E5%9E%8B%E5%8F%8A%E6%95%B4%E4%BD%93%E4%BB%8B%E7%BB%8D/","year":"2021"},{"content":"ğŸ‘Œ 2021-04-22 ç”µè„‘çŠ¶æ€ ä¼‘çœ  ç¡çœ  å…³æœºç­‰åŒºåˆ« Suspendã€Œå¾…æœºã€  Does not turn off your computer. It puts the computer and all peripherals on a low power consumption mode. If the battery runs out or the computer turns off for some reason, the current session and unsaved changes will be lost.\n ä¸å…³é—­è®¡ç®—æœºã€‚å®ƒä½¿è®¡ç®—æœºå’Œæ‰€æœ‰å¤–å›´è®¾å¤‡å¤„äºä½åŠŸè€—æ¨¡å¼ã€‚å¼€æœºè¿è¡ŒçŠ¶æ€ä¸‹æ•°æ®å­˜æ”¾åœ¨å“ªé‡Œï¼Œå¾…æœºçŠ¶æ€ä¸‹ä¹Ÿå­˜æ”¾åœ¨å“ªé‡Œã€‚å¦‚æœç”µæ± è€—å°½æˆ–è®¡ç®—æœºå› æŸç§åŸå› å…³é—­ï¼Œåˆ™å½“å‰ä¼šè¯å’Œæœªä¿å­˜çš„æ›´æ”¹å°†ä¸¢å¤±ï¼Œç›¸å½“äºå†…å­˜æ•°æ®ä¼šä¸¢å¤±ã€‚\nSleepã€Œç¡çœ ã€  Sleep mode is a power saving state that is similar to pausing a DVD movie. All actions on the computer are stopped, any open documents and applications are put in memory while the computer goes into a low-power state. The computer technically stays on, but only uses a bit of power. You can quickly resume normal, full-power operation within a few seconds. Sleep mode is basically the same thing as \u0026ldquo;Standby\u0026rdquo; mode.\n  Sleep mode is useful if you want to stop working for a short period of time. The computer doesn\u0026rsquo;t use much power in Sleep mode, but it does use some. Hibernate\n ç¡çœ æ¨¡å¼ä¸ã€Œå¾…æœºã€æ¨¡å¼åŸºæœ¬ç›¸åŒã€‚ ç¡çœ æ¨¡å¼æ˜¯ä¸€ç§çœç”µçŠ¶æ€ï¼Œç±»ä¼¼äºæš‚åœ DVD ç”µå½±æˆ–è€…æš‚åœ CD æœºã€ç£å¸¦æœºã€‚å½“è®¡ç®—æœºè¿›å…¥ä½åŠŸè€—çŠ¶æ€æ—¶ï¼Œè®¡ç®—æœºä¸Šçš„æ‰€æœ‰æ“ä½œéƒ½å°†åœæ­¢ï¼Œæ‰€æœ‰æ‰“å¼€çš„æ–‡æ¡£å’Œåº”ç”¨ç¨‹åºéƒ½å°†æ”¾å…¥å†…å­˜ã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼Œè¿™å°ç”µè„‘æ˜¯å¼€ç€çš„ï¼Œä½†åªæ¶ˆè€—ä¸€ç‚¹ç”µã€‚æ‚¨å¯ä»¥åœ¨å‡ ç§’é’Ÿå†…å¿«é€Ÿæ¢å¤æ­£å¸¸ã€æ»¡åŠŸç‡è¿è¡Œã€‚\nHibernateã€Œä¼‘çœ ã€  saves the state of your computer to the hard disk and completely powers off. When resuming, the saved state is restored to RAM.\n å°†è®¡ç®—æœºçš„çŠ¶æ€ä¿å­˜åˆ°ç¡¬ç›˜ä¸Šï¼Œå³å†…å­˜æ•°æ®ä¿å­˜åˆ°ç¡¬ç›˜ä¸Šï¼Œå¹¶å®Œå…¨å…³é—­ç”µæºã€‚æ¢å¤æ—¶ï¼Œä¿å­˜çš„çŠ¶æ€å°†æ¢å¤åˆ°å†…å­˜ã€‚\n Hibernate mode is very similar to sleep, but instead of saving your open documents and running applications to your RAM, it saves them to your hard disk. This allows your computer to turn off entirely, which means once your computer is in Hibernate mode, it uses zero power. Once the computer is powered back on, it will resume everything where you left off. It just takes a bit longer to resume than sleep mode does (though with an SSD, the difference isn\u0026rsquo;t as noticeable as it is with traditional hard drives).\n Hibernate æ¨¡å¼ä¸ sleep éå¸¸ç›¸ä¼¼ï¼Œä½†å®ƒä¸ä¼šå°†æ‰“å¼€çš„æ–‡æ¡£å’Œæ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºä¿å­˜åˆ° RAM ä¸­ï¼Œè€Œæ˜¯å°†å®ƒä»¬ä¿å­˜åˆ°ç¡¬ç›˜ä¸­ã€‚è¿™å…è®¸æ‚¨çš„è®¡ç®—æœºå®Œå…¨å…³é—­ï¼Œè¿™æ„å‘³ç€ä¸€æ—¦æ‚¨çš„è®¡ç®—æœºå¤„äºä¼‘çœ æ¨¡å¼ï¼Œå®ƒä½¿ç”¨é›¶åŠŸç‡ã€‚ä¸€æ—¦ç”µè„‘é‡æ–°å¼€æœºï¼Œå®ƒå°†æ¢å¤æ‚¨ä¸­æ–­çš„æ‰€æœ‰æ“ä½œã€‚å®ƒåªéœ€è¦æ¯”ç¡çœ æ¨¡å¼é•¿ä¸€ç‚¹å°±å¯ä»¥æ¢å¤ã€Œå¯¹äºSSDï¼Œè¿™ç§å·®å¼‚ä¸åƒä¼ ç»Ÿç¡¬ç›˜é‚£æ ·æ˜æ˜¾ã€ã€‚\n Use this mode if you won\u0026rsquo;t be using your laptop for an extended period of time, and you don\u0026rsquo;t want to close your documents.\n å¦‚æœé•¿æ—¶é—´ä¸ä½¿ç”¨ç¬”è®°æœ¬ç”µè„‘ï¼Œå¹¶ä¸”ä¸æƒ³å…³é—­æ–‡æ¡£ï¼Œè¯·ä½¿ç”¨æ­¤æ¨¡å¼ã€‚\nHybrid Sleepã€Œæ··åˆç¡çœ ã€  Hybrid Sleep mode is a combination of the Sleep and Hibernate modes meant for desktop computers. It puts any open documents and applications in memory and on your hard disk, and then puts your computer into a low-power state, allowing you to quickly wake the computer and resume your work. The Hybrid Sleep mode is enabled by default in Windows on desktop computers and disabled on laptops. When enabled, it automatically puts your computer into Hybrid Sleep mode when you put it into Sleep mode.\n  Hybrid Sleep mode is useful for desktop computers in case of a power outage. When power resumes, Windows can restore your work from the hard disk, if the memory is not accessible.\n æ··åˆç¡çœ æ¨¡å¼æ˜¯æŒ‡æ¡Œé¢è®¡ç®—æœºçš„ç¡çœ æ¨¡å¼å’Œä¼‘çœ æ¨¡å¼çš„ç»„åˆã€‚å®ƒå°†ä»»ä½•æ‰“å¼€çš„æ–‡æ¡£å’Œåº”ç”¨ç¨‹åºæ”¾å…¥å†…å­˜å’Œç¡¬ç›˜ä¸­ï¼Œç„¶åå°†è®¡ç®—æœºç½®äºä½åŠŸè€—çŠ¶æ€ï¼Œä»è€Œä½¿æ‚¨èƒ½å¤Ÿå¿«é€Ÿå”¤é†’è®¡ç®—æœºå¹¶æ¢å¤å·¥ä½œã€‚æ··åˆç¡çœ æ¨¡å¼é»˜è®¤åœ¨æ¡Œé¢è®¡ç®—æœºä¸Šçš„Windowsä¸­å¯ç”¨ï¼Œåœ¨ç¬”è®°æœ¬ç”µè„‘ä¸Šç¦ç”¨ã€‚å¯ç”¨åï¼Œå½“æ‚¨å°†è®¡ç®—æœºç½®äºç¡çœ æ¨¡å¼æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨å°†è®¡ç®—æœºç½®äºæ··åˆç¡çœ æ¨¡å¼ã€‚ æ··åˆç¡çœ æ¨¡å¼å¯¹äºå°å¼è®¡ç®—æœºåœ¨æ–­ç”µæ—¶éå¸¸æœ‰ç”¨ã€‚å½“ç”µæºæ¢å¤æ—¶ï¼Œå¦‚æœæ— æ³•è®¿é—®å†…å­˜ï¼ŒWindowså¯ä»¥ä»ç¡¬ç›˜è¿˜åŸå·¥ä½œã€‚\n","id":8,"section":"posts","summary":"ğŸ‘Œ 2021-04-22 ç”µè„‘çŠ¶æ€ ä¼‘çœ  ç¡çœ  å…³æœºç­‰åŒºåˆ« Suspendã€Œå¾…æœºã€ Does not turn off your computer. It puts the computer and all peripherals on a low power consumption mode. If the battery runs out or the computer turns off for some reason, the current session and unsaved changes will be lost. ä¸å…³é—­","tags":["Windows","system"],"title":"ç”µè„‘çŠ¶æ€ ä¼‘çœ  ç¡çœ  å…³æœºç­‰åŒºåˆ«","uri":"https://blog.standuke.top/2021/04/2021-04-22-%E7%94%B5%E8%84%91%E7%8A%B6%E6%80%81-%E4%BC%91%E7%9C%A0-%E7%9D%A1%E7%9C%A0-%E5%85%B3%E6%9C%BA%E7%AD%89%E5%8C%BA%E5%88%AB/","year":"2021"},{"content":"ğŸ‘Œ 2021-04-22 Linux æ–‡ä»¶æƒé™åŠæ–‡ä»¶å¤¹è¯´æ˜ åœ¨å·¥ä½œä¸­ï¼Œåˆ©ç”¨ç‰¹æ®Šæƒé™ï¼Œå¾€å¾€å¯ä»¥äº‹åŠåŠŸå€è¾¾åˆ°å¾ˆå¤šå¯¹äºæ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹æƒé™è¦æ±‚çš„è®¾ç½®ï¼Œæ‰€ä»¥æ‰“ç®—æ€»ç»“ä¸€ä¸‹æ¥è§¦è¿‡çš„æ“ä½œç³»ç»Ÿæ‰€æ¶‰åŠåˆ°çš„ç‰¹æ®Šæ–‡ä»¶æƒé™ï¼Œæ–¹ä¾¿åæœŸæŸ¥çœ‹ã€‚æœ¬å†…å®¹å¤§è‡´é¢å‘äº Linux ç›¸å…³çš„æ“ä½œç³»ç»Ÿã€‚\nå¯¹äº ç±» Unix æ“ä½œç³»ç»Ÿï¼Œè¿™é‡Œåªæ¶‰åŠåˆ°äº† CentOS ï¼Œå…¶ä»–çš„æ“ä½œç³»ç»Ÿæš‚æœªæ¶µç›–è¿›æ¥ã€‚\n[TOC]\nç±»å‹è¯´æ˜ å¸¸è§„æƒé™ã€Œl d r w xã€  l: é“¾æ¥æ–‡ä»¶æˆ–é“¾æ¥ç›®å½•æ ‡è¯† d: ç›®å½•æ ‡è¯† r: å¯è¯»æ ‡è¯† w: å¯å†™æ ‡è¯† x: å¯æ‰§è¡Œæ ‡è¯†  æ“ä½œç³»ç»Ÿé»˜è®¤ / ç›®å½•çš„æ–‡ä»¶å¤¹åˆ—è¡¨\ntotal 16 lrwxrwxrwx. 1 root root 7 Jan 8 2020 bin -\u0026gt; usr/bin dr-xr-xr-x. 5 root root 4096 Jan 8 2020 boot drwxr-xr-x. 20 root root 3240 Apr 22 23:19 dev drwxr-xr-x. 75 root root 8192 Apr 22 23:21 etc drwxr-xr-x. 2 root root 6 Apr 11 2018 home lrwxrwxrwx. 1 root root 7 Jan 8 2020 lib -\u0026gt; usr/lib lrwxrwxrwx. 1 root root 9 Jan 8 2020 lib64 -\u0026gt; usr/lib64 drwxr-xr-x. 2 root root 6 Apr 11 2018 media drwxr-xr-x. 2 root root 6 Apr 11 2018 mnt drwxr-xr-x. 3 root root 23 Nov 28 23:32 opt dr-xr-xr-x. 140 root root 0 Apr 22 23:18 proc dr-xr-x---. 2 root root 171 Nov 28 23:30 root drwxr-xr-x. 24 root root 720 Apr 22 23:20 run lrwxrwxrwx. 1 root root 8 Jan 8 2020 sbin -\u0026gt; usr/sbin drwxr-xr-x. 2 root root 6 Apr 11 2018 srv dr-xr-xr-x. 13 root root 0 Apr 22 23:19 sys drwxrwxrwt. 9 root root 161 Apr 22 23:19 tmp drwxr-xr-x. 13 root root 155 Jan 8 2020 usr drwxr-xr-x. 19 root root 267 Jan 8 2020 var  å¯è¯»æƒé™  å¯¹äºæ–‡ä»¶ï¼Œå¯è¯»æƒé™ï¼šå¯ä»¥å¯¹è¯»å–æ–‡ä»¶é‡Œçš„å†…å®¹  ç”¨å­—ç¬¦è¡¨ç¤ºï¼šr ç”¨å…«è¿›åˆ¶è¡¨ç¤ºï¼š4\n å¯¹äºç›®å½•ï¼Œå¯è¯»æƒé™ï¼šå¯ä»¥åˆ—å‡ºç›®å½•ä¸‹çš„å†…å®¹  ç”¨å­—ç¬¦è¡¨ç¤ºï¼šr ç”¨å…«è¿›åˆ¶è¡¨ç¤ºï¼š4\nå¯å†™æƒé™   å¯¹äºæ–‡ä»¶ï¼Œå¯å†™æƒé™ï¼šå¯ä»¥å¯¹æ–‡ä»¶è¿›è¡Œæ›´æ”¹ ç”¨å­—ç¬¦è¡¨ç¤ºï¼šw ç”¨å…«è¿›åˆ¶è¡¨ç¤ºï¼š2\n  å¯¹äºç›®å½•ï¼Œå¯å†™æƒé™ï¼šå¯ä»¥åœ¨ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶æˆ–ç›®å½•\n  ç”¨å­—ç¬¦è¡¨ç¤ºï¼šw ç”¨å…«è¿›åˆ¶è¡¨ç¤ºï¼š2\nå¯æ‰§è¡Œæƒé™  å¯¹äºæ–‡ä»¶ï¼Œå¯å†™æƒé™ï¼šå¯ä»¥æ‰§è¡Œè¯¥æ–‡ä»¶ï¼ˆè„šæœ¬æˆ–å‘½ä»¤ï¼‰  ç”¨å­—ç¬¦è¡¨ç¤ºï¼šx ç”¨å…«è¿›åˆ¶è¡¨ç¤ºï¼š1\n å¯¹äºç›®å½•ï¼Œå¯å†™æƒé™ï¼šå¯ä»¥cdè¿›å…¥è¯¥ç›®å½•  ç”¨å­—ç¬¦è¡¨ç¤ºï¼šx ç”¨å…«è¿›åˆ¶è¡¨ç¤ºï¼š1\nç‰¹æ®Šæƒé™ã€ŒSUID SGID SBITã€  å…³äº Ss Tt åŒºåˆ«ï¼Œå¯è§ç¤ºä¾‹éƒ¨åˆ†\n SUID ç¤ºä¾‹ -rwsr-xr-x. 1 root root 27856 Aug 9 2019 /usr/bin/passwd SGID ç¤ºä¾‹ -rwxr-sr-x. 1 root root 13 Aug 8 2019 /opt/test/file1 SBIT ç¤ºä¾‹ drwxrwxrwt. 9 root root 161 Apr 22 23:19 /tmp  SUIDã€ŒSetuidã€  å¯¹äºæ–‡ä»¶ï¼ŒSetuidï¼š  ç”¨å­—ç¬¦è¡¨ç¤ºï¼šs ç”¨å…«è¿›åˆ¶è¡¨ç¤ºï¼š4000\n Setuidæœ€å¸¸ç”¨çš„æ˜¯é…åˆæ‰§è¡Œæƒé™ x ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼Œç³»ç»Ÿä¸­å†…ç½®å‘½ä»¤ passwd ï¼Œå®ƒé»˜è®¤æ˜¯å¸¦æœ‰ s æƒé™ä½ï¼Œ passwd å‘½ä»¤çš„ä¸»è¦åŠŸèƒ½æ˜¯ä¿®æ”¹ç”¨æˆ·çš„å¯†ç ï¼Œè€Œä¿®æ”¹å¯†ç çš„æµç¨‹æ˜¯ï¼š\n å°†åŠ å¯†åçš„å“ˆå¸Œå€¼å†™å…¥åˆ° /etc/passwd æ–‡ä»¶å¯¹åº”çš„ç”¨æˆ·æ¡ç›®ä¸­ã€‚ ä½¿ç”¨pwconvå·¥å…·è½¬æ¢åˆ° /etc/shadow æ–‡ä»¶ä¸­ã€‚ è€Œæ™®é€šç”¨æˆ·æ˜¯æ²¡æœ‰æƒé™ä¿®æ”¹ /etc/passwd å’Œ /etc/shadow æ–‡ä»¶ åœ¨æ™®é€šç”¨æˆ·å°è¯•æ‰§è¡Œ passwdï¼Œè¯¥ passwd çš„æ‰€æœ‰è€…æ˜¯rootå¹¶ä¸”è®¾ç½®äº† Suid ï¼Œå› æ­¤ passwd ä»¥ root èº«ä»½æ‰§è¡Œã€‚  PS: å½“ä½ æŸ¥çœ‹è¿›ç¨‹æ—¶ï¼Œä½ ä¼šå‘ç°ï¼Œè¿›ç¨‹ä¸æ˜¯æ™®é€šç”¨æˆ·ï¼Œè€Œæ˜¯passwdå·¥å…·çš„æ‰€æœ‰è€…ï¼ˆrootï¼‰\nSGIDã€ŒSetgidã€  å¯¹äºç›®å½•ï¼ŒSetgidï¼š  ç”¨å­—ç¬¦è¡¨ç¤ºï¼šs ç”¨å…«è¿›åˆ¶è¡¨ç¤ºï¼š2000\n å½“ä¸€ä¸ªç›®å½•æ‹¥æœ‰sgidæƒé™æ—¶ï¼Œå…¶ä»–ç”¨æˆ·åœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶æˆ–ç›®å½•åï¼Œå®ƒä¼šç»§æ‰¿ç›®å½•çš„idï¼Œå³åˆ›å»ºçš„æ–‡ä»¶æˆ–ç›®å½•çš„å±ç»„ä¸ºçˆ¶ç›®å½•çš„å±ç»„ã€‚\n [root@localhost data]# mkdir project [root@localhost data]# chmod 2777 project/ [root@localhost data]# ls -lh total 0 drwxrwsrwx 2 root root 6 Apr 20 23:42 project [root@localhost data]# su bob [bob@localhost data]$ mkdir project/test_for_bob [bob@localhost data]$ ls -lh project/ total 0 drwxrwsr-x 2 bob root 6 Apr 20 23:42 test_for_bob  SBITã€ŒSticky ç²˜æ»ä½ã€  å¯¹äºç›®å½•ï¼š  ç”¨å­—ç¬¦è¡¨ç¤ºï¼št ç”¨å…«è¿›åˆ¶è¡¨ç¤ºï¼š1000\n /tmpç›®å½•å°±æ˜¯ä½¿ç”¨äº†ç²˜æ»ä½ tï¼Œå…¶ä½œç”¨æ˜¯ï¼Œåœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶æˆ–ç›®å½•åï¼Œä»…å…è®¸å…¶ä½œè€…ï¼ˆæ‰€æœ‰è€…ï¼‰è¿›è¡Œåˆ é™¤æ“ä½œã€‚å…¶ä»–ç”¨æˆ·æ— æ³•åˆ é™¤ã€‚\n SELinux æƒé™ã€Œ.ã€ å¼€å¯ SELinux ååˆ›å»ºçš„æ–‡ä»¶å’Œç›®å½•éƒ½ä¼šåœ¨æƒé™åˆ—æ˜¾ç¤ºè¿™ä¸ªç‚¹çš„ï¼Œå…³é—­ SELinux ååˆ›å»ºçš„æ–‡ä»¶å’Œç›®å½•åœ¨æƒé™åˆ—æ˜¯ä¸ä¼šæ˜¾ç¤ºè¿™ä¸ªç‚¹çš„ï¼Œä¹‹å‰åˆ›å»ºçš„æ–‡ä»¶æˆ–ç›®å½•ä¿æŒä¸å˜ï¼Œæƒé™åˆ—çš„ç‚¹ä¾ç„¶æ˜¾ç¤ºã€‚\n[root@DCGH ~]# touch DCGH-later [root@DCGH ~]# mkdir DCGH-later-dir [root@DCGH ~]# ls -lZ -rw-r--r--. root root unconfined_u:object_r:admin_home_t:s0 DCGH drwxr-xr-x. root root unconfined_u:object_r:admin_home_t:s0 DCGH-DIR -rw-r--r-- root root ? DCGH-later drwxr-xr-x root root ? DCGH-later-dir  ACL æƒé™ã€Œ+ã€ åŠ äº†ACLæƒé™æ§åˆ¶ä¹‹åï¼Œä¹‹å‰å…·æœ‰SELinuxå±æ€§çš„æ–‡ä»¶å’Œç›®å½•çš„æƒé™åˆ—æœ€åä¸€ä¸ªä½ç½®å…¨éƒ¨å˜æˆäº†åŠ å·ï¼ˆ+ï¼‰ã€‚ç§»é™¤åŸæ¥çš„ACLæƒé™ä¹‹åï¼Œæ¢å¤åŸæ ·ã€‚å¦‚æœåŠ å·å­˜åœ¨ï¼Œåˆ™å·²ç»æœ‰ç‚¹çš„ç›®å½•æˆ–æ–‡ä»¶ï¼Œç‚¹çš„æ˜¾ç¤ºä¼šè¢«è¦†ç›–ï¼Œä½†åŸæ¥çš„SELinuxå±æ€§ä¿æŒä¸å˜ã€‚\n[root@DCGH ~]# setfacl -m u:dcgh:rwx * [root@DCGH ~]# ls -lZ -rw-rwxr--+ root root unconfined_u:object_r:admin_home_t:s0 DCGH drwxrwxr-x+ root root unconfined_u:object_r:admin_home_t:s0 DCGH-DIR drwxrwxr-x+ root root ? DCGH-DIR-later -rw-rwxr--+ root root ? DCGH-later [root@DCGH ~]# setfacl -b * [root@DCGH ~]# ls -lZ -rw-r--r--. root root unconfined_u:object_r:admin_home_t:s0 DCGH drwxr-xr-x. root root unconfined_u:object_r:admin_home_t:s0 DCGH-DIR drwxr-xr-x root root ? DCGH-DIR-later -rw-r--r-- root root ? DCGH-later  æƒé™æ§åˆ¶ä¸¾ä¾‹ æ–‡ä»¶æƒé™ ç”¨æˆ·å¯¹äºæ–‡ä»¶çš„è®¿é—®æƒé™ï¼Œå–å†³äºæ–‡ä»¶çš„ç”¨æˆ·æƒé™éƒ¨åˆ†ï¼Œä»¥åŠ ç‰¹æ®Šæƒé™ å’Œ ACL\næ–‡ä»¶å¤¹æƒé™ ç¤ºä¾‹ï¼Œå»ºç«‹å¦‚ä¸‹ ç›®å½•ç»“æ„\n. â”œâ”€â”€ level1 â”‚Â â”œâ”€â”€ file1 â”‚Â â””â”€â”€ level11 â”‚Â â””â”€â”€ file11 â””â”€â”€ level2 3 directories, 2 files  ç”¨æˆ·èƒ½å¦åœ¨ level1 ç›®å½•ä¸‹åˆ›å»ºæˆ–è€…è®¿é—®ç”± level1 çš„ç›®å½•æƒé™å†³å®šï¼Œæ¯ä¸ªç›®å½•æƒé™è‡³ç®¡ç†ç›®å½•è‡ªå·±çš„é‚£ä¸€å±‚çº§ï¼Œä¾‹å¦‚ level11 ç›®å½•ä¸‹ç­‰åˆ›å»ºæ–‡ä»¶å¤¹æˆ–è€…è®¿é—®æ“ä½œï¼Œä¸å— level1 ç›®å½•çš„æƒé™é™åˆ¶ã€‚\numask é»˜è®¤ 0022\n å³ä½¿ umask è®¾ç½®ä¸º 0000ï¼Œåç»­åˆ›å»ºæ–‡ä»¶çš„æƒé™ä¾ç„¶æ˜¯ 666ã€‚å‡ºäºå®‰å…¨ç€æƒ³ï¼Œæ‰§è¡Œæƒé™å¿…é¡»æ‰‹åŠ¨æ·»åŠ ã€‚æ‰€ä»¥ä½ ä¼šçœ‹åˆ°ï¼Œç›®å½•æƒé™ä¸º 777ï¼Œè€Œæ–‡ä»¶æƒé™ä¸º 666\n ç¤ºä¾‹ lrwxrwxrwx. 1 root root 7 Oct 3 02:33 bin -\u0026gt; usr/bin   ç¬¬ä¸€ä¸ªå­—ç¬¦çš„å«ä¹‰ï¼š  - å¸¸è§„æ–‡ä»¶ b å—ç‰¹æ®Šæ–‡ä»¶ c å­—ç¬¦ç‰¹æ®Šæ–‡ä»¶ C é«˜æ€§èƒ½ï¼ˆ\u0026ldquo;è¿ç»­æ•°æ®\u0026rdquo;ï¼‰æ–‡ä»¶ d ç›®å½• D é—¨(Solaris 2.5åŠä»¥ä¸Šç‰ˆæœ¬) l ç¬¦å·é“¾æ¥ M ç¦»çº¿ï¼ˆ\u0026ldquo;å‰å·²\u0026rdquo;ï¼‰æ–‡ä»¶ï¼ˆCray DMFï¼‰ n ç½‘ç»œä¸“ç”¨æ–‡ä»¶ï¼ˆHP-UXï¼‰ p FIFOï¼ˆå‘½åç®¡é“ï¼‰ P æ–­å¼€ï¼ˆSolaros 10åŠä»¥ä¸Šï¼‰ s å¥—æ¥å­— ? å…¶ä»–æ–‡ä»¶\n ç¬¬äºŒä¸ªå­—ç¬¦çš„å«ä¹‰ï¼š  r å±ä¸»çš„è¯»æƒé™\n ç¬¬ä¸‰ä¸ªå­—ç¬¦çš„å«ä¹‰ï¼š  w å±ä¸»çš„å†™æƒé™\n ç¬¬å››ä¸ªå­—ç¬¦çš„å«ä¹‰ï¼š  x å±ä¸»çš„æ‰§è¡Œæƒé™ S è®¾ç½®äº†SUIDï¼Œæ²¡æœ‰æ‰§è¡Œæƒé™(æƒé™æ— æ•ˆ) s è®¾ç½®äº†SUIDï¼Œå…·æœ‰æ‰§è¡Œæƒé™\n ç¬¬äº”ä¸ªå­—ç¬¦çš„å«ä¹‰ï¼š  r å±ç»„çš„è¯»æƒé™\n ç¬¬å…­ä¸ªå­—ç¬¦çš„å«ä¹‰ï¼š  w å±ç»„çš„å†™æƒé™\n ç¬¬ä¸ƒä¸ªå­—ç¬¦çš„å«ä¹‰ï¼š  x å±ç»„æ‰§è¡Œæƒé™ S è®¾ç½®äº†SGIDï¼Œæ²¡æœ‰æ‰§è¡Œæƒé™(æƒé™æ— æ•ˆ) s è®¾ç½®äº†SGIDï¼Œå…·æœ‰æ‰§è¡Œæƒé™\n ç¬¬å…«ä¸ªå­—ç¬¦çš„å«ä¹‰ï¼š  r å…¶ä»–äººçš„è¯»æƒé™\n ç¬¬ä¹ä¸ªå­—ç¬¦çš„å«ä¹‰ï¼š  w å…¶ä»–äººçš„å†™æƒé™\n ç¬¬åä¸ªå­—ç¬¦çš„å«ä¹‰ï¼š  x å…¶ä»–äººçš„æ‰§è¡Œæƒé™ T è®¾ç½®äº†ç²˜æ»ä½ï¼Œæ²¡æœ‰æ‰§è¡Œæƒé™(æƒé™æ— æ•ˆ) t è®¾ç½®äº†ç²˜æ»ä½ï¼Œå…·æœ‰æ‰§è¡Œæƒé™\n ç¬¬åä¸€ä¸ªå­—ç¬¦çš„å«ä¹‰ï¼š  . æ²¡æœ‰ä»»ä½•å…¶ä»–æ›¿ä»£è®¿é—®æ–¹æ³•çš„SELinuxå®‰å…¨ä¸Šä¸‹æ–‡ï¼ˆæ²¡æœ‰è®¾ç½®ACLï¼‰ + å…·æœ‰ä»»ä½•å…¶ä»–ç»„åˆè®¿é—®æ–¹æ³•çš„SELinuxå®‰å…¨ä¸Šä¸‹æ–‡ï¼ˆè®¾ç½®äº†ACLï¼‰\n ç¬¬åäºŒä¸ªå­—ç¬¦çš„å«ä¹‰ï¼šè¯¥æ–‡ä»¶çš„ç¡¬é“¾æ¥æ•°é‡ ç¬¬åä¸‰ä¸ªå­—ç¬¦çš„å«ä¹‰ï¼šè¯¥æ–‡ä»¶çš„å±ä¸» ç¬¬åå››ä¸ªå­—ç¬¦çš„å«ä¹‰ï¼šè¯¥æ–‡ä»¶çš„å±ç»„ ç¬¬åäº”ä¸ªå­—ç¬¦çš„å«ä¹‰ï¼šè¯¥æ–‡ä»¶çš„å¤§å° ç¬¬åå…­åˆ°ç¬¬åå…«ä¸ªå­—ç¬¦çš„å«ä¹‰ï¼šæœ€åä¸€æ¬¡ä¿®æ”¹çš„æ—¶é—´ ç¬¬åä¹ä¸ªå­—ç¬¦çš„å«ä¹‰ï¼šæ–‡ä»¶æˆ–ç›®å½•çš„åç§° ç¬¬äºŒåä¸ªå­—ç¬¦çš„å«ä¹‰ï¼šé“¾æ¥ç¬¦å· ç¬¬äºŒåä¸€ä¸ªå­—ç¬¦çš„å«ä¹‰ï¼šé“¾æ¥æ–‡ä»¶çš„æºæ–‡ä»¶  å…¶ä»–ç³»ç»Ÿçš„ç‰¹æ®Šæƒé™æ ‡è¯† macOS å¯ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ macOS ç³»ç»Ÿå†…ç›¸å…³çš„ç‰¹æ®Šæƒé™æ ‡è¯†\n If the file or directory has extended attributes, the permissions field printed by the -l option is followed by a \u0026lsquo;@\u0026rsquo; character. Otherwise, if the file or directory has extended security information, the permissions field printed by the -l option is followed by a \u0026lsquo;+\u0026rsquo; character.\n å¦‚æœæ–‡ä»¶æˆ–ç›®å½•æœ‰æ‰©å±•å±æ€§,åˆ™ä½¿ç”¨-lé€‰é¡¹æ‰§è¡Œlså‘½ä»¤æ—¶ï¼Œä¼šåœ¨æƒé™è®¸å¯å­—æ®µåé¢é™„åŠ ä¸€ä¸ªå­—ç¬¦@ã€‚å¦‚æœæ–‡ä»¶æˆ–ç›®å½•æœ‰æ‰©å±•å®‰å…¨ä¿¡æ¯ï¼Œåˆ™ä½¿ç”¨-lé€‰é¡¹æ‰§è¡Œlså‘½ä»¤æ—¶ï¼Œä¼šåœ¨æƒé™è®¸å¯å­—æ®µåé¢é™„ä»¶ä¸€ä¸ªå­—ç¬¦+ã€‚\nls -l@ æˆ–è€… ls -l+  æ–‡ä»¶ã€Œunkonw.txtã€ã€ç›®å½•ã€ŒArchiveã€ã€æ›¿èº«ã€ŒInvestmentã€ç›¸å…³ç‰¹æ®Šæƒé™æ ‡è¯†å¦‚ä¸‹æ‰€ç¤º\ntotal 24 drwxr-xr-x 44 idoker staff 1408 4 8 16:10 Archive -rw-r--r--@ 1 idoker staff 888 2 22 17:26 Investment com.apple.FinderInfo\t32 com.apple.lastuseddate#PS\t16 drwxr-xr-x 21 idoker staff 672 3 15 00:33 TODO drwxr-xr-x 197 idoker staff 6304 3 22 11:21 Temp -rw-r--r--@ 1 idoker staff 952 2 22 17:03 Workspace com.apple.FinderInfo\t32 com.apple.lastuseddate#PS\t16 drwxr-xr-x 11 idoker staff 352 3 22 11:21 log -rw-r--r-- 1 idoker staff 2544 4 12 10:52 unkonw.txt  å¯ä½¿ç”¨ xattr ç›¸å…³å‘½ä»¤è¿›è¡Œä¿®æ”¹\nWindows Windows å¼€å¯ SMB å…±äº«æˆ–è€…å¼€å¯ ftp å…±äº«ï¼Œåœ¨ Linux ç³»ç»Ÿç¯å¢ƒä¸‹ç›¸å…³æƒé™å¦‚ä¸‹æ‰€ç¤º\nå¾…è¡¥å……  å‚è€ƒèµ„æ–™ ç‰¹æ®Šæƒé™ SUIDã€SGIDã€Sticky https://www.cnblogs.com/Q--T/p/7864795.html åˆ˜åˆæ ‹-Linux æƒé™ä½è¯¦è§£ https://www.cnblogs.com/liuhedong/p/10739718.html Linuxä¸­æƒé™åˆ—ä¸­çš„åŠ å·åŠç‚¹çš„æ·±åº¦è§£è¯» https://www.linuxprobe.com/linux-authority-ask.html\n","id":9,"section":"posts","summary":"ğŸ‘Œ 2021-04-22 Linux æ–‡ä»¶æƒé™åŠæ–‡ä»¶å¤¹è¯´æ˜ åœ¨å·¥ä½œä¸­ï¼Œåˆ©ç”¨ç‰¹æ®Šæƒé™ï¼Œå¾€å¾€å¯ä»¥äº‹åŠåŠŸå€è¾¾åˆ°å¾ˆå¤šå¯¹äºæ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹æƒé™è¦æ±‚çš„è®¾ç½®ï¼Œæ‰€ä»¥æ‰“ç®—æ€»ç»“ä¸€ä¸‹æ¥è§¦è¿‡çš„æ“ä½œç³»ç»Ÿ","tags":["Linux","CentOS"],"title":"Linux æ–‡ä»¶æƒé™åŠæ–‡ä»¶å¤¹æƒé™è¯´æ˜","uri":"https://blog.standuke.top/2021/04/2021-04-22-linux-%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E5%8F%8A%E6%96%87%E4%BB%B6%E5%A4%B9%E6%9D%83%E9%99%90%E8%AF%B4%E6%98%8E/","year":"2021"},{"content":"ğŸ‘Œ 2021-04-11 frp å†…ç½‘ç©¿é€ ç®€ä»‹ https://gofrp.org/docs/overview/\n frp æ˜¯ä»€ä¹ˆï¼Ÿ  frp æ˜¯ä¸€ä¸ªä¸“æ³¨äºå†…ç½‘ç©¿é€çš„é«˜æ€§èƒ½çš„åå‘ä»£ç†åº”ç”¨ï¼Œæ”¯æŒ TCPã€UDPã€HTTPã€HTTPS ç­‰å¤šç§åè®®ã€‚å¯ä»¥å°†å†…ç½‘æœåŠ¡ä»¥å®‰å…¨ã€ä¾¿æ·çš„æ–¹å¼é€šè¿‡å…·æœ‰å…¬ç½‘ IP èŠ‚ç‚¹çš„ä¸­è½¬æš´éœ²åˆ°å…¬ç½‘ã€‚\n ä¸ºä»€ä¹ˆä½¿ç”¨ frpï¼Ÿ  é€šè¿‡åœ¨å…·æœ‰å…¬ç½‘ IP çš„èŠ‚ç‚¹ä¸Šéƒ¨ç½² frp æœåŠ¡ç«¯ï¼Œå¯ä»¥è½»æ¾åœ°å°†å†…ç½‘æœåŠ¡ç©¿é€åˆ°å…¬ç½‘ï¼ŒåŒæ—¶æä¾›è¯¸å¤šä¸“ä¸šçš„åŠŸèƒ½ç‰¹æ€§ï¼Œè¿™åŒ…æ‹¬ï¼š\n å®¢æˆ·ç«¯æœåŠ¡ç«¯é€šä¿¡æ”¯æŒ TCPã€KCP ä»¥åŠ Websocket ç­‰å¤šç§åè®®ã€‚ é‡‡ç”¨ TCP è¿æ¥æµå¼å¤ç”¨ï¼Œåœ¨å•ä¸ªè¿æ¥é—´æ‰¿è½½æ›´å¤šè¯·æ±‚ï¼ŒèŠ‚çœè¿æ¥å»ºç«‹æ—¶é—´ã€‚ ä»£ç†ç»„é—´çš„è´Ÿè½½å‡è¡¡ã€‚ ç«¯å£å¤ç”¨ï¼Œå¤šä¸ªæœåŠ¡é€šè¿‡åŒä¸€ä¸ªæœåŠ¡ç«¯ç«¯å£æš´éœ²ã€‚ å¤šä¸ªåŸç”Ÿæ”¯æŒçš„å®¢æˆ·ç«¯æ’ä»¶ï¼ˆé™æ€æ–‡ä»¶æŸ¥çœ‹ï¼ŒHTTPã€SOCK5 ä»£ç†ç­‰ï¼‰ï¼Œä¾¿äºç‹¬ç«‹ä½¿ç”¨ frp å®¢æˆ·ç«¯å®ŒæˆæŸäº›å·¥ä½œã€‚ é«˜åº¦æ‰©å±•æ€§çš„æœåŠ¡ç«¯æ’ä»¶ç³»ç»Ÿï¼Œæ–¹ä¾¿ç»“åˆè‡ªèº«éœ€æ±‚è¿›è¡ŒåŠŸèƒ½æ‰©å±•ã€‚ æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ UI é¡µé¢ã€‚  å®‰è£…é…ç½®  ä¾èµ– go ç¯å¢ƒ   ç¼–å†™é…ç½®æ–‡ä»¶ï¼Œå…ˆé€šè¿‡ ./frps -c ./frps.ini å¯åŠ¨æœåŠ¡ç«¯ï¼Œå†é€šè¿‡ ./frpc -c ./frpc.ini å¯åŠ¨å®¢æˆ·ç«¯ã€‚å¦‚æœéœ€è¦åœ¨åå°é•¿æœŸè¿è¡Œï¼Œå»ºè®®ç»“åˆå…¶ä»–å·¥å…·ä½¿ç”¨ï¼Œä¾‹å¦‚ systemd å’Œ supervisorã€‚\n frpsã€ŒæœåŠ¡ç«¯ã€ ä»¥ ssh é…ç½®ä¸ºä¾‹ï¼Œè¾ƒå¥½ç†è§£\n[common] bind_port = 7000  æœ¬åœ°ç”¨äº frps æœåŠ¡çš„ç«¯å£ï¼ŒåæœŸ frpc ä¼šä½¿ç”¨æ­¤ç«¯å£ä¸ frps é€šè®¯ç¡®è®¤å‚æ•°\nfrpcã€Œå®¢æˆ·ç«¯ã€ ä»¥ ssh é…ç½®ä¸ºä¾‹ï¼Œè¾ƒå¥½ç†è§£\n[common] server_addr = x.x.x.x server_port = 7000 [ssh] type = tcp local_ip = 127.0.0.1 local_port = 22 remote_port = 6000  x.x.x.x ä¸ºå…¬ç½‘æœåŠ¡å™¨åœ°å€æˆ–åŸŸå\nfrp ä¼šå°†è¯·æ±‚ x.x.x.x:6000 çš„æµé‡è½¬å‘åˆ°å†…ç½‘æœºå™¨çš„ 22 ç«¯å£ã€‚\nlocal_ip å’Œ local_port é…ç½®ä¸ºæœ¬åœ°éœ€è¦æš´éœ²åˆ°å…¬ç½‘çš„æœåŠ¡åœ°å€å’Œç«¯å£ã€‚remote_port è¡¨ç¤ºåœ¨ frp æœåŠ¡ç«¯ç›‘å¬çš„ç«¯å£ï¼Œè®¿é—®æ­¤ç«¯å£çš„æµé‡å°†ä¼šè¢«è½¬å‘åˆ°æœ¬åœ°æœåŠ¡å¯¹åº”çš„ç«¯å£ã€‚\næ¦‚å¿µ frp æ”¯æŒå¤šç§ä»£ç†ç±»å‹æ¥é€‚é…ä¸åŒçš„ä½¿ç”¨åœºæ™¯ã€‚\n   ç±»å‹ æè¿°     tcp å•çº¯çš„ TCP ç«¯å£æ˜ å°„ï¼ŒæœåŠ¡ç«¯ä¼šæ ¹æ®ä¸åŒçš„ç«¯å£è·¯ç”±åˆ°ä¸åŒçš„å†…ç½‘æœåŠ¡ã€‚   udp å•çº¯çš„ UDP ç«¯å£æ˜ å°„ï¼ŒæœåŠ¡ç«¯ä¼šæ ¹æ®ä¸åŒçš„ç«¯å£è·¯ç”±åˆ°ä¸åŒçš„å†…ç½‘æœåŠ¡ã€‚   http é’ˆå¯¹ HTTP åº”ç”¨å®šåˆ¶äº†ä¸€äº›é¢å¤–çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ä¿®æ”¹ Host Headerï¼Œå¢åŠ é‰´æƒã€‚   https é’ˆå¯¹ HTTPS åº”ç”¨å®šåˆ¶äº†ä¸€äº›é¢å¤–çš„åŠŸèƒ½ã€‚   stcp å®‰å…¨çš„ TCP å†…ç½‘ä»£ç†ï¼Œéœ€è¦åœ¨è¢«è®¿é—®è€…å’Œè®¿é—®è€…çš„æœºå™¨ä¸Šéƒ½éƒ¨ç½² frpcï¼Œä¸éœ€è¦åœ¨æœåŠ¡ç«¯æš´éœ²ç«¯å£ã€‚   sudp å®‰å…¨çš„ UDP å†…ç½‘ä»£ç†ï¼Œéœ€è¦åœ¨è¢«è®¿é—®è€…å’Œè®¿é—®è€…çš„æœºå™¨ä¸Šéƒ½éƒ¨ç½² frpcï¼Œä¸éœ€è¦åœ¨æœåŠ¡ç«¯æš´éœ²ç«¯å£ã€‚   xtcp ç‚¹å¯¹ç‚¹å†…ç½‘ç©¿é€ä»£ç†ï¼ŒåŠŸèƒ½åŒ stcpï¼Œä½†æ˜¯æµé‡ä¸éœ€è¦ç»è¿‡æœåŠ¡å™¨ä¸­è½¬ã€‚   tcpmux æ”¯æŒæœåŠ¡ç«¯ TCP ç«¯å£çš„å¤šè·¯å¤ç”¨ï¼Œé€šè¿‡åŒä¸€ä¸ªç«¯å£è®¿é—®ä¸åŒçš„å†…ç½‘æœåŠ¡ã€‚    å‚è€ƒèµ„æ–™ frpå†…ç½‘ç©¿é€éƒ¨ç½²æ­å»ºæ•™ç¨‹ï¼Œå†…ç½‘ç«¯å£æš´éœ²ç»™äº†å¤–ç½‘ https://cloud.tencent.com/developer/article/1720395 ç”¨å¼€æºå…è´¹çš„å†…ç½‘ç©¿é€å·¥å…· frpï¼Œå®ç°è¿œç¨‹æ¡Œé¢å’Œæ–‡ä»¶ä¼ è¾“ https://sspai.com/post/60852 ä½¿ç”¨frpè¿›è¡Œå†…ç½‘ç©¿é€ https://sspai.com/post/52523\n","id":10,"section":"posts","summary":"ğŸ‘Œ 2021-04-11 frp å†…ç½‘ç©¿é€ ç®€ä»‹ https://gofrp.org/docs/overview/ frp æ˜¯ä»€ä¹ˆï¼Ÿ frp æ˜¯ä¸€ä¸ªä¸“æ³¨äºå†…ç½‘ç©¿é€çš„é«˜æ€§èƒ½çš„åå‘ä»£ç†åº”ç”¨ï¼Œæ”¯æŒ TCPã€UDPã€HTTPã€HTTPS ç­‰å¤šç§åè®®ã€‚å¯ä»¥å°†å†…ç½‘æœ","tags":["frp","Network"],"title":"frp å†…ç½‘ç©¿é€","uri":"https://blog.standuke.top/2021/04/2021-04-11-frp-%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/","year":"2021"},{"content":"ğŸ‘Œ 2021-02-25 Mac with Time Machine  FileInfo Filename - Mac with Time Machine Version - v1.1.2102ï¼ˆ2021/02/25 ~ 2021/02/26ï¼‰ Author - nuo standuke Email - shadowdoker@gmail.com DescriptionKey - Mac Time Machine\n ç‰ˆæœ¬ä¿®è®¢è®°å½•ï¼š\nv1.0.2102ï¼š2021-02-25ï¼šå»ºç«‹ Mac with Time Machine æ‰‹å†Œ v1.1.2102ï¼š2021-02-26ï¼šæ·»åŠ æœ¬åœ°å¿«ç…§ä¿¡æ¯ã€æ—¶é—´çº¿é¢œè‰²è¯´æ˜å’Œç£ç›˜åŠ å¯†è¯´æ˜\nTime Machine ç®€ä»‹ Time Machine æ˜¯ Mac çš„å†…ç½®å¤‡ä»½åŠŸèƒ½ã€‚å¯ä»¥ä½¿ç”¨ Time Machine å¯¹æ‰€æœ‰æ–‡ä»¶è¿›è¡Œè‡ªåŠ¨å¤‡ä»½ï¼ŒåŒ…æ‹¬åº”ç”¨ã€éŸ³ä¹ã€ç…§ç‰‡ã€ç”µå­é‚®ä»¶ã€æ–‡ç¨¿å’Œç³»ç»Ÿæ–‡ä»¶ã€‚é€šè¿‡å¤‡ä»½ï¼Œå½“åŸå§‹æ–‡ä»¶ä» Mac æ°¸ä¹…æ€§åˆ é™¤æˆ–è€… Mac ä¸­çš„ç¡¬ç›˜ï¼ˆæˆ– SSDï¼‰è¢«æŠ¹æ‰æˆ–æ›´æ¢æ—¶ï¼Œå¯ä»¥ä»å¤‡ä»½æ¢å¤æ–‡ä»¶ã€‚\n[TOC]\nå¤‡ä»½æœºåˆ¶ å¢é‡å¤‡ä»½ï¼ŒmacOS å¯ä»¥é€šè¿‡ FSEvents ç›‘è§†æ–‡ä»¶ç³»ç»Ÿå˜åŒ–ï¼Œè¿™ç‚¹ç±»ä¼¼ Linux çš„ inotify æœºåˆ¶ã€‚Time Machine é€šè¿‡ FSEvents å¯¹ç³»ç»Ÿçš„æ‰€æœ‰å˜åŒ–è¿›è¡ŒæŒç»­çš„è¿½è¸ªï¼Œå½“å‘ç°è¿‡å»ä¸€å°æ—¶çš„ç³»ç»Ÿå‘ç”Ÿå˜åŒ–ä»¥åï¼ŒTime Machine åªå¯¹é‚£äº›å˜åŒ–çš„æ–‡ä»¶è¿›è¡Œå¤‡ä»½ã€‚ ã€ŒTime Machine è¿›è¡Œçš„ç¬¬ä¸€æ¬¡å¤‡ä»½ï¼Œå¤‡ä»½æ–‡ä»¶å¯èƒ½ä¼šå¾ˆå¤§ï¼Œå› æ­¤å¯èƒ½éœ€è¦ä¸€æ®µæ¯”è¾ƒé•¿çš„æ—¶é—´æ‰èƒ½å®Œæˆã€‚ä½†æ˜¯å½“ç¬¬ä¸€æ¬¡å¤‡ä»½å®Œæˆåï¼Œåæ¥çš„æ¯ä¸ªåç»­å¤‡ä»½åº”è¯¥éƒ½æ¯”è¾ƒå°ï¼ˆå¤‡ä»½ä¹Ÿä¼šæ›´å¿«ï¼‰ï¼Œå› ä¸ºåé¢çš„å¤‡ä»½åªæ˜¯å¢é‡å¤‡ä»½ã€‚ã€\n æœ¬åœ°å¿«ç…§ã€Œåªè¦æœ¬åœ°ç£ç›˜ç©ºé—´å…è®¸ã€ è¿‡å» 24 å°æ—¶çš„æ¯å°æ—¶å¤‡ä»½ è¿‡å»ä¸€ä¸ªæœˆçš„æ¯æ—¥å¤‡ä»½ è¿‡å»æ‰€æœ‰æœˆä»½çš„æ¯å‘¨å¤‡ä»½  æœ¬åœ°å¿«ç…§ã€Œæœ¬åœ°å¿«ç…§å ç”¨çš„ç©ºé—´æ ‡è®°ä¸º å¯æ¸…é™¤ã€\n å¦‚æœå¯ç”¨å‚¨å­˜ç©ºé—´å°äºæ€»å‚¨å­˜ç©ºé—´çš„ 20%ï¼Œåˆ™ TM ä¼šç§»é™¤æœ¬åœ°å¿«ç…§ï¼Œä»æœ€æ—§çš„å¿«ç…§å¼€å§‹ï¼Œç›´åˆ°å¯ç”¨å‚¨å­˜ç©ºé—´è¶…è¿‡æ€»å‚¨å­˜ç©ºé—´çš„ 20%ã€‚ å¦‚æœå¯ç”¨å‚¨å­˜ç©ºé—´å°äºæ€»å‚¨å­˜ç©ºé—´çš„ 10% æˆ–ä¸åˆ° 5GBï¼Œåˆ™ TM ä¼šå¿«é€Ÿç§»é™¤æœ¬åœ°å¿«ç…§ã€‚å¦‚æœåªå‰©ä¸‹ä¸€ä¸ªå¿«ç…§ï¼ŒTM ä¼šåœæ­¢åˆ›å»ºæ–°å¿«ç…§ã€‚éšç€å¯ç”¨ç©ºé—´ä¸æ–­å˜å¤§ï¼ŒTM é¦–å…ˆä¼šä½¿ç”¨æ–°çš„å¿«ç…§æ›¿æ¢ä»¥å‰çš„å¿«ç…§ï¼Œæœ€ç»ˆä¼šç…§å¸¸åˆ›å»ºå¿«ç…§ã€‚\n å¤‡ä»½ä»‹è´¨ è¯¦ç»†å¯è§å‚è€ƒèµ„æ–™ï¼š https://support.apple.com/zh-cn/HT202784\n è¿æ¥åˆ° Mac çš„å¤–ç½® USB é©±åŠ¨å™¨ã€é›·é›³é©±åŠ¨å™¨æˆ– FireWire é©±åŠ¨å™¨ USB è¿æ¥çš„ç§»åŠ¨ç¡¬ç›˜ æ”¯æŒé€šè¿‡ SMB è¿›è¡Œ\u0026quot;æ—¶é—´æœºå™¨\u0026quot;å¤‡ä»½çš„è”ç½‘å‚¨å­˜ (NAS) è®¾å¤‡ Windows å…±äº«æˆ–è€… NAS è®¾å¤‡ä¸Šçš„ SMB å…±äº« å…±äº«ä¸º\u0026quot;æ—¶é—´æœºå™¨\u0026quot;å¤‡ä»½ç›®æ ‡ä½ç½®çš„ Mac æŠŠå…¶ä»–çš„ Mac ä½œä¸ºå¤‡ä»½ç£ç›˜ Mac ç”µè„‘ \u0026gt;ã€Œè®¾ç½®ã€\u0026gt;ã€Œå…±äº«ã€\u0026gt;ã€Œå…±äº«æ–‡ä»¶ã€\u0026gt;ã€Œæ·»åŠ å…±äº«æ–‡ä»¶å¤¹åå³é”®æ–‡ä»¶å¤¹é«˜çº§é€‰é¡¹ã€ è¿æ¥åˆ° AirPort Extreme åŸºç«™ (802.11ac) æˆ– AirPort æ—¶é—´è¿”å›èˆ±çš„å¤–ç½®é©±åŠ¨å™¨ AirPort Extreme è®¾å¤‡ AirPort æ—¶é—´è¿”å›èˆ± AirPort è®¾å¤‡  å¼€å¯ Time Machine Mac ç”µè„‘ \u0026gt;ã€Œè®¾ç½®ã€\u0026gt;ã€ŒTime Machineã€æ‰“å¼€å³å¯\nåŒæ—¶éœ€è¦æ»¡è¶³å¦‚ä¸‹å‡ ä¸ªè¦æ±‚\n Time Machine å¤‡ä»½ç•™ä¸‹è¶³å¤Ÿçš„ç©ºé—´ã€‚å»ºè®®å®¹é‡æ˜¯ Mac ç£ç›˜ç©ºé—´çš„ 2ï½4 å€ ç§»åŠ¨ç¡¬ç›˜çš„ç£ç›˜æ–‡ä»¶ç³»ç»Ÿæ ¼å¼éœ€è¦ä¸º HFS+ æˆ– APFSã€Œå¦‚æœä¸æ˜¯åˆ™ä¼šåœ¨è®¾ç½® Time Machine çš„æ—¶å€™æç¤ºæŠ¹æ‰ç£ç›˜ã€  æ˜¯å¦åŠ å¯†  çœ‹ä¸ªäººéœ€æ±‚ åŠ å¯†è€—æ—¶å¾ˆä¹…ï¼Œé…Œæƒ…è€ƒè™‘ã€ŒåŠ å¯†è¿‡ç¨‹å¯ä»¥ä¸ç”¨ä¸€æ¬¡æ€§å®Œæˆï¼Œåœ¨æ­£å¸¸é€€å‡ºå¤–ç½®ç¡¬ç›˜å¹¶å…³æœºä¹‹åï¼Œä¸‹æ¬¡å†æ¥å…¥æ—¶ç£ç›˜ä¼šç»§ç»­åŠ å¯†è¿›ç¨‹ã€‚ã€ ç£ç›˜æ¯æ¬¡æ¥å…¥æŒ‚è½½æ—¶ä¼šæç¤ºè¾“å…¥å¯†ç   å…¶ä»–é€‰é¡¹  å¦‚æœæ‚¨å¤‡ä»½åˆ°å¤šä¸ªç£ç›˜ï¼Œå¯ä»¥æŒ‰ä½ Option é”®ï¼Œç„¶åä»\u0026quot;æ—¶é—´æœºå™¨\u0026quot;èœå•ä¸­é€‰å–\u0026quot;æµè§ˆå…¶ä»–å¤‡ä»½ç£ç›˜\u0026quot;ã€‚ è¦ä»å¤‡ä»½ä¸­æ’é™¤æŸäº›é¡¹ç›®ï¼Œè¯·æ‰“å¼€\u0026quot;æ—¶é—´æœºå™¨\u0026quot;åå¥½è®¾ç½®ï¼Œç‚¹æŒ‰\u0026quot;é€‰é¡¹\u0026quot;ï¼Œç„¶åç‚¹æŒ‰\u0026quot;æ·»åŠ \u0026quot;(+) æŒ‰é’®ä»¥æ·»åŠ è¦æ’é™¤çš„é¡¹ç›®ã€‚è¦åœæ­¢æ’é™¤æŸä¸ªé¡¹ç›®ï¼ˆä¾‹å¦‚ï¼Œå¤–ç½®ç¡¬ç›˜é©±åŠ¨å™¨ï¼‰ï¼Œè¯·é€‰æ‹©ç›¸åº”çš„é¡¹ç›®å¹¶ç‚¹æŒ‰\u0026quot;ç§»é™¤\u0026quot;(â€“) æŒ‰é’®ã€‚ å¦‚æœæ‚¨ä½¿ç”¨\u0026quot;æ—¶é—´æœºå™¨\u0026quot;å¤‡ä»½è‡³ æŸä¸€ç½‘ç»œç£ç›˜ï¼Œå¯ä»¥éªŒè¯è¿™äº›å¤‡ä»½ä»¥ç¡®ä¿å®ƒä»¬å¤„äºè‰¯å¥½çŠ¶æ€ã€‚æŒ‰ä½ Option é”®ï¼Œç„¶åä»\u0026quot;æ—¶é—´æœºå™¨\u0026quot;èœå•ä¸­é€‰å–\u0026quot;éªŒè¯å¤‡ä»½\u0026quot;ã€‚ ã€ŒéªŒè¯å¤‡ä»½åªæœ‰ç½‘ç»œç£ç›˜ä½œä¸ºå¤‡ä»½ä»‹è´¨æ‰å¯ç”¨ã€  ä»å¤‡ä»½æ¢å¤ ä» Time Machine èœå•ä¸­é€‰æ‹© \u0026ldquo;è¿›å…¥ Time Machine\u0026rdquo;\n æ—¶é—´çº¿ äº®çº¢è‰² åˆ»åº¦æ ‡è®°æ˜¯å¯ç«‹å³ä»æœ¬åœ°å¿«ç…§æˆ–å¤‡ä»½é©±åŠ¨å™¨æ¢å¤çš„å¤‡ä»½ã€‚åœ¨å¤‡ä»½é©±åŠ¨å™¨ä¸å¯ç”¨æ—¶ï¼Œåªæœ‰æœ¬åœ°å¿«ç…§æ˜¯äº®çº¢è‰²çš„ã€‚ æš—çº¢è‰² åˆ»åº¦æ ‡è®°æ˜¯åœ¨å¤‡ä»½é©±åŠ¨å™¨å¯ç”¨åï¼Œå¯ä»è¯¥é©±åŠ¨å™¨æ¢å¤çš„å¤‡ä»½ã€‚åœ¨è¿™ä¹‹å‰ï¼Œå±å¹•ä¸Šçš„çª—å£å †æ ˆä¼šä¸ºè¯¥å¤‡ä»½æ˜¾ç¤ºä¸€ä¸ªç©ºç™½çª—å£ã€‚\næœ¬åœ°å‰¯æœ¬å‡ä¸ºå¯ç”¨çŠ¶æ€è€Œæ˜¾ç¤ºæˆ äº®çº¢è‰²ï¼Œä¸åœ¨æœ¬åœ°çš„å‰¯æœ¬ä¸€å¾‹éƒ½æ˜¾ç¤ºæˆ æš—çº¢è‰²ã€‚å¦‚æœæ‚¨æ¥å…¥ä¹‹å‰æ‰§è¡Œå¤‡ä»½ä½¿ç”¨çš„ç¡¬ç›˜ï¼ŒTM ä¼šè¯†åˆ«åˆ°æ‰€æœ‰å¯ç”¨å‰¯æœ¬å¹¶æ˜¾ç¤ºä¸º äº®çº¢è‰²ã€‚\n é€‰æ‹©éœ€è¦æ¢å¤çš„æ–‡ä»¶å³å¯\næ‰‹åŠ¨åˆ é™¤å¤‡ä»½ é»˜è®¤çš„ï¼ŒTime Machine é‡åˆ°ç£ç›˜ç©ºé—´ä¸å¤Ÿä¸‹æ¬¡å¤‡ä»½æ—¶ï¼Œä¼šè‡ªåŠ¨æ¸…ç†ä»¥å¾€çš„å¤‡ä»½ã€‚ å¯¹äºæ‰‹åŠ¨åˆ é™¤å¤‡ä»½ï¼Œä¸€èˆ¬æ¥è¯´ç”±äºå¤‡ä»½æ–‡ä»¶ä½“ç§¯å·¨å¤§ï¼Œåˆ é™¤ä¹Ÿéœ€è¦è€—è´¹æå¤§æ—¶é—´ã€‚æ‰‹åŠ¨åˆ é™¤å¤‡ä»½æœ‰å¦‚ä¸‹ä¸¤ç§æ–¹å¼\né€šè¿‡ Time Machine å†…å»ºå³é”®åˆ é™¤å¤‡ä»½ æ­¤æ–¹å¼å¯ä»¥åˆ é™¤ã€Œç‰¹å®šå¤‡ä»½æ–‡ä»¶ï¼ˆå¤¹ï¼‰ã€æˆ–ã€ŒTime Machine çš„è€æ—§å¤‡ä»½ã€\n åˆ é™¤ã€Œç‰¹å®šå¤‡ä»½æ–‡ä»¶ï¼ˆå¤¹ï¼‰ã€ ç¬¬ä¸€æ­¥ï¼šå°†ä½ çš„ Time Machine ç£ç›˜è¿æ¥åˆ° Mac ç”µè„‘ã€‚ ç¬¬äºŒæ­¥ï¼šä» Time Machine èœå•æ å›¾æ ‡å¤„è¿›å…¥ Time Machineã€‚ ç¬¬ä¸‰æ­¥ï¼šæ‰¾åˆ°éœ€è¦åˆ é™¤çš„ç‰¹å®šæ–‡ä»¶ï¼ˆå¤¹ï¼‰æ‰€åœ¨çš„è·¯å¾„ä½ç½®ã€‚ ç¬¬å››æ­¥ï¼šç‚¹å‡»é½¿è½®å›¾æ ‡å‘¼å‡ºä¸‹æ‹‰èœå•ï¼Œç„¶åé€‰æ‹©ã€Œåˆ é™¤XXXçš„æ‰€æœ‰å¤‡ä»½ã€é¡¹å¹¶ç¡®è®¤å³å¯ã€‚  ç®€è€Œè¨€ä¹‹å°±æ˜¯ è¿›å…¥ Time Machine æ‰¾åˆ°è¦åˆ é™¤çš„ç‰¹å®šå¤‡ä»½æ–‡ä»¶ï¼ˆå¤¹ï¼‰ ç„¶åå³é”®é€‰æ‹©**ã€Œåˆ é™¤XXXçš„æ‰€æœ‰å¤‡ä»½ã€**\n åˆ é™¤ã€ŒTime Machine çš„è€æ—§å¤‡ä»½ã€ ç¬¬ä¸€æ­¥ï¼šè¿›å…¥ Time Machineã€‚ ç¬¬äºŒæ­¥ï¼šåœ¨ Time Machine å³ä¸‹è§’é€‰æ‹©å¤§æ¦‚çš„æ—¶é—´ï¼Œç„¶åå¯ä»¥ä½¿ç”¨çª—å£å³ä¾§çš„æ»šè½®æ¥ç²¾ç»†è°ƒèŠ‚ç›´è‡³æ‰¾åˆ°éœ€è¦åˆ é™¤çš„é‚£ä¸€ä¸ªå¤‡ä»½ã€‚  ç®€è€Œè¨€ä¹‹ä¸ä¸Šæ“ä½œå¤§è‡´ç›¸åŒï¼Œå°±æ˜¯å³é”®é€‰æ‹©**ã€Œåˆ é™¤æ‰€æœ‰å¤‡ä»½ã€**\nè¿›å…¥ Time Machine å¤‡ä»½æ–‡ä»¶å¤¹åˆ é™¤æ–‡ä»¶ æ­¤æ“ä½œä»…é’ˆå¯¹ åˆ é™¤ç£ç›˜ä¸Šçš„æ‰€æœ‰å¤‡ä»½æ•°æ®ã€Œéœ€è¦ç”¨åˆ° terminal å‘½ä»¤è¡Œã€\n è¿›å…¥ Time Machine çš„å¤‡ä»½ç£ç›˜  cd /Volumes/Seagate\\ Backup\\ Plus\\ Drive/  æ‰¾åˆ°å¤‡ä»½æ–‡ä»¶ ã€ŒBackups.backupdbã€ åˆ é™¤ã€ŒBackups.backupdbã€æ–‡ä»¶å¤¹  sudo rm -rf Backups.backupdb # æ­¤å‘½ä»¤ä¼šè€—è´¹è¾ƒé•¿æ—¶é—´  æ³¨æ„å¦‚æœæ‰‹åŠ¨åˆ é™¤äº† Backups.backupdbï¼Œé‚£ä¹ˆ Backups.backupdb ä¼šè¿›å…¥ å›æ”¶ç«™ï¼Œé‚£ä¹ˆ\n æ¸…ç©ºå›æ”¶ç«™ä¼šæç¤ºæ–‡ä»¶æ­£åœ¨ä½¿ç”¨ é€‰æ‹© è·³è¿‡ åˆ ä¸æ‰çš„æ–‡ä»¶ éœ€è¦é€šè¿‡ terminal å‘½ä»¤è¡Œåˆ é™¤  cd /Volumes/Seagate\\ Backup\\ Plus\\ Drive/ sudo cd .Trashes sudo cd 501 sudo rm -rf Backups.backupdb  å…³äºéªŒè¯å¤‡ä»½ éªŒè¯å¤‡ä»½ç”¨äºéªŒè¯å¤‡ä»½æ˜¯å¦å¯ç”¨ã€‚æ­¤æ“ä½œä¼šå¯¹æ¯” ç”µè„‘å’Œå¤‡ä»½ çš„æ–‡ä»¶æ ¡éªŒå€¼ï¼Œè‹¥ä¸ä¸€è‡´åˆ™ä¼šå‘å‡ºé€šçŸ¥ã€ŒéªŒè¯å¤‡ä»½åªæœ‰ç½‘ç»œç£ç›˜ä½œä¸ºå¤‡ä»½ä»‹è´¨æ‰å¯ç”¨ã€\néªŒè¯ç½‘ç»œç£ç›˜å¤‡ä»½ å¯ä»¥ç”¨ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„ éªŒè¯å¤‡ä»½ åŠŸèƒ½æ¥æ ¡éªŒå¤‡ä»½\néªŒè¯ç§»åŠ¨ç¡¬ç›˜å¤‡ä»½ å¯è¿›å…¥ç»ˆç«¯ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œå¯¹æ¯”\ntmutil compare -s ! ä¹‹å‰çš„æ–‡ä»¶æ„å‘³ç€ç»™å®šçš„æ–‡ä»¶å·²æ›´æ”¹ã€‚ + ä¹‹å‰çš„æ–‡ä»¶æ„å‘³ç€ç»™å®šçš„æ–‡ä»¶æ˜¯æ–°çš„ã€‚ - åœ¨æ–‡ä»¶ä¹‹å‰æ„å‘³ç€ç»™å®šçš„æ–‡ä»¶è¢«åˆ é™¤ã€‚  å‚è€ƒèµ„æ–™ http://www.howtoip.com/how-to-verify-that-your-macs-time-machine-backups-are-working-properly/ https://zhcn.eyewated.com/%E9%AA%8C%E8%AF%81%E6%97%B6%E9%97%B4%E6%9C%BA%E5%99%A8%E5%92%8C%E6%97%B6%E9%97%B4%E8%83%B6%E5%9B%8A%E5%A4%87%E4%BB%BD/ https://www.jianshu.com/p/0f5a309cac92\n","id":11,"section":"posts","summary":"ğŸ‘Œ 2021-02-25 Mac with Time Machine FileInfo Filename - Mac with Time Machine Version - v1.1.2102ï¼ˆ2021/02/25 ~ 2021/02/26ï¼‰ Author - nuo standuke Email - shadowdoker@gmail.com DescriptionKey - Mac Time Machine ç‰ˆæœ¬ä¿®è®¢è®°å½•ï¼š v1.0","tags":["macOS","Time Machine"],"title":"Mac With Time Machine æ—¶é—´æœºå™¨å¤‡ä»½","uri":"https://blog.standuke.top/2021/02/2021-02-25-mac-with-time-machine-%E6%97%B6%E9%97%B4%E6%9C%BA%E5%99%A8%E5%A4%87%E4%BB%BD/","year":"2021"},{"content":"ğŸ‘Œ 2020-12-20 kvm è™šæ‹Ÿæœºé€šè¿‡ bridge æ¡¥å®ç°ä¸»æœºäº’é€š çŠ¶å†µ åœ¨RedHat7ä¸Šæ­äº†ä¸€å°KVMæœåŠ¡å™¨ï¼Œåˆ›å»ºå¥½è™šæ‹Ÿæœºä¹‹åå‘ç°ï¼Œå¤–éƒ¨ç”µè„‘ä¸KVMæœåŠ¡å™¨ã€å¤–éƒ¨æœºå™¨ä¸VMè™šæ‹Ÿæœºã€ä¸¤å°VMè™šæ‹Ÿæœºä¹‹é—´éƒ½å¯ä»¥é€šè®¯ï¼Œä½†æ˜¯KVMæœåŠ¡å™¨ä¸VMè™šæ‹Ÿæœºå´æ— æ³•é€šè®¯ã€‚æ­¤æ—¶å¤–éƒ¨ç”µè„‘ã€KVMæœåŠ¡å™¨ã€VMè™šæ‹Ÿæœºéƒ½å…³é—­äº†é˜²ç«å¢™ã€‚\nç®€å•ä¸€å¥è¯å°±æ˜¯ï¼šè™šæ‹Ÿæœºä¸å®¿ä¸»æœºä¹‹é—´æ— æ³•äº’è®¿\nè§£å†³ åŸç† åˆ›å»ºä¸€ä¸ªç½‘æ¡¥ï¼ŒæŠŠ è™šæ‹Ÿæœºçš„è™šæ‹Ÿç½‘å¡ å’Œ ç‰©ç†æœºå®ä½“ç½‘å¡ åŒæ—¶æ”¾ç½®åˆ°è¿™ä¸ªç½‘æ¡¥ä¸­\nâš ï¸ æ³¨æ„ï¼šæ­¤æ“ä½œéœ€è¦åœ¨å®ä½“æœºé…ç½®ï¼Œä¸­é—´ä¼šå‡ºç°ç½‘ç»œä¸­æ–­ï¼Œæ•…ä¸é€‚åˆè¿œç¨‹é…ç½®\næ£€å¯Ÿç¯å¢ƒ  ifconfig\n ç‰©ç†ç½‘å¡eno1ã€eno2 / ç½‘æ¡¥virbr0 / è™šæ‹Ÿç½‘å¡macvtap0ã€macvtap1\n brctl show\n ç½‘æ¡¥virbr0ï¼Œç›¸å½“äºVMwareçš„ VMNET8ï¼Œæä¾›NATçš„ç½‘å¡ï¼Œå½“æœ‰è™šæ‹Ÿæœºç½‘å¡ä½¿ç”¨æ¡¥æ¥æ¨¡å¼å¹¶ä¸”å¯åŠ¨æ—¶ï¼Œä½¿ç”¨#brctl show æŸ¥çœ‹ï¼Œåœ¨virbr0ä¼šæœ‰çš„interfacesä¸‹ä¼šå‡ºç°ç½‘å¡vnetXã€‚\nåˆ›å»ºæ–°ç½‘æ¡¥ virsh iface-bridge eno1 br0\nåˆ›å»ºç½‘æ¡¥ï¼Œå¹¶æŠŠeno1ï¼Œè™šæ‹Ÿæœºçš„ç½‘å¡æ¥å…¥ç½‘æ¡¥ã€Œæ­¤æ—¶ç‰©ç†ç½‘å¡å·²ç»æ˜¯æ­¤ç½‘æ¡¥çš„ä¸€ä¸ªæˆå‘˜äº†ã€\nä¿®æ”¹è™šæ‹Ÿæœºçš„ç½‘å¡é…ç½®  å…³é—­è™šæ‹Ÿæœº åˆ é™¤å·²æœ‰ç½‘å¡ åˆ›å»ºæ–°çš„ç½‘å¡è¿æ¥ï¼Œä½¿ç”¨ æ¡¥æ¥æ¨¡å¼ æ¡¥æ¥åˆ°æ–¹æ‰åˆ›å»ºçš„ç½‘å¡ã€Œä¿®æ”¹å®Œæˆåå¯åŠ¨è™šæ‹Ÿæœºï¼Œå‘ç°è™šæ‹Ÿæœºçš„ç½‘å¡ä¹ŸåŠ å…¥äº†br0ï¼Œæ­¤æ—¶è™šæ‹Ÿæœºçš„ç½‘å¡åç”±macvtapXå˜æˆäº†vnetXã€‚ã€  å‚è€ƒèµ„æ–™ https://blog.51cto.com/cubix/1736750\n","id":12,"section":"posts","summary":"ğŸ‘Œ 2020-12-20 kvm è™šæ‹Ÿæœºé€šè¿‡ bridge æ¡¥å®ç°ä¸»æœºäº’é€š çŠ¶å†µ åœ¨RedHat7ä¸Šæ­äº†ä¸€å°KVMæœåŠ¡å™¨ï¼Œåˆ›å»ºå¥½è™šæ‹Ÿæœºä¹‹åå‘ç°ï¼Œå¤–éƒ¨ç”µè„‘ä¸KVMæœåŠ¡å™¨ã€å¤–éƒ¨æœºå™¨ä¸VMè™šæ‹Ÿ","tags":["KVM","Virtualization","Linux Bridge"],"title":"KVM è™šæ‹Ÿæœºé€šè¿‡ Bridge æ¡¥å®ç°ä¸»æœºäº’é€š","uri":"https://blog.standuke.top/2020/12/2020-12-20-kvm-%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%80%9A%E8%BF%87-bridge-%E6%A1%A5%E5%AE%9E%E7%8E%B0%E4%B8%BB%E6%9C%BA%E4%BA%92%E9%80%9A/","year":"2020"},{"content":"ğŸ‘Œ 2020-10-29 vSphere ESXi vCenter éƒ¨ç½²å®‰è£…ä¸å…³ç³»åŒºåˆ«.md å…³ç³»ä¸åŒºåˆ«  vSphere  vSphere æ˜¯æ•°æ®ä¸­å¿ƒäº§å“é™„å¸¦çš„è½¯ä»¶å¥—ä»¶ã€‚vSphere å°±åƒ Microsoft Office å¥—ä»¶ï¼Œå…¶ä¸­åŒ…å«è®¸å¤šè½¯ä»¶ï¼Œä¾‹å¦‚ MS Officeï¼ŒMS Excelï¼ŒMS Access ç­‰ã€‚ä¸ Microsoft Office ä¸€æ ·ï¼ŒvSphere ä¹Ÿæ˜¯ä¸€ä¸ªè½¯ä»¶å¥—ä»¶ï¼Œå…¶ä¸­åŒ…å«è®¸å¤šè½¯ä»¶ç»„ä»¶ï¼Œä¾‹å¦‚ vCenterï¼ŒESXiï¼ŒvSphere Client ç­‰ã€‚å› æ­¤ï¼Œæ‰€æœ‰è¿™äº›è½¯ä»¶ç»„ä»¶çš„ç»„åˆå°±æ˜¯ vSphereã€‚vSphere ä¸æ˜¯å¯ä»¥å®‰è£…å’Œä½¿ç”¨çš„ç‰¹å®šè½¯ä»¶ï¼Œ\u0026ldquo;å®ƒåªæ˜¯å…·æœ‰å…¶ä»–å­ç»„ä»¶çš„è½¯ä»¶åŒ…åç§°\u0026rdquo;ã€‚\n ESXi  ESXiï¼ŒvSphere å®¢æˆ·ç«¯å’Œ vCenteræ˜¯ VMware vSphere çš„ç»„ä»¶ã€‚ ESXi æœåŠ¡å™¨æ˜¯ vSphere æœ€é‡è¦çš„éƒ¨åˆ†ã€‚ESXi æ˜¯è™šæ‹ŸåŒ–æœåŠ¡å™¨ã€‚è¿™æ˜¯ 1 ç±»ç®¡ç†ç¨‹åºã€‚æ‰€æœ‰è™šæ‹Ÿæœºæˆ–æ¥å®¾æ“ä½œç³»ç»Ÿå‡å®‰è£…åœ¨ ESXi æœåŠ¡å™¨ä¸Šã€‚è¦å®‰è£…ï¼Œç®¡ç†å’Œè®¿é—®ä½äº ESXi æœåŠ¡å™¨ä¸Šæ–¹çš„é‚£äº›è™šæ‹ŸæœåŠ¡å™¨ï¼Œæ‚¨å°†éœ€è¦ vSphere å¥—ä»¶ä¸­ç§°ä¸º vSphere Client çš„å…¶ä»–éƒ¨åˆ†ã€‚ç°åœ¨ï¼ŒvSphere Client å…è®¸ç®¡ç†å‘˜è¿æ¥åˆ° ESXi æœåŠ¡å™¨å¹¶è®¿é—®æˆ–ç®¡ç†è™šæ‹Ÿæœºã€‚ vSphere Client æ˜¯åŸºäº HTML5 / Web çš„ç®¡ç†é—¨æˆ·ã€‚ç®¡ç†å‘˜ç™»å½• Web æµè§ˆå™¨ä»¥è®¿é—® vSphere Clientï¼Œä»¥ç®¡ç† ESXi æœåŠ¡å™¨ã€‚é€‚ç”¨äº Windows æˆ– Cï¼ƒ çš„ vSphere Client ä¸å†å¯ç”¨ï¼Œåœ¨ vSphere 6.7 ä¸­å·²è¢«åŸºäº HTML5 çš„ vSphere Client å–ä»£ï¼Œä»è€Œæ— éœ€å®‰è£… vSphere Client è½¯ä»¶æ¥è®¿é—® ESXi ä¸»æœºã€‚\n vCenter Server  vCenter Server æ˜¯å¦ä¸€å¥— vSphere å¥—ä»¶ã€‚ vCenter Server æœ‰ä¸¤ç§ã€‚ vCenter Server å¯ä»¥å®‰è£…åœ¨ Windows Server ä¸Šï¼Œä¹Ÿå¯ä»¥æ˜¯åŸºäº Linux çš„è™šæ‹Ÿè®¾å¤‡ã€‚VMwareå°†åœæ­¢ä½¿ç”¨åŸºäº Winodws çš„ vCenter Serverï¼Œå¹¶åœ¨å°†æ¥ä»…å‘å¸ƒåŸºäº Linux çš„ vCenter è®¾å¤‡ã€‚ VMware vCenter Server æ˜¯ä¸€ä¸ªé›†ä¸­å¼ç®¡ç†åº”ç”¨ç¨‹åºï¼Œå¯è®©æ‚¨é›†ä¸­ç®¡ç†è™šæ‹Ÿæœºå’Œ ESXi ä¸»æœºã€‚ vSphere Client å†æ¬¡ç”¨äºè®¿é—® vCenter Server å¹¶æœ€ç»ˆç®¡ç† ESXi æœåŠ¡å™¨ã€‚å¯¹äºéœ€è¦ vMotionï¼ŒVMware High Availabilityï¼ŒVMware Update Managerï¼ŒVMware Distributed Resource Schedulerï¼ˆDRSï¼‰ç­‰ä¼ä¸šåŠŸèƒ½çš„ä¼ä¸šï¼ŒvCenter Server æ˜¯å¼ºåˆ¶æ€§çš„ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°åœ¨ vCenter ä¸­å…‹éš†ç°æœ‰è™šæ‹ŸæœºæœåŠ¡å™¨ã€‚å› æ­¤ï¼ŒvCenter æ˜¯vSphere å¥—ä»¶çš„å¦ä¸€ä¸ªé‡è¦éƒ¨åˆ†ã€‚æ‚¨å¿…é¡»å•ç‹¬è´­ä¹° vCenter Server è®¸å¯è¯ã€‚\nå®‰è£…å»ºè®® æ–°è£…ç¯å¢ƒé»˜è®¤å…¨éƒ¨å®‰è£… 6.7 ç‰ˆæœ¬ã€Œå®‰è£…åŒ…ä¸º VMvisor-Installer-6.7.0.U3ã€ï¼Œå®‰è£…ä¹‹åä½¿ç”¨ VCSA ç®¡ç†ã€Œå®‰è£…åŒ…ä¸º VCSA-all-6.7.0ã€ã€‚\nå®‰è£…æ­¥éª¤ å®‰è£…åŒ…æ¦‚è§ˆ vcsa æ˜¯ Linux ç‰ˆçš„ vcenterï¼ˆè‡ªå¸¦æ•°æ®åº“ï¼‰ï¼Œvim æ˜¯Windows ç‰ˆçš„ vcenterï¼ˆè¦ SQL serverï¼‰\nESXi å®‰è£… ç•¥\nVCSAã€ŒvCenter Server Applianceã€å®‰è£… æœ‰ DNS è§£æç¯å¢ƒ https://blog.51cto.com/4690837/2419974 æ—  DNS è§£æç¯å¢ƒ https://blog.51cto.com/3701740/2484158 https://www.mr-mao.cn/archives/deployment-vcenter6-7-without-dns.html\næ³¨æ„äº‹é¡¹ æœ€è¿‘å‡ å¤©æŠŠæ—§çš„vCenterå‡çº§åˆ°6.7ï¼Œå‘ç°æ— æ³•è¿æ¥åˆ°èŠ‚ç‚¹ï¼Œæç¤ºæ— æƒã€‚\næŸ¥æ‰¾ç›¸å…³èµ„æ–™å‘ç°æ˜¯é”å®šæ¨¡å¼çš„ä¸¥æ ¼æ¨¡å¼å¼€å¯äº†ï¼Œåªèƒ½ä»åŸæ¥çš„vcenterè¿æ¥åˆ°èŠ‚ç‚¹ï¼Œä¸èƒ½é€šè¿‡å…¶ä»–æ–¹å¼è¿æ¥ã€‚\nä» DCUI å¯ç”¨æˆ–ç¦ç”¨é”å®šæ¨¡å¼ï¼ˆæœ€ç®€å•ï¼‰ï¼š\nç›´æ¥ç™»å½•åˆ° ESXi ä¸»æœºã€‚ ä»ä¸»æœºä¸Šæ‰“å¼€ DCUIã€‚ æŒ‰ F2 è¿›è¡Œåˆå§‹è®¾ç½®ã€‚ æŒ‰ Enter åˆ‡æ¢é…ç½®é”å®šæ¨¡å¼(lockdown)è®¾ç½®ã€‚ ä» vSphere Web Client å¯ç”¨æˆ–ç¦ç”¨é”å®šæ¨¡å¼ï¼ˆéœ€è¦å·²ç»è¿æ¥çš„vcenterï¼‰ï¼š\nåœ¨ vSphere Web Client æ¸…å•ä¸­æµè§ˆåˆ°ä¸»æœºã€‚ å•å‡»ç®¡ç†é€‰é¡¹å¡ï¼Œç„¶åå•å‡»è®¾ç½®ã€‚ åœ¨\u0026quot;ç³»ç»Ÿ\u0026quot;ä¸‹ï¼Œé€‰æ‹©å®‰å…¨é…ç½®æ–‡ä»¶ã€‚ åœ¨\u0026quot;é”å®šæ¨¡å¼\u0026quot;é¢æ¿ä¸­ï¼Œå•å‡»ç¼–è¾‘ã€‚ å•å‡»é”å®šæ¨¡å¼å¹¶é€‰æ‹©å…¶ä¸­ä¸€ä¸ªé”å®šæ¨¡å¼é€‰é¡¹ã€‚ å…³é—­ä¹‹åï¼Œåœ¨æ–°çš„Vcenterè¾“å…¥ESXIèŠ‚ç‚¹å¯†ç ï¼Œå³å¯ç®¡ç†ã€‚\nè®¸å¯è¯ æ¿€æ´»ç  ESXi vSphere 6.0 å·²æ·˜æ±°\nESXi vSphere 6.7 ESXi SN:\nHV4WC-01087-1ZJ48-031XP-9A843 ğŸ‘ˆ NF0F3-402E3-MZR80-083QP-3CKM2 4F6FX-2W197-8ZKZ9-Y31ZM-1C3LZ JZ2E9-6D2DK-XZQD0-632E4-33E7Z MZ48M-DNK56-ZZJD0-RTCE2-9321X 0Y0AJ-4P29H-LZV81-59AQ2-C291V\nğŸ‘†https://www.cnblogs.com/walkersss/p/12458218.html\nvCenter Server 6 Standard SN:\nHG612-FH19H-08DL1-V19X2-1VKND ğŸ‘ˆ NU4JA-4V2DQ-48428-T32GK-8VRN4 0Y4H2-8P217-H8900-M8AE4-2LH44 NA658-2308J-08809-93AQ6-278J0\nğŸ‘†http://www.linuxmysql.com/16/2019/1012.htm\nESXi vSphere 7.0 è¿™ä¸ªæš‚æ—¶ä¸ç”¨äºç”Ÿäº§ç¯å¢ƒ\n","id":13,"section":"posts","summary":"ğŸ‘Œ 2020-10-29 vSphere ESXi vCenter éƒ¨ç½²å®‰è£…ä¸å…³ç³»åŒºåˆ«.md å…³ç³»ä¸åŒºåˆ« vSphere vSphere æ˜¯æ•°æ®ä¸­å¿ƒäº§å“é™„å¸¦çš„è½¯ä»¶å¥—ä»¶ã€‚vSphere å°±åƒ Microsoft Office å¥—ä»¶ï¼Œå…¶ä¸­åŒ…å«è®¸å¤šè½¯ä»¶ï¼Œä¾‹å¦‚ MS Offic","tags":["vSphere","ESXi","vCenter","Virtualization"],"title":"vSphere ESXi vCenter éƒ¨ç½²å®‰è£…ä¸å…³ç³»åŒºåˆ«","uri":"https://blog.standuke.top/2020/10/2020-10-29-vsphere-esxi-vcenter-%E9%83%A8%E7%BD%B2%E5%AE%89%E8%A3%85%E4%B8%8E%E5%85%B3%E7%B3%BB%E5%8C%BA%E5%88%AB/","year":"2020"},{"content":"ğŸ‘Œ 2020-10-13 ClickHouse å®˜æ–¹æ–‡æ¡£æ‘˜è¦ä¸æ·±å…¥  FileInfo Filename - ClickHouse å®˜æ–¹æ–‡æ¡£æ‘˜è¦ä¸æ·±å…¥ Version - v1.0.2010ï¼ˆ2020/10/20 ~ 2020/10/22ï¼‰ Author - NUO standuke Email - shadowdoker@gmail.com DescriptionKey - ClickHouse Official Document step in\n åˆ—å¼æ•°æ®åº“ä¸è¡Œå¼æ•°æ®åº“ åˆ—å¼ä¸è¡Œå¼æ•°æ®åº“çš„ä¸»è¦åŒºåˆ«åœ¨äºæ•°æ®çš„å­˜å‚¨æ–¹å¼ï¼Œå¯¹äºæ•°æ®åº“æ¥è¯´æœ¬è´¨æ˜¯ä¸€æ ·çš„ã€‚ä»¥ä¸‹ä¸ºåˆ—å¼æ•°æ®åº“ä¸è¡Œå¼æ•°æ®åº“çš„ç›¸å…³æ¯”è¾ƒã€‚ä¹Ÿå¯ä»¥ç†è§£ä¸ºä¼˜åŠ¿åŠ£åŠ¿ã€‚\næŸ¥è¯¢æ–¹é¢\n è¡Œå¼æ•°æ®åº“åŸºæœ¬ä¸Šå¯ä»¥ç†è§£ä¸ºéœ€è¦æ‰«ææ‰€æœ‰æ•°æ®ï¼Œåˆ—å¼åˆ™åªæ‰«æéœ€è¦è·å–çš„ç›¸å…³å­—æ®µçš„åˆ—å³å¯ å¯¹äºåˆ—å­˜å‚¨ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„å»ºç«‹æ¯ä¸€ä¸ªåˆ—çš„ç´¢å¼•ä¿¡æ¯ã€Œå®åˆ™ æ¯ä¸€åˆ—å°±æ˜¯ç´¢å¼•ã€ å¦‚æœæˆ‘ä»¬çš„éœ€æ±‚å°±æ˜¯æŸ¥è¯¢æ‰€æœ‰å­—æ®µï¼Œé‚£ä¸ªè¿™ä¸ªæ—¶å€™åˆ—å¼æ•°æ®åº“çš„å¤„ç†æ–¹å¼å°±æ˜¯å…ˆæŠŠæ‰€æœ‰åˆ—æŸ¥è¯¢å‡ºæ¥ï¼Œç„¶åå†æ‹¼æ¥èµ·æ¥ï¼Œé€Ÿåº¦æ–¹é¢æ˜¯æ¯”ä¸ä¸Šè¡Œå¼æ•°æ®åº“çš„ã€‚ã€Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆåˆ—å¼æ•°æ®åº“å¤§å¤šç”¨äºå¤§æ•°æ®åˆ†æï¼Œå› ä¸ºå¤§æ•°æ®åˆ†ææ¯ä¸€æ¬¡æŸ¥è¯¢ä¸éœ€è¦è·å–æ‰€æœ‰çš„å­—æ®µä¿¡æ¯ã€  æ•°æ®å‹ç¼©\n è¡Œå¼æ•°æ®åº“å› ä¸ºå­˜è´®æ•°æ®æ˜¯ä¸€è¡Œè¡Œçš„æ¥å­˜è´®ï¼Œè€Œæ¯ä¸€è¡Œæ•°æ®çš„å·®å¼‚æ€§å¤ªå¤§ï¼Œæ‰€ä»¥å‹ç¼©æ¯”å¾ˆå°ã€‚ åˆ—å¼æ•°æ®åº“åˆ™ä¸åŒï¼Œå› ä¸ºæ˜¯æŒ‰ç…§ä¸€åˆ—åˆ—æ¥å­˜è´®ï¼Œæ¯ä¸€åˆ—çš„æ•°æ®çš„ç›¸åŒæ€§æé«˜ï¼Œè¿™å°±ä¸ºå‹ç¼©åŸ‹ä¸‹äº†å¾ˆå¥½çš„ç§å­ï¼Œå‹ç¼©æ¯”å¯ä»¥è¾¾åˆ°å¾ˆå¤§ï¼Œå¯ä»¥è¾¾åˆ°5ï½20å€ä»¥ä¸Šã€‚ å‹ç¼©é¦–å…ˆå¸¦æ¥çš„ç¡¬ç›˜ä¸Šå­˜å‚¨ç©ºé—´çš„é™ä½ï¼Œä½†æ˜¯ç¡¬ç›˜åˆä¸å€¼é’±ã€‚å®ƒçš„çœŸæ­£æ„ä¹‰åœ¨äºï¼šæ•°æ®å ç”¨çš„ç¡¬ç›˜ç©ºé—´è¶Šå°ï¼ŒæŸ¥è¯¢å¼•æ“èŠ±åœ¨IOä¸Šçš„æ—¶é—´å°±è¶Šå°‘(ä¸ç®¡æ˜¯ä»ç¡¬ç›˜é‡Œé¢æŠŠæ•°æ®è¯»å…¥å†…å­˜ï¼Œè¿˜æ˜¯ä»å†…å­˜é‡Œé¢æŠŠæ•°æ®è¯»å…¥CPU)ã€‚åŒæ—¶è¦è®°ä½çš„æ˜¯æ•°æ®å‹ç¼©ä¹‹åï¼Œè¦è¿›è¡Œå¤„ç†å¾ˆå¤šæ—¶å€™è¦éœ€è¦è§£å‹ç¼©(ä¸ç®¡æ˜¯Column-Storeè¿˜æ˜¯Row-Store), å› æ­¤å‹ç¼©æ¯”ä¸æ˜¯æˆ‘ä»¬è¿½æ±‚çš„å”¯ä¸€ï¼Œå› ä¸ºåé¢è§£å‹ä¹Ÿéœ€è¦èŠ±æ—¶é—´ï¼Œå› æ­¤ä¸€èˆ¬ä¼šåœ¨å‹ç¼©æ¯”å’Œè§£å‹é€Ÿåº¦ä¹‹é—´åšä¸€ä¸ªæƒè¡¡ã€‚  å—éå† å—è¿­ä»£è®¡ç®—\n å—éå†(Block Iteration)æ˜¯ç›¸å¯¹äºå•è®°å½•éå†(per-tuple iteration)è€Œè¨€çš„ï¼Œå…¶å®è¯´ç™½äº†å°±æ˜¯ä¸€ç§æ‰¹é‡åŒ–çš„æ“ä½œã€‚ è¿™ç§æé«˜æ€§èƒ½çš„æ–¹æ³•åœ¨Row-Storeé‡Œé¢æ˜¯case-by-caseå®ç°çš„(ä¸æ˜¯ä¸€ç§å…±è¯†), è€Œå¯¹äºColumn-Storeæ¥è¯´å·²ç»å½¢æˆå…±è¯†ï¼Œå¤§å®¶éƒ½æ˜¯è¿™ä¹ˆåšçš„ã€‚è€Œå¦‚æœcolumnçš„å€¼æ˜¯å­—èŠ‚æ„ä¹‰ä¸Šç­‰å®½çš„ï¼Œæ¯”å¦‚æ•°å­—ç±»å‹ï¼ŒColumn-Storeå¯ä»¥è¿›ä¸€æ­¥æé«˜æ€§èƒ½ï¼Œå› ä¸ºæŸ¥è¯¢å¼•æ“è¦ä»ä¸€ä¸ªBlocké‡Œå–å‡ºå…¶ä¸­ä¸€ä¸ªå€¼è¿›è¡Œå¤„ç†çš„æ—¶å€™ç›´æ¥ç”¨æ•°ç»„ä¸‹æ ‡å°±å¯ä»¥è·å–æ•°æ®ï¼Œè¿›ä¸€æ­¥æå‡æ€§èƒ½ã€‚  å»¶è¿Ÿç‰©åŒ–\n ä¸ºäº†èƒ½å¤ŸæŠŠåº•å±‚å­˜å‚¨æ ¼å¼(é¢å‘Columnçš„), è·Ÿç”¨æˆ·æŸ¥è¯¢è¡¨è¾¾çš„æ„æ€(Row)å¯¹åº”ä¸Šï¼Œåœ¨ä¸€ä¸ªæŸ¥è¯¢çš„ç”Ÿå‘½å‘¨æœŸçš„æŸä¸ªæ—¶é—´ç‚¹ï¼Œä¸€å®šè¦æŠŠæ•°æ®è½¬æ¢æˆRowçš„å½¢å¼ï¼Œè¿™åœ¨Column-Storeé‡Œé¢è¢«ç§°ä¸ºç‰©åŒ–(Materization)ã€‚ æˆ‘è¿™é‡ŒæŠŠç‰©åŒ–ç†è§£ä¸ºå¯¹è±¡çš„å®ä¾‹åŒ–ã€‚ ä¸€èˆ¬(Naive)çš„åšæ³•æ˜¯ä»æ–‡ä»¶ç³»ç»Ÿè¯»å‡ºä¸‰åˆ—çš„æ•°æ®ï¼Œé©¬ä¸Šç‰©åŒ–æˆä¸€è¡Œè¡Œçš„personæ•°æ®ï¼Œç„¶ååº”ç”¨ä¸¤ä¸ªè¿‡æ»¤æ¡ä»¶: id \u0026gt; 10 å’Œ age \u0026gt; 20 , è¿‡æ»¤å®Œäº†ä¹‹åä»æ•°æ®é‡Œé¢æŠ½å‡º name å­—æ®µï¼Œä½œä¸ºæœ€åçš„ç»“æœ å»¶è¿Ÿç‰©åŒ–çš„åšæ³•åˆ™ä¼šå…ˆä¸æ‹¼å‡ºè¡Œå¼æ•°æ®ï¼Œç›´æ¥åœ¨Columnæ•°æ®ä¸Šåˆ†åˆ«åº”ç”¨ä¸¤ä¸ªè¿‡æ»¤æ¡ä»¶ï¼Œä»è€Œå¾—åˆ°ä¸¤ä¸ªæ»¡è¶³è¿‡æ»¤æ¡ä»¶çš„bitmap, ç„¶åå†æŠŠä¸¤ä¸ªbitmapåšä½ä¸(bitwise AND)çš„æ“ä½œå¾—åˆ°åŒæ—¶æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶çš„æ‰€æœ‰çš„bitmapï¼Œå› ä¸ºæœ€åç”¨æˆ·éœ€è¦çš„åªæ˜¯ name å­—æ®µè€Œå·²ï¼Œå› æ­¤ä¸‹ä¸€æ­¥æˆ‘ä»¬æ‹¿ç€è¿™äº› position å¯¹ name å­—æ®µçš„æ•°æ®è¿›è¡Œè¿‡æ»¤å°±å¾—åˆ°äº†æœ€ç»ˆçš„ç»“æœã€‚  éšå¼è¿æ¥ Invisible Join\n Invisible Join é’ˆå¯¹çš„åœºæ™¯æ˜¯æ•°ä»“é‡Œé¢çš„æ˜Ÿå‹æ¨¡å‹(Star Schema), å¦‚æœç”¨æˆ·æŸ¥è¯¢ç¬¦åˆä¸‹é¢çš„æ¨¡å¼å°±å¯ä»¥åº”ç”¨Invisible Joinã€Œä¼ ç»Ÿæ–¹æ¡ˆä¸€: æŒ‰Selectivityä¾æ¬¡JOINã€å»¶è¿Ÿç‰©åŒ–ã€ ä»¥ä¸‹ä¸º Invisible Join æ€ç»´ æŠŠæ‰€æœ‰è¿‡æ»¤æ¡ä»¶åº”ç”¨åˆ°æ¯ä¸ªç»´åº¦è¡¨ä¸Šï¼Œå¾—åˆ°ç¬¦åˆæ¡ä»¶çš„ç»´åº¦è¡¨çš„ä¸»é”®(åŒæ—¶ä¹Ÿæ˜¯äº‹å®è¡¨çš„å¤–é”®)ã€‚ éå†äº‹å®è¡¨ï¼Œå¹¶ä¸”æŸ¥è¯¢ç¬¬ä¸€æ­¥å¾—åˆ°çš„æ‰€æœ‰å¤–é”®çš„å€¼ï¼Œå¾—åˆ°ç¬¦åˆæ¡ä»¶çš„bitmap(s), è¿™é‡Œä¼šæœ‰å¤šä¸ªbitmapï¼Œå› ä¸ºç»´åº¦è¡¨å¯èƒ½æœ‰å¤šä¸ªã€‚ å¯¹ç¬¬äºŒæ­¥çš„å¤šä¸ªbitmapåšANDæ“ä½œï¼Œå¾—åˆ°æœ€ç»ˆäº‹å®è¡¨é‡Œé¢ç¬¦åˆè¿‡æ»¤æ¡ä»¶çš„bitmapã€‚ æ ¹æ®ç¬¬ä¸‰æ­¥çš„äº‹å®è¡¨çš„bitmapä»¥åŠç¬¬ä¸€æ­¥çš„ç¬¦åˆæ¡ä»¶çš„ç»´åº¦è¡¨çš„ä¸»é”®å€¼ï¼Œç»„è£…å‡ºæœ€ç»ˆçš„è¿”å›å€¼ã€‚  https://zhuanlan.zhihu.com/p/54433448 https://zhuanlan.zhihu.com/p/54484592\nOLTP ä¸ OLAP OLTPï¼ˆOn-Line Transaction Processingï¼Œè”æœºäº‹åŠ¡å¤„ç†ï¼‰ å¤šä¸ºå¯¹æ•°æ®åº“çš„æ•°æ®æ“ä½œï¼Œä¾‹å¦‚ã€Œå¢åˆ æ”¹æŸ¥ã€ï¼Œä»¥åŠä¸šåŠ¡ç±»ç³»ç»Ÿä¸»è¦ä¾›åŸºå±‚äººå‘˜ä½¿ç”¨ï¼Œè¿›è¡Œä¸€çº¿ä¸šåŠ¡æ“ä½œ\nOLAPï¼ˆOn-Line Analytical Processingï¼Œè”æœºåˆ†æå¤„ç†ï¼‰ å¤šä¸ºå¯¹æ•°æ®çš„æŸ¥è¯¢åˆ†æï¼Œæ•°æ®åˆ†æçš„ç›®æ ‡åˆ™æ˜¯æ¢ç´¢å¹¶æŒ–æ˜æ•°æ®ä»·å€¼ï¼Œä½œä¸ºä¼ä¸šé«˜å±‚è¿›è¡Œå†³ç­–çš„å‚è€ƒï¼Œæ­¤æ—¶éœ€è¦æŸ¥è¯¢å¤§é‡æ•°æ®ï¼Œåˆ†æå…¶ä¸­çš„å…³è”æ€§\nä»åŠŸèƒ½è§’åº¦æ¥çœ‹ï¼ŒOLTP è´Ÿè´£åŸºæœ¬ä¸šåŠ¡çš„æ­£å¸¸è¿è½¬ï¼Œè€Œä¸šåŠ¡æ•°æ®ç§¯ç´¯æ—¶æ‰€äº§ç”Ÿçš„ä»·å€¼ä¿¡æ¯åˆ™è¢« OLAP ä¸æ–­å‘ˆç°ï¼Œä¼ä¸šé«˜å±‚é€šè¿‡å‚è€ƒè¿™äº›ä¿¡æ¯ä¼šä¸æ–­è°ƒæ•´ç»è¥æ–¹é’ˆï¼Œä¹Ÿä¼šä¿ƒè¿›åŸºç¡€ä¸šåŠ¡çš„ä¸æ–­ä¼˜åŒ–ï¼Œè¿™æ˜¯ OLTP ä¸ OLAP æœ€æ ¹æœ¬çš„åŒºåˆ«ã€‚\nOLAP åœºæ™¯çš„å…³é”®ç‰¹å¾ã€Œå®˜æ–¹ã€  å¤§å¤šæ•°æ˜¯è¯»è¯·æ±‚ æ•°æ®æ€»æ˜¯ä»¥ç›¸å½“å¤§çš„æ‰¹(\u0026gt; 1000 rows)è¿›è¡Œå†™å…¥ ä¸ä¿®æ”¹å·²æ·»åŠ çš„æ•°æ® æ¯æ¬¡æŸ¥è¯¢éƒ½ä»æ•°æ®åº“ä¸­è¯»å–å¤§é‡çš„è¡Œï¼Œä½†æ˜¯åŒæ—¶åˆä»…éœ€è¦å°‘é‡çš„åˆ— å®½è¡¨ï¼Œå³æ¯ä¸ªè¡¨åŒ…å«ç€å¤§é‡çš„åˆ— è¾ƒå°‘çš„æŸ¥è¯¢(é€šå¸¸æ¯å°æœåŠ¡å™¨æ¯ç§’æ•°ç™¾ä¸ªæŸ¥è¯¢æˆ–æ›´å°‘) å¯¹äºç®€å•æŸ¥è¯¢ï¼Œå…è®¸å»¶è¿Ÿå¤§çº¦50æ¯«ç§’ åˆ—ä¸­çš„æ•°æ®ç›¸å¯¹è¾ƒå°ï¼š æ•°å­—å’ŒçŸ­å­—ç¬¦ä¸²(ä¾‹å¦‚ï¼Œæ¯ä¸ªURL 60ä¸ªå­—èŠ‚) å¤„ç†å•ä¸ªæŸ¥è¯¢æ—¶éœ€è¦é«˜ååé‡ï¼ˆæ¯ä¸ªæœåŠ¡å™¨æ¯ç§’é«˜è¾¾æ•°åäº¿è¡Œï¼‰ äº‹åŠ¡ä¸æ˜¯å¿…é¡»çš„ å¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚ä½ æ¯ä¸€ä¸ªæŸ¥è¯¢é™¤äº†ä¸€ä¸ªå¤§è¡¨å¤–éƒ½å¾ˆå° æŸ¥è¯¢ç»“æœæ˜æ˜¾å°äºæºæ•°æ®ï¼Œæ¢å¥è¯è¯´ï¼Œæ•°æ®è¢«è¿‡æ»¤æˆ–èšåˆåèƒ½å¤Ÿè¢«ç››æ”¾åœ¨å•å°æœåŠ¡å™¨çš„å†…å­˜ä¸­  å­˜å‚¨ è¡Œå¼æ•°æ®åº“ç³»ç»Ÿï¼šå¤„äºåŒä¸€è¡Œä¸­çš„æ•°æ®æ€»æ˜¯è¢«ç‰©ç†çš„å­˜å‚¨åœ¨ä¸€èµ· åˆ—å¼æ•°æ®åº“ï¼šå¯¹äºå­˜å‚¨è€Œè¨€ï¼Œåˆ—å¼æ•°æ®åº“æ€»æ˜¯å°†åŒä¸€åˆ—çš„æ•°æ®å­˜å‚¨åœ¨ä¸€èµ·ï¼Œä¸åŒåˆ—çš„æ•°æ®ä¹Ÿæ€»æ˜¯åˆ†å¼€å­˜å‚¨ã€‚\næ•°æ®æŒ‰åˆ—å­˜å‚¨å¹¶ä¸”æŒ‰åˆ—æ‰§è¡Œ\nèšåˆä¸éèšåˆæ•°æ®  ã€ŒAggregated and Non-aggregated Dataã€ æ­¤å¤„çš„èšåˆä¸éèšåˆå¯ä»¥è¿‘ä¼¼ç†è§£ä¸º oracle æ•°æ®åº“ä¸­ä¸ºäº†æ–¹ä¾¿æŸ¥è¯¢ç”Ÿæˆçš„è§†å›¾\n æœ‰ä¸€ç§æµè¡Œçš„è§‚ç‚¹è®¤ä¸ºï¼Œæƒ³è¦æœ‰æ•ˆçš„è®¡ç®—ç»Ÿè®¡æ•°æ®ï¼Œå¿…é¡»è¦èšåˆæ•°æ®ï¼Œå› ä¸ºèšåˆå°†é™ä½æ•°æ®é‡ã€‚\nä½†æ˜¯æ•°æ®èšåˆæ˜¯ä¸€ä¸ªæœ‰è¯¸å¤šé™åˆ¶çš„è§£å†³æ–¹æ¡ˆï¼Œä¾‹å¦‚ï¼š\n ä½ å¿…é¡»æå‰çŸ¥é“ç”¨æˆ·å®šä¹‰çš„æŠ¥è¡¨çš„å­—æ®µåˆ—è¡¨ ç”¨æˆ·æ— æ³•è‡ªå®šä¹‰æŠ¥è¡¨ å½“èšåˆæ¡ä»¶è¿‡å¤šæ—¶ï¼Œå¯èƒ½ä¸ä¼šå‡å°‘æ•°æ®ï¼Œèšåˆæ˜¯æ— ç”¨çš„ã€‚ å­˜åœ¨å¤§é‡æŠ¥è¡¨æ—¶ï¼Œæœ‰å¤ªå¤šçš„èšåˆå˜åŒ–ï¼ˆç»„åˆçˆ†ç‚¸ï¼‰ å½“èšåˆæ¡ä»¶æœ‰éå¸¸å¤§çš„åŸºæ•°æ—¶ï¼ˆå¦‚ï¼šurlï¼‰ï¼Œæ•°æ®é‡æ²¡æœ‰å¤ªå¤§å‡å°‘ï¼ˆå°‘äºä¸¤å€ï¼‰ èšåˆçš„æ•°æ®é‡å¯èƒ½ä¼šå¢é•¿è€Œä¸æ˜¯æ”¶ç¼© ç”¨æˆ·ä¸ä¼šæŸ¥çœ‹æˆ‘ä»¬ä¸ºä»–ç”Ÿæˆçš„æ‰€æœ‰æŠ¥å‘Šï¼Œå¤§éƒ¨åˆ†è®¡ç®—å°†æ˜¯æ— ç”¨çš„ å„ç§èšåˆå¯èƒ½è¿èƒŒäº†æ•°æ®çš„é€»è¾‘å®Œæ•´æ€§ å¦‚æœæˆ‘ä»¬ç›´æ¥ä½¿ç”¨éèšåˆæ•°æ®è€Œä¸è¿›è¡Œä»»ä½•èšåˆæ—¶ï¼Œæˆ‘ä»¬çš„è®¡ç®—é‡å¯èƒ½æ˜¯å‡å°‘çš„ã€‚  ç„¶è€Œï¼Œç›¸å¯¹äºèšåˆä¸­å¾ˆå¤§ä¸€éƒ¨åˆ†å·¥ä½œè¢«ç¦»çº¿å®Œæˆï¼Œåœ¨çº¿è®¡ç®—éœ€è¦å°½å¿«çš„å®Œæˆè®¡ç®—ï¼Œå› ä¸ºç”¨æˆ·åœ¨ç­‰å¾…ç»“æœã€‚\nYandex.Metrica æœ‰ä¸€ä¸ªä¸“é—¨ç”¨äºèšåˆæ•°æ®çš„ç³»ç»Ÿï¼Œç§°ä¸ºMetrageï¼Œå®ƒå¯ä»¥ç”¨ä½œå¤§éƒ¨åˆ†æŠ¥è¡¨ã€‚ ä»2009å¹´å¼€å§‹ï¼ŒYandex.Metricaè¿˜ä¸ºéèšåˆæ•°æ®ä½¿ç”¨ä¸“é—¨çš„OLAPæ•°æ®åº“ï¼Œç§°ä¸ºOLAPServerï¼Œå®ƒä»¥å‰ç”¨äºæŠ¥è¡¨æ„å»ºç³»ç»Ÿã€‚ OLAPServerå¯ä»¥å¾ˆå¥½çš„å·¥ä½œåœ¨éèšåˆæ•°æ®ä¸Šï¼Œä½†æ˜¯å®ƒæœ‰è¯¸å¤šé™åˆ¶ï¼Œå¯¼è‡´æ— æ³•æ ¹æ®éœ€è¦å°†å…¶ç”¨äºæ‰€æœ‰æŠ¥è¡¨ä¸­ã€‚å¦‚ï¼Œç¼ºå°‘å¯¹æ•°æ®ç±»å‹çš„æ”¯æŒï¼ˆåªæ”¯æŒæ•°æ®ï¼‰ï¼Œæ— æ³•å®æ—¶å¢é‡çš„æ›´æ–°æ•°æ®ï¼ˆåªèƒ½é€šè¿‡æ¯å¤©é‡å†™æ•°æ®å®Œæˆï¼‰ã€‚OLAPServerä¸æ˜¯ä¸€ä¸ªæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œå®ƒåªæ˜¯ä¸€ä¸ªæ•°æ®åº“ã€‚\nä¸ºäº†æ¶ˆé™¤OLAPServerçš„è¿™äº›å±€é™æ€§ï¼Œè§£å†³æ‰€æœ‰æŠ¥è¡¨ä½¿ç”¨éèšåˆæ•°æ®çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¼€å‘äº†ClickHouseæ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚\nclickhouse ç‰¹æ€§åŠé™åˆ¶   å¤šæœåŠ¡å™¨åˆ†å¸ƒå¼å¤„ç† ä¸Šé¢æåˆ°çš„åˆ—å¼æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­ï¼Œå‡ ä¹æ²¡æœ‰ä¸€ä¸ªæ”¯æŒåˆ†å¸ƒå¼çš„æŸ¥è¯¢å¤„ç†ã€‚ åœ¨ClickHouseä¸­ï¼Œæ•°æ®å¯ä»¥ä¿å­˜åœ¨ä¸åŒçš„shardä¸Šï¼Œæ¯ä¸€ä¸ªshardéƒ½ç”±ä¸€ç»„ç”¨äºå®¹é”™çš„replicaç»„æˆï¼ŒæŸ¥è¯¢å¯ä»¥å¹¶è¡Œåœ°åœ¨æ‰€æœ‰shardä¸Šè¿›è¡Œå¤„ç†ã€‚è¿™äº›å¯¹ç”¨æˆ·æ¥è¯´æ˜¯é€æ˜çš„\n  å‘é‡å¼•æ“ ä¸ºäº†é«˜æ•ˆçš„ä½¿ç”¨CPUï¼Œæ•°æ®ä¸ä»…ä»…æŒ‰åˆ—å­˜å‚¨ï¼ŒåŒæ—¶è¿˜æŒ‰å‘é‡(åˆ—çš„ä¸€éƒ¨åˆ†)è¿›è¡Œå¤„ç†ï¼Œè¿™æ ·å¯ä»¥æ›´åŠ é«˜æ•ˆåœ°ä½¿ç”¨CPUã€‚\n  æ”¯æŒè¿‘ä¼¼è®¡ç®— ClickHouseæä¾›å„ç§å„æ ·åœ¨å…è®¸ç‰ºç‰²æ•°æ®ç²¾åº¦çš„æƒ…å†µä¸‹å¯¹æŸ¥è¯¢è¿›è¡ŒåŠ é€Ÿçš„æ–¹æ³•ï¼š ç”¨äºè¿‘ä¼¼è®¡ç®—çš„å„ç±»èšåˆå‡½æ•°ï¼Œå¦‚ï¼šdistinct values, medians, quantiles åŸºäºæ•°æ®çš„éƒ¨åˆ†æ ·æœ¬è¿›è¡Œè¿‘ä¼¼æŸ¥è¯¢ã€‚è¿™æ—¶ï¼Œä»…ä¼šä»ç£ç›˜æ£€ç´¢å°‘éƒ¨åˆ†æ¯”ä¾‹çš„æ•°æ®ã€‚ ä¸ä½¿ç”¨å…¨éƒ¨çš„èšåˆæ¡ä»¶ï¼Œé€šè¿‡éšæœºé€‰æ‹©æœ‰é™ä¸ªæ•°æ®èšåˆæ¡ä»¶è¿›è¡Œèšåˆã€‚è¿™åœ¨æ•°æ®èšåˆæ¡ä»¶æ»¡è¶³æŸäº›åˆ†å¸ƒæ¡ä»¶ä¸‹ï¼Œåœ¨æä¾›ç›¸å½“å‡†ç¡®çš„èšåˆç»“æœçš„åŒæ—¶é™ä½äº†è®¡ç®—èµ„æºçš„ä½¿ç”¨ã€‚\n  é™åˆ¶ æ²¡æœ‰å®Œæ•´çš„äº‹åŠ¡æ”¯æŒã€‚ ç¼ºå°‘é«˜é¢‘ç‡ï¼Œä½å»¶è¿Ÿçš„ä¿®æ”¹æˆ–åˆ é™¤å·²å­˜åœ¨æ•°æ®çš„èƒ½åŠ›ã€‚ä»…èƒ½ç”¨äºæ‰¹é‡åˆ é™¤æˆ–ä¿®æ”¹æ•°æ®ï¼Œä½†è¿™ç¬¦åˆ GDPRã€‚ ç¨€ç–ç´¢å¼•ä½¿å¾—ClickHouseä¸é€‚åˆé€šè¿‡å…¶é”®æ£€ç´¢å•è¡Œçš„ç‚¹æŸ¥è¯¢ã€‚\n  æ€§èƒ½ å•ä¸ªå¤§æŸ¥è¯¢çš„ååé‡ ååé‡å¯ä»¥ä½¿ç”¨æ¯ç§’å¤„ç†çš„è¡Œæ•°æˆ–æ¯ç§’å¤„ç†çš„å­—èŠ‚æ•°æ¥è¡¡é‡ã€‚å¦‚æœæ•°æ®è¢«æ”¾ç½®åœ¨page cacheä¸­ï¼Œåˆ™ä¸€ä¸ªä¸å¤ªå¤æ‚çš„æŸ¥è¯¢åœ¨å•ä¸ªæœåŠ¡å™¨ä¸Šå¤§çº¦èƒ½å¤Ÿä»¥2-10GBï¼sï¼ˆæœªå‹ç¼©ï¼‰çš„é€Ÿåº¦è¿›è¡Œå¤„ç†ï¼ˆå¯¹äºç®€å•çš„æŸ¥è¯¢ï¼Œé€Ÿåº¦å¯ä»¥è¾¾åˆ°30GBï¼sï¼‰ã€‚å¦‚æœæ•°æ®æ²¡æœ‰åœ¨page cacheä¸­çš„è¯ï¼Œé‚£ä¹ˆé€Ÿåº¦å°†å–å†³äºä½ çš„ç£ç›˜ç³»ç»Ÿå’Œæ•°æ®çš„å‹ç¼©ç‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªç£ç›˜å…è®¸ä»¥400MBï¼sçš„é€Ÿåº¦è¯»å–æ•°æ®ï¼Œå¹¶ä¸”æ•°æ®å‹ç¼©ç‡æ˜¯3ï¼Œåˆ™æ•°æ®çš„å¤„ç†é€Ÿåº¦ä¸º1.2GB/sã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä½ æ˜¯åœ¨æå–ä¸€ä¸ª10å­—èŠ‚çš„åˆ—ï¼Œé‚£ä¹ˆå®ƒçš„å¤„ç†é€Ÿåº¦å¤§çº¦æ˜¯1-2äº¿è¡Œæ¯ç§’ã€‚ å¯¹äºåˆ†å¸ƒå¼å¤„ç†ï¼Œå¤„ç†é€Ÿåº¦å‡ ä¹æ˜¯çº¿æ€§æ‰©å±•çš„ï¼Œä½†è¿™å—é™äºèšåˆæˆ–æ’åºçš„ç»“æœä¸æ˜¯é‚£ä¹ˆå¤§çš„æƒ…å†µä¸‹ã€‚\nå¤„ç†çŸ­æŸ¥è¯¢çš„å»¶è¿Ÿæ—¶é—´ å¦‚æœä¸€ä¸ªæŸ¥è¯¢ä½¿ç”¨ä¸»é”®å¹¶ä¸”æ²¡æœ‰å¤ªå¤šè¡Œ(å‡ åä¸‡)è¿›è¡Œå¤„ç†ï¼Œå¹¶ä¸”æ²¡æœ‰æŸ¥è¯¢å¤ªå¤šçš„åˆ—ï¼Œé‚£ä¹ˆåœ¨æ•°æ®è¢«page cacheç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œå®ƒçš„å»¶è¿Ÿåº”è¯¥å°äº50æ¯«ç§’(åœ¨æœ€ä½³çš„æƒ…å†µä¸‹åº”è¯¥å°äº10æ¯«ç§’)ã€‚ å¦åˆ™ï¼Œå»¶è¿Ÿå–å†³äºæ•°æ®çš„æŸ¥æ‰¾æ¬¡æ•°ã€‚å¦‚æœä½ å½“å‰ä½¿ç”¨çš„æ˜¯HDDï¼Œåœ¨æ•°æ®æ²¡æœ‰åŠ è½½çš„æƒ…å†µä¸‹ï¼ŒæŸ¥è¯¢æ‰€éœ€è¦çš„å»¶è¿Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹å…¬å¼è®¡ç®—å¾—çŸ¥ï¼š æŸ¥æ‰¾æ—¶é—´ï¼ˆ10 msï¼‰ * æŸ¥è¯¢çš„åˆ—çš„æ•°é‡ * æŸ¥è¯¢çš„æ•°æ®å—çš„æ•°é‡ã€‚\nå¤„ç†å¤§é‡çŸ­æŸ¥è¯¢çš„ååé‡ åœ¨ç›¸åŒçš„æƒ…å†µä¸‹ï¼ŒClickHouseå¯ä»¥åœ¨å•ä¸ªæœåŠ¡å™¨ä¸Šæ¯ç§’å¤„ç†æ•°ç™¾ä¸ªæŸ¥è¯¢ï¼ˆåœ¨æœ€ä½³çš„æƒ…å†µä¸‹æœ€å¤šå¯ä»¥å¤„ç†æ•°åƒä¸ªï¼‰ã€‚ä½†æ˜¯ç”±äºè¿™ä¸é€‚ç”¨äºåˆ†æå‹åœºæ™¯ã€‚==å› æ­¤æˆ‘ä»¬å»ºè®®æ¯ç§’æœ€å¤šæŸ¥è¯¢100æ¬¡ã€‚==\næ•°æ®çš„å†™å…¥æ€§èƒ½ æˆ‘ä»¬å»ºè®®æ¯æ¬¡å†™å…¥ä¸å°‘äº1000è¡Œçš„æ‰¹é‡å†™å…¥ï¼Œæˆ–æ¯ç§’ä¸è¶…è¿‡ä¸€ä¸ªå†™å…¥è¯·æ±‚ã€‚å½“ä½¿ç”¨tab-separatedæ ¼å¼å°†ä¸€ä»½æ•°æ®å†™å…¥åˆ°MergeTreeè¡¨ä¸­æ—¶ï¼Œå†™å…¥é€Ÿåº¦å¤§çº¦ä¸º50åˆ°200MB/sã€‚å¦‚æœæ‚¨å†™å…¥çš„æ•°æ®æ¯è¡Œä¸º1Kbï¼Œé‚£ä¹ˆå†™å…¥çš„é€Ÿåº¦ä¸º50ï¼Œ000åˆ°200ï¼Œ000è¡Œæ¯ç§’ã€‚å¦‚æœæ‚¨çš„è¡Œæ›´å°ï¼Œé‚£ä¹ˆå†™å…¥é€Ÿåº¦å°†æ›´é«˜ã€‚==ä¸ºäº†æé«˜å†™å…¥æ€§èƒ½ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å¤šä¸ªINSERTè¿›è¡Œå¹¶è¡Œå†™å…¥ï¼Œè¿™å°†å¸¦æ¥çº¿æ€§çš„æ€§èƒ½æå‡ã€‚==\nå¼•æ“ ä½¿ç”¨çš„æ‰€æœ‰è¡¨éƒ½æ˜¯ç”±æ•°æ®åº“å¼•æ“æ‰€æä¾›çš„ é»˜è®¤æƒ…å†µä¸‹ï¼ŒClickHouseä½¿ç”¨è‡ªå·±çš„æ•°æ®åº“å¼•æ“ï¼Œè¯¥å¼•æ“æä¾›å¯é…ç½®çš„è¡¨å¼•æ“å’Œæ‰€æœ‰æ”¯æŒçš„SQLè¯­æ³•.\næ•°æ®åº“å¼•æ“ æ‰€æœ‰è¡¨éƒ½æ˜¯ç”±æ•°æ®åº“å¼•æ“æ‰€æä¾›ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒClickHouse ä½¿ç”¨è‡ªå·±çš„æ•°æ®åº“å¼•æ“ï¼Œè¯¥å¼•æ“æä¾›å¯é…ç½®çš„è¡¨å¼•æ“å’Œæ‰€æœ‰æ”¯æŒçš„SQLè¯­æ³•ã€‚ æ­¤å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ•°æ®åº“å¼•æ“ï¼šMySQLã€Lazy\nMySQL MySQL å¼•æ“ç”¨äºå°†è¿œç¨‹çš„ MySQL æœåŠ¡å™¨ä¸­çš„è¡¨æ˜ å°„åˆ° ClickHouse ä¸­ï¼Œå¹¶å…è®¸æ‚¨å¯¹è¡¨è¿›è¡Œ INSERT å’ŒSELECT æŸ¥è¯¢ï¼Œä»¥æ–¹ä¾¿æ‚¨åœ¨ ClickHouse ä¸ MySQL ä¹‹é—´è¿›è¡Œæ•°æ®äº¤æ¢ã€‚ MySQL æ•°æ®åº“å¼•æ“ä¼šå°†å¯¹å…¶çš„æŸ¥è¯¢è½¬æ¢ä¸º MySQL è¯­æ³•å¹¶å‘é€åˆ° MySQL æœåŠ¡å™¨ä¸­ï¼Œå› æ­¤æ‚¨å¯ä»¥æ‰§è¡Œè¯¸å¦‚SHOW TABLES æˆ– SHOW CREATE TABLE ä¹‹ç±»çš„æ“ä½œã€‚ ä½†æ— æ³•å¯¹å…¶æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼šRENAMEã€CREATE TABLEã€ALTER\nLazy åœ¨æœ€åä¸€æ¬¡è®¿é—®ä¹‹åï¼Œä»…åœ¨ expiration_time_in_seconds ç§’å†…å°†è¡¨ä¿ç•™åœ¨RAMä¸­ã€‚ åªèƒ½ä¸ * Log è¡¨ä¸€èµ·ä½¿ç”¨ã€‚ å®ƒç»è¿‡ä¼˜åŒ–ï¼Œå¯ä»¥å­˜å‚¨è®¸å¤šå°çš„ * Log è¡¨ï¼Œä¸¤æ¬¡è®¿é—®ä¹‹é—´çš„æ—¶é—´é—´éš”å¾ˆé•¿ã€‚\nè¡¨å¼•æ“ è¡¨å¼•æ“ï¼ˆå³è¡¨çš„ç±»å‹ï¼‰å†³å®šäº†ï¼š\n æ•°æ®çš„å­˜å‚¨æ–¹å¼å’Œä½ç½®ï¼Œå†™åˆ°å“ªé‡Œä»¥åŠä»å“ªé‡Œè¯»å–æ•°æ® æ”¯æŒå“ªäº›æŸ¥è¯¢ä»¥åŠå¦‚ä½•æ”¯æŒ å¹¶å‘æ•°æ®è®¿é—® æ˜¯å¦ä½¿ç”¨ç´¢å¼•ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ æ˜¯å¦å¯ä»¥æ‰§è¡Œå¤šçº¿ç¨‹è¯·æ±‚ æ•°æ®å¤åˆ¶å‚æ•°  ä½¿ç”¨è¦æ±‚ \u0026amp; å®‰è£…å»ºè®® CPU CPU ==å¿…é¡»æ”¯æŒSSE4.2æŒ‡ä»¤é›†==ã€‚è¦ä½¿ç”¨ä¸æ”¯æŒSSE4.2æˆ–å…·æœ‰AArch64æˆ–PowerPC64LEä½“ç³»ç»“æ„çš„å¤„ç†å™¨è¿è¡ŒClickHouseï¼Œæ‚¨åº”è¯¥ä»æºä»£ç æ„å»ºClickHouseã€‚ ClickHouseå®ç°å¹¶è¡Œæ•°æ®å¤„ç†å¹¶ä½¿ç”¨æ‰€æœ‰å¯ç”¨çš„ç¡¬ä»¶èµ„æºã€‚ åœ¨é€‰æ‹©å¤„ç†å™¨æ—¶ï¼Œè€ƒè™‘åˆ°ClickHouseåœ¨==å…·æœ‰å¤§é‡å†…æ ¸ä½†æ—¶é’Ÿé€Ÿç‡è¾ƒä½çš„é…ç½®ä¸­çš„å·¥ä½œæ•ˆç‡è¦é«˜äºå…·æœ‰è¾ƒå°‘å†…æ ¸å’Œè¾ƒé«˜æ—¶é’Ÿé€Ÿç‡çš„é…ç½®==ã€‚ ä¾‹å¦‚ï¼Œå…·æœ‰2600MHzçš„16æ ¸å¿ƒä¼˜äºå…·æœ‰3600MHzçš„8æ ¸å¿ƒã€‚ ==å»ºè®®ä½¿ç”¨ ç¿é¢‘åŠ é€Ÿ å’Œ è¶…çº¿ç¨‹ æŠ€æœ¯==ã€‚ å®ƒæ˜¾ç€æé«˜äº†å…¸å‹å·¥ä½œè´Ÿè½½çš„æ€§èƒ½ã€‚\nCPU Scaling Governorã€ŒCPU ç¼©æ”¾è°ƒæ§å™¨ã€ å»ºè®®å§‹ç»ˆå¼€å¯ä½¿ç”¨æ€§èƒ½ç¼©æ”¾è°ƒèŠ‚å™¨ã€‚æŒ‰éœ€ç¼©æ”¾æ¯”ä¾‹è°ƒé€Ÿå™¨åœ¨æŒç»­é«˜éœ€æ±‚çš„æƒ…å†µä¸‹æ•ˆæœæ›´å·®ã€‚\necho 'performance' | sudo tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor  CPU Limitationsã€ŒCPUé™åˆ¶ã€ å¤„ç†å™¨å¯èƒ½ä¼šè¿‡çƒ­ã€‚ ä½¿ç”¨ dmesg çœ‹çœ‹CPUçš„æ—¶é’Ÿé€Ÿç‡æ˜¯å¦ç”±äºè¿‡çƒ­è€Œå—åˆ°é™åˆ¶ã€‚ æ­¤é™åˆ¶ä¹Ÿå¯ä»¥åœ¨æ•°æ®ä¸­å¿ƒçº§åˆ«çš„å¤–éƒ¨è®¾ç½®ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨ turbostat åœ¨è´Ÿè½½ä¸‹ç›‘è§†å®ƒã€‚\nSwap File ç¦ç”¨ç”Ÿäº§ç¯å¢ƒçš„äº¤æ¢æ–‡ä»¶\nRAM å¯¹äºå°‘é‡æ•°æ®ï¼ˆé«˜è¾¾-200GBå‹ç¼©ï¼‰ï¼Œæœ€å¥½ä½¿ç”¨ä¸æ•°æ®é‡ä¸€æ ·å¤šçš„å†…å­˜ã€‚ å¯¹äºå¤§é‡æ•°æ®å’Œå¤„ç†äº¤äº’å¼ï¼ˆåœ¨çº¿ï¼‰æŸ¥è¯¢æ—¶ï¼Œåº”ä½¿ç”¨åˆç†æ•°é‡çš„RAMï¼ˆ128GBæˆ–æ›´å¤šï¼‰ï¼Œä»¥ä¾¿çƒ­æ•°æ®å­é›†é€‚åˆé¡µé¢ç¼“å­˜ã€‚ å³ä½¿å¯¹äºæ¯å°æœåŠ¡å™¨çº¦50TBçš„æ•°æ®é‡ï¼Œä½¿ç”¨128GBçš„RAMä¸64GBç›¸æ¯”æ˜¾ç€æé«˜äº†æŸ¥è¯¢æ€§èƒ½ã€‚\nä¸è¦ç¦ç”¨è¿‡é‡ä½¿ç”¨ã€‚cat /proc/sys/vm/overcommit_memory çš„å€¼åº”ä¸º 0 æˆ– 1ã€‚\n$ echo 0 | sudo tee /proc/sys/vm/overcommit_memory  Huge Pages å§‹ç»ˆç¦ç”¨é€æ˜çš„å¤§é¡µé¢ã€‚ å®ƒä¼šå¹²æ‰°å†…å­˜åˆ†é…å™¨ï¼Œä»è€Œå¯¼è‡´æ€§èƒ½æ˜¾ç€ä¸‹é™ã€‚\n$ echo 'madvise' | sudo tee /sys/kernel/mm/transparent_hugepage/enabled  ä½¿ç”¨perf topè§‚å¯Ÿå†…æ ¸åœ¨å†…å­˜ç®¡ç†ä¸ŠèŠ±è´¹çš„æ—¶é—´ã€‚æ°¸ä¹…å¤§é¡µé¢ä¹Ÿä¸éœ€è¦åˆ†é…ã€‚\nStorage Subsystem å¦‚æœæ‚¨çš„é¢„ç®—å…è®¸æ‚¨ä½¿ç”¨SSDï¼Œè¯·ä½¿ç”¨SSDã€‚å¦‚æœæ²¡æœ‰ï¼Œè¯·ä½¿ç”¨ HDD ä½¿ç”¨ SATA HDD 7200 RPM å³å¯ã€‚\nä¼˜å…ˆé€‰æ‹©å¸¦æœ‰å¤§é‡æœ¬åœ°ç¡¬ç›˜é©±åŠ¨å™¨çš„æœåŠ¡å™¨ï¼Œè€Œä¸æ˜¯å¸¦æœ‰é™„åŠ ç£ç›˜æ¶çš„å°é‡æœåŠ¡å™¨ã€‚ ä½†æ˜¯å¯¹äºè¦å­˜å‚¨å¾ˆå°‘æŸ¥è¯¢çš„æ¡£æ¡ˆï¼Œé™„åŠ å­˜å‚¨å¯ä»¥ä½¿ç”¨ã€‚\nRAID å½“ä½¿ç”¨ç¡¬ç›˜ï¼Œä½ å¯ä»¥ç»“åˆä»–ä»¬çš„RAID-10ï¼ŒRAID-5ï¼ŒRAID-6æˆ–RAID-50ã€‚ å¯¹äºLinuxï¼Œè½¯ä»¶RAIDæ›´å¥½ï¼ˆä¸ mdadm). æˆ‘ä»¬ä¸å»ºè®®ä½¿ç”¨LVMã€‚ å½“åˆ›å»ºRAID-10ï¼Œé€‰æ‹© far å¸ƒå±€ã€‚ å¦‚æœæ‚¨çš„é¢„ç®—å…è®¸ï¼Œè¯·é€‰æ‹©RAID-10ã€‚\nå¦‚æœæ‚¨æœ‰==è¶…è¿‡4ä¸ªç£ç›˜ï¼Œè¯·ä½¿ç”¨RAID-6ï¼ˆé¦–é€‰ï¼‰æˆ–RAID-50ï¼Œè€Œä¸æ˜¯RAID-5==ã€‚ å½“ä½¿ç”¨RAID-5ã€RAID-6æˆ–RAID-50æ—¶ï¼Œå§‹ç»ˆå¢åŠ stripe_cache_sizeï¼Œå› ä¸ºé»˜è®¤å€¼é€šå¸¸ä¸æ˜¯æœ€ä½³é€‰æ‹©ã€‚\n$ echo 4096 | sudo tee /sys/block/md2/md/stripe_cache_size  ä½¿ç”¨ä»¥ä¸‹å…¬å¼ï¼Œä»è®¾å¤‡æ•°é‡å’Œå—å¤§å°è®¡ç®—ç¡®åˆ‡æ•°é‡: 2 * num_devices * chunk_size_in_bytes / 4096.\n1025KBçš„å—å¤§å°è¶³ä»¥æ»¡è¶³æ‰€æœ‰RAIDé…ç½®ã€‚åˆ‡å‹¿å°†å—å¤§å°è®¾ç½®å¾—å¤ªå°æˆ–å¤ªå¤§ã€‚\næ‚¨å¯ä»¥åœ¨SSDä¸Šä½¿ç”¨RAID-0ã€‚æ— è®ºä½¿ç”¨ä½•ç§RAIDï¼Œå§‹ç»ˆä½¿ç”¨å¤åˆ¶æ¥ä¿è¯æ•°æ®å®‰å…¨ã€‚\nä½¿ç”¨é•¿é˜Ÿåˆ—å¯ç”¨NCQã€‚ å¯¹äºHDDï¼Œé€‰æ‹©CFQè°ƒåº¦ç¨‹åºï¼Œå¯¹äºSSDï¼Œé€‰æ‹©noopã€‚ ä¸è¦å‡å°‘ \u0026lsquo;readahead\u0026rsquo; è®¾ç½®ã€‚å¯¹äºHDDï¼Œå¯ç”¨å†™å…¥ç¼“å­˜ã€‚\nFile System ==Ext4æ˜¯æœ€å¯é çš„é€‰æ‹©==ã€‚è®¾ç½®æŒ‚è½½é€‰é¡¹ noatimeã€nobarrier XFSä¹Ÿæ˜¯åˆé€‚çš„ï¼Œä½†å®ƒè¿˜æ²¡æœ‰ç»è¿‡ ClickHouse çš„å½»åº•æµ‹è¯•ã€‚ å¤§å¤šæ•°å…¶ä»–æ–‡ä»¶ç³»ç»Ÿä¹Ÿåº”è¯¥æ­£å¸¸å·¥ä½œã€‚åœ¨å…·æœ‰å»¶è¿Ÿåˆ†é…çš„æ–‡ä»¶ç³»ç»Ÿå·¥ä½œå¾—æ›´å¥½ã€‚\nLinux Kernel ä¸è¦ä½¿ç”¨è¿‡æ—¶çš„Linuxå†…æ ¸\nNetwork å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯IPv6ï¼Œè¯·å¢åŠ è·¯ç”±ç¼“å­˜çš„å¤§å°ã€‚ 3.2ä¹‹å‰çš„Linuxå†…æ ¸åœ¨IPv6å®ç°æ–¹é¢é‡åˆ°äº†è®¸å¤šé—®é¢˜ã€‚\nå¦‚æœå¯èƒ½çš„è¯ï¼Œè‡³å°‘ä½¿ç”¨ä¸€ä¸ª10GBçš„ç½‘ç»œã€‚ 1Gbä¹Ÿå¯ä»¥å·¥ä½œï¼Œä½†å¯¹äºä½¿ç”¨æ•°åtbçš„æ•°æ®ä¿®è¡¥å‰¯æœ¬æˆ–å¤„ç†å…·æœ‰å¤§é‡ä¸­é—´æ•°æ®çš„åˆ†å¸ƒå¼æŸ¥è¯¢ï¼Œæƒ…å†µä¼šæ›´ç³Ÿã€‚\nZooKeeper ç¯å¢ƒä¸­å¯èƒ½å·²æœ‰ ZooKeeper å¹¶ä¸”æ­¤ Zookeeper å·²ç”¨äºå…¶ä»–ç›®çš„ã€‚åªè¦æ­¤ Zookeeper æ²¡æœ‰è¶…è´Ÿè·ï¼Œå¯ä»¥ä½¿ç”¨ç›¸åŒçš„ zookeeper å®‰è£…ã€‚ å»ºè®®==å…¨æ–°å®‰è£… Zookeeper â€“ 3.4.9 æˆ–æ›´æ–°ç‰ˆæœ¬==ï¼ŒLinux é»˜è®¤å‘è¡Œç‰ˆæä¾›çš„ç‰ˆæœ¬å¯èƒ½å·²ç»è¿‡æ—¶ã€‚\nè¯·å‹¿ä½¿ç”¨æ‰‹åŠ¨ç¼–å†™çš„è„šæœ¬åœ¨ä¸åŒçš„ ZooKeeper ç¾¤é›†ä¹‹é—´ä¼ è¾“æ•°æ®ï¼Œå› ä¸ºå¯¹äºåºåˆ—èŠ‚ç‚¹æ¥è¯´ä¼ è¾“ç»“æœå°†æ˜¯ä¸æ­£ç¡®çš„ã€‚å‡ºäºç›¸åŒçš„åŸå› ï¼Œåˆ‡å‹¿ä½¿ç”¨ zkcopy å®ç”¨ç¨‹åºï¼š https://github.com/ksprojects/zkcopy/issues/15\nå¦‚æœè¦å°†ç°æœ‰ZooKeeperé›†ç¾¤åˆ†ä¸ºä¸¤ä¸ªï¼Œæ­£ç¡®çš„æ–¹æ³•æ˜¯å¢åŠ å…¶å‰¯æœ¬çš„æ•°é‡ï¼Œç„¶åå°†å…¶é‡æ–°é…ç½®ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„é›†ç¾¤ã€‚\nä¸è¦åœ¨ä¸ClickHouseç›¸åŒçš„æœåŠ¡å™¨ä¸Šè¿è¡ŒZooKeeperã€‚ ç”±äºZooKeeperå¯¹å»¶è¿Ÿéå¸¸æ•æ„Ÿï¼ŒClickHouseå¯èƒ½ä¼šåˆ©ç”¨æ‰€æœ‰å¯ç”¨çš„ç³»ç»Ÿèµ„æºã€‚\n==ä½¿ç”¨é»˜è®¤è®¾ç½®ï¼ŒZooKeeperæ˜¯ä¸€ä¸ªå®šæ—¶ç‚¸å¼¹==: ä½¿ç”¨é»˜è®¤é…ç½®æ—¶ï¼ŒZooKeeperæœåŠ¡å™¨ä¸ä¼šä»æ—§å¿«ç…§å’Œæ—¥å¿—ä¸­åˆ é™¤æ–‡ä»¶ï¼ˆè¯·å‚é˜… autopurgeï¼‰ï¼Œè¿™æ˜¯æ“ä½œå‘˜çš„è´£ä»»ã€‚ å¿…é¡»æ‹†é™¤ç‚¸å¼¹ ä¸‹é¢çš„ZooKeeperï¼ˆ3.5.1ï¼‰é…ç½®åœ¨Yandexä¸­ä½¿ç”¨ã€‚æ¢…åœ°å¡ç”Ÿäº§ç¯å¢ƒæˆªè‡³2017å¹´5æœˆ20æ—¥:\ncfg # http://hadoop.apache.org/zookeeper/docs/current/zookeeperAdmin.html # The number of milliseconds of each tick tickTime=2000 # The number of ticks that the initial # synchronization phase can take # This value is not quite motivated initLimit=300 # The number of ticks that can pass between # sending a request and getting an acknowledgement syncLimit=10 maxClientCnxns=2000 # It is the maximum value that client may request and the server will accept. # It is Ok to have high maxSessionTimeout on server to allow clients to work with high session timeout if they want. # But we request session timeout of 30 seconds by default (you can change it with session_timeout_ms in ClickHouse config). maxSessionTimeout=60000000 # the directory where the snapshot is stored. dataDir=/opt/zookeeper/{{ cluster['name'] }}/data # Place the dataLogDir to a separate physical disc for better performance dataLogDir=/opt/zookeeper/{{ cluster['name'] }}/logs autopurge.snapRetainCount=10 autopurge.purgeInterval=1 # To avoid seeks ZooKeeper allocates space in the transaction log file in # blocks of preAllocSize kilobytes. The default block size is 64M. One reason # for changing the size of the blocks is to reduce the block size if snapshots # are taken more often. (Also, see snapCount). preAllocSize=131072 # Clients can submit requests faster than ZooKeeper can process them, # especially if there are a lot of clients. To prevent ZooKeeper from running # out of memory due to queued requests, ZooKeeper will throttle clients so that # there is no more than globalOutstandingLimit outstanding requests in the # system. The default limit is 1,000.ZooKeeper logs transactions to a # transaction log. After snapCount transactions are written to a log file a # snapshot is started and a new transaction log file is started. The default # snapCount is 10,000. snapCount=3000000 # If this option is defined, requests will be will logged to a trace file named # traceFile.year.month.day. #traceFile= # Leader accepts client connections. Default value is \u0026quot;yes\u0026quot;. The leader machine # coordinates updates. For higher update throughput at thes slight expense of # read throughput the leader can be configured to not accept clients and focus # on coordination. leaderServes=yes standaloneEnabled=false dynamicConfigFile=/etc/zookeeper-{{ cluster['name'] }}/conf/zoo.cfg.dynamic  Java version Java(TM) SE Runtime Environment (build 1.8.0_25-b17) Java HotSpot(TM) 64-Bit Server VM (build 25.25-b02, mixed mode)  JVM parameters NAME=zookeeper-{{ cluster['name'] }} ZOOCFGDIR=/etc/$NAME/conf # TODO this is really ugly # How to find out, which jars are needed? # seems, that log4j requires the log4j.properties file to be in the classpath CLASSPATH=\u0026quot;$ZOOCFGDIR:/usr/build/classes:/usr/build/lib/*.jar:/usr/share/zookeeper/zookeeper-3.5.1-metrika.jar:/usr/share/zookeeper/slf4j-log4j12-1.7.5.jar:/usr/share/zookeeper/slf4j-api-1.7.5.jar:/usr/share/zookeeper/servlet-api-2.5-20081211.jar:/usr/share/zookeeper/netty-3.7.0.Final.jar:/usr/share/zookeeper/log4j-1.2.16.jar:/usr/share/zookeeper/jline-2.11.jar:/usr/share/zookeeper/jetty-util-6.1.26.jar:/usr/share/zookeeper/jetty-6.1.26.jar:/usr/share/zookeeper/javacc.jar:/usr/share/zookeeper/jackson-mapper-asl-1.9.11.jar:/usr/share/zookeeper/jackson-core-asl-1.9.11.jar:/usr/share/zookeeper/commons-cli-1.2.jar:/usr/src/java/lib/*.jar:/usr/etc/zookeeper\u0026quot; ZOOCFG=\u0026quot;$ZOOCFGDIR/zoo.cfg\u0026quot; ZOO_LOG_DIR=/var/log/$NAME USER=zookeeper GROUP=zookeeper PIDDIR=/var/run/$NAME PIDFILE=$PIDDIR/$NAME.pid SCRIPTNAME=/etc/init.d/$NAME JAVA=/usr/bin/java ZOOMAIN=\u0026quot;org.apache.zookeeper.server.quorum.QuorumPeerMain\u0026quot; ZOO_LOG4J_PROP=\u0026quot;INFO,ROLLINGFILE\u0026quot; JMXLOCALONLY=false JAVA_OPTS=\u0026quot;-Xms{{ cluster.get('xms','128M') }} \\ -Xmx{{ cluster.get('xmx','1G') }} \\ -Xloggc:/var/log/$NAME/zookeeper-gc.log \\ -XX:+UseGCLogFileRotation \\ -XX:NumberOfGCLogFiles=16 \\ -XX:GCLogFileSize=16M \\ -verbose:gc \\ -XX:+PrintGCTimeStamps \\ -XX:+PrintGCDateStamps \\ -XX:+PrintGCDetails -XX:+PrintTenuringDistribution \\ -XX:+PrintGCApplicationStoppedTime \\ -XX:+PrintGCApplicationConcurrentTime \\ -XX:+PrintSafepointStatistics \\ -XX:+UseParNewGC \\ -XX:+UseConcMarkSweepGC \\ -XX:+CMSParallelRemarkEnabled\u0026quot;  Salt init description \u0026quot;zookeeper-{{ cluster['name'] }} centralized coordination service\u0026quot; start on runlevel [2345] stop on runlevel [!2345] respawn limit nofile 8192 8192 pre-start script [ -r \u0026quot;/etc/zookeeper-{{ cluster['name'] }}/conf/environment\u0026quot; ] || exit 0 . /etc/zookeeper-{{ cluster['name'] }}/conf/environment [ -d $ZOO_LOG_DIR ] || mkdir -p $ZOO_LOG_DIR chown $USER:$GROUP $ZOO_LOG_DIR end script script . /etc/zookeeper-{{ cluster['name'] }}/conf/environment [ -r /etc/default/zookeeper ] \u0026amp;\u0026amp; . /etc/default/zookeeper if [ -z \u0026quot;$JMXDISABLE\u0026quot; ]; then JAVA_OPTS=\u0026quot;$JAVA_OPTS -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=$JMXLOCALONLY\u0026quot; fi exec start-stop-daemon --start -c $USER --exec $JAVA --name zookeeper-{{ cluster['name'] }} \\ -- -cp $CLASSPATH $JAVA_OPTS -Dzookeeper.log.dir=${ZOO_LOG_DIR} \\ -Dzookeeper.root.logger=${ZOO_LOG4J_PROP} $ZOOMAIN $ZOOCFG end script  åŒæ„é›†ç¾¤ å¼‚æ„é›†ç¾¤ åŒºåˆ«åœ¨äºï¼šç»„æˆé›†ç¾¤ç³»ç»Ÿçš„è®¡ç®—æœºä¹‹é—´çš„ä½“ç³»ç»“æ„æ˜¯å¦ç›¸åŒã€‚\nä¸€å¥è¯æ¦‚æ‹¬ï¼šå¼‚æ„é›†ç¾¤\u0026ndash;è®¡ç®—å½’è®¡ç®—ï¼Œå­˜å‚¨å½’å­˜å‚¨ï¼›åŒæ„é›†ç¾¤ï¼ˆç‘¶æ± æ–¹æ¡ˆï¼‰\u0026ndash;è®¡ç®—å­˜å‚¨ä¸€ä½“åŒ–ã€‚\nåˆ†ç‰‡ \u0026amp; å‰¯æœ¬å¤‡ä»½ \u0026amp; èŠ‚ç‚¹    åˆ†ç‰‡/å‰¯æœ¬ åˆ†ç‰‡1 åˆ†ç‰‡2 åˆ†ç‰‡3     å‰¯æœ¬1 Node1 Node2 Node3   å‰¯æœ¬2 Node4 Node5 Node6   å‰¯æœ¬3 Node7 Node8 Node9    åˆ†ç‰‡ï¼ˆshardï¼‰ï¼šä¸€ä¸ªåˆ†ç‰‡ä»£è¡¨ä¸€ç»„æœºå™¨ï¼Œåˆ†ç‰‡å†…éƒ¨å„æœºå™¨å­˜å‚¨ç›¸åŒçš„æ•°æ®ï¼ˆåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼‰ï¼Œæ‰€æœ‰åˆ†ç‰‡ä¸­çš„ä»»ä¸€ä¸ªæƒ³åŠ èµ·æ¥ç­‰äºå®Œæ•´çš„æ•°æ®ã€‚é›†ç¾¤çš„æ€§èƒ½å–å†³äºåˆ†ç‰‡çš„æ•°é‡ã€‚å„ä¸ªåˆ†ç‰‡å¯ä»¥å…·æœ‰ä¸åŒçš„æƒé‡ï¼ˆæ¯”å¦‚è¯´æœ‰çš„æœºå™¨æ€§èƒ½å¥½å­˜å‚¨ç©ºé—´å¤§ï¼Œé‚£ä¹ˆå¯ä»¥æƒé‡è®¾ç½®é«˜ä¸€ç‚¹ï¼‰ã€‚å¦‚ä¸Šå›¾ï¼Œå…±3ä¸ªåˆ†ç‰‡ï¼Œå…¶ä¸­147å±äºä¸€ä¸ªåˆ†ç‰‡ï¼Œ258å±äºä¸€ä¸ªåˆ†ç‰‡ï¼Œ369å±äºä¸€ä¸ªåˆ†ç‰‡ã€‚å®é™…è¿è¡Œä¸­ï¼Œå„åˆ†ç‰‡å„å–ä¸€å°æœºå™¨å…±3å°æœºå™¨æ¥è®¡ç®—ï¼Œå…¶å®ƒçš„æœºå™¨åªä½œä¸ºå¤‡ä»½ä¹‹ç”¨ï¼Œå¹¶ä¸å‚ä¸å®é™…è®¡ç®—ã€‚\nå¤‡ä»½ï¼ˆreplicaï¼‰ï¼šåŒä¸€ä¸ªåˆ†ç‰‡å†…ï¼Œå„ä¸ªèŠ‚ç‚¹äº’ä¸ºå¤‡ä»½ï¼Œè®°ä½æ˜¯äº’ä¸ºå¤‡ä»½ï¼Œæ²¡æœ‰ä¸»æ¬¡ä¹‹åˆ†ï¼Œå› ä¸ºä»–ä»¬æ˜¯å®Œå…¨ä¸€æ¨¡ä¸€æ ·çš„ï¼Œç›¸äº’è¡¥ä½ã€‚ä»»ä½•æ—¶å€™ï¼Œåªè¦ä¸å‘ç”Ÿæ•…éšœï¼Œä»–ä»¬éƒ½æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œè¿™å«åŒä¸€æ€§ã€‚ä¸Šå›¾ä¸­147äº’ä¸ºå¤‡ä»½ã€‚\nèŠ‚ç‚¹ï¼ˆnodeï¼‰ï¼šä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯ä¸€å°æœºå™¨ï¼Œå¦‚ä¸Šå°±æ˜¯ä¸€ä¸ª3x3çš„æœ‰9ä¸ªèŠ‚ç‚¹çš„åˆ†å¸ƒå¼é›†ç¾¤ã€‚\nå…¬å¸ç°æœ‰ç¯å¢ƒè§„åˆ’ æ— å‰¯æœ¬ï¼Œå¤šåˆ†ç‰‡ï¼ŒRAID5\nå‚æ•°é…ç½®æ–‡ä»¶è¯¦è§£ ClickHouse æ ¸å¿ƒçš„é…ç½®æ–‡ä»¶ï¼š\n config.xml ç«¯å£é…ç½®ã€æœ¬åœ°æœºå™¨åé…ç½®ã€å†…å­˜è®¾ç½®ç­‰ metrika.xml é›†ç¾¤é…ç½®ã€ZK é…ç½®ã€åˆ†ç‰‡é…ç½®ç­‰ users.xml æƒé™ã€é…é¢è®¾ç½®  ","id":14,"section":"posts","summary":"ğŸ‘Œ 2020-10-13 ClickHouse å®˜æ–¹æ–‡æ¡£æ‘˜è¦ä¸æ·±å…¥ FileInfo Filename - ClickHouse å®˜æ–¹æ–‡æ¡£æ‘˜è¦ä¸æ·±å…¥ Version - v1.0.2010ï¼ˆ2020/10/20 ~ 2020/10/22ï¼‰ Author - NUO standuke Email - shadowdoker@gmail.com DescriptionKey - ClickHouse Official","tags":null,"title":"ClickHouse å®˜æ–¹æ–‡æ¡£æ‘˜è¦ä¸æ·±å…¥","uri":"https://blog.standuke.top/2020/10/2020-10-13-clickhouse-%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E6%91%98%E8%A6%81%E4%B8%8E%E6%B7%B1%E5%85%A5/","year":"2020"},{"content":"ğŸ‘Œ 2020-07-01 dmidecode ä½¿ç”¨è„šæœ¬ ç®€ä»‹ dmidecodeå‘½ä»¤å¯ä»¥è®©ä½ åœ¨Linuxç³»ç»Ÿä¸‹è·å–æœ‰å…³ç¡¬ä»¶æ–¹é¢çš„ä¿¡æ¯ã€‚dmidecodeçš„ä½œç”¨æ˜¯å°†DMIæ•°æ®åº“ä¸­çš„ä¿¡æ¯è§£ç ï¼Œä»¥å¯è¯»çš„æ–‡æœ¬æ–¹å¼æ˜¾ç¤ºã€‚ç”±äºDMIä¿¡æ¯å¯ä»¥äººä¸ºä¿®æ”¹ï¼Œå› æ­¤é‡Œé¢çš„ä¿¡æ¯ä¸ä¸€å®šæ˜¯ç³»ç»Ÿå‡†ç¡®çš„ä¿¡æ¯ã€‚dmidecodeéµå¾ªSMBIOS/DMIæ ‡å‡†ï¼Œå…¶è¾“å‡ºçš„ä¿¡æ¯åŒ…æ‹¬BIOSã€ç³»ç»Ÿã€ä¸»æ¿ã€å¤„ç†å™¨ã€å†…å­˜ã€ç¼“å­˜ç­‰ç­‰ã€‚\nDMIï¼ˆDesktop Management Interface,DMIï¼‰å°±æ˜¯å¸®åŠ©æ”¶é›†ç”µè„‘ç³»ç»Ÿä¿¡æ¯çš„ç®¡ç†ç³»ç»Ÿï¼ŒDMIä¿¡æ¯çš„æ”¶é›†å¿…é¡»åœ¨ä¸¥æ ¼éµç…§SMBIOSè§„èŒƒçš„å‰æä¸‹è¿›è¡Œã€‚SMBIOSï¼ˆSystem Management BIOSï¼‰æ˜¯ä¸»æ¿æˆ–ç³»ç»Ÿåˆ¶é€ è€…ä»¥æ ‡å‡†æ ¼å¼æ˜¾ç¤ºäº§å“ç®¡ç†ä¿¡æ¯æ‰€éœ€éµå¾ªçš„ç»Ÿä¸€è§„èŒƒã€‚SMBIOSå’ŒDMIæ˜¯ç”±è¡Œä¸šæŒ‡å¯¼æœºæ„Desktop Management Task Force(DMTF)èµ·è‰çš„å¼€æ”¾æ€§çš„æŠ€æœ¯æ ‡å‡†ï¼Œå…¶ä¸­DMIè®¾è®¡é€‚ç”¨äºä»»ä½•çš„å¹³å°å’Œæ“ä½œç³»ç»Ÿã€‚\nDMIå……å½“äº†ç®¡ç†å·¥å…·å’Œç³»ç»Ÿå±‚ä¹‹é—´æ¥å£çš„è§’è‰²ã€‚å®ƒå»ºç«‹äº†æ ‡å‡†çš„å¯ç®¡ç†ç³»ç»Ÿæ›´åŠ æ–¹ä¾¿äº†ç”µè„‘å‚å•†å’Œç”¨æˆ·å¯¹ç³»ç»Ÿçš„äº†è§£ã€‚DMIçš„ä¸»è¦ç»„æˆéƒ¨åˆ†æ˜¯Management Information Format(MIF)æ•°æ®åº“ã€‚è¿™ä¸ªæ•°æ®åº“åŒ…æ‹¬äº†æ‰€æœ‰æœ‰å…³ç”µè„‘ç³»ç»Ÿå’Œé…ä»¶çš„ä¿¡æ¯ã€‚é€šè¿‡DMIï¼Œç”¨æˆ·å¯ä»¥è·å–åºåˆ—å·ã€ç”µè„‘å‚å•†ã€ä¸²å£ä¿¡æ¯ä»¥åŠå…¶å®ƒç³»ç»Ÿé…ä»¶ä¿¡æ¯ã€‚\ndmidecode å‚æ•° string åˆ—è¡¨  bios-vendor bios-version bios-release-date system-manufacturer system-product-name system-version system-serial-number system-uuid system-family baseboard-manufacturer baseboard-product-name baseboard-version baseboard-serial-number baseboard-asset-tag chassis-manufacturer chassis-type chassis-version chassis-serial-number chassis-asset-tag processor-family processor-manufacturer processor-version processor-frequency  å¸¸ç”¨å‘½ä»¤ã€Œç”¨äºç”Ÿäº§ã€  æŸ¥çœ‹æœåŠ¡å™¨å‹å·ï¼šdmidecode -s system-product-name æŸ¥çœ‹ç³»ç»Ÿåºåˆ—å· snï¼šdmidecode -s system-serial-number  æŸ¥çœ‹ä¸»æ¿çš„åºåˆ—å·ï¼šdmidecode -s baseboard-serial-number æŸ¥çœ‹å†…å­˜ä¿¡æ¯ï¼šdmidecode -t memory æŸ¥çœ‹OEMä¿¡æ¯ï¼šdmidecode -t 11\nman æ‰‹å†Œ -s, --string KEYWORD Only display the value of the DMI string identified by KEYWORD. KEYWORD must be a keyword from the following list: bios-vendor, bios-version, bios-release-date, system-manufacturer, system- product-name, system-version, system-serial-number, system-uuid, system-family, baseboard-manufacturer, baseboard-product-name, baseboard-version, baseboard-serial-number, baseboard-asset-tag, chassis-manufacturer, chassis-type, chassis-version, chassis- serial-number, chassis-asset-tag, processor-family, processor- manufacturer, processor-version, processor-frequency. Each keyâ€ word corresponds to a given DMI type and a given offset within this entry type. Not all strings may be meaningful or even defined on all systems. Some keywords may return more than one result on some systems (e.g. processor-version on a multi-proâ€ cessor system). If KEYWORD is not provided or not valid, a list of all valid keywords is printed and dmidecode exits with an error. This option cannot be used more than once.  -t, --type TYPE Only display the entries of type TYPE. TYPE can be either a DMI type number, or a comma-separated list of type numbers, or a keyword from the following list: bios, system, baseboard, chasâ€ sis, processor, memory, cache, connector, slot. Refer to the DMI TYPES section below for details. If this option is used more than once, the set of displayed entries will be the union of all the given types. If TYPE is not provided or not valid, a list of all valid keywords is printed and dmidecode exits with an error.  DMI TYPES The SMBIOS specification defines the following DMI types: Type Information â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 0 BIOS 1 System 2 Baseboard 3 Chassis 4 Processor 5 Memory Controller 6 Memory Module 7 Cache 8 Port Connector 9 System Slots 10 On Board Devices 11 OEM Strings 12 System Configuration Options 13 BIOS Language 14 Group Associations 15 System Event Log 16 Physical Memory Array 17 Memory Device 18 32-bit Memory Error 19 Memory Array Mapped Address 20 Memory Device Mapped Address 21 Built-in Pointing Device 22 Portable Battery 23 System Reset 24 Hardware Security 25 System Power Controls 26 Voltage Probe 27 Cooling Device 28 Temperature Probe 29 Electrical Current Probe 30 Out-of-band Remote Access 31 Boot Integrity Services 32 System Boot 33 64-bit Memory Error 34 Management Device 35 Management Device Component 36 Management Device Threshold Data 37 Memory Channel 38 IPMI Device 39 Power Supply 41 Onboard Devices Extended Information 42 Management Controller Host Interface Additionally, type 126 is used for disabled entries and type 127 is an end-of-table marker. Types 128 to 255 are for OEM-specific data. dmidecode will display these entries by default, but it can only decode them when the vendors have contributed documentation or code for them. Keywords can be used instead of type numbers with --type. Each keyword is equivalent to a list of type numbers: Keyword Types â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ bios 0, 13 system 1, 12, 15, 23, 32 baseboard 2, 10, 41 chassis 3 processor 4 memory 5, 6, 16, 17 cache 7 connector 8 slot 9 Keywords are matched case-insensitively. The following command lines are equivalent: Â· dmidecode --type 0 --type 13 Â· dmidecode --type 0,13 Â· dmidecode --type bios Â· dmidecode --type BIOS  å‚è€ƒèµ„æ–™\nLinuxå‘½ä»¤å¤§å…¨\n","id":15,"section":"posts","summary":"ğŸ‘Œ 2020-07-01 dmidecode ä½¿ç”¨è„šæœ¬ ç®€ä»‹ dmidecodeå‘½ä»¤å¯ä»¥è®©ä½ åœ¨Linuxç³»ç»Ÿä¸‹è·å–æœ‰å…³ç¡¬ä»¶æ–¹é¢çš„ä¿¡æ¯ã€‚dmidecodeçš„ä½œç”¨æ˜¯å°†DMIæ•°æ®åº“ä¸­çš„ä¿¡æ¯è§£","tags":["CentOS","Linux"],"title":"dmidecode ä½¿ç”¨è„šæœ¬","uri":"https://blog.standuke.top/2020/07/2020-07-01-dmidecode-%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC/","year":"2020"},{"content":"ğŸ‘Œ 2020-03-31 åˆ›å»º Windows Server 2012 R2 qcow2 æ ¼å¼è™šæ‹Ÿæœºæ¨¡æ¿  FileInfo Filename - åˆ›å»º Windows Server 2012 R2 qcow2 æ ¼å¼è™šæ‹Ÿæœºæ¨¡æ¿ Version - v1.1.2003ï¼ˆ2020/03/31 ~ 2020/03/31ï¼‰ Author - standuke Email - shadowdoker@gmail.com DescriptionKey - Windows Server 2012 R2 qcow2 cloudbase init openstack\n éœ€æ±‚ Openstack è™šæ‹ŸåŒ–éœ€è¦\nå·¥å…·å‡†å¤‡ æ“ä½œç³»ç»Ÿç¯å¢ƒ ä»¥ä¸‹ä¸º gui ç¯å¢ƒå¿…é¡»è½¯ä»¶\n Linux ç³»ç»Ÿã€ŒCentOS 7.7ã€GNOME æ¡Œé¢ç¯å¢ƒã€Œä¹Ÿå¯ä»¥ä½¿ç”¨ cli æ–¹å¼ï¼Œä½†æ˜¯ä¼šéº»çƒ¦äº›ã€ Linux è™šæ‹ŸåŒ–ç¯å¢ƒ yum groupinstall -y 'Virtualization Host' Linux è™šæ‹ŸåŒ– gui ç®¡ç†å™¨ yum install -y virt-manager Linux è™šæ‹ŸåŒ– cli ç®¡ç†å™¨  ä»¥ä¸‹ä¸º cli æ–¹å¼å¿…é¡»è¦å®‰è£…çš„è½¯ä»¶\n è™šæ‹Ÿæœºå®‰è£…å™¨ yum install -y virt-install è™šæ‹Ÿæœº vnc è¿æ¥å™¨ yum install -y virt-viewer  Windows å®‰è£…é•œåƒåŠå…¶é©±åŠ¨æ–‡ä»¶  ISO cn_windows_server_2012_r2_with_update_x64_dvd_6052725.iso Driver ã€Œhttps://docs.fedoraproject.org/en-US/quick-docs/creating-windows-virtual-machines-using-virtio-drivers/index.htmlã€ virtio-win-0.1.171.isoã€Œæ‰€æœ‰é©±åŠ¨éƒ½åœ¨é‡Œé¢ã€ virtio-win_amd64.vfdã€Œ64bit ç³»ç»Ÿé©±åŠ¨ï¼Œæœ¬æ¬¡å®‰è£…åªç”¨è¿™ä¸€ä¸ªå°±è¡Œã€ virtio-win-0.1.171_x86.vfdã€Œ32bit ç³»ç»Ÿé©±åŠ¨ã€  cloudera-init æ–‡ä»¶  CloudbaseInitSetup_Stable_x64.msi  https://cloudbase.it/downloads/CloudbaseInitSetup_Stable_x64.msi https://github.com/cloudbase/cloudbase-init/blob/master/README.rst https://github.com/cloudbase/cloudbase-init\nå¼€å§‹å®‰è£…  å‰å¾€ç³»ç»Ÿ /opt ç›®å½•åˆ›å»º qemu ç›®å½•ï¼Œå¹¶ç»™äºˆæƒé™ï¼Œé‡Œé¢æ”¾å…¥æ‰€æœ‰éœ€è¦ç”¨åˆ°çš„æ–‡ä»¶  qemu â”œâ”€â”€ cn_windows_server_2012_r2_with_update_x64_dvd_6052725.iso â”œâ”€â”€ virt â”‚Â â”œâ”€â”€ virtio-win-0.1.171.iso â”‚Â â”œâ”€â”€ virtio-win-0.1.171_x86.vfd â”‚Â â””â”€â”€ virtio-win_amd64.vfd â””â”€â”€ ws2012.qcow2 chown -R qemu:qemu /opt/qemu  åˆ›å»º .qcow2 æ ¼å¼æ–‡ä»¶ï¼Œç”¨äºæœ€åå®‰è£…ç³»ç»Ÿ  qemu-img create -f qcow2 ws2012.qcow2 15G  æ‰“å¼€ Virtual Machine Manager åˆ›å»ºä¸€å°è™šæ‹Ÿæœº  img ç•¥  ä¿®æ”¹é»˜è®¤é…ç½®  é€‰æ‹©ç£ç›˜ -\u0026gt; ä¿®æ”¹ Disk Bus ä¸ºã€ŒVirtIOã€ é€‰æ‹©ç½‘å¡ -\u0026gt; ä¿®æ”¹ Device mode ä¸ºã€Œvirtioã€ï¼Œå»ºè®®ä½¿ç”¨æ¡¥æ¥æ¨¡å¼  æ·»åŠ é©±åŠ¨è½¯ç›˜  æ·»åŠ  \u0026quot;Hardware\u0026quot; Storage å¹¶ä¸” Device type ä¸ºã€ŒFloppy deviceã€ é€‰æ‹© virtio-win_amd64.vfd ä½œä¸ºå¯¹è±¡  å¼€å¯è™šæ‹Ÿæœº  è¿è¡Œ Windows Server 2012 R2 å®‰è£…æ—¶åŠ è½½ VirtIO é©±åŠ¨å³å¯é¡ºåˆ©å®‰è£…ï¼Œç½‘å¡é©±åŠ¨å¯ä»¥åœ¨å®‰è£…å®Œæ“ä½œç³»ç»Ÿåå®‰è£…  ä¸€äº›è®¾ç½®  1. å…³é—­é˜²ç«å¢™ 2. å¼€å¯è¿œç¨‹è¿æ¥ 3. è®°å¾—å®‰è£…ç½‘å¡é©±åŠ¨  å®‰è£… cloudbase-init  https://cloudbase.it/downloads/CloudbaseInitSetup_Stable_x64.msi  æœ€åä¸¤ä¸ª å‹¾å‹¾ ==ä¸è¦== æ‰“ä¸Š\nTips  é©±åŠ¨é€‰æ‹©  è®© Windows è‡ªå·±å»é€‰æ‹©å“ªä¸ªé©±åŠ¨ï¼Œå‹¾é€‰éšè—é‚£äº›ä¸å…¼å®¹çš„é©±åŠ¨\n é©±åŠ¨ä¸‹è½½  å¯ä»¥åªä¸‹è½½ virtio-win_amd64.vfd é‡Œé¢æœ‰ win7 win8 win8.1 win10 çš„é©±åŠ¨ï¼ŒWindows Server 2012 R2 é©±åŠ¨é€‰æ‹© win8 æ–‡ä»¶å¤¹å³å¯\n Windows qcow2 è½¬æ¢å·¥å…·  https://cloudbase.it/qemu-img-windows/\nå‚è€ƒæ–‡æ¡£ https://docs.openstack.org/image-guide/windows-image.html https://blog.51cto.com/11555417/2341874 https://www.cnblogs.com/nulige/p/8319838.html\n https://blog.csdn.net/qq_33317586/article/details/85613254 https://blog.51cto.com/royals/1956152 https://forum.huawei.com/enterprise/zh/thread-507243.html https://support.huaweicloud.com/usermanual-ims/zh-cn_topic_0030730602.html  C:\\Set-ExecutionPolicy Unrestricted netbios_host_name_compatibility=false first_logon_behavior=no\n","id":16,"section":"posts","summary":"ğŸ‘Œ 2020-03-31 åˆ›å»º Windows Server 2012 R2 qcow2 æ ¼å¼è™šæ‹Ÿæœºæ¨¡æ¿ FileInfo Filename - åˆ›å»º Windows Server 2012 R2 qcow2 æ ¼å¼è™šæ‹Ÿæœºæ¨¡æ¿ Version - v1.1.2003ï¼ˆ2020/03/31 ~ 2020/03/31ï¼‰ Author - standuke","tags":["Windows","qcow2","Virtualization"],"title":"åˆ›å»º Windows Server 2012 R2 Qcow2 æ ¼å¼è™šæ‹Ÿæœºæ¨¡æ¿","uri":"https://blog.standuke.top/2020/03/2020-03-31-%E5%88%9B%E5%BB%BA-windows-server-2012-r2-qcow2-%E6%A0%BC%E5%BC%8F%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%A8%A1%E6%9D%BF/","year":"2020"},{"content":"ğŸ‘Œ 2020-03-28 docker image å¯¼å…¥å¯¼å‡º ä¿å­˜ Tag æ ‡è®° ä¸¤è€…åŒºåˆ« VS  docker save ä¿å­˜çš„æ˜¯é•œåƒï¼ˆimageï¼‰ï¼Œdocker export ä¿å­˜çš„æ˜¯å®¹å™¨ï¼ˆcontainerï¼‰ å¯¹äº Docker Save æ–¹æ³•ï¼Œä¼šä¿å­˜è¯¥é•œåƒçš„æ‰€æœ‰å†å²è®°å½•ï¼ŒåŒ…å« commit å†å² å¯¹äº Docker Export æ–¹æ³•ï¼Œä¸ä¼šä¿ç•™å†å²è®°å½•ï¼Œå³æ²¡æœ‰ commit å†å² docker load ç”¨æ¥è½½å…¥é•œåƒåŒ…ï¼Œdocker import ç”¨æ¥è½½å…¥å®¹å™¨åŒ…ï¼Œä½†ä¸¤è€…éƒ½ä¼šæ¢å¤ä¸ºé•œåƒ docker load ä¸èƒ½å¯¹è½½å…¥çš„é•œåƒé‡å‘½åï¼Œè€Œ docker import å¯ä»¥ä¸ºé•œåƒæŒ‡å®šæ–°åç§°  docker save - load  save\n ç¤ºä¾‹ docker save -o nginx.tar nginx:latest æˆ– docker save \u0026gt; nginx.tar nginx:latest\nå…¶ä¸­-oå’Œ\u0026gt;è¡¨ç¤ºè¾“å‡ºåˆ°æ–‡ä»¶ï¼Œnginx.tarä¸ºç›®æ ‡æ–‡ä»¶ï¼Œnginx:latestæ˜¯æºé•œåƒåï¼ˆname:tagï¼‰\n load\n ç¤ºä¾‹ docker load -i nginx.tar æˆ– docker load \u0026lt; nginx.tar å…¶ä¸­-iå’Œ\u0026lt;è¡¨ç¤ºä»æ–‡ä»¶è¾“å…¥ã€‚ä¼šæˆåŠŸå¯¼å…¥é•œåƒåŠç›¸å…³å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬tagä¿¡æ¯\ndocker export - import  export\n ç¤ºä¾‹ docker export -o nginx-test.tar nginx-test\nå¯¼å‡ºä¸ºtar\ndocker export #ID or #Name \u0026gt; /home/export.tar\nå…¶ä¸­-oè¡¨ç¤ºè¾“å‡ºåˆ°æ–‡ä»¶ï¼Œnginx-test.tarä¸ºç›®æ ‡æ–‡ä»¶ï¼Œnginx-testæ˜¯æºå®¹å™¨åï¼ˆnameï¼‰\n import\n ç¤ºä¾‹ docker import nginx-test.tar nginx:imp æˆ– cat nginx-test.tar | docker import - nginx:imp\ndocker å‘½ä»¤æ··ç”¨æƒ…å†µ save -\u0026gt; import\nexport -\u0026gt; load\næ³¨æ„äº‹é¡¹ ã€Œdocker save é•œåƒ IDã€ä¿å­˜çš„é•œåƒä¼šä¸¢å¤± Tag ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ã€Œdocker save XXX:Tagã€æ–¹å¼ä¿å­˜é•œåƒ\n","id":17,"section":"posts","summary":"ğŸ‘Œ 2020-03-28 docker image å¯¼å…¥å¯¼å‡º ä¿å­˜ Tag æ ‡è®° ä¸¤è€…åŒºåˆ« VS docker save ä¿å­˜çš„æ˜¯é•œåƒï¼ˆimageï¼‰ï¼Œdocker export ä¿å­˜çš„æ˜¯å®¹å™¨ï¼ˆcontainerï¼‰ å¯¹äº Docker Save æ–¹æ³•ï¼Œä¼šä¿å­˜è¯¥é•œ","tags":["docker"],"title":"docker image å¯¼å…¥å¯¼å‡º ä¿å­˜ Tag æ ‡è®°","uri":"https://blog.standuke.top/2020/03/2020-03-28-docker-image-%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA-%E4%BF%9D%E5%AD%98-tag-%E6%A0%87%E8%AE%B0/","year":"2020"},{"content":"ğŸ‘Œ 2020-03-17 OpenStack Train å¿«é€Ÿç¦»çº¿éƒ¨ç½²ã€Œåœ¨çº¿ç±»ä¼¼ã€  æœ¬æ–‡æ¡£ä¸º openstack å¿«é€Ÿéƒ¨ç½²æ–‡æ¡£ï¼Œåªé€‚ç”¨äºå·²ç»ç†Ÿæ‚‰ openstack å„ä¸ªç»„ä»¶åŠå…¶éƒ¨ç½²æ–¹å¼å’Œå¯¹åº”å®‰è£…èŠ‚ç‚¹çš„ç»´æŠ¤äººå‘˜ æ–‡æ¡£é€‚ç”¨äºæ„å»º openstack å­¦ä¹ ç¯å¢ƒï¼Œæ–‡æ¡£é»˜è®¤ä¸‰å°èŠ‚ç‚¹ï¼Œä¸€å°ä¸º controller è‹¥é‡‡ç”¨ç¦»çº¿å®‰è£…ï¼Œåˆ™ç›¸å…³ç¦»çº¿ repo è¯·é¢„å…ˆè®¾ç½®ï¼Œä¸å†èµ˜è¿°\n   FileInfo Filename - 2020-03-05 Openstack Train Version EZ Install Guide Version - v1.1.2003ï¼ˆ2020/03/15 ~ 2020/03/18ï¼‰ Author - nuo standuke Email - shadowdoker@gmail.com DescriptionKey - Openstack Train Version Offline Install\n ç¦»çº¿å®‰è£…ç¯å¢ƒè¦æ±‚  æ“ä½œç³»ç»Ÿè¦æ±‚ è½¯ä»¶ä»¥åŠä¾èµ– ç¯å¢ƒä»‹ç»     èŠ‚ç‚¹åç§° IPåœ°å€ é…ç½® æ³›è§’è‰²     train-1 192.168.10.10 32C64T 8T controller   train-2 192.168.10.20 32C64T 8T node   train-3 192.168.10.30 32C64T 8T node    å„èŠ‚ç‚¹åˆå§‹åŒ–  å®‰å…¨è®¾ç½®  systemctl stop firewalld \u0026amp;\u0026amp; systemctl disable firewalld sed -i 's/^SELINUX=.*/SELINUX=disabled/` /etc/selinux/config setenforce 0  hosts æ–‡ä»¶ä¿®æ”¹  vi /etc/hosts  é…ç½® NTP æœåŠ¡  yum install -y chrony # controller - server * + server 127.127.1.0 iburst + allow 192.168.10.0/24 # node - server * + server train-1 iburst systemctl start chronyd \u0026amp;\u0026amp; systemctl enable chronyd  å®‰è£…åŸºç¡€ openstack è½¯ä»¶åŒ…  yum install -y centos-release-openstack-train python-openstackclient openstack-selinux \u0026amp;\u0026amp; yum upgrade -y  Mariadb  å®‰è£…è½¯ä»¶  yum install -y mariadb mariadb-server python2-PyMySQL  ä¿®æ”¹é…ç½®  vi /etc/my.cnf.d/openstack.cnf [mysqld] bind-address = 192.168.10.10 default-storage-engine = innodb innodb_file_per_table = on max_connections = 4096 collation-server = utf8_general_ci character-set-server = utf8  è®¾ç½®å¯åŠ¨  systemctl start mariadb.service \u0026amp;\u0026amp; systemctl enable mariadb.service  åˆå§‹åŒ–æ•°æ®åº“  mysql_secure_installation  åˆ›å»º åº“ / èµ‹äºˆæƒé™  CREATE DATABASE keystone; GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'localhost' IDENTIFIED BY 'keystone'; GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'%' IDENTIFIED BY 'keystone'; CREATE DATABASE glance; GRANT ALL PRIVILEGES ON glance.* TO 'glance'@'localhost' IDENTIFIED BY 'glance'; GRANT ALL PRIVILEGES ON glance.* TO 'glance'@'%' IDENTIFIED BY 'glance'; CREATE DATABASE placement; GRANT ALL PRIVILEGES ON placement.* TO 'placement'@'localhost' IDENTIFIED BY 'placement'; GRANT ALL PRIVILEGES ON placement.* TO 'placement'@'%' IDENTIFIED BY 'placement'; CREATE DATABASE nova; CREATE DATABASE nova_api; CREATE DATABASE nova_cell0; GRANT ALL PRIVILEGES ON nova.* TO 'nova'@'localhost' IDENTIFIED BY 'nova'; GRANT ALL PRIVILEGES ON nova.* TO 'nova'@'%' IDENTIFIED BY 'nova'; GRANT ALL PRIVILEGES ON nova_api.* TO 'nova'@'localhost' IDENTIFIED BY 'nova'; GRANT ALL PRIVILEGES ON nova_api.* TO 'nova'@'%' IDENTIFIED BY 'nova'; GRANT ALL PRIVILEGES ON nova_cell0.* TO 'nova'@'localhost' IDENTIFIED BY 'nova'; GRANT ALL PRIVILEGES ON nova_cell0.* TO 'nova'@'%' IDENTIFIED BY 'nova'; CREATE DATABASE neutron; GRANT ALL PRIVILEGES ON neutron.* TO 'neutron'@'localhost' IDENTIFIED BY 'neutron'; GRANT ALL PRIVILEGES ON neutron.* TO 'neutron'@'*' IDENTIFIED BY 'neutron'; flush privileges;  RabbitMQ  å®‰è£…è½¯ä»¶  yum install -y rabbitmq-server  è®¾ç½®å¯åŠ¨  systemctl start rabbitmq-server.service \u0026amp;\u0026amp; systemctl enable rabbitmq-server.service  åˆ›å»ºç”¨æˆ·  rabbitmqctl add_user openstack openstack # Creating user \u0026quot;openstack\u0026quot; ...  èµ‹äºˆæƒé™  rabbitmqctl set_permissions openstack \u0026quot;.*\u0026quot; \u0026quot;.*\u0026quot; \u0026quot;.*\u0026quot; # Setting permissions for user \u0026quot;openstack\u0026quot; in vhost \u0026quot;/\u0026quot; ...  Memcached  å®‰è£…è½¯ä»¶  yum install -y memcached python-memcached  ä¿®æ”¹é…ç½®  vi /etc/sysconfig/memcached OPTIONS=\u0026quot;-l 127.0.0.1,::1,train-1\u0026quot;  è®¾ç½®å¯åŠ¨  systemctl start memcached.service \u0026amp;\u0026amp; systemctl enable memcached.service  etcd  å®‰è£…è½¯ä»¶  yum install -y etcd  ä¿®æ”¹é…ç½®  vi /etc/etcd/etcd.conf #[Member] ETCD_DATA_DIR=\u0026quot;/var/lib/etcd/default.etcd\u0026quot; ETCD_LISTEN_PEER_URLS=\u0026quot;http://192.168.10.10:2380\u0026quot; ETCD_LISTEN_CLIENT_URLS=\u0026quot;http://192.168.10.10:2379\u0026quot; ETCD_NAME=\u0026quot;train-1\u0026quot; #[Clustering] ETCD_INITIAL_ADVERTISE_PEER_URLS=\u0026quot;http://192.168.10.10:2380\u0026quot; ETCD_ADVERTISE_CLIENT_URLS=\u0026quot;http://192.168.10.10:2379\u0026quot; ETCD_INITIAL_CLUSTER=\u0026quot;train-1=http://192.168.10.10:2380\u0026quot; ETCD_INITIAL_CLUSTER_TOKEN=\u0026quot;etcd-cluster-01\u0026quot; ETCD_INITIAL_CLUSTER_STATE=\u0026quot;new\u0026quot;  è®¾ç½®å¯åŠ¨  systemctl start etcd \u0026amp;\u0026amp; systemctl enable etcd   keystone  å®‰è£…è½¯ä»¶  yum install -y openstack-keystone httpd mod_wsgi  ä¿®æ”¹é…ç½®  [database] connection = mysql+pymysql://keystone:KEYSTONE_DBPASS@train-1/keystone [token] provider = fernet  å¯¼å…¥æ•°æ®åº“  su -s /bin/sh -c \u0026quot;keystone-manage db_sync\u0026quot; keystone  åˆå§‹åŒ–  keystone-manage fernet_setup --keystone-user keystone --keystone-group keystone keystone-manage credential_setup --keystone-user keystone --keystone-group keystone  åˆ›å»ºç»“ç‚¹  keystone-manage bootstrap --bootstrap-password ADMIN_PASS \\ --bootstrap-admin-url http://train-1:5000/v3/ \\ --bootstrap-internal-url http://train-1:5000/v3/ \\ --bootstrap-public-url http://train-1:5000/v3/ \\ --bootstrap-region-id RegionOne  é…ç½® Apache HTTP æœåŠ¡ \\ ä¿®æ”¹ /etc/httpd/conf/httpd.conf ä¸­ ServerName å‚æ•°  ServerName train-1  åˆ›å»º wsgi-keystone.conf çš„è½¯è¿æ¥ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ https æ–¹å¼  ln -s /usr/share/keystone/wsgi-keystone.conf /etc/httpd/conf.d/  å¯åŠ¨ keystone \\ è®¾ç½®å¼€æœºè‡ªå¯  systemctl enable httpd.service \u0026amp;\u0026amp; systemctl start httpd.service  é¢„è®¾  openstack user create --domain default --password-prompt glance openstack role add --project service --user glance admin openstack service create --name glance --description \u0026quot;OpenStack Image\u0026quot; image openstack endpoint create --region RegionOne image public http://train-1:9292 openstack endpoint create --region RegionOne image internal http://train-1:9292 openstack endpoint create --region RegionOne image admin http://train-1:9292 openstack user create --domain default --password PLACEMENT_PASS placement openstack service create --name placement --description \u0026quot;Placement API\u0026quot; placement openstack endpoint create --region RegionOne placement public http://train-1:8778 openstack endpoint create --region RegionOne placement internal http://train-1:8778 openstack endpoint create --region RegionOne placement admin http://train-1:8778 openstack user create --domain default --password-prompt nova openstack role add --project service --user nova admin openstack service create --name nova --description \u0026quot;OpenStack Compute\u0026quot; compute openstack endpoint create --region RegionOne compute public http://train-1:8774/v2.1 openstack endpoint create --region RegionOne compute internal http://train-1:8774/v2.1 openstack endpoint create --region RegionOne compute admin http://train-1:8774/v2.1 openstack user create --domain default --password-prompt neutron openstack role add --project service --user neutron admin openstack service create --name neutron --description \u0026quot;OpenStack Networking\u0026quot; network openstack endpoint create --region RegionOne network public http://train-1:9696 openstack endpoint create --region RegionOne network internal http://train-1:9696 openstack endpoint create --region RegionOne network admin http://train-1:9696  glance âš ï¸ ä½¿ç”¨ admin ç¯å¢ƒï¼Œæ¥ä½¿ç”¨ç®¡ç†å‘˜æƒé™  source admin-openrc.sh  å®‰è£… glance è½¯ä»¶åŒ…  yum install -y openstack-glance æ­¤å¤„ä¼šç¼ºå°‘è½¯ä»¶åŒ… tk*  ä¿®æ”¹ /etc/glance/glance-api.conf é…ç½®æ–‡ä»¶  vi /etc/glance/glance-api.conf # é…ç½®æ•°æ®åº“è®¿é—® [database] connection = mysql+pymysql://glance:GLANCE_DBPASS@train-1/glance # è¿™éƒ¨åˆ†åˆ é™¤å¤šä½™çš„ [keystone_authtoken] www_authenticate_uri = http://train-1:5000 auth_url = http://train-1:5000 memcached_servers = train-1:11211 auth_type = password project_domain_name = Default user_domain_name = Default project_name = service username = glance password = GLANCE_PASS # é…ç½®è®¤è¯æ–¹å¼ [paste_deploy] flavor = keystone # é…ç½®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨å’Œé•œåƒæ–‡ä»¶å­˜å‚¨ä½ç½® [glance_store] stores = file,http default_store = file filesystem_store_datadir = /var/lib/glance/images/  åˆå§‹åŒ– glance æ•°æ®åº“  su -s /bin/sh -c \u0026quot;glance-manage db_sync\u0026quot; glance # å¯å¿½ç•¥è¾“å‡ºï¼Œç›´åˆ°æç¤º Database is synced successfully.  å¯åŠ¨ glance æœåŠ¡ / è®¾ç½®å¼€æœºè‡ªå¯  systemctl start openstack-glance-api.service \u0026amp;\u0026amp; systemctl enable openstack-glance-api.service  ä¸Šä¼ æµ‹è¯•é•œåƒ  http://download.cirros-cloud.net/0.4.0/cirros-0.4.0-x86_64-disk.img\nopenstack image create --file /root/cirros-0.4.0-x86_64-disk.img --disk-format qcow2 --container-format bare --public cirros openstack image list \u0026gt;root ~ [train-1]# openstack image list +--------------------------------------+--------+--------+ | ID | Name | Status | +--------------------------------------+--------+--------+ | deeb4604-620b-4a3c-85ce-9173c4325f26 | cirros | active | +--------------------------------------+--------+--------+ ls -lah /var/lib/glance/images/  placement å®‰è£… placement è½¯ä»¶åŒ…  yum install -y openstack-placement-api  ä¿®æ”¹ /etc/placement/placement.conf é…ç½®æ–‡ä»¶  vi /etc/placement/placement.conf [placement_database] connection = mysql+pymysql://placement:PLACEMENT_DBPASS@train-1/placement [api] auth_strategy = keystone [keystone_authtoken] auth_url = http://train-1:5000/v3 memcached_servers = train-1:11211 auth_type = password project_domain_name = default user_domain_name = default project_name = service username = placement password = PLACEMENT_PASS  åˆå§‹åŒ– placement æ•°æ®åº“ \\ æ­¤æ“ä½œæ— è¾“å‡º  su -s /bin/sh -c \u0026quot;placement-manage db sync\u0026quot; placement  é‡å¯ httpd æœåŠ¡  systemctl restart httpd  å‘  \u0026lt;Directory /usr/bin\u0026gt; \u0026lt;IfVersion \u0026gt;= 2.4\u0026gt; Require all granted \u0026lt;/IfVersion\u0026gt; \u0026lt;IfVersion \u0026lt; 2.4\u0026gt; Order allow,deny Allow from all \u0026lt;/IfVersion\u0026gt; \u0026lt;/Directory\u0026gt;  nova å®‰è£… nova ç»„ä»¶  yum install -y openstack-nova-api openstack-nova-conductor openstack-nova-novncproxy openstack-nova-scheduler  ä¿®æ”¹ /etc/nova/nova.conf é…ç½®æ–‡ä»¶  [DEFAULT] enabled_apis = osapi_compute,metadata transport_url = rabbit://openstack:openstack@train-1:5672/ my_ip = MANAGEMENT_INTERFACE_IP_ADDRESS use_neutron = true firewall_driver = nova.virt.firewall.NoopFirewallDriver [api_database] connection = mysql+pymysql://nova:NOVA_DBPASS@train-1/nova_api [database] connection = mysql+pymysql://nova:NOVA_DBPASS@train-1/nova [api] auth_strategy = keystone [keystone_authtoken] www_authenticate_uri = http://train-1:5000/ auth_url = http://train-1:5000/ memcached_servers = train-1:11211 auth_type = password project_domain_name = Default user_domain_name = Default project_name = service username = nova password = NOVA_PASS [vnc] enabled = true server_listen = $my_ip server_proxyclient_address = $my_ip [glance] api_servers = http://train-1:9292 [oslo_concurrency] lock_path = /var/lib/nova/tmp [placement] region_name = RegionOne project_domain_name = Default project_name = service auth_type = password user_domain_name = Default auth_url = http://train-1:5000/v3 username = placement password = PLACEMENT_PASS  åˆå§‹åŒ–æ•°æ®åº“  # åŒæ­¥ su -s /bin/sh -c \u0026quot;nova-manage api_db sync\u0026quot; nova su -s /bin/sh -c \u0026quot;nova-manage cell_v2 map_cell0\u0026quot; nova su -s /bin/sh -c \u0026quot;nova-manage cell_v2 create_cell --name=cell1 --verbose\u0026quot; nova su -s /bin/sh -c \u0026quot;nova-manage db sync\u0026quot; nova è¿™ä¸ªä¼šæœ‰ä¸¤ä¸ªè­¦å‘Šï¼Œå¿½è§†å³å¯ /usr/lib/python2.7/site-packages/pymysql/cursors.py:170: Warning: (1831, u'Duplicate index `block_device_mapping_instance_uuid_virtual_name_device_name_idx`. This is deprecated and will be disallowed in a future release') result = self._query(query) /usr/lib/python2.7/site-packages/pymysql/cursors.py:170: Warning: (1831, u'Duplicate index `uniq_instances0uuid`. This is deprecated and will be disallowed in a future release') result = self._query(query) su -s /bin/sh -c \u0026quot;nova-manage cell_v2 list_cells\u0026quot; nova +-------+--------------------------------------+-----------------------------------------------+------------------------------------------------------+----------+ | åç§° | UUID | Transport URL | æ•°æ®åº“è¿æ¥ | Disabled | +-------+--------------------------------------+-----------------------------------------------+------------------------------------------------------+----------+ | cell0 | 00000000-0000-0000-0000-000000000000 | none:/ | mysql+pymysql://nova:****@train-1/nova_cell0 | False | | cell1 | 5360e154-62a1-4232-8bb7-8f4abcf5ad2b | rabbit://openstack:****@train-1:5672/ | mysql+pymysql://nova:****@train-1/nova | False | +-------+--------------------------------------+-----------------------------------------------+------------------------------------------------------+----------+  å¯åŠ¨ nova ç›¸å…³æœåŠ¡ \\ è®¾ç½®å¼€æœºè‡ªå¯  systemctl start \\ openstack-nova-api.service openstack-nova-scheduler.service \\ openstack-nova-conductor.service openstack-nova-novncproxy.service systemctl enable \\ openstack-nova-api.service openstack-nova-scheduler.service \\ openstack-nova-conductor.service openstack-nova-novncproxy.service    å®‰è£… nova ç»„ä»¶  yum install -y openstack-nova-compute  ä¿®æ”¹ /etc/nova/nova.conf é…ç½®æ–‡ä»¶  [DEFAULT] enabled_apis = osapi_compute,metadata transport_url = rabbit://openstack:openstack@train-1 my_ip = MANAGEMENT_INTERFACE_IP_ADDRESS use_neutron = true firewall_driver = nova.virt.firewall.NoopFirewallDriver [api] auth_strategy = keystone [keystone_authtoken] www_authenticate_uri = http://train-1:5000/ auth_url = http://train-1:5000/ memcached_servers = train-1:11211 auth_type = password project_domain_name = Default user_domain_name = Default project_name = service username = nova password = NOVA_PASS [vnc] enabled = true server_listen = 0.0.0.0 server_proxyclient_address = $my_ip novncproxy_base_url = http://train-1:6080/vnc_auto.html [glance] api_servers = http://train-1:9292 [oslo_concurrency] lock_path = /var/lib/nova/tmp [placement] region_name = RegionOne project_domain_name = Default project_name = service auth_type = password user_domain_name = Default auth_url = http://train-1:5000/v3 username = placement password = PLACEMENT_PASS  è™šæ‹ŸåŒ–æ–¹æ¡ˆç­›é€‰  egrep -c '(vmx|svm)' /proc/cpuinfo # å¦‚æœæ­¤å‘½ä»¤è¿”å›å€¼æ˜¯ 0ï¼Œåˆ™è®¡ç®—èŠ‚ç‚¹ä¸æ”¯æŒç¡¬ä»¶åŠ é€Ÿï¼Œå¹¶ä¸”å¿…é¡»é…ç½® libvirt ä¸º QEMU è€Œä¸æ˜¯ KVMï¼Œéœ€è¦ç¼–è¾‘ /etc/nova/nova.conf æ–‡ä»¶ä¸­çš„ [libvirt] éƒ¨åˆ† [libvirt] virt_type = qemu  å¯åŠ¨ nova æœåŠ¡ \\ è®¾ç½®å¼€æœºè‡ªå¯  systemctl start libvirtd.service openstack-nova-compute.service systemctl enable libvirtd.service openstack-nova-compute.service  neutron å®‰è£… neutron è½¯ä»¶  yum install -y openstack-neutron openstack-neutron-ml2 openstack-neutron-linuxbridge ebtables  ä¿®æ”¹ /etc/neutron/neutron.conf neutron é…ç½®æ–‡ä»¶  [database] connection = mysql+pymysql://neutron:NEUTRON_DBPASS@train-1/neutron [DEFAULT] core_plugin = ml2 service_plugins = transport_url = rabbit://openstack:openstack@train-1 auth_strategy = keystone notify_nova_on_port_status_changes = true notify_nova_on_port_data_changes = true [keystone_authtoken] www_authenticate_uri = http://train-1:5000 auth_url = http://train-1:5000 memcached_servers = train-1:11211 auth_type = password project_domain_name = default user_domain_name = default project_name = service username = neutron password = NEUTRON_PASS [nova] auth_url = http://train-1:5000 auth_type = password project_domain_name = default user_domain_name = default region_name = RegionOne project_name = service username = nova password = NOVA_PASS [oslo_concurrency] lock_path = /var/lib/neutron/tmp  ä¿®æ”¹ /etc/neutron/plugins/ml2/ml2_conf.ini ML2 plugin é…ç½®æ–‡ä»¶  [ml2] type_drivers = flat,vlan tenant_network_types = mechanism_drivers = linuxbridge extension_drivers = port_security [ml2_type_flat] flat_networks = provider [securitygroup] enable_ipset = true  ä¿®æ”¹ /etc/neutron/plugins/ml2/linuxbridge_agent.ini é…ç½®æ–‡ä»¶  [linux_bridge] physical_interface_mappings = provider:PROVIDER_INTERFACE_NAME [vxlan] enable_vxlan = false [securitygroup] enable_security_group = true firewall_driver = neutron.agent.linux.iptables_firewall.IptablesFirewallDriver  ä¿®æ”¹å†…æ ¸å‚æ•° /etc/sysctl.conf  vim /etc/sysctl.conf net.bridge.bridge-nf-call-iptables = 1 net.bridge.bridge-nf-call-ip6tables = 1 modprobe br_netfilter sysctl -p  ä¿®æ”¹ /etc/neutron/dhcp_agent.ini DHCP é…ç½®æ–‡ä»¶  [DEFAULT] interface_driver = linuxbridge dhcp_driver = neutron.agent.linux.dhcp.Dnsmasq enable_isolated_metadata = true  é…ç½® /etc/neutron/metadata_agent.ini metadata agent é…ç½®æ–‡ä»¶  [DEFAULT] nova_metadata_host = train-1 metadata_proxy_shared_secret = METADATA_SECRET  é…ç½®è®¡ç®—æœåŠ¡ä½¿ç”¨åˆšæ‰é…ç½®çš„ç½‘ç»œæœåŠ¡ï¼Œä¿®æ”¹ /etc/nova/nova.conf nova é…ç½®æ–‡ä»¶  [neutron] auth_url = http://train-1:5000 auth_type = password project_domain_name = default user_domain_name = default region_name = RegionOne project_name = service username = neutron password = NEUTRON_PASS service_metadata_proxy = true metadata_proxy_shared_secret = METADATA_SECRET  æœ€åå‡ æ­¥ï¼Œå»ºç«‹ ml2 è½¯é“¾  ln -s /etc/neutron/plugins/ml2/ml2_conf.ini /etc/neutron/plugin.ini  å¡«å…… neutron æ•°æ®åº“  su -s /bin/sh -c \u0026quot;neutron-db-manage --config-file /etc/neutron/neutron.conf \\ --config-file /etc/neutron/plugins/ml2/ml2_conf.ini upgrade head\u0026quot; neutron  é‡å¯ è®¡ç®—æœåŠ¡ API  systemctl restart openstack-nova-api.service  as  systemctl start \\ neutron-server.service neutron-linuxbridge-agent.service \\ neutron-dhcp-agent.service neutron-metadata-agent.service systemctl enable \\ neutron-server.service neutron-linuxbridge-agent.service \\ neutron-dhcp-agent.service neutron-metadata-agent.service    å®‰è£…ç›¸å…³ neutron æœåŠ¡  yum install -y openstack-neutron-linuxbridge ebtables ipset  é…ç½®é€šç”¨ç»„ä»¶ï¼Œä¿®æ”¹ /etc/neutron/neutron.conf é…ç½®æ–‡ä»¶  [DEFAULT] transport_url = rabbit://openstack:openstack@train-1 auth_strategy = keystone [keystone_authtoken] www_authenticate_uri = http://train-1:5000 auth_url = http://train-1:5000 memcached_servers = train-1:11211 auth_type = password project_domain_name = default user_domain_name = default project_name = service username = neutron password = NEUTRON_PASS [oslo_concurrency] lock_path = /var/lib/neutron/tmp   é…ç½® /etc/neutron/plugins/ml2/linuxbridge_agent.ini Linux bridge agent ä»£ç†  [linux_bridge] physical_interface_mappings = provider:PROVIDER_INTERFACE_NAME [vxlan] enable_vxlan = false [securitygroup] enable_security_group = true firewall_driver = neutron.agent.linux.iptables_firewall.IptablesFirewallDriver  ä¿®æ”¹å†…æ ¸å‚æ•° /etc/sysctl.conf  vim /etc/sysctl.conf net.bridge.bridge-nf-call-iptables = 1 net.bridge.bridge-nf-call-ip6tables = 1 modprobe br_netfilter sysctl -p   é…ç½®è®¡ç®—æœåŠ¡ä½¿ç”¨åˆšæ‰é…ç½®çš„ç½‘ç»œæœåŠ¡ï¼Œä¿®æ”¹ /etc/nova/nova.conf é…ç½®æ–‡ä»¶  [neutron] auth_url = http://train-1:5000 auth_type = password project_domain_name = default user_domain_name = default region_name = RegionOne project_name = service username = neutron password = NEUTRON_PASS  é‡å¯ nova è®¡ç®—æœåŠ¡  systemctl restart openstack-nova-compute.service  å¯åŠ¨ neutron ç›¸å…³æœåŠ¡  systemctl start neutron-linuxbridge-agent.service \u0026amp;\u0026amp; systemctl enable neutron-linuxbridge-agent.service  horizon  å®‰è£…è½¯ä»¶åŒ…  yum install openstack-dashboard  ä¿®æ”¹ /etc/openstack-dashboard/local_settings é…ç½®æ–‡ä»¶  OPENSTACK_HOST = \u0026quot;train-1\u0026quot; ALLOWED_HOSTS = ['one.example.com', 'two.example.com'] ALLOWED_HOSTS = ['horizon.example.com', 'localhost','*'] SESSION_ENGINE = 'django.contrib.sessions.backends.cache' CACHES = { 'default': { 'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache', 'LOCATION': 'train-1:11211', } } OPENSTACK_KEYSTONE_URL = \u0026quot;http://%s:5000/v3\u0026quot; % OPENSTACK_HOST OPENSTACK_KEYSTONE_MULTIDOMAIN_SUPPORT = True OPENSTACK_API_VERSIONS = { \u0026quot;identity\u0026quot;: 3, \u0026quot;image\u0026quot;: 2, \u0026quot;volume\u0026quot;: 3, } OPENSTACK_KEYSTONE_DEFAULT_DOMAIN = \u0026quot;Default\u0026quot; OPENSTACK_KEYSTONE_DEFAULT_ROLE = \u0026quot;user\u0026quot; OPENSTACK_NEUTRON_NETWORK = { ... 'enable_router': False, 'enable_quotas': False, 'enable_distributed_router': False, 'enable_ha_router': False, 'enable_lb': False, 'enable_firewall': False, 'enable_vpn': False, 'enable_fip_topology_check': False, } TIME_ZONE = \u0026quot;TIME_ZONE\u0026quot;  Add the following line to /etc/httpd/conf.d/openstack-dashboard.conf if not included.  WSGIApplicationGroup %{GLOBAL}  å¯åŠ¨  systemctl restart httpd.service memcached.service  ç”Ÿäº§é…ç½®æ–‡ä»¶**ã€Œï¼ï¼ä¸è¦åšè¿™æ­¥ã€**  cd /usr/share/openstack-dashboard python manage.py make_web_conf --apache \u0026gt; /etc/httpd/conf.d/openstack-dashboard.conf  åˆ›å»ºé“¾æ¥  ln -s /etc/openstack-dashboard /usr/share/openstack-dashboard/openstack_dashboard/conf  å‘  vim /usr/share/openstack-dashboard/openstack_dashboard/defaults.py vim /usr/share/openstack-dashboard/openstack_dashboard/test/settings.py vim /usr/share/openstack-dashboard/static/dashboard/js/9937cc9f2cae.js WEBROOT = '/' WEBROOT = '/dashboard'  é™„å½• ç•¥\n","id":18,"section":"posts","summary":"ğŸ‘Œ 2020-03-17 OpenStack Train å¿«é€Ÿç¦»çº¿éƒ¨ç½²ã€Œåœ¨çº¿ç±»ä¼¼ã€ æœ¬æ–‡æ¡£ä¸º openstack å¿«é€Ÿéƒ¨ç½²æ–‡æ¡£ï¼Œåªé€‚ç”¨äºå·²ç»ç†Ÿæ‚‰ openstack å„ä¸ªç»„ä»¶åŠå…¶éƒ¨ç½²æ–¹å¼å’Œå¯¹åº”å®‰è£…èŠ‚ç‚¹çš„ç»´æŠ¤äººå‘˜ æ–‡æ¡£é€‚ç”¨äºæ„å»º openstack å­¦ä¹ ç¯","tags":["OpenStack","Virtualization"],"title":"OpenStack Train å¿«é€Ÿç¦»çº¿éƒ¨ç½²ã€Œåœ¨çº¿ç±»ä¼¼ã€","uri":"https://blog.standuke.top/2020/03/2020-03-17-openstack-train-%E5%BF%AB%E9%80%9F%E7%A6%BB%E7%BA%BF%E9%83%A8%E7%BD%B2%E5%9C%A8%E7%BA%BF%E7%B1%BB%E4%BC%BC/","year":"2020"},{"content":"ğŸ‘Œ 2020-03-02 CentOS 7 CDH 6.3.1 Cloudera Manager 6.3.1 ä¼ä¸šçº§ç¦»çº¿å®‰è£…ç®€æ˜“ç‰ˆ  FileInfo Filename - 2020-03-02 CentOS 7 CDH 6.3.1 Cloudera Manager 6.3.1 ä¼ä¸šçº§ç¦»çº¿å®‰è£…ç®€æ˜“ç‰ˆ Version - v1.1.2003ï¼ˆ2020/03/02 ~ 2020/03/02ï¼‰ Author - standuke Email - shadowdoker@gmail.com DescriptionKey - CDH install quick version\n æœ¬æ–‡çº¦å®š åœ¨æ–‡ä¸­å°†æœ‰ä»¥ä¸‹æç¤ºç¬¦å¯¹é‡ç‚¹è¿›è¡Œæ ‡æ³¨è¯´æ˜ï¼Œè¯·æ³¨æ„æ–‡ä¸­æç¤ºã€‚\nâš ï¸ - æ–‡ä¸­å‡ºç°æ­¤æ ‡è®°ï¼Œä»£è¡¨é‡è¦æç¤ºï¼ŒæŒ‡éœ€è¦æ ¼å¤–æ³¨æ„çš„åœ°æ–¹ ğŸ”˜ - æ–‡ä¸­å‡ºç°æ­¤æ ‡è®°ï¼Œä»£è¡¨å¯é€‰é…ç½®ï¼Œå»ºè®®é…ç½®ï¼Œä½†ä¸å¿…è¦ âœ… - æ–‡ä¸­å‡ºç°æ­¤æ ‡è®°ï¼Œä»£è¡¨æ£€æŸ¥é¡¹ç›®ï¼Œéœ€è¦æ£€æŸ¥å¯¹åº”çš„é…ç½®æ–‡ä»¶ â—ï¸ - æ–‡ä¸­å‡ºç°æ­¤æ ‡è®°ï¼Œä»£è¡¨è¯¥æ“ä½œä¸å¯éšæ„ä¿®æ”¹ï¼Œå¦‚æ›´æ”¹æ­¤æ­¥æ“ä½œï¼Œè¯·é¢„å…ˆæµ‹è¯•\nCDH ç®€å•ä»‹ç» Cloudera Distribution including Apache Hadoop - CDH ä¸º Cloudera çš„å¼€æº Apache Hadoop å‘è¡Œç‰ˆï¼Œé¢å‘ Hadoop ä¼ä¸šçº§éƒ¨ç½²ã€‚ Clouderaç‰ˆæœ¬ï¼ˆCloudera\u0026rsquo;s Distribution Including Apache Hadoopï¼Œç®€ç§°\u0026quot;CDH\u0026quot;ï¼‰ï¼ŒåŸºäº Web çš„ç”¨æˆ·ç•Œé¢ï¼Œæ”¯æŒå¤§å¤šæ•° Hadoop ç»„ä»¶ï¼ŒåŒ…æ‹¬ HDFSã€MapReduceã€Hiveã€Pigã€Hbaseã€Zookeeperã€Sqoopï¼Œç®€åŒ–äº†å¤§æ•°æ®å¹³å°çš„å®‰è£…å’Œä½¿ç”¨éš¾åº¦ã€‚ é™¤æ­¤ Apache Hadoop å‘è¡Œç‰ˆæœ¬ä¹‹å¤–ï¼Œè¿˜æœ‰å¦‚ä¸‹å‘è¡Œç‰ˆï¼š\n Cloudera\u0026rsquo;s Distribution Including Apache Hadoopï¼ˆCDHï¼‰ã€Œæœ¬æ–‡é‡‡ç”¨ã€ Hortonworks Data Platform (HDP) MapR EMR  ç»„ä»¶ä»‹ç» Cloudera Manager æ˜¯ç”¨äºç®¡ç† CDH é›†ç¾¤çš„ç«¯åˆ°ç«¯åº”ç”¨ç¨‹åºï¼Œç»Ÿä¸€ç®¡ç†å’Œå®‰è£…ã€‚CDH é™¤äº†å¯ä»¥é€šè¿‡ CM å®‰è£…ä¹Ÿå¯ä»¥é€šè¿‡ YUMã€TARã€RPM å®‰è£…ã€‚ä¸»è¦ç”±å¦‚ä¸‹å‡ éƒ¨åˆ†ç»„æˆï¼š\n Serverï¼šCloudera Manager çš„æ ¸å¿ƒã€‚ä¸»è¦ç”¨äºç®¡ç† web server å’Œåº”ç”¨é€»è¾‘ã€‚å®ƒç”¨äºå®‰è£…è½¯ä»¶ï¼Œé…ç½®ï¼Œå¼€å§‹å’Œåœæ­¢æœåŠ¡ï¼Œä»¥åŠç®¡ç†æœåŠ¡è¿è¡Œçš„é›†ç¾¤ã€‚ agentï¼šå®‰è£…åœ¨æ¯å°ä¸»æœºä¸Šã€‚å®ƒè´Ÿè´£å¯åŠ¨å’Œåœæ­¢è¿›ç¨‹ï¼Œéƒ¨ç½²é…ç½®ï¼Œè§¦å‘å®‰è£…å’Œç›‘æ§ä¸»æœºã€‚ Databaseï¼šå­˜å‚¨é…ç½®å’Œç›‘æ§ä¿¡æ¯ã€‚é€šå¸¸å¯ä»¥åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®åº“æœåŠ¡å™¨ä¸Šè¿è¡Œçš„å¤šä¸ªé€»è¾‘æ•°æ®åº“ã€‚ä¾‹å¦‚ï¼Œæ‰€è¿°çš„ Cloudera ç®¡ç†å™¨æœåŠ¡å’Œç›‘è§†ï¼Œåå°ç¨‹åºä½¿ç”¨ä¸åŒçš„é€»è¾‘æ•°æ®åº“ã€‚ Parcelï¼ˆCloudera Repositoryï¼‰ï¼šç”± Cloudera æä¾›çš„è½¯ä»¶åˆ†å‘åº“ã€‚ Clientsï¼šæä¾›äº†ä¸€ä¸ªä¸ Server äº¤äº’çš„æ¥å£ã€‚  èŠ‚ç‚¹ä»‹ç»    NAME NUMBER æè¿°     Server 1 CM ä¸­ Manager èŠ‚ç‚¹   Agent 1+N CM ä¸­ å…¶ä½™ Node èŠ‚ç‚¹    ALL æ‰€æœ‰èŠ‚ç‚¹  â—ï¸å…³é—­å¹¶ç¦æ­¢å¼€æœºè‡ªå¯å¦‚ä¸‹æœåŠ¡ï¼šç³»ç»Ÿé˜²ç«å¢™ï¼ˆFirewalldã€iptablesï¼‰ã€NetworkManager  systemctl stop firewalld systemctl stop iptables systemctl stop NetworkManager systemctl disable firewalld systemctl disable iptables systemctl disable NetworkManager   â—ï¸å…³é—­å¹¶ç¦ç”¨ SELinux  sed -i 's#SELINUX=enforcing#SELINUX=disabled#g' /etc/selinux/config   â—ï¸æ°¸ä¹…ä¿®æ”¹å„èŠ‚ç‚¹çš„ Hostname å¿…é¡»é˜²æ­¢å˜å›é»˜è®¤  hostnamectl set-hostname $HOSTNAME   â—ï¸æ·»åŠ æœåŠ¡å™¨ä¹‹é—´æœ¬åœ°åŸŸåè§£æ /etc/hosts  vi /etc/hosts # incloud itself # 192.168.10.1 localhost localhost.localhost   â—ï¸é…ç½®ä»…ä½¿ç”¨ç‰©ç†å†…å­˜ï¼Œæ‰€æœ‰ä¸»æœºéƒ½éœ€è¦  echo \u0026quot;vm.swappiness=0\u0026quot; \u0026gt;\u0026gt;/etc/sysctl.conf \u0026amp;\u0026amp; sysctl -p   â—ï¸ç¦ç”¨é€æ˜é¡µå‹ç¼©ï¼Œæ‰€æœ‰ä¸»æœºéƒ½éœ€è¦  echo \u0026quot;never\u0026quot; \u0026gt; /sys/kernel/mm/transparent_hugepage/defrag echo \u0026quot;never\u0026quot; \u0026gt; /sys/kernel/mm/transparent_hugepage/enabled chmod +x /etc/rc.local echo \u0026quot;echo 'never' \u0026gt; /sys/kernel/mm/transparent_hugepage/defrag\u0026quot; \u0026gt;\u0026gt; /etc/rc.local echo \u0026quot;echo 'never' \u0026gt; /sys/kernel/mm/transparent_hugepage/enabled\u0026quot; \u0026gt;\u0026gt; /etc/rc.local tail â€2f /sys/kernel/mm/transparent_hugepage/defrag tail â€2f /sys/kernel/mm/transparent_hugepage/enabled tail â€2f /etc/rc.local  echo never \u0026gt; /sys/kernel/mm/transparent_hugepage/defrag echo never \u0026gt; /sys/kernel/mm/transparent_hugepage/enabled\n â—ï¸âš ï¸ é…ç½®ä¸ªèŠ‚ç‚¹æ—¶é—´åŒæ­¥ï¼Œç¡®ä¿å„ä¸ªèŠ‚ç‚¹æ—¶é—´è¯¯å·®æœ€å¤§ä¸å¾—é«˜äº 2s  yum -y install ntp  server\n# ç®¡ç†èŠ‚ç‚¹ä½¿ç”¨æœ¬åœ°æ—¶é’Ÿæº,æ‰§è¡Œä»¥ä¸‹è¯­å¥å³å¯ cat \u0026lt;\u0026lt;EOF\u0026gt;/etc/ntp.conf driftfile /var/lib/ntp/drift restrict default kod nomodify notrap nopeer noquery restrict -6 default kod nomodify notrap nopeer noquery restrict 127.0.0.1 restrict -6 ::1 server 127.127.1.0 iburst includefile /etc/ntp/crypto/pw keys /etc/ntp/keys EOF  agent\n# å…¶ä»–èŠ‚ç‚¹çš„æ—¶é’Ÿæºä¸ºç®¡ç†èŠ‚ç‚¹ï¼Œæ‰§è¡Œä»¥ä¸‹è¯­å¥å³å¯ cat \u0026lt;\u0026lt;EOF\u0026gt;/etc/ntp.conf driftfile /var/lib/ntp/drift restrict default kod nomodify notrap nopeer noquery restrict -6 default kod nomodify notrap nopeer noquery restrict 127.0.0.1 restrict -6 ::1 server node1 iburst includefile /etc/ntp/crypto/pw keys /etc/ntp/keys EOF  å¼ºåˆ¶è®¾ç½®æ—¶é—´ï¼Œå†™å…¥ç¡¬ä»¶æ—¶é’Ÿ\n# ä¿®æ”¹å„èŠ‚ç‚¹æ—¶é—´,æ—¶é—´ä¸ºå½“å‰æ—¶é—´ date -s \u0026quot;2020-04-16 23:11:07\u0026quot; # å†™å…¥ç¡¬ä»¶æ—¶é’Ÿ hwclock -w  å¯åŠ¨æœåŠ¡ï¼Œå¹¶è®¾ç½®å¼€æœºè‡ªå¯åŠ¨\n# å„èŠ‚ç‚¹å¯åŠ¨æœåŠ¡ systemctl start ntpd \u0026amp;\u0026amp; systemctl enable ntpd   ğŸ”˜é…ç½® Java è¿è¡Œç¯å¢ƒï¼Œå»ºè®®å®‰è£… JDK 1.8.0_161ï¼ˆäº¦å¯é€‰æ‹©å®‰è£… CDH æ—¶ï¼Œé€‰æ‹©å®‰è£… CDH è‡ªå¸¦çš„ Oracle JDKï¼‰  # JDK å®‰è£…è·¯å¾„ mkdir -p /usr/local/java  è‹¥æ“ä½œç³»ç»Ÿå®‰è£…æœ‰ OpenJDK åˆ™ç§»é™¤ç³»ç»ŸåŸæœ‰çš„ JDK\n# å„èŠ‚ç‚¹éƒ½éœ€è¦è¿›è¡Œ # æŸ¥æ‰¾JDK rpm -aq|grep java rpm -aq|grep jdk # å¸è½½JDK yum -y remove [ä¸Šè¿°æŸ¥æ‰¾ç»“æœçš„åŒ…å]  å®‰è£… Oracle JDK 1.8\n# åœ¨å„èŠ‚ç‚¹ä¸Šè¿›è¡Œå®‰è£… # åˆ›å»ºjavaç›®å½• mkdir /usr/java/ # ä¸Šä¼ jdkç›®å½•ä¸‹jdk-8u161-linux-x64.tar.gzåˆ°/usr/javaç›®å½• å¹¶è§£å‹ cd /usr/java/ tar -zxvf jdk-8u161-linux-x64.tar.gz # âš ï¸ ä¿®æ”¹ jdk æ‰€å±ç”¨æˆ·ç”¨æˆ·ç»„ chown root:root jdk-8u161-linux-x64 # é…ç½®ç¯å¢ƒå˜é‡ vi /etc/profile # åœ¨åé¢è¿½åŠ ä¸‹é¢ä¸‰è¡Œ export JAVA_HOME=/usr/java/jdk1.8.0_161 export CLASSPATH=.:${JAVA_HOME}/lib/dt.jar:${JAVA_HOME}/lib/tools.jar export PATH=${JAVA_HOME}/bin:${PATH} # æœ€ååˆ·æ–°ç¯å¢ƒå˜é‡ source /etc/profile # æŸ¥çœ‹ Java æ˜¯å¦å®‰è£…æˆåŠŸ java -version  Server èŠ‚ç‚¹ ğŸ”˜ è‹¥æ“ä½œç³»ç»Ÿå®‰è£…æœ‰ mariadb åˆ™æ‰‹å·¥ç§»é™¤mariadbæ•°æ®åº“ âš ï¸ äº¦å¯ä¸ç§»é™¤ï¼Œåœ¨å®‰è£… mysql æ˜¯ä¼šè‡ªåŠ¨å¤„ç†\n rpm -qa | grep mariadb # ç»“æœåº”ä¸º mariadb-libs-5.5.56-2.el7.x86_64 # å¸è½½ rpm -e --nodeps mariadb-libs-5.5.56-2.el7.x86_64  å®‰è£… MySql æœåŠ¡\n# åœ¨ server ä¸Šå®‰è£… mysql æœåŠ¡ # ä¸Šä¼ repoç›®å½•ä¸‹mysql-5.7.25-1.el7.x86_64.rpm-bundle.tarå®‰è£…åŒ…åˆ° /home/cdh/ ç›®å½• å¹¶è§£å‹ tar -xvf mysql-5.7.25-1.el7.x86_64.rpm-bundle.tar # è¿›å…¥è§£å‹ç›®å½• å®‰è£… mysql yum install net-tools rpm -ivh mysql-community-server-5.7.25-1.el7.x86_64.rpm mysql-community-client-5.7.25-1.el7.x86_64.rpm mysql-community-common-5.7.25-1.el7.x86_64.rpm mysql-community-libs-5.7.25-1.el7.x86_64.rpm mysql-community-libs-compat-5.7.25-1.el7.x86_64.rpm  å¯åŠ¨ mysql æœåŠ¡ï¼Œè®¾ç½®è‡ªå¯åŠ¨\n# åœ¨ serverä¸Šå¯åŠ¨ mysql æœåŠ¡,å¹¶è®¾ç½®è‡ªå¯åŠ¨ systemctl start mysqld systemctl enable mysqld  åˆå§‹åŒ– mysql æ•°æ®åº“\n# åœ¨node1 ä¸Šåˆå§‹åŒ–mysql # è·å¾—åˆå§‹å¯†ç  grep 'temporary password' /var/log/mysqld.log # ä½¿ç”¨åˆå§‹å¯†ç ç™»å½• mysql -u root -p # ä¿®æ”¹åˆå§‹å¯†ç  # show variables like 'validate_password%';# æŸ¥çœ‹å¯†ç éªŒè¯ç­–ç•¥ set global validate_password_policy=0;# è®¾ç½®å¯†ç éªŒè¯ç­–ç•¥ä¸ºä½ set global validate_password_mixed_case_count=0;# è®¾ç½®å¯†ç è‡³å°‘è¦åŒ…å«çš„å¤§å°å†™å­—æ¯ä¸ªæ•° set global validate_password_number_count=0;# è®¾ç½®å¯†ç è‡³å°‘è¦åŒ…å«çš„æ•°å­—ä¸ªæ•° set global validate_password_special_char_count=0;# è®¾ç½®å¯†ç è‡³å°‘è¦åŒ…å«çš„ç‰¹æ®Šå­—ç¬¦ä¸ªæ•° set global validate_password_length=2; # è®¾ç½®å¯†ç æœ€å°é•¿åº¦ä¸º2 ALTER USER 'root'@'localhost' IDENTIFIED BY '123456'; grant all privileges on *.* to 'root'@'localhost' identified by '123456' with grant option; grant all privileges on *.* to 'root'@'%' identified by '123456' with grant option; flush privileges; quit;   é…ç½® mysql jdbc é©±åŠ¨  # åœ¨å„èŠ‚ç‚¹ä¸Šæ‰§è¡Œ # ä¸Šä¼  repo ç›®å½•ä¸‹ mysql è¿æ¥ mysql-connector-java-5.1.47.jar åˆ° /usr/share/java âš ï¸ mkdir -p /usr/share/java # é‡å‘½å âš ï¸ mv mysql-connector-java-5.1.47.jar mysql-connector-java.jar # æˆæƒ âš ï¸ chmod 777 mysql-connector-java.jar   å®‰è£… daemons agent server   yum -y install cloudera-manager-agent cloudera-manager-daemons cloudera-manager-server   åˆå§‹åŒ– CM ç›¸å…³æ•°æ®åº“  ##æ‰§è¡Œæ•°æ®åº“è„šæœ¬ cd /opt/cloudera/cm/schema ./scm_prepare_database.sh mysql -uroot -p scm scm scm   ä¿®æ”¹ agent é…ç½®æ–‡ä»¶  vi /etc/cloudera-scm-agent/config.ini server=$SERVERHOSTNAME  Agent èŠ‚ç‚¹  å®‰è£… daemons agent  yum -y install cloudera-manager-agent cloudera-manager-daemo   ä¿®æ”¹ agent é…ç½®æ–‡ä»¶  vi /etc/cloudera-scm-agent/config.ini server=$SERVERHOSTNAME  å¼€å§‹å¯åŠ¨æœåŠ¡ server\nsystemctl start cloudera-scm-server systemctl enable cloudera-scm-server systemctl start cloudera-scm-agent systemctl enable cloudera-scm-agent  agent\nsystemctl start cloudera-scm-agent systemctl enable cloudera-scm-agent  ç½‘é¡µæ“ä½œ http://server:7180 é»˜è®¤ç”¨æˆ·åä¸º admin é»˜è®¤å¯†ç ä¸º admin\né™„å½• ç»„ä»¶å»ºè¡¨è¯­å¥\nmysql -uroot -p123456 ##ç»™scmæˆæƒ grant all privileges on *.* to 'scm'@'localhost' identified by 'scm' with grant option; grant all privileges on *.* to 'scm'@'%' identified by 'scm' with grant option; ##åˆ›å»ºhiveæ•°æ®åº“ create database hive DEFAULT CHARSET utf8 COLLATE utf8_general_ci; ##ç»™hiveæˆæƒ grant all privileges on *.* to 'hive'@'localhost' identified by 'hive' with grant option; grant all privileges on *.* to 'hive'@'%' identified by 'hive' with grant option; ##åˆ›å»ºoozieæ•°æ®åº“ create database oozie DEFAULT CHARSET utf8 COLLATE utf8_general_ci; ##ç»™oozieæˆæƒ grant all privileges on *.* to 'oozie'@'localhost' identified by 'oozie' with grant option; grant all privileges on *.* to 'oozie'@'%' identified by 'oozie' with grant option; ##åˆ›å»ºhueæ•°æ®åº“ create database hue DEFAULT CHARSET utf8 COLLATE utf8_general_ci; ##ç»™hubæˆæƒ grant all privileges on *.* to 'hue'@'localhost' identified by 'hue' with grant option; grant all privileges on *.* to 'hue'@'%' identified by 'hue' with grant option; ##åˆ›å»ºAMæ•°æ®åº“ create database am DEFAULT CHARSET utf8 COLLATE utf8_general_ci; ##ç»™AMæˆæƒ grant all privileges on *.* to 'am'@'localhost' identified by 'am' with grant option; grant all privileges on *.* to 'am'@'%' identified by 'am' with grant option; ##åˆ·æ–°æƒé™ flush privileges; ##é€€å‡º quit;   é™„å½•ç»“æŸ\nç‰ˆæœ¬ä¿®è®¢è®°å½•    ç‰ˆæœ¬å· ä¿®è®¢æ—¥æœŸ ä¿®è®¢äºº å¤‡æ³¨     v1.1.2003 2020-03-02 nuo åˆ›å»ºæ–‡æ¡£    ","id":19,"section":"posts","summary":"ğŸ‘Œ 2020-03-02 CentOS 7 CDH 6.3.1 Cloudera Manager 6.3.1 ä¼ä¸šçº§ç¦»çº¿å®‰è£…ç®€æ˜“ç‰ˆ FileInfo Filename - 2020-03-02 CentOS 7 CDH 6.3.1 Cloudera Manager 6.3.1 ä¼ä¸šçº§ç¦»çº¿å®‰è£…ç®€æ˜“ç‰ˆ Version - v1.1.2003ï¼ˆ2020/03/02 ~ 2020/03","tags":["CDH","Cloudera","Bigdata"],"title":"CentOS 7 CDH 6.3.1 Cloudera Manager 6.3.1 ä¼ä¸šçº§ç¦»çº¿å®‰è£…ç®€æ˜“ç‰ˆ","uri":"https://blog.standuke.top/2020/03/2020-03-02-centos-7-cdh-6.3.1-cloudera-manager-6.3.1-%E4%BC%81%E4%B8%9A%E7%BA%A7%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85-ez-%E7%89%88/","year":"2020"},{"content":"ğŸ‘Œ 2020-02-17 Linux ç³»ç»Ÿ systemd æœåŠ¡ç®€ä»‹åŠç¼–å†™  FileInfo Filename - Linux ç¼–å†™ç³»ç»Ÿ systemd æœåŠ¡.md Version - v1.1.2002ï¼ˆ2020/02/18 ~ 2020/02/19ï¼‰ Author - standuke Email - shadowdoker@gmail.com DescriptionKey - Linux Systemd Configure Set\n æœ¬æ–‡çº¦å®š åœ¨æ–‡ä¸­å°†æœ‰ä»¥ä¸‹æç¤ºç¬¦å¯¹é‡ç‚¹è¿›è¡Œæ ‡æ³¨è¯´æ˜ï¼Œè¯·æ³¨æ„æ–‡ä¸­æç¤ºã€‚\nâš ï¸ - æ–‡ä¸­å‡ºç°æ­¤æ ‡è®°ï¼Œä»£è¡¨é‡è¦æç¤ºï¼ŒæŒ‡éœ€è¦æ ¼å¤–æ³¨æ„çš„åœ°æ–¹ ğŸ”˜ - æ–‡ä¸­å‡ºç°æ­¤æ ‡è®°ï¼Œä»£è¡¨å¯é€‰é…ç½®ï¼Œå»ºè®®é…ç½®ï¼Œä½†ä¸å¿…è¦ âœ… - æ–‡ä¸­å‡ºç°æ­¤æ ‡è®°ï¼Œä»£è¡¨æ£€æŸ¥é¡¹ç›®ï¼Œéœ€è¦æ£€æŸ¥å¯¹åº”çš„é…ç½®æ–‡ä»¶ â—ï¸ - æ–‡ä¸­å‡ºç°æ­¤æ ‡è®°ï¼Œä»£è¡¨è¯¥æ“ä½œä¸å¯éšæ„ä¿®æ”¹ï¼Œå¦‚æ›´æ”¹æ­¤æ­¥æ“ä½œï¼Œè¯·é¢„å…ˆæµ‹è¯•\n[TOC]\nsystemd æ¦‚è¿° Red Hat Enterprise Linux 7ï¼ˆRHEL7ï¼‰å·²ç»å°†æœåŠ¡ç®¡ç†å·¥å…·ä» SysVinit å’Œ Upstartï¼ˆubuntuï¼‰ è¿ç§»åˆ°äº† systemd ä¸Šã€‚ ä¹‹å‰ç‰ˆæœ¬çš„æ‰€æœ‰å¯åŠ¨è„šæœ¬éƒ½æ˜¯æ”¾åœ¨ /etc/rc.d/init.d/ ç›®å½•ä¸‹ã€‚è¿™äº›è„šæœ¬éƒ½æ˜¯ bash è„šæœ¬ï¼Œå¯ä»¥è®©ç³»ç»Ÿç®¡ç†å‘˜æ§åˆ¶è¿™äº›æœåŠ¡çš„çŠ¶æ€ã€‚é€šå¸¸ï¼Œè¿™äº›è„šæœ¬ä¸­åŒ…å«äº† start \\ stop \\ restart è¿™äº›æ–¹æ³•ï¼Œä»¥æä¾›ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚ä½†æ˜¯åœ¨ RHEL7 ä¸­å·²ç»å®Œå…¨æ‘’å¼ƒäº†è¿™ç§æ–¹æ³•ï¼Œè€Œé‡‡ç”¨äº†ä¸€ç§å« systemd çš„ unit çš„é…ç½®æ–‡ä»¶æ¥ç®¡ç†æœåŠ¡ã€‚ unit æ–‡ä»¶å¯ç”¨æ¥æè¿°ï¼šç³»ç»ŸæœåŠ¡ï¼ˆ.serviceï¼‰ã€æŒ‚è½½ç‚¹ï¼ˆ.mountï¼‰ã€socketsï¼ˆ.socketsï¼‰ã€ç³»ç»Ÿè®¾å¤‡ï¼ˆ.deviceï¼‰ã€äº¤æ¢åˆ†åŒºï¼ˆ.swapï¼‰ã€æ–‡ä»¶è·¯å¾„ï¼ˆ.pathï¼‰ã€å¯åŠ¨ç›®æ ‡ï¼ˆ.targetï¼‰ã€ç”± systemd ç®¡ç†çš„è®¡æ—¶å™¨ï¼ˆ.timerï¼‰\nsystemd å‘½ä»¤é›†  systemctl æ˜¯ Systemd çš„ä¸»å‘½ä»¤ï¼Œç”¨äºç®¡ç†ç³»ç»Ÿã€‚ systemd-analyze ç”¨äºæŸ¥çœ‹å¯åŠ¨è€—æ—¶ã€‚ hostnamectl ç”¨äºæŸ¥çœ‹å½“å‰ä¸»æœºçš„ä¿¡æ¯ã€‚ localectl ç”¨äºæŸ¥çœ‹æœ¬åœ°åŒ–è®¾ç½®ã€‚ timedatectl ç”¨äºæŸ¥çœ‹å½“å‰æ—¶åŒºè®¾ç½®ã€‚ loginctl ç”¨äºæŸ¥çœ‹å½“å‰ç™»å½•çš„ç”¨æˆ·ã€‚  RHEL7 æœåŠ¡å¯åŠ¨ç›¸å…³æ–‡ä»¶ init åœ¨ RHEL7 ç§ä¸å¯åŠ¨ç›¸å…³çš„ SysVinitï¼ˆinitï¼‰ æ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹å¦‚ä¸‹æ‰€ç¤ºï¼Œå¤§éƒ¨åˆ†ä½¿ç”¨çš„æ–‡ä»¶éƒ½æ˜¯è½¯é“¾æ¥\nll /etc/ lrwxrwxrwx. 1 root root 11 1æœˆ 16 08:59 init.d -\u0026gt; rc.d/init.d // inittab å·²å¼ƒç”¨ -rw-r--r--. 1 root root 511 8æœˆ 9 2019 inittab lrwxrwxrwx. 1 root root 10 1æœˆ 16 08:59 rc0.d -\u0026gt; rc.d/rc0.d lrwxrwxrwx. 1 root root 10 1æœˆ 16 08:59 rc1.d -\u0026gt; rc.d/rc1.d lrwxrwxrwx. 1 root root 10 1æœˆ 16 08:59 rc2.d -\u0026gt; rc.d/rc2.d lrwxrwxrwx. 1 root root 10 1æœˆ 16 08:59 rc3.d -\u0026gt; rc.d/rc3.d lrwxrwxrwx. 1 root root 10 1æœˆ 16 08:59 rc4.d -\u0026gt; rc.d/rc4.d lrwxrwxrwx. 1 root root 10 1æœˆ 16 08:59 rc5.d -\u0026gt; rc.d/rc5.d lrwxrwxrwx. 1 root root 10 1æœˆ 16 08:59 rc6.d -\u0026gt; rc.d/rc6.d drwxr-xr-x. 10 root root 127 1æœˆ 16 08:59 rc.d lrwxrwxrwx. 1 root root 13 1æœˆ 16 08:59 rc.local -\u0026gt; rc.d/rc.local ll /etc/rc.d/ drwxr-xr-x. 2 root root 70 1æœˆ 16 08:59 init.d drwxr-xr-x. 2 root root 45 1æœˆ 16 08:59 rc0.d drwxr-xr-x. 2 root root 45 1æœˆ 16 08:59 rc1.d drwxr-xr-x. 2 root root 45 1æœˆ 16 08:59 rc2.d drwxr-xr-x. 2 root root 45 1æœˆ 16 08:59 rc3.d drwxr-xr-x. 2 root root 45 1æœˆ 16 08:59 rc4.d drwxr-xr-x. 2 root root 45 1æœˆ 16 08:59 rc5.d drwxr-xr-x. 2 root root 45 1æœˆ 16 08:59 rc6.d -rw-r--r--. 1 root root 473 8æœˆ 8 2019 rc.local  systemd åœ¨ RHEL7 ç§ä¸å¯åŠ¨ç›¸å…³çš„ systemd æ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹å¦‚ä¸‹æ‰€ç¤º\n/etc/systemd/system/* # ä¾›ç³»ç»Ÿç®¡ç†å‘˜å’Œç”¨æˆ·ä½¿ç”¨ âš ï¸ è‡ªå®šä¹‰æœåŠ¡éœ€è¦æ”¾ç½®åœ¨è¯¥ç›®å½• /run/systemd/system/* # è¿è¡Œæ—¶é…ç½®æ–‡ä»¶ /usr/lib/systemd/system/* # å®‰è£…ç¨‹åºæ—¶é»˜è®¤çš„ unit æ–‡ä»¶å­˜æ”¾ä½ç½®ï¼ˆå¦‚ RPM åŒ…å®‰è£…ï¼‰  ç¼–å†™ä¸€ä¸ª æœåŠ¡  ç¼–å†™ unit æ–‡ä»¶ demo.service  [Unit] Description=My-demo Service [Service] Type=oneshot ExecStart=/bin/bash /root/test.sh StandardOutput=syslog StandardError=inherit [Install] WantedBy=multi-user.target  å°†ä¸Šè¿°çš„æ–‡ä»¶æ‹·è´åˆ° RHEL7 ç³»ç»Ÿä¸­ /usr/lib/systemd/system/* ç›®å½•ä¸‹  cp demo.service /usr/lib/systemd/system/demo.service  ç¼–å†™ unit æ–‡ä»¶ä¸­ ExecStart=/bin/bash /root/test.sh æ‰€å®šä¹‰çš„ test.sh æ–‡ä»¶ï¼Œå°†å…¶æ”¾åœ¨å®šä¹‰çš„ç›®å½•å½“ä¸­ï¼Œæ­¤æ–‡ä»¶æ˜¯æœåŠ¡çš„æ‰§è¡Œä¸»ä½“ã€‚  #!/bin/bash date \u0026gt;\u0026gt; /tmp/date  å°† demo.service è®¾ç½®ä¸ºå¼€æœºè‡ªå¯  systemctl enable demo.service  å…³é”®è¯è¯¦è§£  [Unit]ï¼šè®°å½•unitæ–‡ä»¶çš„é€šç”¨ä¿¡æ¯ [Service]ï¼šè®°å½•Serviceçš„ä¿¡æ¯ [Install]ï¼šå®‰è£…ä¿¡æ¯\n Unit â—Â Descriptionï¼šå¯¹æœ¬serviceçš„æè¿°ã€‚ â—Â Before, Afterï¼šå®šä¹‰å¯åŠ¨é¡ºåºï¼ŒBefore=xxx.serviceï¼Œä»£è¡¨æœ¬æœåŠ¡åœ¨xxx.serviceå¯åŠ¨ä¹‹å‰å¯åŠ¨ã€‚After=xxx.service,ä»£è¡¨æœ¬æœåŠ¡åœ¨xxxä¹‹åå¯åŠ¨ã€‚ â—Â Requires: è¿™ä¸ªå•å…ƒå¯åŠ¨äº†ï¼Œé‚£ä¹ˆå®ƒ\u0026quot;éœ€è¦\u0026quot;çš„å•å…ƒä¹Ÿä¼šè¢«å¯åŠ¨; å®ƒ\u0026quot;éœ€è¦\u0026quot;çš„å•å…ƒè¢«åœæ­¢äº†ï¼Œå®ƒè‡ªå·±ä¹Ÿæ´»ä¸äº†ã€‚ä½†æ˜¯è¯·æ³¨æ„ï¼Œè¿™ä¸ªè®¾å®šå¹¶ä¸èƒ½æ§åˆ¶æŸå•å…ƒä¸å®ƒ\u0026quot;éœ€è¦\u0026quot;çš„å•å…ƒçš„å¯åŠ¨é¡ºåºï¼ˆå¯åŠ¨é¡ºåºæ˜¯å¦å¤–æ§åˆ¶çš„ï¼‰ï¼Œå³ Systemd ä¸æ˜¯å…ˆå¯åŠ¨ Requires å†å¯åŠ¨æœ¬å•å…ƒï¼Œè€Œæ˜¯åœ¨æœ¬å•å…ƒè¢«æ¿€æ´»æ—¶ï¼Œå¹¶è¡Œå¯åŠ¨ä¸¤è€…ã€‚äºæ˜¯ä¼šäº§ç”Ÿäº‰åˆ†å¤ºç§’çš„é—®é¢˜ï¼Œå¦‚æœ Requires å…ˆå¯åŠ¨æˆåŠŸï¼Œé‚£ä¹ˆçš†å¤§æ¬¢å–œ; å¦‚æœ Requires å¯åŠ¨å¾—æ…¢ï¼Œé‚£æœ¬å•å…ƒå°±ä¼šå¤±è´¥ï¼ˆSystemd æ²¡æœ‰è‡ªåŠ¨é‡è¯•ï¼‰ã€‚æ‰€ä»¥ä¸ºäº†ç³»ç»Ÿçš„å¥å£®æ€§ï¼Œä¸å»ºè®®ä½¿ç”¨è¿™ä¸ªæ ‡è®°ï¼Œè€Œå»ºè®®ä½¿ç”¨ Wants æ ‡è®°ã€‚å¯ä»¥ä½¿ç”¨å¤šä¸ª Requiresã€‚ â—Â RequiresOverridableï¼šè·Ÿ Requires å¾ˆåƒã€‚ä½†æ˜¯å¦‚æœè¿™æ¡æœåŠ¡æ˜¯ç”±ç”¨æˆ·æ‰‹åŠ¨å¯åŠ¨çš„ï¼Œé‚£ä¹ˆ RequiresOverridable åé¢çš„æœåŠ¡å³ä½¿å¯åŠ¨ä¸æˆåŠŸä¹Ÿä¸æŠ¥é”™ã€‚è·Ÿ Requires æ¯”å¢åŠ äº†ä¸€å®šå®¹é”™æ€§ï¼Œä½†æ˜¯ä½ è¦ç¡®å®šä½ çš„æœåŠ¡æ˜¯æœ‰ç­‰å¾…åŠŸèƒ½çš„ã€‚å¦å¤–ï¼Œå¦‚æœä¸ç”±ç”¨æˆ·æ‰‹åŠ¨å¯åŠ¨è€Œæ˜¯éšç³»ç»Ÿå¼€æœºå¯åŠ¨ï¼Œé‚£ä¹ˆä¾ç„¶ä¼šæœ‰ Requires é¢ä¸´çš„é—®é¢˜ã€‚ â—Â Requisiteï¼šå¼ºåŠ¿ç‰ˆæœ¬çš„ Requiresã€‚è¦æ˜¯è¿™é‡Œéœ€è¦çš„æœåŠ¡å¯åŠ¨ä¸æˆåŠŸï¼Œé‚£æœ¬å•å…ƒæ–‡ä»¶ä¸ç®¡èƒ½ä¸èƒ½æ£€æµ‹ç­‰ä¸èƒ½ç­‰å¾…éƒ½ç«‹åˆ»å°±ä¼šå¤±è´¥ã€‚ â—Â Wantsï¼šæ¨èä½¿ç”¨ã€‚æœ¬å•å…ƒå¯åŠ¨äº†ï¼Œå®ƒ\u0026quot;æƒ³è¦\u0026quot;çš„å•å…ƒä¹Ÿä¼šè¢«å¯åŠ¨ã€‚ä½†æ˜¯å¯åŠ¨ä¸æˆåŠŸï¼Œå¯¹æœ¬å•å…ƒæ²¡æœ‰å½±å“ã€‚ â—Â Conflictsï¼šä¸€ä¸ªå•å…ƒçš„å¯åŠ¨ä¼šåœæ­¢ä¸å®ƒ\u0026quot;å†²çª\u0026quot;çš„å•å…ƒï¼Œåä¹‹äº¦ç„¶ã€‚\nService â—Â Typeï¼šserviceçš„ç§ç±»ï¼ŒåŒ…å«ä¸‹åˆ—å‡ ç§ç±»å‹ï¼š \u0026mdash;-simple é»˜è®¤ï¼Œè¿™æ˜¯æœ€ç®€å•çš„æœåŠ¡ç±»å‹ã€‚æ„æ€å°±æ˜¯è¯´å¯åŠ¨çš„ç¨‹åºå°±æ˜¯ä¸»ä½“ç¨‹åºï¼Œè¿™ä¸ªç¨‹åºè¦æ˜¯é€€å‡ºé‚£ä¹ˆä¸€åˆ‡éƒ½é€€å‡ºã€‚ \u0026mdash;\u0026ndash;forking æ ‡å‡† Unix Daemon ä½¿ç”¨çš„å¯åŠ¨æ–¹å¼ã€‚å¯åŠ¨ç¨‹åºåä¼šè°ƒç”¨ fork() å‡½æ•°ï¼ŒæŠŠå¿…è¦çš„é€šä¿¡é¢‘é“éƒ½è®¾ç½®å¥½ä¹‹åçˆ¶è¿›ç¨‹é€€å‡ºï¼Œç•™ä¸‹å®ˆæŠ¤ç²¾çµçš„å­è¿›ç¨‹ \u0026mdash;\u0026ndash;oneshotç§æœåŠ¡ç±»å‹å°±æ˜¯å¯åŠ¨ï¼Œå®Œæˆï¼Œæ²¡è¿›ç¨‹äº†ã€‚ notify,idleç±»å‹æ¯”è¾ƒå°‘è§ï¼Œä¸ä»‹ç»ã€‚ â—Â ExecStartï¼šæœåŠ¡å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œé€šå¸¸æ­¤å‘½ä»¤å°±æ˜¯æœåŠ¡çš„ä¸»ä½“ã€‚ \u0026mdash;\u0026mdash;å¦‚æœä½ æœåŠ¡çš„ç±»å‹ä¸æ˜¯ oneshotï¼Œé‚£ä¹ˆå®ƒåªå¯ä»¥æ¥å—ä¸€ä¸ªå‘½ä»¤ï¼Œå‚æ•°ä¸é™ã€‚ \u0026mdash;\u0026mdash;å¤šä¸ªå‘½ä»¤ç”¨åˆ†å·éš”å¼€ï¼Œå¤šè¡Œç”¨ \\ è·¨è¡Œã€‚ â—Â ExecStartPre, ExecStartPostï¼šExecStartæ‰§è¡Œå‰åæ‰€è°ƒç”¨çš„å‘½ä»¤ã€‚ â—Â ExecStopï¼šå®šä¹‰åœæ­¢æœåŠ¡æ—¶æ‰€æ‰§è¡Œçš„å‘½ä»¤ï¼Œå®šä¹‰æœåŠ¡é€€å‡ºå‰æ‰€åšçš„å¤„ç†ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œä½¿ç”¨systemctl stop xxxå‘½ä»¤æ—¶ï¼ŒæœåŠ¡å°†ç«‹å³è¢«ç»ˆç»“è€Œä¸åšå¤„ç†ã€‚ â—Â Restartï¼šå®šä¹‰æœåŠ¡ä½•ç§æƒ…å†µä¸‹é‡å¯ï¼ˆå¯åŠ¨å¤±è´¥ï¼Œå¯åŠ¨è¶…æ—¶ï¼Œè¿›ç¨‹è¢«ç»ˆç»“ï¼‰ã€‚å¯é€‰é€‰é¡¹ï¼šno, on-success, on-failure,on-watchdog, on-abort â—Â SuccessExitStatusï¼šå‚è€ƒExecStartä¸­è¿”å›å€¼ï¼Œå®šä¹‰ä½•ç§æƒ…å†µç®—æ˜¯å¯åŠ¨æˆåŠŸã€‚ egï¼šSuccessExitStatus=1 2 8 SIGKILL Install â—Â WantedByï¼šä½•ç§æƒ…å†µä¸‹ï¼ŒæœåŠ¡è¢«å¯ç”¨ã€‚ egï¼šWantedBy=multi-user.targetï¼ˆå¤šç”¨æˆ·ç¯å¢ƒä¸‹å¯ç”¨ï¼‰ â—Â Aliasï¼šåˆ«å\nè‡ªå¯è„šæœ¬æ¥å…¥ init æ–¹å¼æ¥å…¥ âš ï¸ é»˜è®¤ rc.local å¼ƒç”¨ï¼Œä½†æ˜¯ä»ç„¶å¯ä»¥é€šè¿‡èµ‹äºˆæ‰§è¡Œæƒé™ chmod +x /etc/rc.d/rc.local æ¥å¯ç”¨ rc.local æ–‡ä»¶ï¼Œæ­¤ç§æ–¹æ³•å³ä¸º init æ–¹å¼è®¾ç½®å¼€æœºå¯åŠ¨ã€‚\nlinux å¯åŠ¨æ—¶ï¼Œå…ˆåŠ è½½å†…æ ¸ï¼Œç„¶ååŠ è½½ inittab æ–‡ä»¶ï¼Œinittab æ–‡ä»¶ä¸­æœ‰ä¸ªæ¡ç›® si::sysinit:/etc/rc.d/rc.sysinit æŒ‡å®šäº†ä¸‹ä¸€ä¸ªè¦åŠ è½½çš„æ–‡ä»¶ rc.sysinitï¼Œè¿™ä¸ªæ–‡ä»¶åŠ è½½å®Œä¹‹åï¼ŒåŠ è½½ /etc/rc.d/rc.RUNLEVEL.d ç›®å½•ä¸­çš„å¯åŠ¨è„šæœ¬ï¼Œæœ€ååŠ è½½ /etc/rc.d/rc.local æ–‡ä»¶ã€‚\ninittab å’Œ rc.sysinit æ–‡ä»¶å°±ä¸è¯´äº†ï¼Œåœ¨ rc.RUNLEVEL.d æ–‡ä»¶å¤¹é‡Œï¼Œæ‰€å­˜çš„éƒ½æ˜¯è½¯é“¾æ¥ï¼Œé“¾æ¥åˆ° /etc/rc.d/init.d ä¸­çš„è„šæœ¬æ–‡ä»¶ï¼Œè€Œ /etc/rc.d/init.d æ–‡ä»¶å¤¹å’Œ /etc/init.d æ–‡ä»¶å¤¹æ˜¯ä¸€æ ·çš„ï¼Œ/etc/init.d å…¶å®æ˜¯è½¯é“¾æ¥åˆ° /etc/rc.d/init.d æ–‡ä»¶å¤¹ä¸­ã€‚\nè‹¥è„šæœ¬éœ€è¦å¼€æœºå¯åŠ¨ï¼Œåˆ™æ–¹æ³•å¦‚ä¸‹\n æŠŠè„šæœ¬æ³¨å†Œä¸ºç³»ç»ŸæœåŠ¡ï¼ŒæŠŠå®ƒæ”¾åˆ° /etc/init.d ç›®å½•ä¸‹ï¼Œå¹¶ä¸”åœ¨è„šæœ¬ä¸­ï¼ŒåŠ ä¸€è¡Œ # chkconfig: 345 85 35ï¼Œç„¶åå°±å¯ä»¥ç”¨ chkconfig å‘½ä»¤è®©å…¶å¼€æœºå¯åŠ¨ã€‚å› ä¸ºåœ¨ /etc/init.d ç›®å½•ä¸‹ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç”¨ service å‘½ä»¤æ§åˆ¶è¯¥è„šæœ¬ã€‚ å»ºè®® åœ¨ /etc/rc.d/rc.local æ–‡ä»¶ä¸­ï¼Œç›´æ¥æŠŠè¯¥è„šæœ¬çš„è·¯å¾„å†™è¿›å»ï¼Œåœ¨å¼€æœºåŠ è½½ rc.local æ–‡ä»¶æ—¶ï¼Œè‡ªç„¶ä¼šå¯åŠ¨è¿™ä¸ªè„šæœ¬ã€‚è¿™ä¸ªè„šæœ¬å°±ä¸èƒ½ç”¨ chkconfig å’Œ service å‘½ä»¤æ§åˆ¶ã€‚  systemd æ–¹å¼æ¥å…¥  åˆ›å»ºæœåŠ¡ unit æè¿°æ–‡ä»¶ è®¾ç½®å¼€å¯è‡ªå¯  systemctl enable ***.service  é‡å¯æ£€éªŒ  systemctl status ***.service  è€ç‰ˆæœ¬å…¼å®¹æ€§  RHEL7 é»˜è®¤å·²ç»ä¸å†ä½¿ç”¨ SysVinit å’Œ Upstartï¼Œä½†æ˜¯ä»ç„¶å¯ä»¥å…¼å®¹ SysVinit å’Œ Upstart\n    è€ç‰ˆæœ¬ æ–°ç‰ˆæœ¬ æè¿°     service name start systemctl start name.serviceÂ  Â Starts a service   service name stop systemctl stop name.service Stops a service   service name restart systemctl restartname.service Restarts a service   service name reload systemctl reloadname.service Reloads configuration   service name status systemctl status name.service Checks if a service status   chkconfig name on systemctl enablename.service Enables a service   chkconfig name off systemctl disablename.service Disables a service     é»˜è®¤çš„ RunLevelï¼ˆåœ¨ /etc/inittab æ–‡ä»¶è®¾ç½®ï¼‰ç°åœ¨è¢«é»˜è®¤çš„ Target å–ä»£ï¼Œä½ç½®æ˜¯ /etc/systemd/system/default.targetï¼Œé€šå¸¸ç¬¦å·é“¾æ¥åˆ° graphical.targetï¼ˆå›¾å½¢ç•Œé¢ï¼‰æˆ–è€… multi-user.targetï¼ˆå¤šç”¨æˆ·å‘½ä»¤è¡Œï¼‰ã€‚ å¯åŠ¨è„šæœ¬çš„ä½ç½®ï¼Œä»¥å‰æ˜¯ /etc/init.d ç›®å½•ï¼Œç¬¦å·é“¾æ¥åˆ°ä¸åŒçš„ RunLevel ç›®å½• ï¼ˆæ¯”å¦‚ /etc/rc3.dã€/etc/rc5.d ç­‰ï¼‰ï¼Œç°åœ¨åˆ™å­˜æ”¾åœ¨ /lib/systemd/system å’Œ /etc/systemd/system ç›®å½•ã€‚ é…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œä»¥å‰initè¿›ç¨‹çš„é…ç½®æ–‡ä»¶æ˜¯ /etc/inittabï¼Œå„ç§æœåŠ¡çš„é…ç½®æ–‡ä»¶å­˜æ”¾åœ¨ /etc/sysconfig ç›®å½•ã€‚ç°åœ¨çš„é…ç½®æ–‡ä»¶ä¸»è¦å­˜æ”¾åœ¨ /lib/systemd ç›®å½•ï¼Œåœ¨ /etc/systemd ç›®å½•é‡Œé¢çš„ä¿®æ”¹å¯ä»¥è¦†ç›–åŸå§‹è®¾ç½®ã€‚  ç›¸å…³å‚è€ƒ systemd - Arch Linux https://wiki.archlinux.org/index.php/Systemd_(ç®€ä½“ä¸­æ–‡)#systemd_åŸºæœ¬å·¥å…· é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html IBM æµ…æ Linux åˆå§‹åŒ– init ç³»ç»Ÿï¼Œç¬¬ 3 éƒ¨åˆ† https://www.ibm.com/developerworks/cn/linux/1407_liuming_init3/index.html ç¼–å†™systemdä¸‹æœåŠ¡è„šæœ¬ https://blog.csdn.net/fu_wayne/article/details/38018825\n","id":20,"section":"posts","summary":"ğŸ‘Œ 2020-02-17 Linux ç³»ç»Ÿ systemd æœåŠ¡ç®€ä»‹åŠç¼–å†™ FileInfo Filename - Linux ç¼–å†™ç³»ç»Ÿ systemd æœåŠ¡.md Version - v1.1.2002ï¼ˆ2020/02/18 ~ 2020/02/19ï¼‰ Author - standuke Email - shadowdoker@gmail.com DescriptionKey - Linux","tags":["CentOS","Linux"],"title":"Linux ç³»ç»Ÿ Systemd æœåŠ¡ç®€ä»‹åŠç¼–å†™","uri":"https://blog.standuke.top/2020/02/2020-02-17-linux-%E7%B3%BB%E7%BB%9F-systemd-%E6%9C%8D%E5%8A%A1%E7%AE%80%E4%BB%8B%E5%8F%8A%E7%BC%96%E5%86%99/","year":"2020"},{"content":"ğŸ‘Œ 2020-01-15 PXE é¢„å¯åŠ¨ç¯å¢ƒå®‰è£… - Legacy ä¼ ç»Ÿå¼•å¯¼ç¯å¢ƒ  FileInfo Filename - PXE Legacy Boot Configure Guide.md Version - v1.3.2001ï¼ˆ2020/01/13 ~ 2020/01/28ï¼‰ Author - standuke Email - shadowdoker@gmail.com DescriptionKey - PXE Boot with multi-system Configure Guide\n æœ¬æ–‡çº¦å®š åœ¨æ–‡ä¸­å°†æœ‰ä»¥ä¸‹æç¤ºç¬¦å¯¹é‡ç‚¹è¿›è¡Œæ ‡æ³¨è¯´æ˜ï¼Œè¯·æ³¨æ„æ–‡ä¸­æç¤ºã€‚\nâš ï¸ - æ–‡ä¸­å‡ºç°æ­¤æ ‡è®°ï¼Œä»£è¡¨é‡è¦æç¤ºï¼ŒæŒ‡éœ€è¦æ ¼å¤–æ³¨æ„çš„åœ°æ–¹ ğŸ”˜ - æ–‡ä¸­å‡ºç°æ­¤æ ‡è®°ï¼Œä»£è¡¨å¯é€‰é…ç½®ï¼Œå»ºè®®é…ç½®ï¼Œä½†ä¸å¿…è¦ âœ… - æ–‡ä¸­å‡ºç°æ­¤æ ‡è®°ï¼Œä»£è¡¨æ£€æŸ¥é¡¹ç›®ï¼Œéœ€è¦æ£€æŸ¥å¯¹åº”çš„é…ç½®æ–‡ä»¶ â—ï¸ - æ–‡ä¸­å‡ºç°æ­¤æ ‡è®°ï¼Œä»£è¡¨è¯¥æ“ä½œä¸å¯éšæ„ä¿®æ”¹ï¼Œå¦‚æ›´æ”¹æ­¤æ­¥æ“ä½œï¼Œè¯·é¢„å…ˆæµ‹è¯•\nPXE ç®€ä»‹ PXE ( Preboot Excution Environment ) é¢„å¯åŠ¨æ‰§è¡Œç¯å¢ƒï¼Œç”± Intel å…¬å¸ç ”å‘åŸºäº Client/Server çš„ç½‘ç»œæ¨¡å¼ï¼Œè¿œç¨‹ä¸»æœºå¯é€šè¿‡ç½‘ç»œä»è¿œç«¯æœåŠ¡å™¨ä¸‹è½½ç³»ç»Ÿæ˜ åƒï¼Œå¹¶ç”±æ­¤æ”¯æŒé€šè¿‡ç½‘ç»œå¯åŠ¨æ“ä½œç³»ç»Ÿã€‚PXE å¯ä»¥å¼•å¯¼å’Œå®‰è£… Windowsï¼ŒLinux ç­‰å¤šç§æ“ä½œç³»ç»Ÿã€‚ âš ï¸ PXE ç½‘ç»œè‡ªåŠ¨åŒ–å®‰è£…éœ€è¦æ­å»ºå¦‚ä¸‹ä¸‰ç±»ç³»ç»ŸæœåŠ¡ã€‚\n DHCP æœåŠ¡å™¨: æä¾› IP åœ°å€ï¼Œtftp ä½ç½® ç½‘ç»œç³»ç»Ÿé•œåƒ YUM æºï¼ˆ HTTPã€FTPã€NFS ä¸‰é€‰ä¸€ ï¼‰: æä¾›ç³»ç»Ÿå®‰è£…æ–‡ä»¶ tftp æœåŠ¡å™¨: æä¾› bootloader ä»¥åŠå†…æ ¸ä½œä¸ºå¯åŠ¨å¼•å¯¼  âš ï¸ PXE æ‰€ä½¿ç”¨çš„æ ¸å¿ƒæ–‡ä»¶æœ‰ä»¥ä¸‹å‡ ä¸ªã€‚\n vmlinuz: æ ¸å¿ƒæ–‡ä»¶ï¼ˆkernel fileï¼‰ initrd.img: å¼€å¯è¿‡ç¨‹ä¸­æ ¸å¿ƒç»„ä»¶çš„å‚æ•° isolinux.cfg \u0026ndash;\u0026gt; demo: å¼€æœº PXE é€‰æ‹©å‚è€ƒ   åŸç†ï¼š ç”± DHCP æœåŠ¡å™¨ï¼Œä½¿æœåŠ¡å™¨å¯åŠ¨æ—¶ï¼Œè·å–åˆ°è‡ªåˆ†é… IPï¼Œåœ¨ DHCP é…ç½®ä¸­æŒ‡å®šäº†å‚æ•° next-Serverï¼Œè¯¥ next-Server æŒ‡å‘ tftp æœåŠ¡å™¨çš„ IPã€‚å¦‚æ­¤æœºå™¨è·å–åˆ° IP åï¼Œä¼šä»æŒ‡å®šçš„ tftp æœåŠ¡å™¨çš„é»˜è®¤è·¯å¾„ /var/lib/tftpboot ä¸‹å»ä¸‹è½½ç›¸å…³çš„æ–‡ä»¶. é¦–å…ˆæ˜¯åŠ è½½ PXELinux.cfg ç›®å½•ä¸‹çš„ default æ–‡ä»¶ï¼Œè¯¥ default æ–‡ä»¶å°±æ˜¯å®‰è£…æœºå™¨çš„èœå•é€‰é¡¹ï¼Œåœ¨è¿™èœå•é‡Œï¼ŒæŒ‡å®š Kickstart æ–‡ä»¶è·¯å¾„å’Œ /var/lib/tftpboot ä¸‹çš„ initrd.img å’Œ vmlinuz çš„è·¯å¾„ï¼Œä½¿å¾—éœ€è¦å®‰è£…çš„å¯¹åº”ç³»ç»Ÿèƒ½å¤Ÿå¯åŠ¨å¹¶åŠ è½½ kickstart æ–‡ä»¶è¿›è¡Œå®‰è£…ã€‚å®‰è£…åŒ…çš„è·¯å¾„åœ¨ kickstart æ–‡ä»¶ä¸­æŒ‡å®šã€‚\n âš ï¸ æ³¨æ„ï¼šå…¨ç¨‹ä½¿ç”¨ä¸º UDP å°è£…ï¼Œå›¾ä¸­éƒ¨åˆ†ç®­å¤´æŒ‡å‘æ–¹ä½æœ‰è¯¯\n Client å‘ PXE Server ä¸Šçš„ DHCP å‘é€ IP åœ°å€è¯·æ±‚æ¶ˆæ¯ï¼ŒDHCP æ£€æµ‹ Client æ˜¯å¦åˆæ³•ï¼ŒåŒæ—¶å°† PXE ç¯å¢ƒä¸‹çš„ boot loader æ–‡ä»¶ PXElinux.0 çš„ä½ç½®ä¿¡æ¯å‘ç»™ Client Client å‘ PXE Server ä¸Šçš„ tftp è¯·æ±‚ PXELinux.0ï¼Œtftp æ”¶åˆ°æ¶ˆæ¯å‘ Clientå‘é€ PXELinux.0å¤§å°ä¿¡æ¯ï¼Œè¯•æ¢ Client æ˜¯å¦æ»¡æ„ï¼Œå½“ tftp æ”¶åˆ° Client å‘å›çš„ç»Ÿä¸€å¤§å°ä¿¡æ¯åï¼Œå‘é€ PXELinux.0. Client æ‰§è¡Œæ¥æ”¶åˆ°çš„ PXELinux.0 Client å‘ tftp è¯·æ±‚ PXELinux.cfg æ–‡ä»¶ï¼ˆå…¶å®æ˜¯ç›®å½•ï¼Œé‡Œé¢æ”¾äº†å¯åŠ¨èœå•ï¼Œå³ grub çš„é…ç½®æ–‡ä»¶ï¼‰ï¼Œtftp å°†é…ç½®æ–‡ä»¶å‘å› Clientï¼Œç»§è€Œ Client æ ¹æ®é…ç½®æ–‡ä»¶æ‰§è¡Œåç»­çš„æ“ä½œ Client å‘ tftp å‘é€ Linux å†…æ ¸è¯·æ±‚ä¿¡æ¯ï¼Œtftp å‘é€å†…æ ¸ Client å‘ tftp å‘é€æ ¹æ–‡ä»¶è¯·æ±‚ä¿¡æ¯ï¼Œ tftp æ¥å—åˆ°æ¶ˆæ¯ä¹‹åè¿”å› Linux æ ¹æ–‡ä»¶ç³»ç»Ÿ Client åŠ è½½ Linux å†…æ ¸ï¼ˆå¯åŠ¨å‚æ•°å·²ç»åœ¨4ä¸­çš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®å¥½äº†ï¼‰ã€‚ Client é€šè¿‡ nfs/ftp/http ä¸‹è½½ç³»ç»Ÿå®‰è£…æ–‡ä»¶è¿›è¡Œå®‰è£…ï¼Œå¦‚æœ4ä¸­çš„é…ç½®æ–‡ä»¶æŒ‡å®šäº† Kickstart è·¯å¾„ï¼Œåˆ™å›æ ¹æ®æ­¤æ–‡ä»¶è‡ªåŠ¨åº”ç­”å®‰è£…ç³»ç»Ÿ  åŸºç¡€ç¯å¢ƒå‡†å¤‡ PXE åŸºç¡€æ“ä½œç³»ç»Ÿç¯å¢ƒ\n æ“ä½œç³»ç»Ÿ CentOS 7.7 ï¼ˆMinimal Install æœ€å°åŒ–å®‰è£…ï¼‰ æœ¬åœ° YUM æº å»ºè®®ç½‘ç»œé€Ÿç‡åƒå…†ä»¥ä¸Š â—ï¸å…³é—­å¹¶ç¦æ­¢å¼€æœºè‡ªå¯å¦‚ä¸‹æœåŠ¡ï¼šç³»ç»Ÿé˜²ç«å¢™ï¼ˆFirewalldã€iptablesï¼‰ â—ï¸å…³é—­å¹¶ç¦ç”¨ SELinux â—ï¸PXEç¯å¢ƒä¸‹ DHCP æœåŠ¡ä»…èƒ½å½“å‰ PXE æœåŠ¡å™¨æä¾›ï¼Œâš ï¸ æ³¨æ„æ£€æŸ¥ç¯å¢ƒå†…æ˜¯å¦æœ‰å¦å¤–çš„ DHCP æœåŠ¡å¹²æ‰°  å¼€å§‹å®‰è£… å¤§è‡´éƒ¨ç½²é¡ºåºä¸ºï¼šDHCPã€éƒ¨ç½² HTTPã€tftpã€æä¾› bootloader åŠé…ç½®æ–‡ä»¶ã€æŒ‚è½½å…‰ç›˜ï¼ŒæŠŠå†…æ ¸æ–‡ä»¶ cp åˆ° tftp ç›®å½•ï¼Œå¹¶æ”¾ç½®æ–‡ä»¶ã€è®¾ç½®èœå•åŠæä¾›ç³»ç»Ÿå®‰è£…æ–‡ä»¶ã€‚\n1. DHCP æœåŠ¡å™¨ DHCP æœåŠ¡å™¨å‘å¾…å®‰è£…æœåŠ¡å™¨åˆ†é… IP åœ°å€ï¼ŒåŒæ—¶æŒ‡å®š tftp æœåŠ¡å™¨çš„åœ°å€ï¼Œä»¥è®©æœåŠ¡å™¨åœ¨è·å¾— IP åœ°å€åå¯å‰å¾€ tftp è·å– bootloader æ–‡ä»¶ã€‚\nå®‰è£… DHCP æœåŠ¡\nyum install -y dhcp  ä¿®æ”¹ DHCP æœåŠ¡é…ç½®ï¼ˆvi /etc/dhcp/dhcp.confï¼‰é»˜è®¤ DHCP é…ç½®æ–‡ä»¶ä¸ºç©º\n# è®¾ç½®å­ç½‘ subnet 192.168.16.0 netmask 255.255.255.0 { range 192.168.16.2 192.168.16.249; option subnet-mask 255.255.255.0; option routers 192.168.16.254; # tftp åœ°å€ä»¥åŠ pxelinux.0 çš„ bootloader æ–‡ä»¶ next-server 192.168.16.1; filename \u0026quot;pxelinux.0\u0026quot;; # ä»¥ä¸‹æ˜¯å­ç½‘å¯é€‰é…ç½® option domain-name-servers 192.168.16.250; default-lease-time 600; max-lease-time 7200; } # ä»¥ä¸‹å…¨å±€é…ç½®å¯é€‰ï¼šå¯ç”¨ MAC ç»‘å®šæŸå°ä¸»æœº IP åœ°å€ host clientA{ hardware ethernet 00:00:00:00:00:AB;ã€€fixed-address 192.168.16.249; } ddns-update-style interim;  âš ï¸ è‹¥å‡ºç° No subnet declaration for eth åˆ™éœ€è¦æ’æŸ¥å¦‚ä¸‹äº‹é¡¹\n DHCP æŠ¥é”™æç¤ºçš„ eth ç½‘å¡è‹¥å·²æœ‰ IP åœ°å€åˆ™å…¶ç½‘æ®µå¿…é¡»ä¸ DHCP é…ç½®æ–‡ä»¶åœ¨åŒä¸€ç½‘æ®µï¼ˆå³ eth ç½‘æ®µä¸ DHCP ç½‘æ®µç›¸åŒï¼‰ã€‚ è‹¥ eth ç½‘å¡æœªåˆ†é…æœ‰ IP åœ°å€æˆ–æœªå¼€å¯ï¼Œè¯·åŠ¡å¿…å…ˆå¼€å¯å¹¶æ‰‹åŠ¨åˆ†é…ï¼ŒåŒæ—¶ç¡®ä¿ä¸º static çš„æ–¹å¼å¯åŠ¨ï¼Œæ‰èƒ½å¯åŠ¨ dhcpd æœåŠ¡ã€‚ ä½¿ç”¨ Vmware è™šæ‹Ÿæœºæ—¶ï¼Œéœ€è¦æ³¨æ„ DHCP é…ç½®çš„ subnet åœ¨ eth0 ç½‘å¡ IP æ‰€åœ¨ç½‘æ®µï¼Œå¹¶ä¸” eth0 ä¸èƒ½æ˜¯ hostonlyï¼Œå¯ä»¥æ˜¯æ¡¥æ¥æ¨¡å¼æˆ– NAT æ¨¡å¼ã€‚å’Œã€Œ1ã€ç›¸åŒï¼Œä¹Ÿæ˜¯ç½‘æ®µé—®é¢˜ã€‚  å¯åŠ¨ DHCP æœåŠ¡\n# å¦‚æœ‰éœ€è¦å¯è®¾ç½®å¼€æœºè‡ªå¯ systemctl start dhcpd \u0026amp;\u0026amp; systemctl enable dhcpd  éªŒè¯\nå¯ä½¿ç”¨ dhclient å·¥å…·æµ‹è¯• DHCP æœåŠ¡ï¼Œäº¦å¯æŸ¥çœ‹ IP ç§Ÿçº¦ä¿¡æ¯ cat /var/lib/dhcpd/dhcpd.leases  2. ç½‘ç»œç³»ç»Ÿé•œåƒ YUM æºï¼ˆ HTTPã€FTPã€NFS ä¸‰é€‰ä¸€ ï¼‰ åœ¨æœ¬æ–‡ä¸­å»ºè®®ä½¿ç”¨ HTTP ä½œä¸ºç³»ç»Ÿ YUM çš„æä¾›æ–¹å¼ï¼Œä¸€ä¸ªæ˜¯ä½œä¸º PXE å®‰è£…ä½¿ç”¨ï¼Œå¦ä¸€ä¸ªå¯ä½œä¸ºç³»ç»Ÿå®‰è£…å®Œæˆåçš„ç³»ç»Ÿæœ¬åœ° YUM æºä½¿ç”¨ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥åœ¨è¯¥å° HTTP æœåŠ¡å™¨ä¸Šæä¾›å¤šä¸ªç³»ç»Ÿç‰ˆæœ¬çš„ YUM æºã€‚\nHTTP å®‰è£… HTTP æœåŠ¡\nyum install -y httpd  æ·»åŠ ç³»ç»Ÿå…‰ç›˜é•œåƒï¼Œâš ï¸ å¯æ·»åŠ å¤šä¸ªå®‰è£…å…‰ç›˜ï¼ŒHTTP æœåŠ¡é»˜è®¤æŠŠ /var/www/html ä½œä¸ºæ–‡ä»¶ç½‘ç«™æ ¹ç›®å½•\n# é»˜è®¤å°†ç³»ç»Ÿ OS å®‰è£…å…‰ç›˜ä¸Šä¼ è‡³æ–‡ä»¶å¤¹ /opt/mirror å¯å®‰è£… lrzsz ç”¨äºä¸Šä¼ æ–‡ä»¶ mkdir -p /opt/mirror \u0026amp;\u0026amp; cd /opt/mirror \u0026amp;\u0026amp; rz $OS_VERSION # è®¾ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½è‡³æ–‡ä»¶å¤¹ /var/www/html/$OS_VERSION mkdir -p /var/www/html/centos77 \u0026amp;\u0026amp; vi /etc/fstab # æ–‡ä»¶æœ«å°¾æ·»åŠ è‡ªåŠ¨æŒ‚è½½é…ç½® /opt/mirror/centos77.iso /var/www/html/centos77 iso9660 defaults 0 0 # æŒ‚è½½é•œåƒæ–‡ä»¶ï¼Œå¹¶æ£€æŸ¥ mount -a \u0026amp;\u0026amp; ls /var/www/html/centos77  ğŸ”˜ é…ç½® HTTP æœåŠ¡ï¼Œè®¾ç½® ï½/var/www/html/$OS_VERSION æ–‡ä»¶å¤¹æµè§ˆå™¨å¯ç›®å½•å±•ç¤º\n# è‹¥å¦‚ä¸Šé…ç½®å®Œæ¯•ï¼Œæ­¤å¤„æ— éœ€ä¿®æ”¹ # å¼€å¯ autoindex æ¨¡å—ï¼Œé»˜è®¤ä¸ºå¼€å¯çŠ¶æ€ï¼Œæ³¨æ„æ£€æŸ¥ # è‹¥é…ç½®ä¸ºå…¶ä»–æ–‡ä»¶å¤¹ä½œä¸º HTTP YUM æä¾›ç›®å½•ï¼Œåˆ™éœ€è¦é…ç½®å¯¹åº”ç›®å½•ï¼Œé»˜è®¤æ˜¯ä¸éœ€è¦é…ç½®çš„ï¼Œé…ç½®æ—¶æ³¨æ„æ–‡ä»¶å¤¹è®¿é—®æƒé™  å¯åŠ¨ HTTP æœåŠ¡åŒæ—¶è®¾ç½®å¼€æœºè‡ªå¯\nsystemctl start httpd \u0026amp;\u0026amp; systemctl enable httpd  éªŒè¯ æµè§ˆå™¨è®¿é—®: http://localhost/centos77\n3. tftp æœåŠ¡å™¨ å®‰è£… tftp è®¿é—®\n# tftp æ˜¯ç”± xinetd è¿™ä¸ª super daemon æ‰€ç®¡ç†çš„ # å› æ­¤è¦å®‰è£… xinetdï¼ŒåŒæ—¶è®¾å®šå¥½ tftp ä¹‹åï¼Œè¦å¯åŠ¨çš„æ˜¯ xinetd; yum install tftp-server xinetd  å¯ç”¨ tftp\nvi /etc/xinetd.d/tftp # ä¿®æ”¹å…¶ä¸­å‚æ•°ï¼Œyes æ”¹ä¸º noï¼Œä»¥å¯ç”¨ tftp disable = no # âš ï¸ ä»¥ä¸‹æ˜¯ tftp çš„æ ¹ç›®å½• server_args = -s /var/lib/tftpboot  å¯åŠ¨ tftp\nsystemctl start tftp \u0026amp;\u0026amp; systemctl enable tftp  æ£€éªŒ\n# å®‰è£… tftp å®¢æˆ·ç«¯ yum install -y tftp # åœ¨ tftp çš„æ ¹ç›®å½•åˆ›å»ºæ–‡ä»¶ cd /var/lib/tftpboot \u0026amp;\u0026amp; touch test # æœ¬åœ°æµ‹è¯•è¿æ¥æ˜¯å¦å¯è®¿é—®ä¸”å¯ä¸‹è½½æ–‡ä»¶ cd ~ \u0026amp;\u0026amp; tftp localhost # ä»¥ä¸‹å‘½ä»¤åœ¨ tftp å®¢æˆ·ç«¯è¾“å…¥ tftp\u0026gt;get test tftp\u0026gt;quit # æŸ¥çœ‹å½“å‰ç›®å½•æ˜¯å¦æœ‰åˆšæ‰ä¸‹è½½çš„ `test` æ–‡ä»¶  4. åˆ¶ä½œ bootloader åŠé…ç½®æ–‡ä»¶  åˆ›å»º pxelinux.cfg å¯åŠ¨é…ç½®æ–‡ä»¶å¤¹  mkdir /var/lib/tftpboot/pxelinux.cfg  âš ï¸ pxelinux.cfg æ˜¯ä¸ªç›®å½•ï¼Œå¯ä»¥æ”¾ç½®é»˜è®¤çš„å¼€æœºé€‰é¡¹ï¼Œä¹Ÿå¯ä»¥é’ˆå¯¹ä¸åŒçš„å®¢æˆ·ç«¯ä¸»æœºæä¾›ä¸åŒçš„å¼€æœºé€‰é¡¹ã€‚å¯ä»¥åœ¨ pxelinux.cfg ç›®å½•å†…å»ºç«‹ä¸€ä¸ªåä¸º default çš„æ–‡ä»¶æ¥æä¾›é»˜è®¤é€‰é¡¹ã€‚\n å‡†å¤‡å¯åŠ¨èœå•ï¼Œå¤åˆ¶ ç³»ç»Ÿå®‰è£…å…‰ç›˜ ä¸‹çš„ isolinux.cfg æ–‡ä»¶ï¼Œä½œä¸ºé»˜è®¤èœå•æ–‡ä»¶  cp /$SYSTEM_ISO_MIRROR/isolinux/isolinux.cfg /var/lib/tftpboot/pxelinux.cfg/default  âš ï¸ isolinux.cfg æ–‡ä»¶ä¸ºç³»ç»Ÿå¯åŠ¨èœå•\n å‡†å¤‡ bootloader åŠé…ç½®æ–‡ä»¶  # bootloader æ‰€éœ€æ–‡ä»¶ç”± syslinux è½¯ä»¶åŒ…æä¾›ï¼Œè¿™é‡Œä¸å»ºè®®ä»ç³»ç»Ÿé•œåƒä¸­è·å¾— bootloader yum install -y syslinux # ä» syslinux å¤åˆ¶å‡ ä¸ªå¯åŠ¨æ–‡ä»¶è‡³ tftp æ ¹ç›®å½• cp -a /usr/share/syslinux/{menu.c32,vesamenu.c32,pxelinux.0} /var/lib/tftpboot  âš ï¸ pxelinux.0 ä¸ºå¯åŠ¨æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ï¼›menu.c32 è¿™ä¸ªæ˜¯èœå•é£æ ¼ï¼›vesamenu.c32 è¿™ä¸ªæ˜¯å›¾åƒé£æ ¼\n å‡†å¤‡è®¡ç®—æœºå¯åŠ¨æ‰€éœ€çš„å†…æ ¸æ–‡ä»¶å’Œè™šæ‹Ÿæ ¹æ–‡ä»¶  cp/misc/cd/isolinux/{vmlinuz,initrd.img} /var/lib/tftpboot/   â—ï¸ æœ€åæ–‡ä»¶ç»“æ„ä¸º  tree /var/lib/tftpboot |__initrd.img # è™šæ‹Ÿæ ¹æ–‡ä»¶ |__menu.32c # èœå•é£æ ¼ |__pexlinux.0 # å¯åŠ¨æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ |__pxelinux.cfg # æ”¾ç½®é»˜è®¤çš„å¼€æœºé€‰é¡¹ | |__default # å³ isolinux.cfg ç³»ç»Ÿå¯åŠ¨èœå• |__vesamenu.32c # å›¾åƒé£æ ¼ |__vmlinuz # å†…æ ¸æ–‡ä»¶   â—ï¸ default æ–‡ä»¶é…ç½®ä¿®æ”¹ï¼Œéœ€æ·»åŠ æˆ–ä¿®æ”¹æˆå¦‚ä¸‹å†…å®¹  label linux menu label^Install CentOS 7 menu default kernel vmlinuz append initrd=initrd.img inst.repo=http://192.168.16.1/centos77 inst.ks=http://192.168.16.1/ks.cfg quiet   â—ï¸ ks æ–‡ä»¶é…ç½®ä¿®æ”¹  cdrom # æ”¹ä¸º url --url=\u0026quot;http://192.168.16.1/centos77\u0026quot;  5. å…‰ç›˜éƒ¨åˆ†æ–‡ä»¶ä»‹ç» isolinux/boot.catï¼šè¿™ä¸ªæ–‡ä»¶ä½œç”¨æ˜¯ç±»å‹MBRï¼ˆMain Boot Recordï¼‰ï¼Œè´Ÿè´£ç£ç›˜æ“ä½œç³»ç»Ÿ(DOS)å¯¹ç£ç›˜è¿›è¡Œè¯»å†™æ—¶åˆ†åŒºåˆæ³•æ€§çš„åˆ¤åˆ«ã€åˆ†åŒºå¼•å¯¼ä¿¡æ¯çš„å®šä½ï¼Œå¯åŠ¨çš„stage1.\nisolinux/isolinux.bin,è´Ÿè´£å…‰ç›˜çš„stage2,ä¹Ÿæ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½œç”¨ç±»ä¼¼grubçš„ç¬¬äºŒé˜¶æ®µ\nisolinuz/vmlinuzï¼šæ˜¯linuxçš„å†…æ ¸ï¼Œç›¸å½“äºæ˜¯ä¸€ä¸ªå°çš„linuxç³»ç»Ÿ\nisolinuz/initrd.imgï¼Œä¸€èˆ¬è¢«ç”¨æ¥ä¸´æ—¶çš„å¼•å¯¼ç¡¬ä»¶åˆ°å®é™…å†…æ ¸vmlinuzèƒ½å¤Ÿæ¥ç®¡å¹¶ç»§ç»­å¼•å¯¼çš„çŠ¶æ€\nisolinux/isolinux.cfgï¼šè¿™ä¸ªæ˜¯å…‰ç›˜å¯åŠ¨æ—¶çš„èœå•æ–‡ä»¶ï¼Œèœå•çš„é£æ ¼æ˜¯æ–‡ä»¶vesamenu.c32.åœ¨isolinux.cfgé‡Œæœ‰è°ƒç”¨ï¼Œè¯¥æ–‡ä»¶é‡Œè¿˜æŒ‡å®šäº†å†…æ ¸isolinuz/vmlinuzå’Œisolinuz/initrd.imgçš„è·¯å¾„ï¼Œå‘å†…æ ¸ä¼ é€’å‚æ•°ï¼šappend initrd=initrd.imgï¼Œè¿™æ®µå‚æ•°å¯ä»¥è‡ªå·±å®šåˆ¶ï¼Œå¦‚åœ¨åé¢åŠ text,å°±ä¼šå®ç°å­—ç¬¦ç•Œé¢å®‰è£…ï¼Œè¿™ä¸ªç”¨äºè‡ªåŠ¨åŒ–å®‰è£…ï¼Œä¸é€‚åˆäºæ‰‹åŠ¨å®‰è£…ï¼Œé¼ æ ‡ç‚¹ä¸äº†çš„ã€‚å­—ç¬¦ç•Œé¢ä¸€èˆ¬ç”¨äºè‡ªåŠ¨åŒ–å®‰è£…ã€‚\nåœ¨isolinux.cfgæ–‡ä»¶ä¸­æŒ‡æ˜kickstartæ–‡ä»¶çš„ä½ç½®ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªè·¯å¾„è¿›è¡Œè°ƒç”¨è¯¥æ–‡ä»¶ï¼Œå†™æ³•å¦‚ä¸‹\nDVD drive:ks=cdrom:/PATH/TO/KICKSTART_FILE Hard drive:ks=hd:device:/directory/KICKSTART_FILE HTTP server:ks=http://host:port/path/to/KICKSTART_FILE FTP server:ks=ftp://host:port/path/to/KICKSTART_FILE HTTPS server:ks=https://host:port/path/to/KICKSTART_FILE NFSserver:ks=nfs:host:/path/to/KICKSTART_FILE  è¯¦ç»†å¯è§: https://blog.51cto.com/ghbsunny/1969593\n6. ksï¼ˆKickstartï¼‰æ–‡ä»¶ å¦‚ä¸‹ä¸ºç³»ç»Ÿé»˜è®¤ æœ€å°åŒ–å®‰è£… æ—¶çš„ ks æ–‡ä»¶ï¼ˆanaconda-ks.cfgï¼‰\n#version=DEVEL # System authorization information auth --enableshadow --passalgo=sha512 # Use CDROM installation media cdrom # Use graphical install graphical # Run the Setup Agent on first boot firstboot --enable # Keyboard layouts keyboard --vckeymap=us --xlayouts='us' # System language lang en_US.UTF-8 # Network information network --bootproto=dhcp --device=enp0s3 --onboot=off --ipv6=auto --no-activate network --hostname=localhost.localdomain # Root password rootpw --plaintext 123456 # System services services --disabled=\u0026quot;chronyd\u0026quot; # System timezone timezone Asia/Shanghai --isUtc --nontp # System bootloader configuration bootloader --location=mbr --boot-drive=sda autopart --type=lvm # Partition clearing information clearpart --none --initlabel %packages @^minimal @core %end %addon com_redhat_kdump --disable --reserve-mb='auto' %end %anaconda pwpolicy root --minlen=6 --minquality=1 --notstrict --nochanges --notempty pwpolicy user --minlen=6 --minquality=1 --notstrict --nochanges --emptyok pwpolicy luks --minlen=6 --minquality=1 --notstrict --nochanges --notempty %end  å¦‚ä¸‹ä¸ºå»ºè®®ä½¿ç”¨çš„ ks æ–‡ä»¶ï¼ˆè¯·è‡ªè¡Œåˆ›å»ºï¼‰\n#platform=x86, AMD64, or Intel EM64T #version=DEVEL # Install OS instead of upgrade install # Keyboard layouts keyboard 'us' # Root password rootpw --plaintext 123456 # System language lang en_US # System authorization information auth --useshadow --passalgo=sha512 # Use text mode install text # SELinux configuration selinux --disabled # Do not configure the X Window System skipx # Firewall configuration firewall --disabled # Reboot after installation reboot # System timezone timezone Asia/Shanghai # Use network installation url --url=\u0026quot;http://192.168.16.1/centos77\u0026quot; # System bootloader configuration bootloader --location=mbr # Clear the Master Boot Record zerombr # Partition clearing information clearpart --all --initlabel # Disk partitioning information part /boot --fstype=\u0026quot;xfs\u0026quot; --ondisk=sda --size=1024 %packages @^minimal @core %end %addon com_redhat_kdump --disable --reserve-mb='auto' %post PS1=' \\[\\033[0;33m\\]\u0026gt;\\u \\[\\033[0;37m\\]\\w\\n\\[\\033[1;32m\\][\\h]\\[\\033[01;31m\\]\\$ \\[\\033[00m\\]' yum install -y wget unzip ethtool git bind-utils sysstat iptraf lsof tmux tree lrzsz vim man-pages bash-completion dos2unix %end  ä¸€é”® PXE #!/bin/bash restart_DHCPd()Â { serviceÂ DHCPdÂ restartÂ \u0026amp;\u0026gt;/dev/null; chkconfigÂ DHCPdÂ onÂ \u0026amp;\u0026gt;/dev/null; } restart_tftpÂ ()Â { sedÂ -iÂ 's/disable.*/disbleÂ =Â no/g'Â /etc/xinetd.d/tftpÂ \u0026amp;\u0026gt;/dev/null; chkconfigÂ tftpÂ onÂ \u0026amp;\u0026gt;/dev/null; serviceÂ xinetdÂ restartÂ \u0026amp;\u0026gt;/dev/null; } restart_httpd(){ serviceÂ httpdÂ restartÂ \u0026amp;\u0026gt;/dev/null; chkconfigÂ httpdÂ onÂ \u0026amp;\u0026gt;/dev/null; } min_timeÂ ()Â { time=`dateÂ +%Y%m%d%H%M` } ip=$(ifconfigÂ |Â awkÂ '/inetÂ /{printÂ $2}'|Â awkÂ -FÂ :Â '{printÂ $NF}'|Â headÂ -1) min_time; #installÂ Server echoÂ \u0026quot;NowÂ installÂ DHCP,http,tftpÂ ServerÂ andÂ tftpÂ Client,itÂ mightÂ takeÂ fewÂ minites\u0026quot; rpmÂ -qÂ httpdÂ \u0026amp;\u0026gt;/dev/nullÂ \u0026amp;\u0026amp;Â restart_httpdÂ ||Â {Â yumÂ -yÂ installÂ httpdÂ \u0026amp;\u0026gt;/dev/null;restart_httpd;Â } rpmÂ -qÂ DHCPÂ \u0026amp;\u0026gt;/dev/nullÂ \u0026amp;\u0026amp;Â restart_DHCPdÂ ||Â {Â yumÂ -yÂ installÂ DHCP\u0026amp;\u0026gt;/dev/null;restart_DHCPd;Â } rpmÂ -qÂ tftp-ServerÂ \u0026amp;\u0026gt;/dev/nullÂ \u0026amp;\u0026amp;Â restart_tftpÂ ||Â {Â yumÂ -yÂ installÂ tftp-ServerÂ \u0026amp;\u0026gt;/dev/null;restart_tftp;Â } rpmÂ -qÂ tftpÂ \u0026amp;\u0026gt;/dev/nullÂ ||Â yumÂ -yÂ installÂ tftpÂ \u0026amp;\u0026gt;/dev/null; #ForÂ centosÂ 6.9,fileÂ PXELinux.0Â comesÂ fromÂ packgesÂ sysLinux-nonLinux,otherÂ versionÂ isÂ fromÂ sysLinux,butÂ ifÂ youÂ installÂ packgeÂ sysLinux,itÂ willÂ alsoÂ installÂ sysLinux-nonLinuxÂ packge,soÂ justÂ installÂ sysLinuxÂ packgeÂ isÂ OKÂ toÂ getÂ fileÂ sysLinux-nonLinux. rpmÂ -qÂ sysLinuxÂ \u0026amp;\u0026gt;/dev/nullÂ ||Â yumÂ -yÂ installÂ sysLinuxÂ \u0026amp;\u0026gt;/dev/null; #setÂ httpÂ forÂ yumÂ Server #mountÂ yumÂ source echoÂ \u0026quot;NowÂ youÂ needÂ toÂ configÂ yumÂ ServerÂ inÂ httpÂ Server\u0026quot; echoÂ \u0026quot;SinceÂ IÂ doÂ notÂ knowÂ whichÂ differentÂ discÂ yourÂ discÂ willÂ beÂ displayed,suchÂ as,centos7Â displayÂ asÂ /dev/sr0,orÂ displayÂ as/dev/sr1Â orÂ otherÂ deviceÂ \u0026quot; echoÂ \u0026quot;ThisÂ time,IÂ haveÂ threeÂ disks,6i386Â meansÂ 386Â archÂ forÂ ceentos6.5,6x86_64Â meansÂ 64bitÂ forÂ centos6.9,7Â meansÂ centos7.3\u0026quot; echoÂ \u0026quot;theÂ relationÂ ofÂ myÂ diskÂ dislayÂ inÂ theÂ centosÂ asÂ below\u0026quot; echoÂ -eÂ \u0026quot;/dev/sr0Â ---\u0026gt;Â 6x86_64Â \\n/dev/sr1Â ---\u0026gt;Â 6i386Â \\n/dev/sr2Â ---\u0026gt;Â 7\u0026quot; mkdirÂ -pÂ /var/www/html/os/{6i386,6x86_64,7} readÂ -pÂ \u0026quot;WouldÂ youÂ wantÂ toÂ mountÂ diskÂ auto:(eg:y/n):Â \u0026quot;Â automount caseÂ $automountÂ in y) echoÂ -eÂ \u0026quot;/dev/sr0Â ---\u0026gt;Â 6x86_64Â \\n/dev/sr1Â ---\u0026gt;Â 6i386Â \\n/dev/sr2Â ---\u0026gt;Â 7\u0026quot; mountÂ /dev/sr0Â /var/www/html/os/6x86_64 mountÂ /dev/sr1Â /var/www/html/os/6i386 mountÂ /dev/sr2Â /var/www/html/os/7 ;; *) echoÂ \u0026quot;SinceÂ yourÂ answerÂ isÂ noÂ orÂ other,pleaseÂ mountÂ diskÂ afterÂ theÂ scriptÂ end\u0026quot; echoÂ \u0026quot;eg:Â runÂ mountÂ /dev/sr0Â /var/www/html/os/6x86_64Â \u0026quot; echoÂ \u0026quot;eg:Â ifÂ yourÂ wantÂ toÂ mountÂ theÂ diskÂ fixed,pleaseÂ writeÂ toÂ /etc/fstab,eg:Â /dev/sr0Â /var/www/html/os/6x86_64Â iso9660Â defaultsÂ 0Â 0Â \u0026quot; ;; esac #prepareÂ ksÂ fileÂ inÂ /var/www/html/ksdir echoÂ \u0026quot;IfÂ yourÂ haveÂ putÂ ksÂ fileÂ inÂ otherÂ hosts,yourÂ shouldÂ inputÂ remoteÂ ,andÂ inputÂ theÂ remoteÂ fileÂ fullÂ path,andÂ itÂ willÂ useÂ scpÂ âŒ˜Â toÂ copyÂ theÂ ksÂ fileÂ directoryÂ toÂ /var/www/html/ksdir\u0026quot; echoÂ \u0026quot;IfÂ youÂ putÂ dirÂ inÂ localÂ host,inputÂ local,itÂ willÂ willÂ cpÂ âŒ˜Â toÂ copyÂ theÂ ksÂ fileÂ directoryÂ toÂ /var/www/html/ksdir\u0026quot; echoÂ \u0026quot;ifÂ youÂ inputÂ anyÂ other,youÂ shouldÂ cpÂ ksdirÂ toÂ /var/www/html/ksdir\u0026quot; readÂ -pÂ \u0026quot;DoÂ youÂ wantÂ toÂ copyÂ remoteÂ ksÂ dir(Â rÂ (remote)Â orÂ lÂ (local)Â orÂ anyÂ otherÂ inputÂ ):Â \u0026quot;Â ifcopy mkdirÂ -pÂ /var/www/html/ksdir/ caseÂ $ifcopyÂ in r|remote) readÂ -pÂ \u0026quot;inputÂ theÂ remoteÂ ksdirÂ directory(defaults:root@172.18.50.75:/var/www/html/ksdir/*):Â \u0026quot;Â ksdir ifÂ [Â -zÂ ${ksdir:-}Â ];then ksdir=\u0026quot;root@172.18.50.75:/var/www/html/ksdir/*\u0026quot; fi readÂ -pÂ \u0026quot;inputÂ hostÂ user'sÂ passwordÂ youÂ haveÂ put:Â \u0026quot;Â passwd expectÂ -cÂ \u0026quot; spawnÂ scpÂ $ksdirÂ /var/www/html/ksdir/ expectÂ { \\\u0026quot;*assword\\\u0026quot;Â {setÂ timeoutÂ 300;Â sendÂ \\\u0026quot;$passwd\\r\\\u0026quot;;Â } \\\u0026quot;yes/no\\\u0026quot;Â {Â sendÂ \\\u0026quot;yes\\r\\\u0026quot;;Â exp_continue;Â } } expectÂ eof\u0026quot; lsÂ /var/www/html/ksdirÂ |Â whileÂ readÂ ksfile;Â do sedÂ -iÂ \u0026quot;s@urlÂ --url=\\\u0026quot;http://.*/os/@urlÂ --url=\\\u0026quot;http://$ip/os/@g\u0026quot;Â /var/www/html/ksdir/$ksfile done ;; l|localÂ ) readÂ -pÂ \u0026quot;PleaseÂ inputÂ yourÂ localÂ ksÂ directory(eg:/root/ksdir/*):Â \u0026quot;Â ksdir cpÂ $ksdirÂ /var/www/html/ksdir/ ;; *) echoÂ \u0026quot;yourÂ inputÂ isÂ wrong,pleaseÂ manualÂ copyÂ ksdirÂ toÂ /var/www/html/ksdir/\u0026quot; ;; esac #configÂ DHCP echoÂ \u0026quot;NowÂ configÂ DHCPÂ Server...\u0026quot; readÂ -pÂ \u0026quot;InputÂ yourÂ next-ServerÂ ip(defaultÂ isÂ yourÂ hostÂ ip):Â \u0026quot;Â nextip ifÂ [Â -zÂ ${nextip:-}Â ];then nextip=\u0026quot;$ip\u0026quot; fi echoÂ nextipÂ isÂ \u0026quot;$nextip\u0026quot; mvÂ /etc/DHCP/DHCPd.confÂ /etc/DHCP/DHCPd.conf.\u0026quot;$time\u0026quot;.bak catÂ \u0026gt;/etc/DHCP/DHCPd.conf\u0026lt; optionÂ domain-nameÂ \u0026quot;sunny.com\u0026quot;; optionÂ domain-name-ServersÂ 192.168.32.61; default-lease-timeÂ 86400; max-lease-timeÂ 86400; subnetÂ 192.168.32.0Â netmaskÂ 255.255.255.0Â { rangeÂ 192.168.32.100Â 192.168.32.200; optionÂ routersÂ 192.168.32.1; next-ServerÂ $nextip; filenameÂ \u0026quot;PXELinux.0\u0026quot;; } log-facilityÂ local7; eof echoÂ \u0026quot;AsÂ default,theÂ DHCPÂ ServerÂ willÂ alocateÂ ipÂ 192.168.32.100--192.168.32.200,dnsÂ ServerÂ isÂ 192.168.32.61,routerÂ isÂ 192.168.32.1,ifÂ youÂ wantÂ toÂ changeÂ theseÂ configÂ ,pleaseÂ runÂ 'vimÂ /etc/DHCP/DHCPd.conf'Â toÂ changeÂ /etc/DHCP/DHCPd.conf\u0026quot; echoÂ \u0026quot;DHCPÂ isÂ completeÂ configÂ now\u0026quot; #configÂ tltp echoÂ \u0026quot;IfÂ youÂ wantÂ toÂ copyÂ LinuxÂ kernelÂ fileÂ toÂ /var/lib/tftpboot/{6i386,6x86_64,7}\u0026quot; readÂ -pÂ \u0026quot;PleaseÂ inputÂ m(meansÂ manual)Â orÂ aÂ (meansÂ auto):Â \u0026quot;Â copyfile caseÂ $copyfileÂ in a) mkdirÂ -pÂ /var/lib/tftpboot/{6i386,6x86_64,7} cpÂ /var/www/html/os/6i386/isoLinux/{initrd.img,vmlinuz}Â /var/lib/tftpboot/6i386 cpÂ /var/www/html/os/6x86_64/isoLinux/{initrd.img,vmlinuz}Â /var/lib/tftpboot/6x86_64 cpÂ /var/www/html/os/7/isoLinux/{initrd.img,vmlinuz}Â /var/lib/tftpboot/7 ;; *) echoÂ \u0026quot;YourÂ inputÂ isÂ mÂ orÂ otherÂ things\u0026quot; echoÂ \u0026quot;youÂ shouldÂ doÂ twoÂ thingsÂ afterÂ theÂ scripts\u0026quot; echoÂ \u0026quot;createÂ directoryÂ underÂ /var/lib/tftpboot/,suchÂ asÂ mkdirÂ /var/lib/tftpboot/6i386\u0026quot; echoÂ \u0026quot;copyÂ theÂ kernelÂ fileÂ toÂ theÂ relativeÂ dir,suchÂ asÂ cpÂ /var/www/html/os/6i386/isoLinux/{initrd.img,vmlinuz}Â /var/lib/tftpboot/6i386\u0026quot; echoÂ \u0026quot;IfÂ youÂ hveÂ manyÂ otherÂ yumÂ source,pleaseÂ createÂ relativeÂ dirÂ underÂ /var/lib/tftpboot/6i386\u0026quot; ;; esac cpÂ /usr/share/sysLinux/{PXELinux.0,menu.c32}Â /var/lib/tftpboot/ echoÂ \u0026quot;NowÂ configÂ defaultsÂ fileÂ ,youÂ canÂ copyÂ theÂ hostÂ relativeÂ diskÂ fileÂ ,/media/isoLinux/isoLinux.cfgÂ toÂ /var/lib/tftpboot/PXELinux.cfg,andÂ renameÂ itÂ toÂ defaults,andÂ theÂ modifyÂ theÂ config,runÂ âŒ˜Â 'cpÂ /media/isoLinux/isoLinux.cfgÂ /var/lib/tftpboot/Â PXELinux.cfg/default'Â \u0026quot; echoÂ \u0026quot;NowÂ IÂ willÂ configÂ /var/lib/tftpboot/PXELinux.cfg/default\u0026quot; mkdirÂ /var/lib/tftpboot/PXELinux.cfg catÂ \u0026gt;Â /var/lib/tftpboot/PXELinux.cfg/default\u0026lt; defaultÂ menu.c32 #promptÂ 1 timeoutÂ 80 displayÂ boot.msg menuÂ backgroundÂ splash.jpg menuÂ titleÂ WelcomeÂ toÂ SunnyÂ diyÂ installÂ Linux! menuÂ colorÂ borderÂ 0Â #ffffffffÂ #00000000 menuÂ colorÂ selÂ 7Â #ffffffffÂ #ff000000 menuÂ colorÂ titleÂ 0Â #ffffffffÂ #00000000 menuÂ colorÂ tabmsgÂ 0Â #ffffffffÂ #00000000 menuÂ colorÂ unselÂ 0Â #ffffffffÂ #00000000 menuÂ colorÂ hotselÂ 0Â #ff000000Â #ffffffff menuÂ colorÂ hotkeyÂ 7Â #ffffffffÂ #ff000000 menuÂ colorÂ scrollbarÂ 0Â #ffffffffÂ #00000000 labelÂ desktop73 menuÂ labelÂ InstallÂ diyÂ ^desktopÂ centosÂ 7 menuÂ default kernelÂ 7/vmlinuz appendÂ initrd=7/initrd.imgÂ ks=http://$ip/ksdir/ks73desk.cfg labelÂ mini73 menuÂ labelÂ InstallÂ diyÂ ^miniÂ centosÂ 7 menuÂ default kernelÂ 7/vmlinuz appendÂ initrd=7/initrd.imgÂ ks=http://$ip/ksdir/ks73min.cfg labelÂ desktop6.5 menuÂ labelÂ InstalledÂ d^esktopÂ centosÂ 6.5Â i386 kernelÂ 6i386/vmlinuz appendÂ initrd=6i386/initrd.imgÂ ks=http://$ip/ksdir/ks65desk.cfg labelÂ mini6.5 menuÂ labelÂ InstallÂ m^iniÂ centosÂ 6.5Â i386 kernelÂ 6i386/vmlinuz appendÂ initrd=6i386/initrd.imgÂ ks=http://$ip/ksdir/ks65min.cfg labelÂ desktop6.9 menuÂ labelÂ InstalledÂ de^sktopÂ centosÂ 6.9 kernelÂ 6x86_64/vmlinuz appendÂ initrd=6x86_64/initrd.imgÂ ks=http://$ip/ksdir/ks69desk.cfg labelÂ mini6.9 menuÂ labelÂ InstallÂ mi^niÂ centosÂ 6.9 kernelÂ 6x86_64/vmlinuz appendÂ initrd=6x86_64/initrd.imgÂ ks=http://$ip/ksdir/ks69min.cfg eof echoÂ \u0026quot;tftpÂ isÂ configÂ OK\u0026quot; #restartÂ Server echoÂ \u0026quot;nowÂ restartÂ Server\u0026quot; restart_httpd; restart_tftp; restart_DHCPd; netstatÂ -ntulpÂ |Â grepÂ DHCPdÂ |Â grepÂ :67Â \u0026amp;\u0026gt;/dev/nullÂ \u0026amp;\u0026amp;Â echoÂ \u0026quot;DHCPÂ isÂ running...\u0026quot;Â ||Â echoÂ \u0026quot;DHCPÂ isÂ notÂ run,pleaseÂ check\u0026quot; netstatÂ -ntulpÂ |Â grepÂ httpdÂ |Â grepÂ :80Â \u0026amp;\u0026gt;/dev/nullÂ \u0026amp;\u0026amp;Â echoÂ \u0026quot;httpÂ isÂ running...\u0026quot;Â ||Â echoÂ \u0026quot;httpÂ isÂ notÂ run,pleaseÂ check\u0026quot; netstatÂ -ntulpÂ |Â grepÂ xinetdÂ |Â grepÂ 69Â \u0026amp;\u0026gt;/dev/nullÂ \u0026amp;\u0026amp;Â echoÂ \u0026quot;tftpÂ isÂ running...\u0026quot;Â ||Â echoÂ \u0026quot;tftpÂ isÂ notÂ run,pleaseÂ check\u0026quot;  å®‰è£…æ ¡éªŒåŠæ³¨æ„äº‹é¡¹  PXE æœåŠ¡å¼€æœºè‡ªå¯ âš ï¸ å½“éœ€è¦å®‰è£…çš„æœåŠ¡å™¨è‡ªåŠ¨å®‰è£…å®Œæ¯•åè®°å¾—å…³é—­ PXE æœåŠ¡ï¼Œå› ä¸ºä¸‡ä¸€å‡ºç°ä¸šåŠ¡ç³»ç»ŸæœåŠ¡å™¨å¼€æœºæ‰¾ä¸åˆ°ç³»ç»Ÿï¼Œè‡ªåŠ¨ä» PXE å¼•å¯¼ï¼Œä¼šè¢«é‡æ–°å®‰è£…æ“ä½œç³»ç»Ÿï¼ˆä» PXE åˆ°è·‘è·¯â€¦â€¦ï¼‰ å› å®‰è£…æ—¶å…³é—­äº†ç³»ç»Ÿé˜²ç«å¢™ï¼Œå¦‚æœ‰éœ€è¦ï¼Œè¯·é‡æ–°å¼€å¯ å› å®‰è£…éœ€è¦é…ç½®çš„ DHCP æœåŠ¡ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šåœ¨ä¹‹åçš„ä¸šåŠ¡ä¸­å¹¶ä¸ä¼šä½¿ç”¨ PXE çš„ DHCP æœåŠ¡ï¼Œæ³¨æ„æ£€æŸ¥æˆ–å…³é—­æ­¤ DHCP æœåŠ¡ ä½¿ç”¨ PXE è‡ªåŠ¨åŒ–å®‰è£…ç³»ç»Ÿï¼Œæœ€å°å†…å­˜è¦æ±‚ä¸º 2GBï¼Œä½¿ç”¨è™šæ‹Ÿæœºéƒ¨ç½²è¯·æ³¨æ„  ä¿®è®¢ä¿¡æ¯    ç‰ˆæœ¬å· ä¿®è®¢æ—¥æœŸ ä¿®è®¢äºº å¤‡æ³¨     v1.1.2001 2020-01-13 NUO å»ºç«‹æ–‡æ¡£   v1.2.2001 2020-01-16 NUO æ›´æ–° ks æ–‡ä»¶   v1.3.2001 2020-01-28 NUO æ›´æ–°å…‰ç›˜æ–‡ä»¶è¯´æ˜    ","id":21,"section":"posts","summary":"ğŸ‘Œ 2020-01-15 PXE é¢„å¯åŠ¨ç¯å¢ƒå®‰è£… - Legacy ä¼ ç»Ÿå¼•å¯¼ç¯å¢ƒ FileInfo Filename - PXE Legacy Boot Configure Guide.md Version - v1.3.2001ï¼ˆ2020/01/13 ~ 2020/01/28ï¼‰ Author - standuke Email - shadowdoker@gmail.com DescriptionKey - PXE Boot","tags":["CentOS","PXE"],"title":"PXE é¢„å¯åŠ¨ç¯å¢ƒå®‰è£… - Legacy ä¼ ç»Ÿå¼•å¯¼ç¯å¢ƒ","uri":"https://blog.standuke.top/2020/01/2020-01-15-pxe-%E9%A2%84%E5%90%AF%E5%8A%A8%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85-legacy-%E4%BC%A0%E7%BB%9F%E5%BC%95%E5%AF%BC%E7%8E%AF%E5%A2%83/","year":"2020"},{"content":"ğŸ‘Œ 2020-01-14 Markdown æ–‡æ¡£ç¼–å†™è¯­æ³•æŒ‡åŒ—  FileInfo Filename - Markdown Syntax And Writing Specifications Guide.md Version - v1.2.2001ï¼ˆ2020/01/14 ~ 2020/01/15ï¼‰ Author - standuke Email - shadowdoker@gmail.com DescriptionKey - Markdown Syntax And Writing Specifications \u0026amp; Chinese and Western typography \u0026amp; Punctuation Specification\n æ–‡ä»¶ç¼–å†™çº¦å®š åœ¨æ–‡ä»¶å¼€å¤´å°†ä¼šæ ‡æ³¨æ–‡ä»¶çš„ä¿¡æ¯ï¼Œæ–‡ä»¶ä¿¡æ¯åŒ…æ‹¬æ–‡ä»¶åç§°ï¼Œç”¨äºæ–‡ä»¶æ£€ç´¢ã€‚åŒæ—¶ä¼šæ ‡æ³¨æ–‡ä»¶çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œç‰ˆæœ¬ä¿¡æ¯æ ¼å¼ä¸ºv + å¤§ç‰ˆæœ¬å· + ä¿®è®¢ç‰ˆæœ¬å· + ä¿®è®¢å¹´æœˆï¼Œä¾‹å¦‚v1.2.1909æ‰€ä»£è¡¨çš„å«ä¹‰ä¸ºç¬¬ä¸€ä¸ªå¤§ç‰ˆæœ¬ã€ç¬¬äºŒä¸ªä¿®è®¢ç‰ˆã€ä¿®è®¢å¹´æœˆä¸º 2019 å¹´ 9 æœˆã€‚ä¹‹åä¸ºä½œè€…åŠè”ç³»æ–¹å¼ã€‚æ–‡æ¡£æè¿°å’Œå…³é”®å­—ç”¨äºæœç´¢è½¯ä»¶æ£€ç´¢æ–‡æ¡£ã€‚\n æ¬¢è¿æ•ˆä»¿\n Markdown çš„è®¾è®¡å“²å­¦ Markdown æ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œåˆ›å§‹äººä¸ºçº¦ç¿°Â·æ ¼é²ä¼¯ï¼ˆJohn Gruberï¼‰ã€‚å®ƒå…è®¸äººä»¬ã€ä½¿ç”¨æ˜“è¯»æ˜“å†™çš„çº¯æ–‡æœ¬æ ¼å¼ç¼–å†™æ–‡æ¡£ï¼Œç„¶åè½¬æ¢æˆæœ‰æ•ˆçš„ XHTMLï¼ˆæˆ–è€… HTMLï¼‰æ–‡æ¡£ã€ã€‚ æ•… Markdown çš„ç›®æ ‡æ˜¯å®ç°æ–‡æ¡£çš„ã€Œæ˜“è¯»æ˜“å†™ã€ã€‚å…¶ä¸­æœ€éœ€è¦å¼ºè°ƒçš„æ˜¯å®ƒçš„æ˜“è¯»æ€§ã€‚ä¸€ä»½ä½¿ç”¨ Markdown æ ¼å¼çš„æ–‡ä»¶åœ¨çº¯æ–‡å­—å‘å¸ƒçš„æƒ…å†µä¸‹ï¼Œçœ‹èµ·æ¥éƒ½ä¸ä¼šåƒæ˜¯æœ‰è®¸å¤šç¬¦å·æ‰€ç»„æˆçš„æ–‡æ¡£ã€‚ ç”±äºMarkdownçš„è½»é‡åŒ–ã€æ˜“è¯»æ˜“å†™ç‰¹æ€§ï¼Œå¹¶ä¸”å¯¹äºå›¾ç‰‡ï¼Œå›¾è¡¨ã€æ•°å­¦å¼éƒ½æœ‰æ”¯æŒï¼Œå½“å‰è®¸å¤šç½‘ç«™éƒ½å¹¿æ³›ä½¿ç”¨ Markdown æ¥æ’°å†™å¸®åŠ©æ–‡æ¡£æˆ–æ˜¯ç”¨äºè®ºå›ä¸Šå‘è¡¨æ¶ˆæ¯ã€‚\næ–‡ç« ç»“æ„åŠé˜…è¯»æŒ‡åŒ— åœ¨æœ¬ç¯‡æ–‡æ¡£ä¸­å°†ä¼šåˆ†ä¸ºä¸‰å¤§éƒ¨åˆ†ã€‚ç¬¬ä¸€éƒ¨åˆ†æ˜¯åŸºç¡€çš„ Markdown è¯­æ³•ä»¥åŠä½¿ç”¨èŒƒä¾‹ï¼›ç¬¬äºŒéƒ¨åˆ†ä¸ºä¹¦å†™æ’ç‰ˆåŠä¸­è¥¿æ–‡æ··æ’èŒƒä¾‹ï¼ˆéƒ¨åˆ†æ¥è‡ªç™¾åº¦å‰ç«¯å›¢é˜Ÿã€çŸ¥ä¹ï¼‰ï¼›ç¬¬ä¸‰éƒ¨åˆ†ä¸ºæ ‡ç‚¹ç¬¦å·ä½¿ç”¨èŒƒä¾‹ï¼ˆæ¥è‡ªçŸ¥ä¹ï¼‰ã€‚ç›¸å…³å¯æŸ¥çœ‹ Github è§„èŒƒ ä»¥åŠ çŸ¥ä¹ä¿®æ”¹è§„èŒƒ ã€ä¸­æ–‡æ–‡æ¡ˆæ’ç‰ˆæŒ‡åŒ—\n[TOC]\n âš ï¸ ä»¥ä¸Šä¸ºæ–‡æ¡£ç®€ä»‹ï¼Œæ­£æ–‡åŠè§„èŒƒä»ä¸‹æ–‡å¼€å§‹ï¼Œå› ä¸ºè€ƒè™‘åˆ°ä¸‰å¤§éƒ¨åˆ†çš„ç‹¬ç«‹æ€§ï¼Œæ•…å„ä¸ªéƒ¨åˆ†å‡ç›¸äº’ç‹¬ç«‹ï¼Œä¸”å‡ä»¥ ä¸€çº§æ ‡é¢˜ å¼€å§‹\n Markdown è¯­æ³• 1. æ ‡é¢˜ Markdown è¯­æ³•ï¼š\n# ç¬¬ä¸€çº§æ ‡é¢˜ `\u0026lt;h1\u0026gt;` ## ç¬¬äºŒçº§æ ‡é¢˜ `\u0026lt;h2\u0026gt;` ###### ç¬¬å…­çº§æ ‡é¢˜ `\u0026lt;h6\u0026gt;`  æ•ˆæœå¦‚ä¸‹ï¼š\nç¬¬ä¸€çº§æ ‡é¢˜ \u0026lt;h1\u0026gt; ç¬¬äºŒçº§æ ‡é¢˜ \u0026lt;h2\u0026gt; ç¬¬å…­çº§æ ‡é¢˜ \u0026lt;h6\u0026gt; 2. å¼ºè°ƒ Markdown è¯­æ³•ï¼š\n*è¿™äº›æ–‡å­—ä¼šç”Ÿæˆ`\u0026lt;em\u0026gt;`* _è¿™äº›æ–‡å­—ä¼šç”Ÿæˆ`\u0026lt;u\u0026gt;`_ **è¿™äº›æ–‡å­—ä¼šç”Ÿæˆ`\u0026lt;strong\u0026gt;`** __è¿™äº›æ–‡å­—ä¼šç”Ÿæˆ`\u0026lt;strong\u0026gt;`__  æ•ˆæœå¦‚ä¸‹ï¼š\nè¿™äº›æ–‡å­—ä¼šç”Ÿæˆ\u0026lt;em\u0026gt; è¿™äº›æ–‡å­—ä¼šç”Ÿæˆ\u0026lt;u\u0026gt;\nè¿™äº›æ–‡å­—ä¼šç”Ÿæˆ\u0026lt;strong\u0026gt; è¿™äº›æ–‡å­—ä¼šç”Ÿæˆ\u0026lt;strong\u0026gt;\n3. æ¢è¡Œ å››ä¸ªåŠä»¥ä¸Šç©ºæ ¼åŠ å›è½¦ã€‚\n4. åˆ—è¡¨ æ— åºåˆ—è¡¨ Markdown è¯­æ³•ï¼š\n* é¡¹ç›®ä¸€ æ— åºåˆ—è¡¨ `* + ç©ºæ ¼é”®` * é¡¹ç›®äºŒ * é¡¹ç›®äºŒçš„å­é¡¹ç›®ä¸€ æ— åºåˆ—è¡¨ `TAB + * + ç©ºæ ¼é”®` * é¡¹ç›®äºŒçš„å­é¡¹ç›®äºŒ  æ•ˆæœå¦‚ä¸‹ï¼š\n é¡¹ç›®ä¸€ æ— åºåˆ—è¡¨ * + ç©ºæ ¼é”® é¡¹ç›®äºŒ  é¡¹ç›®äºŒçš„å­é¡¹ç›®ä¸€ æ— åºåˆ—è¡¨ TAB + * + ç©ºæ ¼é”® é¡¹ç›®äºŒçš„å­é¡¹ç›®äºŒ    æœ‰åºåˆ—è¡¨ Markdown è¯­æ³•ï¼š\n1. é¡¹ç›®ä¸€ æœ‰åºåˆ—è¡¨ `æ•°å­— + . + ç©ºæ ¼é”®` 2. é¡¹ç›®äºŒ 3. é¡¹ç›®ä¸‰ 1. é¡¹ç›®ä¸‰çš„å­é¡¹ç›®ä¸€ æœ‰åºåˆ—è¡¨ `TAB + æ•°å­— + . + ç©ºæ ¼é”®` 2. é¡¹ç›®ä¸‰çš„å­é¡¹ç›®äºŒ  æ•ˆæœå¦‚ä¸‹ï¼š\n é¡¹ç›®ä¸€ æœ‰åºåˆ—è¡¨ æ•°å­— + . + ç©ºæ ¼é”® é¡¹ç›®äºŒ é¡¹ç›®ä¸‰  é¡¹ç›®ä¸‰çš„å­é¡¹ç›®ä¸€ æœ‰åºåˆ—è¡¨ TAB + æ•°å­— + . + ç©ºæ ¼é”® é¡¹ç›®ä¸‰çš„å­é¡¹ç›®äºŒ    åˆ—è¡¨ä¸­åµŒå…¥ä»£ç å—è¯­æ³• 1. é¡¹ç›®ä¸€ æœ‰åºåˆ—è¡¨ `æ•°å­— + . + ç©ºæ ¼é”®` åˆ—è¡¨ä¸­åµŒå…¥ä»£ç å—å¿…é¡»å‰åç©ºä¸€è¡Œï¼Œå¦‚è¿™ä¸ªå†™æ³• ```js function fancyAlert(arg) { if(arg) { $.facebox({div:'#foo'}) } } ``` å…¶ä»–æ–‡æœ¬ã€‚ 2. é¡¹ç›®äºŒ  ä»»åŠ¡åˆ—è¡¨ï¼ˆTask listsï¼‰ Markdown è¯­æ³•ï¼š\n- [ ] ä»»åŠ¡ä¸€ æœªåšä»»åŠ¡ `- + ç©ºæ ¼ + [ ]` - [x] ä»»åŠ¡äºŒ å·²åšä»»åŠ¡ `- + ç©ºæ ¼ + [x]`  æ•ˆæœå¦‚ä¸‹ï¼š\n ä»»åŠ¡ä¸€ æœªåšä»»åŠ¡ - + ç©ºæ ¼ + [ ] ä»»åŠ¡äºŒ å·²åšä»»åŠ¡ - + ç©ºæ ¼ + [x]  5. å›¾ç‰‡ Markdown è¯­æ³•ï¼š\n![GitHub set up](http://URL/set-up-git.gif) æ ¼å¼: ![Alt Text](url)  æ•ˆæœå¦‚ä¸‹ï¼š\n6. é“¾æ¥ Markdown è¯­æ³•ï¼š\nemail \u0026lt;example@example.com\u0026gt; [GitHub](http://github.com) è‡ªåŠ¨ç”Ÿæˆè¿æ¥ \u0026lt;http://www.github.com/\u0026gt;  æ•ˆæœå¦‚ä¸‹ï¼š\nEmail è¿æ¥ï¼š example@example.com è¿æ¥æ ‡é¢˜Githubç½‘ç«™ è‡ªåŠ¨ç”Ÿæˆè¿æ¥åƒï¼š http://www.github.com/ è¿™æ ·\n7. åŒºå—å¼•ç”¨ Markdown è¯­æ³•ï¼š\næŸæŸè¯´: \u0026gt; ç¬¬ä¸€è¡Œå¼•ç”¨ \u0026gt; ç¬¬äºŒè¡Œè´¹ç”¨æ–‡å­—  æ•ˆæœå¦‚ä¸‹ï¼š\næŸæŸè¯´:\n ç¬¬ä¸€è¡Œå¼•ç”¨ ç¬¬äºŒè¡Œè´¹ç”¨æ–‡å­—\n 8. è¡Œå†…ä»£ç  Markdown è¯­æ³•ï¼š\nåƒè¿™æ ·å³å¯ï¼š`\u0026lt;addr\u0026gt;` `code`  æ•ˆæœå¦‚ä¸‹ï¼š\nåƒè¿™æ ·å³å¯ï¼š\u0026lt;addr\u0026gt; code\n9. å¤šè¡Œæˆ–è€…ä¸€æ®µä»£ç  Markdown è¯­æ³•ï¼š\n```js function fancyAlert(arg) { if(arg) { $.facebox({div:'#foo'}) } } ```  æ•ˆæœå¦‚ä¸‹ï¼š\nfunction fancyAlert(arg) { if(arg) { $.facebox({div:'#foo'}) } }  10. é¡ºåºå›¾æˆ–æµç¨‹å›¾ Markdown è¯­æ³•ï¼š\n```sequence å¼ ä¸‰-\u0026gt;æå››: å˜¿ï¼Œå°å››å„¿, å†™åšå®¢äº†æ²¡? Note right of æå››: æå››æ„£äº†ä¸€ä¸‹ï¼Œè¯´ï¼š æå››--\u0026gt;å¼ ä¸‰: å¿™å¾—åè¡€ï¼Œå“ªæœ‰æ—¶é—´å†™ã€‚ ``` ```flow st=\u0026gt;start: å¼€å§‹ e=\u0026gt;end: ç»“æŸ op=\u0026gt;operation: æˆ‘çš„æ“ä½œ cond=\u0026gt;condition: ç¡®è®¤ï¼Ÿ st-\u0026gt;op-\u0026gt;cond cond(yes)-\u0026gt;e cond(no)-\u0026gt;op ```  æ•ˆæœå¦‚ä¸‹ï¼ˆã€Œã€ï¼‰ï¼š\nå¼ ä¸‰-\u0026gt;æå››: å˜¿ï¼Œå°å››å„¿, å†™åšå®¢äº†æ²¡? Note right of æå››: æå››æ„£äº†ä¸€ä¸‹ï¼Œè¯´ï¼š æå››--\u0026gt;å¼ ä¸‰: å¿™å¾—åè¡€ï¼Œå“ªæœ‰æ—¶é—´å†™ã€‚  st=\u0026gt;start: å¼€å§‹ e=\u0026gt;end: ç»“æŸ op=\u0026gt;operation: æˆ‘çš„æ“ä½œ cond=\u0026gt;condition: ç¡®è®¤ï¼Ÿ st-\u0026gt;op-\u0026gt;cond cond(yes)-\u0026gt;e cond(no)-\u0026gt;op  æ›´å¤šè¯·å‚è€ƒï¼šhttp://bramp.github.io/js-sequence-diagrams/, http://adrai.github.io/flowchart.js/\n11. è¡¨æ ¼ Markdown è¯­æ³•ï¼š\nç¬¬ä¸€æ ¼è¡¨å¤´ | ç¬¬äºŒæ ¼è¡¨å¤´ --------- | ------------- å†…å®¹å•å…ƒæ ¼ ç¬¬ä¸€åˆ—ç¬¬ä¸€æ ¼ | å†…å®¹å•å…ƒæ ¼ç¬¬äºŒåˆ—ç¬¬ä¸€æ ¼ å†…å®¹å•å…ƒæ ¼ ç¬¬ä¸€åˆ—ç¬¬äºŒæ ¼ å¤šåŠ æ–‡å­— | å†…å®¹å•å…ƒæ ¼ç¬¬äºŒåˆ—ç¬¬äºŒæ ¼  æ•ˆæœå¦‚ä¸‹ï¼š\n   ç¬¬ä¸€æ ¼è¡¨å¤´ ç¬¬äºŒæ ¼è¡¨å¤´     å†…å®¹å•å…ƒæ ¼ ç¬¬ä¸€åˆ—ç¬¬ä¸€æ ¼ å†…å®¹å•å…ƒæ ¼ç¬¬äºŒåˆ—ç¬¬ä¸€æ ¼   å†…å®¹å•å…ƒæ ¼ ç¬¬ä¸€åˆ—ç¬¬äºŒæ ¼ å¤šåŠ æ–‡å­— å†…å®¹å•å…ƒæ ¼ç¬¬äºŒåˆ—ç¬¬äºŒæ ¼    12. åˆ é™¤çº¿ Markdown è¯­æ³•ï¼š\nåŠ åˆ é™¤çº¿åƒè¿™æ ·ç”¨ï¼š ~~åˆ é™¤è¿™äº›~~  æ•ˆæœå¦‚ä¸‹ï¼š\nåŠ åˆ é™¤çº¿åƒè¿™æ ·ç”¨ï¼š åˆ é™¤è¿™äº›\n13. åˆ†éš”çº¿ ä»¥ä¸‹ä¸‰ç§æ–¹å¼éƒ½å¯ä»¥ç”Ÿæˆåˆ†éš”çº¿ï¼š\n*** ***** - - -  æ•ˆæœå¦‚ä¸‹ï¼š\n   14. MathJax Markdown è¯­æ³•ï¼š\nå—çº§å…¬å¼ï¼š $$\tx = \\dfrac{-b \\pm \\sqrt{b^2 - 4ac}}{2a} $$ \\\\[ \\frac{1}{\\Bigl(\\sqrt{\\phi \\sqrt{5}}-\\phi\\Bigr) e^{\\frac25 \\pi}} = 1+\\frac{e^{-2\\pi}} {1+\\frac{e^{-4\\pi}} {1+\\frac{e^{-6\\pi}} {1+\\frac{e^{-8\\pi}} {1+\\ldots} } } } \\\\] è¡Œå†…å…¬å¼ï¼š $\\Gamma(n) = (n-1)!\\quad\\forall n\\in\\mathbb N$  æ•ˆæœå¦‚ä¸‹ï¼ˆã€Œã€ï¼‰ï¼š\nå—çº§å…¬å¼ï¼š $$\tx = \\dfrac{-b \\pm \\sqrt{b^2 - 4ac}}{2a} $$\n\\[ \\frac{1}{\\Bigl(\\sqrt{\\phi \\sqrt{5}}-\\phi\\Bigr) e^{\\frac25 \\pi}} = 1+\\frac{e^{-2\\pi}} {1+\\frac{e^{-4\\pi}} {1+\\frac{e^{-6\\pi}} {1+\\frac{e^{-8\\pi}} {1+\\ldots} } } } \\]\nè¡Œå†…å…¬å¼ï¼š $\\Gamma(n) = (n-1)!\\quad\\forall n\\in\\mathbb N$\n15. è„šæ³¨ï¼ˆFootnoteï¼‰ Markdown è¯­æ³•ï¼š\nè¿™æ˜¯ä¸€ä¸ªè„šæ³¨ï¼š[^sample_footnote]  æ•ˆæœå¦‚ä¸‹ï¼š\nè¿™æ˜¯ä¸€ä¸ªè„šæ³¨ï¼š1\n16. é«˜äº®ï¼ˆHighlightï¼‰ Markdown è¯­æ³•ï¼š\n==example==  æ•ˆæœå¦‚ä¸‹ï¼š ==example==\n17. æ³¨é‡Šå’Œé˜…è¯»æ›´å¤š Markdown è¯­æ³•ï¼š\n\u0026lt;!-- comment --\u0026gt; \u0026lt;!-- more --\u0026gt;  æ³¨ é˜…è¯»æ›´å¤šçš„åŠŸèƒ½åªç”¨åœ¨ç”Ÿæˆç½‘ç«™æˆ–åšå®¢æ—¶ï¼Œæ’å…¥æ—¶æ³¨æ„è¦åç©ºä¸€è¡Œã€‚\n18. é”šç‚¹é“¾æ¥ Markdown è¯­æ³•ï¼š\nä»»æ„ 1-6 ä¸ª # æ ‡æ³¨çš„æ ‡é¢˜éƒ½ä¼šè¢«æ·»åŠ ä¸ŠåŒåçš„é”šç‚¹é“¾æ¥\n[æ ‡é¢˜1](#æ ‡é¢˜1) [æ ‡é¢˜2](#æ ‡é¢˜2) [æ ‡é¢˜3](#æ ‡é¢˜3) # æ ‡é¢˜1 ## æ ‡é¢˜2 ### æ ‡é¢˜3  é”šç‚¹è·³è½¬çš„æ ‡è¯†åç§°ï¼Œå¯ä½¿ç”¨ä»»æ„å­—ç¬¦ï¼Œå¤§å†™å­—æ¯è¦è½¬æ¢æˆå°å†™\n[Githubæ ‡é¢˜1](#githubæ ‡é¢˜1) ### Githubæ ‡é¢˜1  å¤šå•è¯é”šç‚¹çš„ç©ºæ ¼ç”¨ - ä»£æ›¿\n[Github æ ‡é¢˜2 Test](#github-æ ‡é¢˜2-test) ### Github æ ‡é¢˜2 Test  å¤šçº§åºå·éœ€è¦å»é™¤ .\n[2.3. Github æ ‡é¢˜](#23-github-æ ‡é¢˜) ### 2.3. Github æ ‡é¢˜  æ³¨ Github å¹¶ä¸æ”¯æŒ HTML å½¢å¼çš„é”šç‚¹é“¾æ¥ï¼Œå®ƒæœ‰è‡ªå·±çš„è§„åˆ™ã€‚ç”±äºå¾ˆå¤šæ¸²æŸ“å™¨ä¸æ”¯æŒé”šç‚¹ï¼Œæ•…å°½é‡å°‘ä½¿ç”¨é”šç‚¹ã€‚éè‹±æ–‡çš„é”šç‚¹å­—ç¬¦ï¼Œåœ¨å•å‡»è·³è½¬æ—¶ï¼Œåœ¨æµè§ˆå™¨çš„ url ä¸­ä¼šæŒ‰ç…§è§„åˆ™è¿›è¡Œ encode å’Œ decodeã€‚ æ›´å¤šè¯·å‚è€ƒï¼šhttps://my.oschina.net/antsky/blog/1475173/\n19. TOC Markdown è¯­æ³•ï¼š\n[TOC]  æ•ˆæœå¦‚æ–‡æ¡£å¼€å¤´çš„ç›®å½•\n  ä¹¦å†™æ’ç‰ˆåŠä¸­è¥¿æ–‡æ··æ’èŒƒä¾‹ 1. ä¹¦å†™æ’ç‰ˆèŒƒä¾‹ æ–‡æ¡£å¤§æ ‡é¢˜å¿…é¡»ä»¥ # å¼€å¤´ ç« èŠ‚æ ‡é¢˜å¿…é¡»ä»¥ ## å¼€å§‹ï¼Œè€Œä¸æ˜¯ # å‡¡æ˜¯æ ‡é¢˜ï¼Œä¸‹æ–¹æ­£æ–‡ä¹¦å†™å¿…é¡»ç©ºä¸€è¡Œ\nä¾‹å¦‚ï¼š\n// bad ##ç« èŠ‚1 // bad ## ç« èŠ‚1 ## // good ## ç« èŠ‚1 // bad ## ç« èŠ‚1 å†…å®¹ ## ç« èŠ‚2 // good ## ç« èŠ‚1 å†…å®¹ ## ç« èŠ‚2  ä»£ç æ®µçš„å¿…é¡»ã€ŒMUSTã€ä½¿ç”¨ Fenced code blocks é£æ ¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\nconsole.log(\u0026quot;\u0026quot;);  è¡¨æ ¼çš„å†™æ³•åº”è¯¥å‚è€ƒ GFMï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n   First Header Second Header     Content Cell Content Cell   Content Cell Content Cell       Left-Aligned Center Aligned Right Aligned     col 3 is some wordy text $1600   col 2 is centered $12   zebra stripes are neat $1    2. ä¸­è¥¿æ–‡æ··æ’èŒƒä¾‹ ä¸­è¥¿æ–‡æ··æ’åº”è¯¥é‡‡ç”¨å¦‚ä¸‹è§„åˆ™ï¼š\nã€åŸºæœ¬è§„åˆ™ã€‘\n è‹±æ–‡å’Œæ•°å­—ä½¿ç”¨åŠè§’å­—ç¬¦ ä¸­æ–‡æ–‡å­—ä¹‹é—´ä¸åŠ ç©ºæ ¼ ä¸­æ–‡æ–‡å­—ä¸è‹±æ–‡ã€é˜¿æ‹‰ä¼¯æ•°å­—åŠ @ # $ % ^ \u0026amp; * . ( ) ç­‰ç¬¦å·ä¹‹é—´åŠ ç©ºæ ¼ ä¸­æ–‡æ ‡ç‚¹ä¹‹é—´ä¸åŠ ç©ºæ ¼ ä¸­æ–‡æ ‡ç‚¹ä¸å‰åå­—ç¬¦ï¼ˆæ— è®ºå…¨è§’æˆ–åŠè§’ï¼‰ä¹‹é—´ä¸åŠ ç©ºæ ¼ å¦‚æœæ‹¬å·å†…æœ‰ä¸­æ–‡ï¼Œåˆ™ä½¿ç”¨ä¸­æ–‡æ‹¬å· å¦‚æœæ‹¬å·ä¸­çš„å†…å®¹å…¨éƒ¨éƒ½æ˜¯è‹±æ–‡ï¼Œåˆ™ä½¿ç”¨åŠè§’è‹±æ–‡æ‹¬å· å½“åŠè§’ç¬¦å· / è¡¨ç¤ºã€Œæˆ–è€…ã€ä¹‹æ„æ—¶ï¼Œä¸å‰åçš„å­—ç¬¦ä¹‹é—´å‡ä¸åŠ ç©ºæ ¼ ç»“å°¾ä¸æ”¹å†™è¥¿æ–‡ä¸“æœ‰åè¯ä¸­çš„åŠè§’æ ‡ç‚¹å¦‚ \u0026ldquo;McDonald\u0026rsquo;s\u0026rdquo; ä¸­è¥¿æ–‡ï¼ˆå’Œå…¶ä»–è¥¿æ–‡åŠè§’ç¬¦å·ï¼‰é—´ç•™ä¸€ä¸ªåŠè§’ç©ºæ ¼ ä¸­æ–‡å’Œé˜¿æ‹‰ä¼¯æ•°å­—ä¹‹é—´åŒæ ·éœ€ç•™ä¸€ä¸ªåŠè§’ç©ºæ ¼åŒ…è£¹ ä¸­æ–‡å†…å®¹çš„å¼•å·åº”ä½¿ç”¨ç›´è§’å¼•å·ã€Œã€æˆ–ã€ã€ åŒ…è£¹è¥¿æ–‡å†…å®¹çš„å¼•å·å¯ä»¥ä½¿ç”¨ \u0026quot;\u0026quot; æˆ– '' åŒ…è£¹è¥¿æ–‡å†…å®¹çš„æ‹¬å·å¯ä»¥ä½¿ç”¨ () æˆ–ï¼ˆï¼‰  ä»¥ä¸‹ç¤ºä¾‹çš„æƒ…å†µæ— éœ€ä¿®æ”¹ï¼š ä¸ºä»€ä¹ˆ OS X çš„å¸‚åœºä»½é¢ä¸åŠ Windowsï¼Ÿ è‹¹æœå…¬å¸ (Apple) çš„æ‹›è˜æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ 1970 å¹´ä»£çš„ç¾å›½ç”µå½±æœ‰å“ªäº›æ¨èï¼Ÿ å¦‚ä½•ç†è§£ \u0026lsquo;double irish with a dutch sandwich\u0026rsquo; é¿ç¨æ–¹æ³•ï¼Ÿ\nã€è¡¨è¾¾æ–¹å¼ã€‘\n åº”å½“éµå¾ªã€ŠThe Element of Styleã€‹ ä½¿æ®µè½æˆä¸ºæ–‡ç« çš„å•å…ƒ ä¸€ä¸ªæ®µè½åªè¡¨è¾¾ä¸€ä¸ªä¸»é¢˜ é€šå¸¸åœ¨æ¯ä¸€æ®µè½å¼€å§‹è¦ç‚¹é¢˜ï¼Œåœ¨æ®µè½ç»“å°¾è¦æ‰£é¢˜ ä½¿ç”¨ä¸»åŠ¨è¯­æ€ é™ˆè¿°å¥ä¸­ä½¿ç”¨è‚¯å®šè¯´æ³• åˆ é™¤ä¸å¿…è¦çš„è¯ é¿å…è¿ç»­ä½¿ç”¨æ¾æ•£çš„å¥å­ ä½¿ç”¨ç›¸åŒçš„ç»“æ„è¡¨è¾¾å¹¶åˆ—çš„æ„æ€ å°†ç›¸å…³çš„è¯æ”¾åœ¨ä¸€èµ· åœ¨æ€»ç»“ä¸­ï¼Œè¦ç”¨åŒä¸€ç§æ—¶æ€ï¼ˆè¿™é‡ŒæŒ‡è‹±æ–‡ä¸­çš„æ—¶æ€ï¼Œä¸­æ–‡ä¸é€‚ç”¨ï¼Œæ‰€ä»¥å¯ä»¥ä¸ç†ä¼šï¼‰ å°†å¼ºè°ƒçš„è¯æ”¾åœ¨å¥æœ« é¿å…æ¨¡ç³Š è¯¯ï¼šæœ€è¿‘æœ‰å“ªäº›å€¼å¾—æ¨èçš„å–œå‰§ç”µå½±ï¼Ÿ æ­£ï¼š2012 å¹´ 7 æœˆ æœ‰å“ªäº›å€¼å¾—æ¨èçš„å–œå‰§ç”µå½±ï¼Ÿ ä¸å†…å®¹æ— å…³çš„å†—ä½™ä¿®è¾ï¼Œéœ€è¦åˆ é™¤  éœ€è¦ä¿®æ”¹çš„è¯è¯­ ç½‘ç»œç”¨è¯­ä¾‹ï¼šã€Œä¸œä¸œã€ åº”ä¸ºã€Œä¸œè¥¿ã€ ï¼Œã€Œç¥é©¬ã€åº”ä¸ºã€Œä»€ä¹ˆã€ å£å¤´è¯­ä¾‹ï¼šã€Œä¸ºå•¥ã€åº”ä¸ºã€Œä¸ºä»€ä¹ˆã€ ä¸æ–‡æ˜ç”¨è¯­ä¾‹ï¼šã€Œç‰›é€¼ã€åº”ä¸ºã€Œå‰å®³ã€ã€Œå¼ºå¤§ã€ç­‰ é”™åˆ«å­—ï¼šã€Œæ–¯å¾·å“¥å°”æ‘©ç»¼åˆç—‡ã€åº”ä¸ºã€Œæ–¯å¾·å“¥å°”æ‘©ç»¼åˆå¾ã€\næ‰©å±•é˜…è¯» Google åæ¥ä¹Ÿå‡ºäº† Markdown è§„èŒƒï¼Œå¾ˆå¤šå’Œè¿™é‡Œæ˜¯ä¸€æ ·çš„ï¼Œä½†ä¹Ÿå¢åŠ äº†ä¸€äº›çº¦å®šï¼Œå¯ä»¥å‚è€ƒ\n  æ ‡ç‚¹ç¬¦å·ä½¿ç”¨ æ³¨æ„äº‹é¡¹ é¿å…é‡å¤æ··ä¹± è‹±æ–‡é—®å·ï¼ˆ?ï¼‰ã€é‡å¤ï¼ˆï¼Ÿï¼Ÿï¼Ÿï¼‰ã€æ··ä¹±ï¼ˆï¼Ÿï¼ï¼‰ é€—å·ï¼šè‹±æ–‡é€—å·ï¼ˆ,ï¼‰ã€é‡å¤ï¼ˆï¼Œï¼Œï¼Œï¼‰ã€æ··ä¹±ï¼ˆï¼Œï¼Œã€‚ï¼‰\né—®å· é€‰æ‹©é—®å¥ä¸­ï¼Œé—®å·åªç”¨åœ¨æœ«å°¾ è¯¯ï¼šä»Šååå¹´å†…ï¼Œä¸»æµæ‰‹æœºçš„ç³»ç»Ÿè°ä¸»æ²‰æµ®ï¼ŸAndroidï¼ŸWindows Phoneï¼ŸMeeGo ï¼ŸiOSï¼Ÿ æ­£ï¼šä»Šååå¹´å†…ï¼Œä¸»æµæ‰‹æœºçš„ç³»ç»Ÿè°ä¸»æ²‰æµ®ï¼ŸAndroidã€Windows Phoneã€MeeGoã€iOSï¼Ÿ\nè¿ç»­æé—®æ—¶ï¼Œæ¯ä¸ª-é—®å¥çš„åé¢éƒ½ä»¥é—®å·ç»“å°¾ è¯¯ï¼šå½“å‰ç§»åŠ¨äº’è”ç½‘çš„ç¬¬ä¸€å¤§å…¥å£æ˜¯ä»€ä¹ˆï¼Œç«äº‰åŠ›å¦‚ä½•ï¼Ÿ æ­£ï¼šå½“å‰ç§»åŠ¨äº’è”ç½‘çš„ç¬¬ä¸€å¤§å…¥å£æ˜¯ä»€ä¹ˆï¼Ÿç«äº‰åŠ›å¦‚ä½•ï¼Ÿ\nçœç•¥å· ä½¿ç”¨è§„èŒƒçš„ã€Œâ€¦â€¦ã€ï¼Œç¦ç”¨å„ç§é”™è¯¯å˜ä½“ã€Œã€‚ã€‚ã€ã€Œã€‚ã€‚ã€‚ã€ã€Œã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€å‡ºäºç®€æ´è€ƒè™‘ï¼Œå°½é‡ä¸åœ¨æ ‡é¢˜ä¸­ä½¿ç”¨çœç•¥å· çœç•¥å·ä½¿ç”¨ã€Œâ€¦â€¦ã€ï¼Œè€Œã€Œã€‚ã€‚ã€‚ã€ä»…ç”¨äºè¡¨ç¤ºåœé¡¿\né¡¿å· åŒç±»ã€å¹¶åˆ—çš„å•å­—ã€è¯è¯­å’ŒçŸ­è¯­ç”¨é¡¿å·åˆ†éš”å¹¶åˆ—çš„ä¹¦åå·ã€å¼•å·ä¹‹é—´ï¼Œå¯ç”¨å¯ä¸ç”¨ï¼Œå…¨æ–‡ç»Ÿä¸€å³å¯\nä¹¦åå· ä¹¦åã€ç¯‡åã€æŠ¥çº¸åã€æ‚å¿—åã€æ­Œæ›²åã€å½±å‰§åå’Œå›¾è¡¨åï¼Œç”¨ä¹¦åå·æ ‡è¯†æ‹¬å·ç”¨ä½œæ³¨æ˜ç¿»è¯‘æˆ–åŸæ–‡æ—¶åº”ç½®äºä¹¦åå·å¤– è¯¯ï¼šã€Šæ—ºè¾¾ä¸å·¨åƒï¼ˆShadow of the Colossusï¼‰ã€‹å¥½ç©å—ï¼Ÿ æ­£ï¼šã€Šæ—ºè¾¾ä¸å·¨åƒã€‹ï¼ˆShadow of the Colossusï¼‰å¥½ç©å—ï¼Ÿ\nå¼•å· åŒ…è£¹å¯¹è±¡ä¸ºä¸­æ–‡æ—¶ä½¿ç”¨ç›´è§’å¼•å·ã€Œã€æˆ–ã€ã€åŒ…è£¹å¯¹è±¡ä¸ºè¥¿æ–‡æ—¶å¯ä»¥ä½¿ç”¨ \u0026quot;\u0026quot; æˆ– '' ä¸”å·¦å³ç•™æœ‰åŠè§’ç©ºæ ¼é—´æ¥å¼•ç”¨ä¸­å¥æœ«çš„å¥å·ã€é—®å·ã€æ„Ÿå¹å·ç­‰æ ‡ç‚¹ç¬¦å·åº”å»æ‰ ç”¨ç›´è§’å¼•å·ï¼ˆã€Œã€ï¼‰ä»£æ›¿åŒå¼•å·ï¼ˆ\u0026quot;\u0026quot;ï¼‰ è¯¯ï¼šé¸¡è›‹è¢«å«Œå°æ—¶æ¯é¸¡åé©³ã€Œä½ ä¸‹ä¸€ä¸ªè¯•è¯•ï¼Ÿã€çš„é€»è¾‘æˆ–ç†ç”±æ˜¯ä»€ä¹ˆï¼Ÿ æ­£ï¼šé¸¡è›‹è¢«å«Œå°æ—¶æ¯é¸¡åé©³ã€Œä½ ä¸‹ä¸€ä¸ªè¯•è¯•ã€çš„é€»è¾‘æˆ–ç†ç”±æ˜¯ä»€ä¹ˆï¼Ÿ\næ‹¬å· ä½¿ç”¨æ‹¬å·å¯¹å†…å®¹è¿›è¡Œè¡¥å……è¯´æ˜ï¼ˆå¦‚å¢åŠ ä¿¡æ¯ã€æ¶ˆé™¤æ­§ä¹‰ç­‰ï¼‰æ‹¬å·çš„ä½¿ç”¨åŸåˆ™ï¼š å»æ‰æ‹¬å·çš„å†…å®¹å¥å­ä¾ç„¶æ˜¯æ­£ç¡®é€šé¡ºçš„éœ€è¦ä½¿ç”¨å¤–è¯­æ¥è¯¦ç»†æˆ–å‡†ç¡®è¡¨è¿°çš„åè¯ï¼Œåº”å½“æ”¾å…¥æ‹¬å·ä¸­ è¯¯ï¼šä¸ºä»€ä¹ˆæ ·æœ¬æ–¹å·® sample variance çš„åˆ†æ¯æ˜¯ n-1ï¼Ÿ æ­£ï¼šä¸ºä»€ä¹ˆæ ·æœ¬æ–¹å·®ï¼ˆsample varianceï¼‰çš„åˆ†æ¯æ˜¯ n-1ï¼Ÿ æˆ–ï¼šæ­£ï¼šä¸ºä»€ä¹ˆæ ·æœ¬æ–¹å·® (sample variance) çš„åˆ†æ¯æ˜¯ n-1ï¼Ÿ\nçº é”™æ›´æ–° ã€Œä½¿ç”¨é¡¿å·è¿æ¥çš„çŸ­è¯­å¿…é¡»æ˜¯åè¯æ€§çš„ã€è¿™ä¸ªåˆ¤æ–­æ˜¯é”™è¯¯çš„ï¼Œæ˜¯å¦æœ‰å…¶ä»–é™åˆ¶ï¼Œæš‚æœªè§å¯é å‡ºå¤„ã€‚ï¼ˆæ¥è‡ªè‘›æ˜“ï¼‰ ã€Œä½¿ç”¨æ‹¬å·æ³¨æ˜å¯¹åç§°çš„ç¿»è¯‘ï¼ˆæˆ–åŸæ–‡ï¼‰åº”ç½®äºä¹¦åå·å†…ã€è¿™ä¸ªç”¨æ³•æ˜¯é”™è¯¯çš„ï¼ŒShadow of the Colossus æ˜¯å¯¹ã€Œã€Šæ—ºè¾¾ä¸å·¨åƒã€‹ã€è¿›è¡Œæ³¨é‡Šï¼Œè€Œéã€Œæ—ºè¾¾ä¸å·¨åƒã€ã€‚ï¼ˆæ¥è‡ª Raymond Wangã€é»„ç»§æ–°ï¼‰ ä¸å»ºè®®åœ¨æ ‡é¢˜ç­‰å…¬å…±åŒºåŸŸå°†ã€ã€ã€Œã€åšä¹¦åå·ä½¿ç”¨ï¼Œä»¥ä¿æŒç»Ÿä¸€å’Œè§„èŒƒã€é¿å…æ··ä¹±ã€‚ï¼ˆæ¥è‡ªæ¢æµ·ï¼‰ éœ€è¦åˆ é™¤çš„è¯è¯­ã€ŒæŒ‡ç§°ã€åŠ ä¸Šã€Œæ¥¼ä¸»ã€ã€‚ä¸ªäººå»ºè®®ã€Œä¼Ÿå¤§ã€åº”æ”¹ä¸ºã€Œå¼ºå¤§ã€ï¼Œå› ä¸ºå®ƒæœ€æ¥è¿‘ã€Œç‰›é€¼ã€çš„æœ¬æ„ã€‚ï¼ˆæ¥è‡ªéƒ…å¸…æ°ï¼‰\n  ä¿®è®¢ä¿¡æ¯    ç‰ˆæœ¬å· ä¿®è®¢æ—¥æœŸ ä¿®è®¢äºº å¤‡æ³¨     v1.1.2001 2020-01-14 NUO å»ºç«‹æ–‡æ¡£   v1.2.2001 2020-01-15 NUO æ·»åŠ ç›¸å…³å‡ºå¤„é“¾æ¥ï¼›æ·»åŠ é”šç‚¹      è¿™é‡Œæ˜¯è„šæ³¨ä¿¡æ¯ï¼Œåœ¨è„šæ³¨åç›´æ¥æ·»åŠ å³å¯ï¼Œæ¸²æŸ“å™¨ä¼šç›´æ¥æ”¾ç½®åœ¨æ–‡ç« æœ«å°¾ \u0026#x21a9;\u0026#xfe0e;\n   ","id":22,"section":"posts","summary":"ğŸ‘Œ 2020-01-14 Markdown æ–‡æ¡£ç¼–å†™è¯­æ³•æŒ‡åŒ— FileInfo Filename - Markdown Syntax And Writing Specifications Guide.md Version - v1.2.2001ï¼ˆ2020/01/14 ~ 2020/01/15ï¼‰ Author - standuke Email - shadowdoker@gmail.com DescriptionKey - Markdown Syntax And Writing Specifications \u0026amp; Chinese and","tags":["Markdown"],"title":"Markdown æ–‡æ¡£ç¼–å†™è¯­æ³•æŒ‡åŒ—","uri":"https://blog.standuke.top/2020/01/2020-01-14-markdown-%E6%96%87%E6%A1%A3%E7%BC%96%E5%86%99%E8%AF%AD%E6%B3%95%E6%8C%87%E5%8C%97/","year":"2020"},{"content":"ğŸ‘Œ 2019-12-23 CentOS 7 é‡ç½® root ç”¨æˆ·å¯†ç  rd.breakæ–¹æ³•ï¼šæ¨è  å¯åŠ¨çš„æ—¶å€™ï¼Œåœ¨ GRUB2 å¯åŠ¨ç•Œé¢ï¼Œç›¸åº”å¯åŠ¨é¡¹ï¼Œå†…æ ¸åç§°ä¸ŠæŒ‰\u0026quot;e\u0026quot;ä¿®æ”¹å¯åŠ¨å‚æ•°ï¼› è¿›å…¥åï¼Œæ‰¾åˆ° linux16 å¼€å¤´çš„è¡Œï¼ŒæŠŠæ”¹è¡Œroåé¢çš„å­—ç¬¦å…¨éƒ¨åˆ é™¤ã€Œå¿«æ·é”® Ctrl+Kã€å†è¾“å…¥ rd.break æŒ‰ ctrl+x è¿›å…¥ï¼› é‡æ–°æŒ‚çš„ç£ç›˜è·å¾—è¯»å†™æƒé™ mount -o remount,rw /sysroot; chroot /sysroot æ”¹å˜æ ¹ï¼› passwd rootä¿®æ”¹ root å¯†ç ï¼› touch /.autorelabel ä½¿ selinux ç”Ÿæ•ˆ exit exit é€€å‡º è‡ªåŠ¨ reboot  initæ–¹æ³•ï¼šæœªå°è¯•  å¯åŠ¨ç³»ç»Ÿï¼Œå¹¶åœ¨GRUB2å¯åŠ¨å±æ˜¾æ—¶ï¼ŒæŒ‰ä¸‹eé”®è¿›å…¥ç¼–è¾‘æ¨¡å¼ã€‚ åœ¨linux16/linux/linuxefiæ‰€åœ¨å‚æ•°è¡Œå°¾æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼šinit=/bin/sh æŒ‰Ctrl+xå¯åŠ¨åˆ°shellã€‚ æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿä¸ºå¯å†™æ¨¡å¼ï¼šmount â€“o remount,rw/ è¿è¡Œpasswd,å¹¶æŒ‰æç¤ºä¿®æ”¹rootå¯†ç ã€‚passwd å¦‚æœä¹‹å‰ç³»ç»Ÿå¯ç”¨äº†selinuxï¼Œå¿…é¡»è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¦åˆ™å°†æ— æ³•æ­£å¸¸å¯åŠ¨ç³»ç»Ÿï¼štouch /.autorelabel è¿è¡Œå‘½ä»¤exec /sbin/initæ¥æ­£å¸¸å¯åŠ¨ï¼Œæˆ–è€…ç”¨å‘½ä»¤exec /sbin/rebooté‡å¯exec /sbin/init  å‚è€ƒèµ„æ–™ https://www.cnblogs.com/bobkingblog/p/11049772.html\n","id":23,"section":"posts","summary":"ğŸ‘Œ 2019-12-23 CentOS 7 é‡ç½® root ç”¨æˆ·å¯†ç  rd.breakæ–¹æ³•ï¼šæ¨è å¯åŠ¨çš„æ—¶å€™ï¼Œåœ¨ GRUB2 å¯åŠ¨ç•Œé¢ï¼Œç›¸åº”å¯åŠ¨é¡¹ï¼Œå†…æ ¸åç§°ä¸ŠæŒ‰\u0026quot;e\u0026quot;ä¿®æ”¹å¯åŠ¨å‚æ•°ï¼› è¿›","tags":["CentOS"],"title":"CentOS 7 é‡ç½® Root ç”¨æˆ·å¯†ç ","uri":"https://blog.standuke.top/2019/12/2019-12-23-centos-7-%E9%87%8D%E7%BD%AE-root-%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81/","year":"2019"},{"content":"ğŸ‘Œ 2019-10-03 CentOS ç™»é™†å‡ºç° module is unknown ä¸èƒ½ç™»é™† ç”±äº CentOS æ›´æ”¹äº†æŸäº›é…ç½®ä¹‹åï¼Œå¯¼è‡´ç³»ç»Ÿæ— æ³•ç™»é™†ï¼Œå‡ºç° module is unknown æç¤ºï¼Œä¸€ç›´å¾ªç¯åœ¨ç™»é™†ç³»ç»Ÿç•Œé¢ã€‚ ç”±äºåœ¨é…ç½®oracleçš„å®‰è£…ç¯å¢ƒæ—¶ï¼Œæ›´æ”¹äº† /etc/pam.d/login ä¸‹é¢çš„æ–‡ä»¶ï¼Œåœ¨é‡Œé¢åŠ å…¥äº†å¦‚ä¸‹é…ç½®ï¼š\nsession required /lib/security/pam_limits.so session required pam_limits.so  åæ¥å‘ç°ï¼Œè¿™æ˜¯é…ç½® 32 ä½ç³»ç»Ÿçš„ï¼Œå¦‚æœæ˜¯ 64 ä½ç³»ç»Ÿï¼Œåˆ™éœ€è¦æ›´æ”¹ä¸ºå¦‚ä¸‹ï¼š\nsession required /lib64/security/pam_limits.so session required pam_limits.so  âš ï¸ è¯´æ˜ï¼šå¦‚æœæ›´æ”¹äº†ä¹‹åï¼Œå¯åŠ¨ç³»ç»Ÿç™»å½•æ—¶å‡ºç° module is unknownï¼Œå¯ä½¿ç”¨ ssh ç»ˆç«¯è¿æ¥å·¥å…·ï¼Œè¿æ¥ä¸Šä¹‹åæ›´æ”¹é…ç½®ï¼Œç„¶åå†æ¬¡ç™»å½•å°±å¯ä»¥ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸å½±å“ ssh æ–¹å¼ç™»å½•ã€‚\n","id":24,"section":"posts","summary":"ğŸ‘Œ 2019-10-03 CentOS ç™»é™†å‡ºç° module is unknown ä¸èƒ½ç™»é™† ç”±äº CentOS æ›´æ”¹äº†æŸäº›é…ç½®ä¹‹åï¼Œå¯¼è‡´ç³»ç»Ÿæ— æ³•ç™»é™†ï¼Œå‡ºç° module is unknown æç¤ºï¼Œä¸€ç›´å¾ªç¯åœ¨ç™»é™†ç³»ç»Ÿç•Œé¢ã€‚ ç”±äºåœ¨é…ç½®oracleçš„å®‰è£…","tags":["CentOS"],"title":"CentOS ç™»é™†å‡ºç° Module Is Unknown ä¸èƒ½ç™»é™†","uri":"https://blog.standuke.top/2019/10/2019-10-03-centos-%E7%99%BB%E9%99%86%E5%87%BA%E7%8E%B0-module-is-unknown-%E4%B8%8D%E8%83%BD%E7%99%BB%E9%99%86/","year":"2019"},{"content":"ğŸ‘Œ 2019-09-12 Windows Server 2008 R2 å·²ç»æ¿€æ´»ä½†æ¯éš”ä¸€æ®µæ—¶é—´è‡ªåŠ¨å…³æœº VMware ç¯å¢ƒ åŸå› ï¼š C:\\Windows\\system32\\wlms\\wlms.exeç¨‹åºå…³é—­çš„ç³»ç»Ÿ\nå¤„ç†æ–¹æ¡ˆï¼š 1.batæ‰¹å¤„ç†æ–‡ä»¶\ntaskkill /f /im wlms.exe ping -n 4 127.0.0.1 shutdown -a  2.ä¸‹è½½PSToolsåä¿®æ”¹æ³¨å†Œè¡¨\nä¸‹è½½é“¾æ¥ï¼šhttps://docs.microsoft.com/en-us/sysinternals/downloads/pstools\nWin + R âŒ˜ æ‰“å¼€è¿è¡Œï¼ˆæ–‡ä»¶æ”¾åœ¨Cç›˜ï¼‰å³ç®¡ç†å‘˜æƒé™æ‰“å¼€ C:\\PSTools\\psexec.exe -d -i -s regedit.exe æ³¨å†Œè¡¨ æ‰¾ WLMS [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\WLMS] å¯åŠ¨ç±»å‹ç”±02ï¼ˆè‡ªåŠ¨ï¼‰æ”¹ä¸º04ï¼ˆç¦ç”¨ï¼‰ å¹¶ä¿®æ”¹åŠ è½½çš„EXEä½ç½®  å‚è€ƒèµ„æ–™ï¼š https://www.cnblogs.com/CodingArt/articles/2264132.html https://my.oschina.net/yysue/blog/1796171\n","id":25,"section":"posts","summary":"ğŸ‘Œ 2019-09-12 Windows Server 2008 R2 å·²ç»æ¿€æ´»ä½†æ¯éš”ä¸€æ®µæ—¶é—´è‡ªåŠ¨å…³æœº VMware ç¯å¢ƒ åŸå› ï¼š C:\\Windows\\system32\\wlms\\wlms.exeç¨‹åºå…³é—­çš„ç³»ç»Ÿ å¤„ç†æ–¹","tags":["Windows"],"title":"Windows Server 2008 R2 å·²ç»æ¿€æ´»ä½†æ¯éš”ä¸€æ®µæ—¶é—´è‡ªåŠ¨å…³æœº VMware ç¯å¢ƒ","uri":"https://blog.standuke.top/2019/09/2019-09-12-windows-server-2008-r2-%E5%B7%B2%E7%BB%8F%E6%BF%80%E6%B4%BB%E4%BD%86%E6%AF%8F%E9%9A%94%E4%B8%80%E6%AE%B5%E6%97%B6%E9%97%B4%E8%87%AA%E5%8A%A8%E5%85%B3%E6%9C%BA-vmware-%E7%8E%AF%E5%A2%83/","year":"2019"},{"content":"ğŸ‘Œ 2019-08-07 macOS or Windows å‹ç¼©æ–‡ä»¶ä¸­æ–‡ä»¶å¤¹ä¸­æ–‡ç¼–ç åŸå› å¯¼è‡´æ— æ³•è§£å‹  Unzip fail when zip contains chinese char on macOS\n æŠ¥é”™ä¿¡æ¯ï¼š unzip checkdir error cannot create illegal byte sequence  å¤„ç†æ–¹æ¡ˆï¼š ç”¨ ditto ä»£æ›¿ unzip\nditto -V -x -k --sequesterRsrc --rsrc FILENAME.ZIP DESTINATIONDIRECTORY  å‚è€ƒèµ„æ–™ï¼š https://leadscloud.github.io/20190329/mac-unzip-Illegal-byte-sequence/ https://github.com/CocoaPods/CocoaPods/issues/7711\n","id":26,"section":"posts","summary":"ğŸ‘Œ 2019-08-07 macOS or Windows å‹ç¼©æ–‡ä»¶ä¸­æ–‡ä»¶å¤¹ä¸­æ–‡ç¼–ç åŸå› å¯¼è‡´æ— æ³•è§£å‹ Unzip fail when zip contains chinese char on macOS æŠ¥é”™ä¿¡æ¯ï¼š unzip checkdir error cannot create illegal byte sequence å¤„ç†æ–¹æ¡ˆï¼š ç”¨ ditto ä»£æ›¿ unzip ditto -V -x -k --sequesterRsrc --rsrc FILENAME.ZIP DESTINATIONDIRECTORY å‚è€ƒèµ„æ–™ï¼š","tags":["macOS","Windows"],"title":"macOS or Windows å‹ç¼©æ–‡ä»¶ä¸­æ–‡ä»¶å¤¹ä¸­æ–‡ç¼–ç åŸå› å¯¼è‡´æ— æ³•è§£å‹","uri":"https://blog.standuke.top/2019/08/2019-08-07-macos-or-windows-%E5%8E%8B%E7%BC%A9%E6%96%87%E4%BB%B6%E4%B8%AD%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%AD%E6%96%87%E7%BC%96%E7%A0%81%E5%8E%9F%E5%9B%A0%E5%AF%BC%E8%87%B4%E6%97%A0%E6%B3%95%E8%A7%A3%E5%8E%8B/","year":"2019"},{"content":"ğŸ‘Œ 2016-06-17 æ–‡ä»¶ä¸€è‡´æ€§ md5 æ ¡éªŒ  FileInfo Filename - æ–‡ä»¶ä¸€è‡´æ€§ md5 æ ¡éªŒ Version - v1.1.2105ï¼ˆ2016/06/17 ~ 2021/05/14ï¼‰ Author - standuke Email - shadowdoker@gmail.com DescriptionKey - File consistency md5 check\n ç‰ˆæœ¬ä¿®è®¢è®°å½•ï¼š\nv1.0.1606ï¼š2016-06-17ï¼šæ–°å»ºæ–‡æ¡£ï¼Œä¿®è®¢äººï¼šstanduke v1.1.2105ï¼š2021-05-14ï¼šæµ‹è¯•æ–°ç‰ˆç³»ç»Ÿä¸‹å‘½ä»¤æ˜¯å¦é€‚ç”¨ï¼Œä¿®è®¢äººï¼šstanduke\nç”¨é€”ç”¨æ³• ç”¨äºæ ¡éªŒæ–‡ä»¶æ˜¯å¦ä¸€è‡´ï¼Œä¸€èˆ¬ç”¨äºä¸‹è½½æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸‹è½½åï¼Œæœ¬åœ°è¿è¡Œ md5 æ ¡éªŒå¾—åˆ°çš„æ ¡éªŒç ä¸åŸå§‹ä¸‹è½½ç«™ä¸Šæä¾›é—®æ–‡ä»¶æ ¡éªŒç ä¸€è‡´å³ä»£è¡¨ä¸¤ä¸ªæ–‡ä»¶ä¸€è‡´ã€‚\nCentOS ç¯å¢ƒ ä¸€èˆ¬ç”¨ md5 å€¼\nmd5sum ã€Œfile æ–‡ä»¶æ‹–è¿›æ¥ã€  ğŸŒ° ç¤ºä¾‹ç”¨æ³•ä¸è¾“å‡º\n[Node1]# md5sum VMware-VCSA-all-6.7.0-14367737.iso dff12f195347a61a45d3aee3278ebfca VMware-VCSA-all-6.7.0-14367737.iso  Windows ç¯å¢ƒ æ”¯æŒå¦‚ä¸‹ç®—æ³•\nMD2 MD4 MD5 SHA1 SHA256 SHA384 SHA512\nç”¨çš„ç®—æ³•è‡ªå·±æ›¿æ¢å³å¯ CentOS ä¸‹çš„ md5sum å¯¹åº” Windows ä¸‹çš„ MD5 certutil -hashfile ã€Œfile æ–‡ä»¶æ‹–è¿›æ¥ã€ MD5 certutil -hashfile ã€Œfile æ–‡ä»¶æ‹–è¿›æ¥ã€ SHA1 certutil -hashfile ã€Œfile æ–‡ä»¶æ‹–è¿›æ¥ã€ SHA256  ğŸŒ° ç¤ºä¾‹ç”¨æ³•ä¸è¾“å‡º\nMicrosoft Windows [ç‰ˆæœ¬ 10.0.18363.592] (c) 2019 Microsoft Corporationã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚ C:\\Users\\Administrator\u0026gt;certutil -hashfile E:\\iso\\VMware-VCSA-all-6.7.0-14367737.iso md5 MD5 çš„ E:\\iso\\VMware-VCSA-all-6.7.0-14367737.iso å“ˆå¸Œ: dff12f195347a61a45d3aee3278ebfca CertUtil: -hashfile å‘½ä»¤æˆåŠŸå®Œæˆã€‚  ","id":27,"section":"posts","summary":"ğŸ‘Œ 2016-06-17 æ–‡ä»¶ä¸€è‡´æ€§ md5 æ ¡éªŒ FileInfo Filename - æ–‡ä»¶ä¸€è‡´æ€§ md5 æ ¡éªŒ Version - v1.1.2105ï¼ˆ2016/06/17 ~ 2021/05/14ï¼‰ Author - standuke Email - shadowdoker@gmail.com DescriptionKey - File consistency md5 check ç‰ˆæœ¬ä¿®","tags":["tools"],"title":"æ–‡ä»¶ä¸€è‡´æ€§ MD5 æ ¡éªŒ","uri":"https://blog.standuke.top/2016/06/2016-06-17-%E6%96%87%E4%BB%B6%E4%B8%80%E8%87%B4%E6%80%A7-md5-%E6%A0%A1%E9%AA%8C/","year":"2016"},{"content":"ğŸ‘Œ 2022-03-23 LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£…  FileInfo Filename - LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£… Version - v1.0.2203ï¼ˆ2022/03/25 ~ 2022/04/06ï¼‰ Author - nuo standuke Email - shadowdoker@gmail.com DescriptionKey - LDAP Enterprise Deployment Practice\n âš ï¸ æ³¨æ„ï¼šç°æœ‰ç‰ˆæœ¬ openldap-servers-2.4.44-25.el7_9.x86_64 æŒ‰ç…§éœ€è¦å…¨ç¨‹ä½¿ç”¨ CLI æ“ä½œé…ç½®ï¼Œè¯·å‹¿ç›´æ¥ä¿®æ”¹ slapd.d æ–‡ä»¶å¤¹å†…çš„é…ç½®ã€‚ç›®å‰ç½‘ç»œä¸Šå®‰è£…æ–‡æ¡£å‡ä¸ºè€ç‰ˆæœ¬ï¼Œä½¿ç”¨ â€˜slapd.confâ€™ è¿›è¡Œé…ç½®ï¼Œä¸æ–°ç‰ˆæœ¬å®‰è£…æ“ä½œæ–¹å¼ä¸ä¸€è‡´ã€Œè¯¦è§æœ¬æ–‡æ¡£ ç‰ˆæœ¬å˜åŒ– éƒ¨åˆ†ã€\n[TOC]\nç®€ä»‹ ç›®å‰ç½‘ç»œèµ„æºè¾ƒå°‘ã€ŒçœŸçš„å¾ˆå°‘ã€å¾ˆè€ã€å¾ˆå·®ã€ï¼Œå»ºè®®å¤§éƒ¨åˆ†é—®é¢˜ä»å®˜æ–¹æ–‡æ¡£å¯»æ‰¾è¯´æ˜ä¸è§£å†³æ–¹æ¡ˆã€‚\n Wikipedia\n OpenLDAP æ˜¯è½»å‹ç›®å½•è®¿é—®åè®®ã€ŒLightweight Directory Access Protocolï¼ŒLDAPã€çš„è‡ªç”±å’Œå¼€æºçš„å®ç°ï¼Œåœ¨å…¶ OpenLDAP è®¸å¯è¯ä¸‹å‘è¡Œï¼Œå¹¶å·²ç»è¢«åŒ…å«åœ¨ä¼—å¤šæµè¡Œçš„ Linux å‘è¡Œç‰ˆä¸­ã€‚ å®ƒä¸»è¦åŒ…æ‹¬ä¸‹è¿° 4 ä¸ªéƒ¨åˆ†ï¼š\n slapd - ç‹¬ç«‹ LDAP å®ˆæŠ¤æœåŠ¡ slurpd - ç‹¬ç«‹çš„ LDAP æ›´æ–°å¤åˆ¶å®ˆæŠ¤æœåŠ¡ å®ç° LDAP åè®®çš„åº“ å·¥å…·è½¯ä»¶å’Œç¤ºä¾‹å®¢æˆ·ç«¯  ç‰ˆæœ¬è¯´æ˜  CentOS 7.9-2009 ç³»ç»Ÿæºç‰ˆæœ¬  openldap-2.4.44-25.el7_9.x86_64 openldap-servers-2.4.44-25.el7_9.x86_64 openldap-clients-2.4.44-25.el7_9.x86_64   æœ€æ–°å®˜æ–¹ç‰ˆæœ¬ã€Œæˆªæ­¢æœ¬æ–‡æ¡£å‘å¸ƒæ—¥æœŸã€  OpenLDAP 2.6 (Released October 2021) Functional enhancements: slapd and lloadd File-based logging, including log file management capabilities (ITS#9492) Load Balancer enhancements Read affinity (ITS#9598) Additional balancing algorithms (ITS#9599)   ä¸‹ä¸€æ¬¡å¤§ç‰ˆæœ¬æ›´æ–°ã€Œå®˜æ–¹éƒ½æ²¡æƒ³è¿‡ï¼Œè€è€å®å®ç”¨ 2.* ç‰ˆæœ¬å§ã€  OpenLDAP 3.0 (TBD) We're not thinking that far ahead right now.  âš ï¸ ç‰ˆæœ¬å˜åŒ– è¿™æ˜¯æœ¬æ–‡ç« æ¯”è¾ƒé‡è¦çš„ä¸€ç‚¹ï¼Œç”±å®˜ç½‘å¯å¾—ç›®å‰ openldap é…ç½®ä»¥åŠæ”¹ä¸ºåŠ¨æ€é…ç½®æ–‡ä»¶ï¼Œç”±å‘½ä»¤æ–¹å¼å»ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå¹¶ä¸”ç›´æ¥ç”Ÿæ•ˆã€‚åŒæ—¶ï¼Œå®˜æ–¹åœ¨æ¯ä¸ªé…ç½®æ–‡ä»¶å†…å¼€å¤´éƒ½æ³¨æ˜äº†ä¸è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œä»¥åŠé…ç½®æ–‡ä»¶çš„ CRC æ ¡éªŒã€‚ã€ŒOpenLDAP 2.3 åŠå…¶ä»¥åç‰ˆæœ¬ï¼Œä½¿ç”¨ cn=config ä½œä¸ºåç«¯é…ç½®æ–‡ä»¶ã€\nâš ï¸ ä¸è¦æ‰‹åŠ¨ä¿®æ”¹é…ç½®ï¼Œå¦åˆ™å¯åŠ¨æ—¶ CRC æ ¡éªŒå¤±è´¥ï¼Œå¯¼è‡´ slapd.service æœåŠ¡æ— æ³•å¯åŠ¨\nå®˜æ–¹è¯´æ˜ https://www.openldap.org/doc/admin24/guide.html#Configuring%20slapd\n å®˜æ–¹è¯´æ˜æ–‡æ¡£  OpenLDAP 2.3 and later have transitioned to using a dynamic runtime configuration engine, slapd-config(5). slapd-config(5)   ç°æœ‰é…ç½®æ–‡ä»¶çš„å¼€å¤´è¯´æ˜ã€Œè‡ªå¸¦ CRC æ ¡éªŒï¼Œæ‰€ä»¥ä¸è¦å»æ”¹æ–‡ä»¶ã€  # AUTO-GENERATED FILE - DO NOT EDIT!! Use ldapmodify. # CRC32 7ee1beb6  å®˜æ–¹è¯´æ˜åœ°å€  å®˜æ–¹ release ç‰ˆæœ¬è·¯çº¿è¯´æ˜  https://www.openldap.org/software/roadmap.html\n å®˜æ–¹æºç ä¸‹è½½åœ°å€  https://www.openldap.org/software/download/ https://www.openldap.org/software/download/OpenLDAP/openldap-release/\nåŸºç¡€æ¦‚å¿µ OpenLDAP 1.0ã€Œreleased August 1998ã€å‘å¸ƒè¿‘ 25 å¹´ï¼Œéƒ¨åˆ†é…ç½®æ¦‚å¿µè¿˜æ˜¯æœ‰äº›è·Ÿä¸ä¸Šæ—¶ä»£ï¼Œä½†æ˜¯ç†è§£åä¹Ÿèƒ½æ»¡è¶³å½“ä¸‹çš„ä¸šåŠ¡éœ€æ±‚ã€‚ã€Œä¸»è¦è¿˜æ˜¯ LDAP èƒ½å¯¹æ¥çš„ç³»ç»Ÿå¤ªå¤šäº†ï¼Œä¸ç„¶æŠ˜è…¾åˆ°ç°åœ¨æˆ‘ä¹Ÿä¸æƒ³å¼„ã€\nhttps://blog.csdn.net/liukuan73/article/details/78684710\n  æ•°æ®åº“ç»„ç»‡æ¶æ„\n  DIT = Directory Information Tree ç›®å½•ä¿¡æ¯æ ‘ï¼Œæ•´ä¸€ä¸ª LDAP æ•°æ®åº“å°±æ˜¯ä¸€ä¸ªç›®å½•ä¿¡æ¯æ ‘\n  Enrty = æ¡ç›®ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€æ¡æ•°æ®ä¸€ä¸ªç”¨æˆ·æˆ–ç»„ç»‡ï¼Œæ˜¯ LDAP ä¸­ä¸€ä¸ªåŸºæœ¬çš„å­˜å‚¨å•å…ƒï¼›ä¹Ÿå¯ä»¥è¢«çœ‹ä½œæ˜¯ä¸€ä¸ª DN å’Œä¸€ç»„å±æ€§çš„é›†åˆã€‚ä¸€æ¡ entry å¯ä»¥åŒ…å«å¤šä¸ª objectClassï¼Œä¾‹å¦‚ zhang3 å¯ä»¥å­˜åœ¨äº â€œç”µè¯è–„â€ ä¸­ï¼Œä¹Ÿå¯ä»¥åŒæ—¶å­˜åœ¨äº â€œåŒå­¦å½•â€ ä¸­ã€‚\n  DN = Distinguished Name å…¨å±€å”¯ä¸€çš„æ ‡è¯†åï¼Œæ¯ä¸€ä¸ªæ¡ç›® Entry éƒ½å¯é€šè¿‡ DN æ¥å”¯ä¸€ç¡®å®š\n  RDN = Relative Distinguished Name åŒºåˆ†åæˆ–è€…ç›¸å¯¹åŒºåˆ«å\n  Base DN = ä¸€æ¡ Base DN å¯ä»¥æ˜¯ â€œdc=expwd,dc=comâ€ï¼Œä¹Ÿå¯ä»¥æ˜¯â€œdc=People,dc=expwd,dc=comâ€ã€‚æ‰§è¡Œ LDAP Search æ—¶ä¸€èˆ¬è¦æŒ‡å®š basednï¼Œç”±äº LDAP æ˜¯æ ‘çŠ¶æ•°æ®ç»“æ„ï¼ŒæŒ‡å®š BaseDN åï¼Œæœç´¢å°†ä» BaseDN å¼€å§‹\n  ğŸŒ° ä¾‹\nDN = uid=stan,ou=People,dc=expwd,dc=com RDN = uid=stan BaseDN = dc=expwd,dc=com Enrty = æ¡ç›®ã€Œä¸‹æ–¹è¯¦è§£ã€\ndn: uid=stan,ou=People,dc=expwd,dc=com cn:: stan gidnumber: 5001 homedirectory: /home/users/stan loginshell: /bin/bash mail: stan@expwd.com objectclass: inetOrgPerson objectclass: posixAccount objectclass: shadowAccount sn: stan uid: stan uidnumber: 2000 userpassword: {SSHA}tIUzvYvE7YWxRRKCE0jC53vxdIwAt96k   Schema = LDAP å…ƒæ•°æ®æ¨¡å‹ã€ŒSchemaã€ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢ Entry çš„æ¨¡æ¿ï¼Œæ¨¡æ¿å®šä¹‰äº†éœ€è¦å“ªäº›æ•°æ®ï¼Œå¿…å¡«é¡¹ç­‰ï¼ŒSchema ä¼šå®šä¹‰ Enrty æœ‰å“ªäº› objectClass ç»„æˆã€‚ objectClass = å¯¹è±¡ç±»ã€ŒobjectClassã€æ˜¯ LDAP å†…ç½®çš„æ•°æ®æ¨¡å‹ï¼Œæ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ç§å«â€œç”µè¯è–„â€çš„objectClassï¼Œè‚¯å®šä¼šå†…ç½®å¾ˆå¤šå±æ€§(attributes)ï¼Œå¦‚å§“å(uid)ï¼Œèº«ä»½è¯å·(uidNumber)ï¼Œå•ä½åç§°(gid)ï¼Œå®¶åº­åœ°å€(homeDirectory)ç­‰ï¼ŒåŒæ—¶ï¼Œè¿˜æœ‰ä¸€ç§å«â€œåŒå­¦å½•â€çš„objectClassï¼Œå…·å¤‡â€œç”µè¯è–„â€é‡Œçš„ä¸€äº›attributes(å¦‚uidã€homeDirectory)ï¼Œè¿˜ä¼šå…·æœ‰â€œç”µè¯è–„â€æ²¡æœ‰çš„attributes(å¦‚descriptionç­‰)ã€‚ä¸€ä¸ªæ¡ç›®(Entry)å¿…é¡»åŒ…å«ä¸€ä¸ªå¯¹è±¡ç±»(objectClass)å±æ€§ï¼Œä¸”éœ€è¦èµ‹äºˆè‡³å°‘ä¸€ä¸ªå€¼ã€‚æ¯ä¸€ä¸ªå€¼å°†ç”¨ä½œä¸€æ¡ LDAP æ¡ç›®è¿›è¡Œæ•°æ®å­˜å‚¨çš„æ¨¡æ¿ï¼›æ¨¡æ¿ä¸­åŒ…å«äº†ä¸€ä¸ªæ¡ç›®å¿…é¡»è¢«èµ‹å€¼çš„å±æ€§å’Œå¯é€‰çš„å±æ€§ã€‚ inetOrgPerson = å¯¹è±¡ç±» inetOrgPersonï¼ˆInternet Organizational Personï¼‰   ä¸€ä¸ªæ¡ç›®çš„å±æ€§é€šè¿‡ LDAP å…ƒæ•°æ®æ¨¡å‹ï¼ˆSchemaï¼‰ä¸­çš„å¯¹è±¡ç±»ï¼ˆobjectClassï¼‰æ‰€å®šä¹‰ï¼Œä¸‹é¢çš„è¡¨æ ¼åˆ—ä¸¾äº†å¯¹è±¡ç±» inetOrgPersonï¼ˆInternet Organizational Personï¼‰ä¸­çš„ä¸€äº›å¿…å¡«å±æ€§å’Œå¯é€‰å±æ€§ã€‚\n objectClass https://www.cnblogs.com/lfdblog/p/9803276.html\nLDAPä¸­ï¼Œä¸€ä¸ªæ¡ç›®å¿…é¡»åŒ…å«ä¸€ä¸ª objectClass å±æ€§ï¼Œä¸”éœ€è¦èµ‹äºˆè‡³å°‘ä¸€ä¸ªå€¼ã€‚æ¯ä¸€ä¸ªå€¼å°†ç”¨ä½œä¸€æ¡ LDAP æ¡ç›®è¿›è¡Œæ•°æ®å­˜å‚¨çš„æ¨¡æ¿ï¼›æ¨¡æ¿ä¸­åŒ…å«äº†ä¸€ä¸ªæ¡ç›®å¿…é¡»è¢«èµ‹å€¼çš„å±æ€§å’Œå¯é€‰çš„å±æ€§ã€‚objectClass æœ‰ç€ä¸¥æ ¼çš„ç­‰çº§ä¹‹åˆ†ï¼Œæœ€é¡¶å±‚æ˜¯ top å’Œ aliasã€‚ä¾‹å¦‚ï¼ŒorganizationalPerson è¿™ä¸ª objectClass å°±éš¶å±äºpersonï¼Œè€Œ person åˆéš¶å±äº topã€‚\næ–‡ä»¶ *.ldif = LDAP Data Interchange Format / LDAP æ•°æ®äº¤æ¢æ ¼å¼ ã€Œhttps://en.wikipedia.org/wiki/LDAP_Data_Interchange_Format ã€ *.schema = LDAP ç”¨æˆ·æ¨¡æ¿ ã€Œhttps://www.openldap.org/doc/admin23/schema.html ã€\nèŠ‚ç‚¹ã€Œç»„ç»‡æ¶æ„ã€  CN = Common Name OU = Organizational Unit DC = Domain Component  å…¶ä»– OpenLDAPç›‘å¬çš„ç«¯å£ï¼š\né»˜è®¤ç›‘å¬ç«¯å£ï¼š389ï¼ˆæ˜æ–‡æ•°æ®ä¼ è¾“ï¼Œé€‚ç”¨äºå¯ç”¨äº† StartTLS çš„ LDAPï¼‰= OpenLDAP ä¸åŠ å¯† / OpenLDAP over TLS åŠ å¯†ç›‘å¬ç«¯å£ï¼š636ï¼ˆå¯†æ–‡æ•°æ®ä¼ è¾“ï¼Œé€‚ç”¨äºå¯ç”¨äº† SSL/TLS çš„ LDAPï¼‰= OpenLDAP + SSL\nå®‰è£… OpenLDAP Server åˆå§‹åŒ–å®‰è£…ç¯å¢ƒ å¸è½½å·²æœ‰çš„ LDAP ç¯å¢ƒ è‹¥å‰æœŸå·²å®‰è£… LDAP ç›¸å…³æœåŠ¡ï¼Œå»ºè®®é¦–å…ˆå¤‡ä»½å¯¼å‡º LDAP æ•°æ®åå¸è½½ LDAP ç¨‹åº\n# å…³é—­ç³»ç»ŸæœåŠ¡ systemctl stop slapd # å¸è½½è½¯ä»¶åŒ… âš ï¸ æ³¨æ„ï¼Œä¸è¦å¸è½½ ç³»ç»Ÿçš„ openldap åŒ… yum remove compat-openldap openldap-clients openldap-servers # ç§»é™¤é…ç½®æ–‡ä»¶ rm -rf /var/lib/ldap/* rm -rf /etc/openldap/slapd.d/*  ç½®å¤‡æ“ä½œç³»ç»Ÿç¯å¢ƒ æœ€å°åŒ–å®‰è£…çš„æ“ä½œç³»ç»Ÿå³å¯ å»ºè®®é…ç½®å®Œ DNS ä»¥åŠä¸»æœºå’ŒåŸŸåï¼Œæ–¹ä¾¿æ¥å…¥åŸŸåç³»ç»Ÿ  å¼€å§‹å®‰è£… ä½¿ç”¨ rpm åŒ…å®‰è£… yum install openldap openldap-clients openldap-servers   openldap: æ“ä½œç³»ç»Ÿé»˜è®¤ä¼šå®‰è£…æ­¤åŒ…ï¼Œæ³¨æ„åªèƒ½å‡çº§ä¸èƒ½å¸è½½ã€‚ openldap-clients: LDAP çš„å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å¿…é¡»è¦å®‰è£…ï¼Œå†…ç½® LDAP æ“ä½œçš„ä¸€äº›å‘½ä»¤ã€‚ openldap-servers: LDAP çš„æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯å¿…é¡»è¦å®‰è£…ï¼Œä¸º LDAP çš„ä¸»ç¨‹åºï¼ŒåŒæ—¶å»ºè®®å®‰è£… openldap-clients ç”¨äºå¯¹æœåŠ¡ç«¯é…ç½®ã€‚  ä½¿ç”¨æœ€æ–°å®˜æ–¹æºç åŒ…å®‰è£…  ç•¥ï¼Œrpm å°±å·²ç»å¤ŸæŠ˜è…¾çš„äº†\n ç›®å½•åŠé…ç½®æ–‡ä»¶ä»‹ç» æ¶‰åŠæ–‡ä»¶ç®€ä»‹  /var/lib/ldap/ ldap ç”¨æˆ·æ•°æ®ï¼Œæ‰€å±ç”¨æˆ·æ‰€å±ç»„å‡ä¸º ldapï¼Œæ•…åªæœ‰ ldap ç”¨æˆ·æ‰æœ‰è¯»å†™æƒé™ã€‚åˆšå®‰è£…å®Œæ—¶ç›®å½•æ˜¯ç©ºçš„ /etc/openldap openldap çš„é…ç½®æ–‡ä»¶ç›®å½•ã€Œæ‰€æœ‰ openldap ç›¸å…³çš„é…ç½®éƒ½åœ¨æ­¤ç›®å½•ä¸‹ï¼ŒåŒ…æ‹¬client å’Œ server ä¸¤è€…é…ç½®éƒ½è¿™é‡Œã€ /usr/sbin/slapd ldap ç¨‹åº /usr/share/openldap-servers/DB_CONFIG.example æ¨¡æ¿ æ•°æ®åº“é…ç½®æ–‡ä»¶ /usr/share/openldap-servers/slapd.ldif æ¨¡æ¿ é…ç½®æ–‡ä»¶  æ¯ä¸ª rpm åŒ…æ¶‰åŠçš„é…ç½®æ–‡ä»¶å¦‚ä¸‹\n[root@ldap-client ~]# rpm -qc openldap-clients ã€ç©ºã€‘ [root@ldap-server ~]# rpm -qc openldap # ç³»ç»Ÿé»˜è®¤ä¼šå®‰è£…æ­¤åŒ… /etc/openldap/ldap.conf # æ­¤æ–‡ä»¶ä¸º openldap rpm åŒ…çš„é…ç½®æ–‡ä»¶ /usr/lib/tmpfiles.d/openldap.conf [root@ldap-server ~]# rpm -qc openldap-servers /etc/openldap/check_password.conf /etc/sysconfig/slapd /usr/lib/tmpfiles.d/slapd.conf # éƒ¨åˆ†æ–‡ä»¶è¯¦è§ä¸‹æ–¹ã€Œ/etc/openldap é…ç½®æ–‡ä»¶è¯¦è§£ã€éƒ¨åˆ†  /etc/openldap é…ç½®æ–‡ä»¶è¯¦è§£ [root@ldap-server openldap]# tree . â”œâ”€â”€ certs # TLS å¯†é’¥æ–‡ä»¶å¤¹ cat /etc/openldap/slapd.d/cn\\=config.ldif å¯è§é…ç½® â”‚Â â”œâ”€â”€ cert8.db â”‚Â â”œâ”€â”€ key3.db â”‚Â â”œâ”€â”€ password â”‚Â â””â”€â”€ secmod.db â”œâ”€â”€ check_password.conf # åˆ›å»ºç”¨æˆ·å¯†ç æ—¶çš„å¯†ç è§„åˆ™ï¼ŒOpenLDAP pwdCheckerã€Œcheck_password.soã€åº“é…ç½® â”œâ”€â”€ ldap.conf # æ­¤æ–‡ä»¶ä¸º openldap-client rpm åŒ…çš„é…ç½®æ–‡ä»¶ï¼Œé‡Œé¢ä¼šé…ç½® /etc/openldap/certs å¯†é’¥æ–‡ä»¶å¤¹åœ°å€ â”œâ”€â”€ schema # OpenLDAP çš„ schema å­˜æ”¾çš„åœ°æ–¹ï¼Œå¯ä»¥ç†è§£ä¸ºæ¨¡æ¿ â”‚Â â”œâ”€â”€ collective.ldif â”‚Â â”œâ”€â”€ collective.schema â”‚Â â”œâ”€â”€ corba.ldif â”‚Â â”œâ”€â”€ corba.schema â”‚Â â”œâ”€â”€ core.ldif â”‚Â â”œâ”€â”€ core.schema â”‚Â â”œâ”€â”€ cosine.ldif â”‚Â â”œâ”€â”€ cosine.schema â”‚Â â”œâ”€â”€ duaconf.ldif â”‚Â â”œâ”€â”€ duaconf.schema â”‚Â â”œâ”€â”€ dyngroup.ldif â”‚Â â”œâ”€â”€ dyngroup.schema â”‚Â â”œâ”€â”€ inetorgperson.ldif â”‚Â â”œâ”€â”€ inetorgperson.schema â”‚Â â”œâ”€â”€ java.ldif â”‚Â â”œâ”€â”€ java.schema â”‚Â â”œâ”€â”€ misc.ldif â”‚Â â”œâ”€â”€ misc.schema â”‚Â â”œâ”€â”€ nis.ldif â”‚Â â”œâ”€â”€ nis.schema â”‚Â â”œâ”€â”€ openldap.ldif â”‚Â â”œâ”€â”€ openldap.schema â”‚Â â”œâ”€â”€ pmi.ldif â”‚Â â”œâ”€â”€ pmi.schema â”‚Â â”œâ”€â”€ ppolicy.ldif â”‚Â â””â”€â”€ ppolicy.schema â””â”€â”€ slapd.d # å®‰è£…å®Œ server ç«¯åé»˜è®¤çš„ server é…ç½®æ–‡ä»¶ï¼Œåç»­æ–°å¢çš„æ¨¡å—ä¼šå¢åŠ åœ¨è¿™ä¸ªç›®å½•ä¸‹ â”œâ”€â”€ cn=config # æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é…ç½®åŸŸå(olcSuffix)ï¼Œç®¡ç†å‘˜è´¦å·(olcRootDN)ç­‰ â”‚Â â”œâ”€â”€ cn=schema # LDAP å¯¼å…¥çš„æ¨¡æ¿æ–‡ä»¶å¤¹ï¼Œå¯¼å…¥æ¨¡æ¿åæ‰ä¼šå‡ºç°åœ¨è¿™é‡Œ â”‚Â â”‚Â â””â”€â”€ cn={0}core.ldif # LDAP å®‰è£…åé»˜è®¤ä¼šæœ‰ core æ¨¡å— â”‚Â â”œâ”€â”€ cn=schema.ldif â”‚Â â”œâ”€â”€ olcDatabase={0}config.ldif # æ–‡ä»¶åå’Œå­—æ®µåéƒ½æœ‰å‰ç¼€\u0026quot;olc\u0026quot;(OpenLDAP Configuration) â”‚Â â”œâ”€â”€ olcDatabase={-1}frontend.ldif â”‚Â â”œâ”€â”€ olcDatabase={1}monitor.ldif â”‚Â â””â”€â”€ olcDatabase={2}hdb.ldif # åç«¯æ•°æ®åº“é…ç½®æ–‡ä»¶ â””â”€â”€ cn=config.ldif 5 directories, 39 files  å¼€å§‹é…ç½® ç¬¬ä¸€æ­¥ ç›´æ¥å¯åŠ¨ slapd æœåŠ¡ï¼Œæ˜¯çš„ï¼Œå¯åŠ¨åå†è¿›è¡Œé…ç½®ï¼Œä¹Ÿä¸è¦æŒ‰ç…§ç½‘ä¸Šå»æ‹·è´æ•°æ®åº“ä»€ä¹ˆçš„ï¼Œç›´æ¥å¯åŠ¨å³å¯\n# å¯åŠ¨ ldap systemctl start slapd # å¼€æœºä½¿èƒ½ ldap systemctl enable slapd # æŸ¥çœ‹ ldap æœåŠ¡çŠ¶æ€ systemctl status slapd  å¼€å§‹è¿›è¡Œé…ç½® é»˜è®¤å®‰è£…å®Œ LDAP Server åå¯åŠ¨çš„æ˜¯é»˜è®¤é…ç½®ï¼Œä¾ç…§å®˜æ–¹è¯´æ³•ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ ldapmodify æ¥ä¿®æ”¹é»˜è®¤é…ç½®æ¥æ»¡è¶³æˆ‘ä»¬ç”Ÿäº§ç¯å¢ƒéœ€æ±‚\n å»ºè®®é¦–å…ˆä¿®æ”¹ rootDNï¼ŒrootDN æ˜¯ DN çš„æ ¹ï¼Œæ˜¯åç»­ä¸€åˆ‡çš„åŸºç¡€ã€‚  vim stan.ldif dn: olcDatabase={2}hdb,cn=config # æ•°æ®åº“ç±»å‹æ–‡ä»¶è¦æŒ‰ç…§è‡ªå·±çš„æ•°æ®åº“ç‰ˆæœ¬ä¿®æ”¹ changetype: modify # æ“ä½œç±»å‹æ˜¯ä¿®æ”¹ replace: olcRootDN # æ“ä½œç›®æ ‡ä¸ºé‡ç½® RootDN olcRootDN: cn=admin,dc=expwd,dc=com # æ›¿æ¢ä¸ºè‡ªå·±çš„æ ¹åŸŸ - replace: olcSuffix # æ“ä½œç›®æ ‡ä¸ºé‡ç½® Suffix olcSuffix: dc=expwd,dc=com # æ›¿æ¢ä¸ºè‡ªå·±çš„æ ¹åŸŸ  è¿™è¾¹ olcDatabase={2}hdb æ–‡ä»¶æ˜¯ LDAP æ•°æ®åº“é…ç½®æ–‡ä»¶ï¼Œä¸åŒå‘å‹ç‰ˆæœ¬ç”¨çš„æ•°æ®åº“å¯èƒ½ä¸åŒï¼Œè¿™é‡Œéœ€è¦ä¿®æ”¹ olcDatabase={2}hdb ä¸ºå®é™…çš„æ–‡ä»¶ï¼Œæ–‡ä»¶è·¯å¾„ä¸º /etc/openldap/slapd.d/cn=config/olcDatabase={2}hdb.ldif ï¼Œè¿™é‡Œå®é™…æ–‡ä»¶å¯èƒ½æ˜¯ bdbï¼Œä¹Ÿå¯èƒ½æ˜¯ mdbï¼Œè¯¦ç»†å¯è§é™„å½•ã€Œå…³äº mdb hdb bdb åç«¯æ•°æ®åº“ã€éƒ¨åˆ†è§£é‡Šã€‚\nä½¿ç”¨ ldapmodify æ¥é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ  ldapmodify -Q -Y EXTERNAL -H ldapi:/// -f stan.ldif  åŒç†ç»™ RootDN çš„ admin ç”¨æˆ·é‡è®¾å¯†ç   è®¾ç½®å®Œå¯†ç åå°±å¯ä»¥é€šè¿‡ LDAP ç®¡ç†è½¯ä»¶ä½¿ç”¨ admin çš„ dn å’Œå¯†ç ç™»é™†ã€‚ å‚è€ƒé“¾æ¥ï¼Œæ–‡ç« å†…è®²çš„æ¯”è¾ƒè¯¦ç»†ï¼ŒåŒ…æ‹¬å¦‚ä½•æ‰¾åˆ° RootDN ä¿¡æ¯ç­‰ã€‚ https://www.digitalocean.com/community/tutorials/how-to-change-account-passwords-on-an-openldap-server#changing-the-rootdn-password\nvim stan-pwd.ldif dn: olcDatabase={2}hdb,cn=config #olcRootDN: cn=admin,dc=expwd,dc=com changetype: modify replace: olcRootPW olcRootPW: {SSHA}AOvsPeLZYEpxBA8sdY2r9DSeZkuxlxxg  ldapmodify -Q -Y EXTERNAL -H ldapi:/// -f stan-pwd.ldif  æ³¨ï¼šå…¶å®åªè¦æŠŠä¿®æ”¹ RootDN é‚£ä¸€æ­¥çš„é…ç½®æ–‡ä»¶æ”¹æˆå¦‚ä¸‹å³å¯ï¼Œä¸€æ¬¡æ€§å°±èƒ½æ”¹å®Œ\nvim stan.ldif dn: olcDatabase={2}hdb,cn=config # æ•°æ®åº“ç±»å‹æ–‡ä»¶è¦æŒ‰ç…§è‡ªå·±çš„æ•°æ®åº“ç‰ˆæœ¬ä¿®æ”¹ changetype: modify # æ“ä½œç±»å‹æ˜¯ä¿®æ”¹ replace: olcRootDN # æ“ä½œç›®æ ‡ä¸ºé‡ç½® RootDN olcRootDN: cn=admin,dc=expwd,dc=com # æ›¿æ¢ä¸ºè‡ªå·±çš„æ ¹åŸŸ - replace: olcSuffix # æ“ä½œç›®æ ‡ä¸ºé‡ç½® Suffix olcSuffix: dc=expwd,dc=com # æ›¿æ¢ä¸ºè‡ªå·±çš„æ ¹åŸŸ - replace: olcRootPW olcRootPW: {SSHA}AOvsPeLZYEpxBA8sdY2r9DSeZkuxlxxg   åˆ°è¿™ä¸€æ­¥å»ºè®®å®‰è£…å…ˆä¸€ä¸‹ phpldapadminï¼Œä¹Ÿå¯ä»¥è·³è¿‡åå»å†è£…ï¼Œå› ä¸ºåæœŸçš„å‘½ä»¤è¡Œæ“ä½œå¯ä»¥ç›´è§‚åœ°åœ¨ç½‘é¡µä¸Šçœ‹åˆ°ç›®å‰ LDAP çš„çŠ¶æ€  å¯¼å…¥è‡ªå¸¦ Schema ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/cosine.ldif ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/nis.ldif ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/inetorgperson.ldif   ä¸ºä»€ä¹ˆè¦å…ˆå¯¼å…¥è¿™å‡ ä¸ªæ¨¡å—å‘¢ï¼Ÿå› ä¸ºä¸‹é¢çš„ memberOf æ¨¡å—è¦ç”¨ ğŸ¤ª\n åˆå§‹åŒ–åŸºç¡€ç›®å½•ç»“æ„ vim stan-user.ldif dn: dc=expwd,dc=com objectClass: dcObject objectClass: organization o: expwd.com dc: expwd dn: ou=users,dc=expwd,dc=com objectClass: organizationalUnit objectClass: top ou: users dn: ou=groups,dc=expwd,dc=com objectClass: organizationalUnit objectClass: top ou: groups  ldapadd -x -W -D \u0026quot;cn=admin,dc=expwd,dc=com\u0026quot; -f stan-user.ldif   å¯¼å…¥å®Œæˆåç›®å½•ç»“æ„æ˜¯è¿™æ ·çš„  å®‰è£…å®Œæ¯• ğŸ‰ è‡³æ­¤ï¼ŒåŸºç¡€çš„ LDAP æœåŠ¡å·²å…¨éƒ¨å®‰è£…å®Œæ¯•ï¼Œå»ºè®®ç»§ç»­æ·»åŠ ä¸€äº›æ¨¡å—å¹¶ä¸”è®¾è®¡å¥½æ•´ä¸€ä¸ª LDAP çš„ç›®å½•ç»“æ„ï¼Œé¿å…åæœŸå› ä¸ºè®¾è®¡ä¸åˆç†çš„å¤§è§„æ¨¡è¿ç§»è°ƒæ•´ã€‚\næ·»åŠ  memberOf æ¨¡å— ç›®å‰æœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹åº”ç”¨ã€äº‘å¹³å°çš„ LDAP é…ç½®éœ€è¦æ£€æŸ¥è¿™ä¸ªå±æ€§ï¼ŒmemberOf æ¨¡å—çš„ä½œç”¨æ˜¯ï¼Œå½“ä½ å»ºä¸€ä¸ªç»„çš„æ—¶å€™ï¼ŒæŠŠä¸€äº›ç”¨æˆ·æ·»åŠ åˆ°è¿™ä¸ªç»„é‡Œå»ï¼Œå®ƒä¼šè‡ªåŠ¨ç»™è¿™äº›ç”¨æˆ·æ·»åŠ ä¸€ä¸ª memberOf å±æ€§ã€‚\n add-memberof.ldif  [root@ldap-server memberof]# cat add-memberof.ldif # å¼€å¯ memberof æ”¯æŒ dn: cn=module{0},cn=config cn: modulle{0} objectClass: olcModuleList objectclass: top olcModuleload: memberof.la olcModulePath: /usr/lib64/openldap # æ–°å¢ç”¨æˆ·æ”¯æŒ memberof é…ç½® dn: olcOverlay={0}memberof,olcDatabase={2}hdb,cn=config objectClass: olcConfig objectClass: olcMemberOf objectClass: olcOverlayConfig objectClass: top olcOverlay: memberof olcMemberOfDangling: ignore olcMemberOfRefInt: TRUE olcMemberOfGroupOC: groupOfUniqueNames olcMemberOfMemberAD: uniqueMember olcMemberOfMemberOfAD: memberOf   refint1.ldif  [root@ldap-server memberof]# cat refint1.ldif dn: cn=module{0},cn=config add: olcmoduleload olcmoduleload: refint   refint2.ldif  [root@ldap-server memberof]# cat refint2.ldif dn: olcOverlay=refint,olcDatabase={2}hdb,cn=config objectClass: olcConfig objectClass: olcOverlayConfig objectClass: olcRefintConfig objectClass: top olcOverlay: refint olcRefintAttribute: memberof uniqueMember manager owner   ä½¿ç”¨å‘½ä»¤å°†æ¨¡å—å¯¼å…¥ LDAP  ldapadd -Q -Y EXTERNAL -H ldapi:/// -f add-memberof.ldif ldapmodify -Q -Y EXTERNAL -H ldapi:/// -f refint1.ldif ldapadd -Q -Y EXTERNAL -H ldapi:/// -f refint2.ldif   æ£€æŸ¥æ¨¡å—æ˜¯å¦ç”Ÿæ•ˆ  ldapsearch -Q -LLL -Y EXTERNAL -H ldapi:/// -b cn=config dn  ä¸€äº›ç®¡ç†å·¥å…· å®‰è£… phpldapadmin ç®€ä»‹ phpldapadmin æ˜¯ä½¿ç”¨ php è¯­è¨€å¼€å‘çš„ web ç«¯ç®¡ç† ldap çš„åº”ç”¨ã€‚ ä¸åŒæ“ä½œç³»ç»Ÿå»ºè®®å…ˆçœ‹ä¸‹å®˜æ–¹å®‰è£…æ–¹å¼åè¿›è¡Œå®‰è£…ã€‚ http://phpldapadmin.sourceforge.net/wiki/index.php/Download https://sourceforge.net/projects/phpldapadmin/files/\nå®‰è£…ã€ŒCentOS 7 ç¯å¢ƒã€ è¿™é‡Œé‡‡ç”¨ httpd + php + phpldapadmin çš„å®‰è£…æ–¹æ¡ˆï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ nginx ä½œä¸º Web å®¹å™¨ã€‚\nyum install -y httpd yum install -y epel-release # CentOS 7 yum install -y phpldapadmin # yum install -y php php-ldap php-gd php-mbstring php-pear php-bcmath php-xml # ä¸éœ€è¦è£… phpï¼Œåœ¨å®‰è£… phpldapadmin çš„æ—¶å€™ä¼šè‡ªè¡Œè§£å†³ä¾èµ– =============================================================================================== Package æ¶æ„ ç‰ˆæœ¬ æº å¤§å° =============================================================================================== æ­£åœ¨å®‰è£…: phpldapadmin noarch 1.2.5-1.el7 epel 797 k ä¸ºä¾èµ–è€Œå®‰è£…: libzip x86_64 0.10.1-8.el7 base 48 k php x86_64 5.4.16-48.el7 base 1.4 M php-cli x86_64 5.4.16-48.el7 base 2.7 M php-common x86_64 5.4.16-48.el7 base 565 k php-ldap x86_64 5.4.16-48.el7 base 53 k äº‹åŠ¡æ¦‚è¦ =============================================================================================== å®‰è£… 1 è½¯ä»¶åŒ… (+5 ä¾èµ–è½¯ä»¶åŒ…)  éœ€è¦ä¿®æ”¹çš„é…ç½®æ–‡ä»¶\n[root@ldap-client ~]# rpm -qc phpldapadmin-1.2.5-1.el7.noarch /etc/httpd/conf.d/phpldapadmin.conf /etc/phpldapadmin/config.php   /etc/httpd/conf.d/phpldapadmin.conf  # cat /etc/httpd/conf.d/phpldapadmin.conf # # Web-based tool for managing LDAP servers # Alias /phpldapadmin /usr/share/phpldapadmin/htdocs Alias /ldapadmin /usr/share/phpldapadmin/htdocs \u0026lt;Directory /usr/share/phpldapadmin/htdocs\u0026gt; \u0026lt;IfModule mod_authz_core.c\u0026gt; # Apache 2.4 Require local Require all granted # åŠ è¿™ä¸€è¡Œ \u0026lt;/IfModule\u0026gt; \u0026lt;IfModule !mod_authz_core.c\u0026gt; # Apache 2.2 Order Deny,Allow Deny from all Allow from 127.0.0.1 Allow from ::1 \u0026lt;/IfModule\u0026gt; \u0026lt;/Directory\u0026gt;   /etc/phpldapadmin/config.php  # å…¶å®ä¸éœ€è¦è¿™ä¹ˆé…ç½®ï¼Œåªå°±æ˜¯èƒ½ä½¿ç”¨ # ä¸‹æ–¹å‚æ•°åªæ˜¯æŠŠç™»é™†çš„ç”¨æˆ·åä» uid æ”¹ä¸ºä½¿ç”¨ dn æ–¹å¼ç™»é™†äº† $servers-\u0026gt;setValue('login','attr','dn'); //$servers-\u0026gt;setValue('login','attr','uid'); æŠŠ$servers-\u0026gt;setValue('login','anon_bind',false);æ”¹æˆfalseï¼Œå› ä¸ºæˆ‘ä»¬ä¸æƒ³è®©äººåŒ¿åè®¿é—®ï¼› æŠŠ$servers-\u0026gt;setValue('login','allowed_dns',array('cn=admin,dc=qiban,dc=com'));ï¼Œæˆ‘ä»¬åªå…è®¸ç®¡ç†å‘˜è®¿é—®ï¼Œå…¶ä»–ä»»ä½•äººä¸å¾—è®¿é—®ã€‚  å¯åŠ¨ systemctl restart httpd  å®‰è£… Self Service Password ç®€ä»‹ Self Service Password æ˜¯ä¸€ä¸ª Web åº”ç”¨ï¼Œå¯ä»¥è®©ç”¨æˆ·è‡ªè¡Œæ›´æ–°ã€ä¿®æ”¹å’Œé‡ç½® LDAP ä¸­çš„ç”¨æˆ·å¯†ç ã€‚æ”¯æŒæ ‡å‡†çš„ LDAPv3 ç›®å½•æœåŠ¡ï¼ŒåŒ…æ‹¬ï¼šOpenLDAP,Active Directory,OpenDS,ApacheDSç­‰ã€‚ https://github.com/ltb-project/self-service-password https://self-service-password.readthedocs.io/en/latest/installation.html\nå®‰è£…ã€ŒCentOS 7 ç¯å¢ƒã€  é…ç½® yum æº  vi /etc/yum.repos.d/ltb-project.repo [ltb-project-noarch] name=LTB project packages (noarch) baseurl=https://ltb-project.org/rpm/$releasever/noarch enabled=1 gpgcheck=1 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-LTB-project   ä½¿ç”¨ yum è¿›è¡Œå®‰è£…  # yum update # å¯çœç•¥ rpm --import https://ltb-project.org/wiki/lib/RPM-GPG-KEY-LTB-project yum install self-service-password ======================================================================= Package æ¶æ„ ç‰ˆæœ¬ æº å¤§å° ======================================================================= æ­£åœ¨å®‰è£…: self-service-password noarch 1.4.3-1.el7 ltb-project-noarch 2.3 M ä¸ºä¾èµ–è€Œå®‰è£…: libX11 x86_64 1.6.7-4.el7_9 updates 607 k libX11-common noarch 1.6.7-4.el7_9 updates 164 k libXau x86_64 1.0.8-2.1.el7 base 29 k libXpm x86_64 3.5.12-1.el7 base 55 k libjpeg-turbo x86_64 1.2.90-8.el7 base 135 k libxcb x86_64 1.13-1.el7 base 214 k php-Smarty noarch 3.1.33-1.el7 epel 238 k php-gd x86_64 5.4.16-48.el7 base 128 k php-mbstring x86_64 5.4.16-48.el7 base 506 k t1lib x86_64 5.1.2-14.el7 base 166 k äº‹åŠ¡æ¦‚è¦ ======================================================================= å®‰è£… 1 è½¯ä»¶åŒ… (+10 ä¾èµ–è½¯ä»¶åŒ…)  ä¿®æ”¹éœ€è¦çš„é…ç½®æ–‡ä»¶\nrpm -qc self-service-password.noarch 0:1.4.3-1.el7 /etc/httpd/conf.d/self-service-password.conf /usr/share/self-service-password/conf/config.inc.php   /usr/share/self-service-password/conf/config.inc.php  # LDAP $ldap_url = \u0026quot;ldaps://localhost:636\u0026quot;; $ldap_starttls = false; $ldap_binddn = \u0026quot;cn=admin,dc=expwd,dc=com\u0026quot;; $ldap_bindpw = \u0026quot;12345678900\u0026quot;; $ldap_base = \u0026quot;dc=expwd,dc=com\u0026quot;; $ldap_login_attribute = \u0026quot;uid\u0026quot;; $ldap_fullname_attribute = \u0026quot;cn\u0026quot;; # æ­¤å¤„é…ç½®è¦å’Œä¸Šé¢ LDAP ç™»é™†é…ç½®ä¸€è‡´ï¼Œæˆ‘è¿™è¾¹ä¸Šé¢æ˜¯ dn $ldap_filter = \u0026quot;(\u0026amp;(objectClass=person)($ldap_login_attribute={login}))\u0026quot;; ## Mail # å¿…é¡»è¦é…ç½®æˆåŠŸ Mail æ‰èƒ½è®¿é—®åˆ°ç½‘é¡µ ## Mail # LDAP mail attribute $mail_attribute = \u0026quot;mail\u0026quot;; # Get mail address directly from LDAP (only first mail entry) # and hide mail input field # default = false $mail_address_use_ldap = false; # Who the email should come from $mail_from = \u0026quot;admin@expwd.com\u0026quot;; $mail_from_name = \u0026quot;Self Service Password\u0026quot;; $mail_signature = \u0026quot;\u0026quot;; # Notify users anytime their password is changed $notify_on_change = false; # PHPMailer configuration (see https://github.com/PHPMailer/PHPMailer) $mail_sendmailpath = '/usr/sbin/sendmail'; $mail_protocol = 'smtp'; $mail_smtp_debug = 0; $mail_debug_format = 'error_log'; $mail_smtp_host = 'localhost'; $mail_smtp_auth = false; $mail_smtp_user = 'admin@expwd.com'; $mail_smtp_pass = '12121212'; $mail_smtp_port = 25; $mail_smtp_timeout = 30; $mail_smtp_keepalive = false; $mail_smtp_secure = 'tls'; $mail_smtp_autotls = true; $mail_smtp_options = array(); $mail_contenttype = 'text/plain'; $mail_wordwrap = 0; $mail_charset = 'utf-8'; $mail_priority = 3;  /etc/httpd/conf.d/self-service-password.conf  æ— éœ€ä¿®æ”¹  å¯åŠ¨ å¿…é¡»è¦é…ç½®æˆåŠŸ Mail æ‰èƒ½è®¿é—®åˆ°ç½‘é¡µ\nsystemctl start httpd  macOS å®‰è£… ApacheDirectoryStudio ç®€ä»‹ Apache Directory Studio æ˜¯ä¸€ä¸ª LDAP çš„å·¥å…·å¹³å°ï¼Œç”¨æ¥è¿æ¥åˆ°ä»»ä½• LDAP æœåŠ¡å™¨å¹¶è¿›è¡Œç®¡ç†å’Œå¼€å‘å·¥ä½œã€‚ ä¸»è¦åŠŸèƒ½ï¼šLDAPæµè§ˆå™¨ã€LDIFç¼–è¾‘å™¨ã€åµŒå…¥å¼ ApacheDSã€ACIç¼–è¾‘å™¨ã€‚\n macOS version 10.10 (Yosemite) or later. Java 11 or later, we recommend AdoptOpenJDK.\n https://directory.apache.org/studio/ https://directory.apache.org/studio/downloads.html\nå®‰è£… å»ºè®®ä½¿ç”¨ brew å®‰è£… temurinã€Œjdk17ã€ï¼Œå¦‚æœå·²ç»åœ¨ä½¿ç”¨ Eclipse çš„ç”¨æˆ·ï¼Œç›´æ¥åŠ è½½ Eclipse æ’ä»¶å°±å¯ä»¥äº†\nbrew install --cask temurin brew install apache-directory-studio  ä¹‹åå°±æ˜¯å›¾å½¢åŒ–çš„ä¸€äº›æ“ä½œäº†\nldapscripts è¾…åŠ©è„šæœ¬ https://github.com/martymac/ldapscripts\nç”¨äºè„šæœ¬å¿«é€Ÿåˆ›å»º Unix ç”¨æˆ·ï¼Œçœ‹ä¸€çœ¼å°±ä¼šç”¨\nLDAP TOOL BOX https://ltb-project.org/download.html#self_service_password\né™„å½• å¯¼å…¥åŸºæœ¬ scheme ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/cosine.ldif ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/nis.ldif ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/inetorgperson.ldif ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/collective.ldif ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/corba.ldif ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/duaconf.ldif ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/dyngroup.ldif ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/java.ldif ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/misc.ldif ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/openldap.ldif ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/pmi.ldif ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/ppolicy.ldif  å…³äº mdb hdb bdb åç«¯æ•°æ®åº“ hdb åç«¯å·²å–ä»£ bdb åç«¯ï¼ŒåŒæ—¶ä¸¤è€…å¾ˆå¿«ä¹Ÿä¼šå¼ƒç”¨ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯æ–°çš„ mdb åç«¯ï¼ŒåŸå› æ˜¯ Oracle æ›´æ”¹äº†è®¸å¯ï¼Œåˆ é™¤äº† BDB 6 åŠæ›´é«˜ç‰ˆæœ¬ä¸ OpenLDAP è½¯ä»¶çš„å…¼å®¹æ€§ã€‚\nå‡çº§åˆ° mdb - Upgrade-from-BDB-HDB-to-MDB\nhttps://www.openldap.org/faq/data/cache/756.html\nback-mdb is the \u0026quot;primary\u0026quot; storage database backend. This backend manages directory objects in an embedded database and is more fully featured than other backends. back-mdb is superior to the deprecated back-hdb and back-bdb backends. back-bdb and back-hdb are deprecated backends based on BerkeleyDB.  https://www.openldap.org/doc/admin24/backends.html\nThe hdb backend has superseded the bdb backend, and both will soon be deprecated in favor of the new mdb backend. See below.  å…³äº scheme ä¸æ“ä½œç³»ç»Ÿç”¨æˆ·ä¹‹é—´çš„æ˜ å°„ å¯æœç´¢ã€ŒRFC4519 rfc2307bis.ldifã€ç›¸å…³æ ‡å‡†è§£é‡Šï¼Œç›¸å…³æ ‡å‡†å·²åœ¨æ“ä½œç³»ç»Ÿä¸­é»˜è®¤åšå¥½ç”¨æˆ·ä¸ç»„çš„æ˜ å°„å…³ç³»åŒ¹é…ã€‚\nç›¸å…³å¸¸ç”¨æ“ä½œ  ç”±äºæ­¤ç¯‡æ–‡ç« å·²ç»å¾ˆé•¿äº†ï¼Œæ“ä½œåŠä½¿ç”¨ç›¸å…³çš„å‘½ä»¤åæœŸå†å†™æ–‡ç« ç»†è¯´\n slapd ldapmodify ldapadd ldapsearch å‚è€ƒèµ„æ–™ ã€ŒOpenldap å®‰è£…ä½¿ç”¨ã€ https://www.cnblogs.com/fan-yi/p/14915041.html ã€Œæˆ‘èŠ±äº†ä¸€ä¸ªäº”ä¸€ç»ˆäºææ‡‚äº†OpenLDAPã€ https://segmentfault.com/a/1190000014683418 ã€Œå†…éƒ¨ldapå®è·µã€è¿™ç¯‡æ–‡ç« é‡Œé¢æ‰‹åŠ¨ä¿®æ”¹é…ç½®æ–‡ä»¶äº†ï¼Œä¸å¯å–ï¼Œåªåšå‚è€ƒ https://1661691223.github.io/2019/11/15/ldap-train/ ã€ŒOpenLDAPå®‰è£…ä¸é…ç½®ã€è¿™ç¯‡æ–‡ç« é‡Œé¢æ‰‹åŠ¨ä¿®æ”¹é…ç½®æ–‡ä»¶äº†ï¼Œä¸å¯å–ï¼Œåªåšå‚è€ƒ https://www.cnblogs.com/js1314/p/12887893.html ã€ŒHow To Change Account Passwords on an OpenLDAP Serverã€ https://www.digitalocean.com/community/tutorials/how-to-change-account-passwords-on-an-openldap-server#changing-the-rootdn-password ã€ŒLDAP(ä¸€)ä¹‹æ¦‚å¿µåŸç†ä»‹ç»ã€ https://www.jianshu.com/p/27ab7a5d56a4 ã€ŒCentos7 æ­å»ºopenldapå®Œæ•´è¯¦ç»†æ•™ç¨‹(çœŸå®å¯ç”¨)ã€ https://www.cnblogs.com/jiligalaer/p/13300371.html https://blog.csdn.net/weixin_41004350/article/details/89521170 https://blog.csdn.net/weixin_41004350?type=blog ã€Œå¦‚ä½•åœ¨OpenLDAPå¯ç”¨MemberOfã€ https://blog.csdn.net/qq_23191379/article/details/106867730 ã€ŒLDAPæ·»åŠ  memberOf æ¨¡å—ã€ https://blog.csdn.net/u011607971/article/details/119037796 https://cloud.tencent.com/developer/article/1349459 ã€ŒServer:server:tlsã€ http://phpldapadmin.sourceforge.net/wiki/index.php/Server:server:tls ã€ŒLightweight Directory Access Protocol (LDAP):Schema for User Applicationsã€é‡Œé¢è¯¦ç»†æè¿°äº†ä¸€ä¸ª rfc4519 æ ‡å‡† RDN å„ä¸ªå­—æ®µçš„å«ä¹‰ https://www.ietf.org/rfc/rfc4519.txt ã€ŒLDAPå­¦ä¹ ç¬”è®°æ€»ç»“ã€ https://www.cnblogs.com/kevingrace/p/5773974.html ã€Œ# Chapter 6. LDAP Configurationã€ https://www.zytrax.com/books/ldap/ch6/#list ã€Œ# Chapter 6.1.1: OpenLDAP using OLC (cn=config)ã€ https://www.zytrax.com/books/ldap/ch6/slapd-config.html#use\n","id":28,"section":"posts","summary":"ğŸ‘Œ 2022-03-23 LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£… FileInfo Filename - LDAP ä¼ä¸šéƒ¨ç½²å®æˆ˜ - LDAP åŸºç¡€æœåŠ¡å®‰è£… Version - v1.0.2203ï¼ˆ2022/03/25 ~ 2022/04/06ï¼‰ Author","tags":null,"title":"","uri":"https://blog.standuke.top/1/01/2022-03-23-ldap-%E4%BC%81%E4%B8%9A%E9%83%A8%E7%BD%B2%E5%AE%9E%E6%88%98/","year":"0001"}],"tags":[{"title":"Aliyun","uri":"https://blog.standuke.top/tags/aliyun/"},{"title":"Bigdata","uri":"https://blog.standuke.top/tags/bigdata/"},{"title":"CDH","uri":"https://blog.standuke.top/tags/cdh/"},{"title":"CentOS","uri":"https://blog.standuke.top/tags/centos/"},{"title":"Cloudera","uri":"https://blog.standuke.top/tags/cloudera/"},{"title":"docker","uri":"https://blog.standuke.top/tags/docker/"},{"title":"EIP","uri":"https://blog.standuke.top/tags/eip/"},{"title":"ESXi","uri":"https://blog.standuke.top/tags/esxi/"},{"title":"frp","uri":"https://blog.standuke.top/tags/frp/"},{"title":"KVM","uri":"https://blog.standuke.top/tags/kvm/"},{"title":"Linux","uri":"https://blog.standuke.top/tags/linux/"},{"title":"Linux Bridge","uri":"https://blog.standuke.top/tags/linux-bridge/"},{"title":"macOS","uri":"https://blog.standuke.top/tags/macos/"},{"title":"Markdown","uri":"https://blog.standuke.top/tags/markdown/"},{"title":"Network","uri":"https://blog.standuke.top/tags/network/"},{"title":"OpenStack","uri":"https://blog.standuke.top/tags/openstack/"},{"title":"PXE","uri":"https://blog.standuke.top/tags/pxe/"},{"title":"qcow2","uri":"https://blog.standuke.top/tags/qcow2/"},{"title":"system","uri":"https://blog.standuke.top/tags/system/"},{"title":"Time Machine","uri":"https://blog.standuke.top/tags/time-machine/"},{"title":"tools","uri":"https://blog.standuke.top/tags/tools/"},{"title":"vCenter","uri":"https://blog.standuke.top/tags/vcenter/"},{"title":"Virtualization","uri":"https://blog.standuke.top/tags/virtualization/"},{"title":"vSphere","uri":"https://blog.standuke.top/tags/vsphere/"},{"title":"Windows","uri":"https://blog.standuke.top/tags/windows/"}]}